!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e,t,n){var o=g(e),u=g(t);t===u&&u.__redom_view&&(t=u.__redom_view),t!==u&&(u.__redom_view=t);var f=u.__redom_mounted,a=u.parentNode;return f&&a!==o&&i(t,u,a),n?o.insertBefore(u,g(n)):o.appendChild(u),r(t,u,o,a),t}function n(e,t){var n=e.el||e,r=t.el||t;return t===r&&r.__redom_view&&(t=r.__redom_view),i(t,r,n),n.removeChild(r),t}function r(e,t,n,r){for(var i=t.__redom_lifecycle||(t.__redom_lifecycle={}),u=n===r,f=!1,a=0;a<h.length;a++){var d=h[a];!u&&e!==t&&d in e&&(i[d]=(i[d]||0)+1),i[d]&&(f=!0)}if(f){var s=n,l=!1;if((u||!l&&s&&s.__redom_mounted)&&(o(t,u?"onremount":"onmount"),l=!0),!u)for(;s;){var _=s.parentNode,c=s.__redom_lifecycle||(s.__redom_lifecycle={});for(var v in i)c[v]=(c[v]||0)+i[v];!l&&(s===document||_&&_.__redom_mounted)&&(o(s,u?"onremount":"onmount"),l=!0),s=_}}}function i(e,t,n){var r=t.__redom_lifecycle;if(r){var i=n;for(t.__redom_mounted&&o(t,"onunmount");i;){var u=i.__redom_lifecycle,f=!1;if(r)for(var a in r)u[a]&&(u[a]-=r[a]),u[a]&&(f=!0);f||(i.__redom_lifecycle=null),i=i.parentNode}}}function o(e,t){"onmount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var r=e.__redom_view,i=0;r&&r[t]&&r[t]();for(var u in n)u&&i++;if(i)for(var f=e.firstChild;f;){var a=f.nextSibling;o(f,t),f=a}}}function u(e,t,n){var r=g(e);if(arguments.length>2)r.style[t]=n;else if(y(t))r.setAttribute("style",t);else for(var i in t)u(r,i,t[i])}function f(e,t,n){var r=g(e),i=r instanceof window.SVGElement;if(arguments.length>2)"style"===t?u(r,n):i&&x(n)?r[t]=n:!i&&(t in r||x(n))?r[t]=n:r.setAttribute(t,n);else for(var o in t)f(r,o,t[o])}function a(e,n){for(var r=0;r<n.length;r++){var i=n[r];i&&("function"==typeof i?i(e):y(i)||b(i)?e.appendChild(w(i)):A(g(i))?t(e,i):i.length?a(e,i):"object"==typeof i&&f(e,i))}}function d(e,t){for(var n,r,i,o=0,u=0,f=0;f<=e.length;f++){var a=e.charCodeAt(f);if(a===C||a===S||!a){if(0===o)n=0===f?"div":a?e.substring(u,f):e;else{var d=e.substring(u,f);1===o?r=d:i?i+=" "+d:i=d}u=f+1,o=a===C?1:2}}var s=t?N.createElementNS(t,n):N.createElement(n);return r&&(s.id=r),i&&(t?s.setAttribute("class",i):s.className=i),s}function s(e){for(var t=[],n=arguments.length-1;n-->0;)t[n]=arguments[n+1];var r;if(y(e))r=E(e).cloneNode(!1);else{if(!A(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return a(r,t),r}function l(e,r){if(void 0===r.length)return l(e,[r]);for(var i=g(e),o=i.firstChild,u=0;u<r.length;u++){var f=r[u];if(f){var a=g(f);a!==o?t(e,f,o):o=o.nextSibling}}for(;o;){var d=o.nextSibling;n(e,o),o=d}}function _(e,t,n,r){return new c(e,t,n,r)}function c(e,t,n,r){this.__redom_list=!0,this.View=t,this.key=n,this.initData=r,this.views=[],this.el=p(e),n&&(this.lookup={})}function v(e,t,n){return new D(e,t,n)}function m(e){for(var t=[],n=arguments.length-1;n-->0;)t[n]=arguments[n+1];var r;if(y(e))r=T(e).cloneNode(!1);else{if(!A(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return a(r,t),r}var h=["onmount","onunmount"],w=function(e){return N.createTextNode(e)},p=function(e){return y(e)?s(e):g(e)},g=function(e){return!e.el&&e||g(e.el)},y=function(e){return"string"==typeof e},b=function(e){return"number"==typeof e},x=function(e){return"function"==typeof e},A=function(e){return e&&e.nodeType},N=document,C="#".charCodeAt(0),S=".".charCodeAt(0),k={},E=function(e){return k[e]||d(e)};s.extend=function(e){var t=E(e);return s.bind(this,t)};var V=s;c.extend=function(e,t,n,r){return c.bind(c,e,t,n,r)},_.extend=c.extend,c.prototype.update=function(e){void 0===e&&(e=[]);for(var t=this.View,n=this.key,r=x(n),i=this.initData,o=new Array(e.length),u=this.views,f=n&&{},a=n&&this.lookup,d=0;d<e.length;d++){var s=e[d],_=void 0;if(n){var c=r?n(s):s[n];_=o[d]=a[c]||new t(i,s,d,e),f[c]=_,_.__id=c}else _=o[d]=u[d]||new t(i,s,d,e);var v=_.el;v.__redom_list&&(v=v.el),v.__redom_view=_,_.update&&_.update(s,d,e)}l(this,o),n&&(this.lookup=f),this.views=o};var D=function(e,t,n){this.el=p(e),this.Views=t,this.initData=n};D.prototype.update=function(e,t){if(e!==this.route){var n=this.Views,r=n[e];this.view=r&&new r(this.initData,t),this.route=e,l(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var j="http://www.w3.org/2000/svg",q={},T=function(e){return q[e]||d(e,j)};m.extend=function(e){var t=T(e);return m.bind(this,t)},e.html=s,e.el=V,e.list=_,e.List=c,e.mount=t,e.unmount=n,e.router=v,e.Router=D,e.setAttr=f,e.setStyle=u,e.setChildren=l,e.svg=m,e.text=w,Object.defineProperty(e,"__esModule",{value:!0})});