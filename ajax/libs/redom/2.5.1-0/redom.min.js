!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom=e.redom||{})}(this,function(e){"use strict";function t(e,o,i){void 0===i&&(i=[]);for(var u=Object.keys(e),f=0;f<u.length;f++)!function(f){var l=u[f],a=l.split(","),c=e[l];"object"==typeof c?a.map(function(e){return e.trim()}).map(function(e){"&"===e[0]?t(c,o,i.concat(e.slice(1))):t(c,o,i.length?i.concat(" ",e):[e])}):null!=c&&o("@"===i[0][0]?i[0]+"{"+i.slice(1).join("")+"{"+r(n(l))+":"+c+";}}":i.join("")+"{"+r(n(l))+":"+c+";}")}(f)}function n(e){if(null!=g[e])return g[e];if(null!=b[e])return g[e]=e;for(var t=e[0].toUpperCase()+e.slice(1),n=["webkit","moz","ms","o"],r=0,o=n.length;r<o;r++){var i=n[r]+t;if(null!=b[i])return g[e]="-"+i}return g[e]?void 0:g[e]=e}function r(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=r.toLowerCase();r!==o?t.push("-",o):t.push(r)}return t.join("")}function o(e,t){for(var n,r,o,i=0,u=0,f=0;f<=e.length;f++){var l=e.charCodeAt(f);if(l===C||l===A||!l){if(0===i)n=0===f?"div":l?e.substring(u,f):e;else{var a=e.substring(u,f);1===i?r=a:o?o+=" "+a:o=a}u=f+1,i=l===C?1:2}}var c=t?document.createElementNS(t,n):document.createElement(n);return r&&(c.id=r),o&&(t?c.setAttribute("class",o):c.className=o),c}function i(e,t,n){var r=E(e),o=E(t);t===o&&o.__redom_view&&(t=o.__redom_view),t!==o&&(o.__redom_view=t);var i=o.__redom_mounted,u=o.parentNode;return i&&u!==r&&l(t,o,u),n?r.insertBefore(o,E(n)):r.appendChild(o),f(t,o,r,u),t}function u(e,t){var n=e.el||e,r=t.el||t;return t===r&&r.__redom_view&&(t=r.__redom_view),l(t,r,n),n.removeChild(r),t}function f(e,t,n,r){for(var o=t.__redom_lifecycle||(t.__redom_lifecycle={}),i=n===r,u=!1,f=0;f<N.length;f++){var l=N[f];!i&&e!==t&&l in e&&(o[l]=(o[l]||0)+1),o[l]&&(u=!0)}if(u){var c=n,d=!1;if((i||!d&&c&&c.__redom_mounted)&&(a(t,i?"onremount":"onmount"),d=!0),!i)for(;c;){var s=c.parentNode,v=c.__redom_lifecycle||(c.__redom_lifecycle={});for(var _ in o)v[_]=(v[_]||0)+o[_];!d&&(c===document||s&&s.__redom_mounted)&&(a(c,i?"onremount":"onmount"),d=!0),c=s}}}function l(e,t,n){var r=t.__redom_lifecycle;if(r){var o=n;for(t.__redom_mounted&&a(t,"onunmount");o;){var i=o.__redom_lifecycle||(o.__redom_lifecycle={}),u=!1;for(var f in r)i[f]&&(i[f]-=r[f]),i[f]&&(u=!0);u||(o.__redom_lifecycle=null),o=o.parentNode}}}function a(e,t){"onmount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var r=e.__redom_view,o=0;r&&r[t]&&r[t]();for(var i in n)i&&o++;if(o)for(var u=e.firstChild;u;){var f=u.nextSibling;a(u,t),u=f}}}function c(e,t,n){var r=E(e);if(arguments.length>2)r.style[t]=n;else if(S(t))r.setAttribute("style",t);else for(var o in t)c(r,o,t[o])}function d(e,t,n){var r=E(e),o=r instanceof window.SVGElement;if(arguments.length>2)"style"===t?c(r,n):o&&D(n)?r[t]=n:!o&&(t in r||D(n))?r[t]=n:r.setAttribute(t,n);else for(var i in t)d(r,i,t[i])}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];(0===r||r)&&("function"==typeof r?r(e):S(r)||V(r)?e.appendChild(j(r)):T(E(r))?i(e,r):r.length?s(e,r):"object"==typeof r&&d(e,r))}}function v(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r;if(S(e))r=L(e).cloneNode(!1);else{if(!T(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return s(r,t),r}function _(e,t){if(void 0===t.length)return _(e,[t]);for(var n=E(e).firstChild,r=0;r<t.length;r++){var o=t[r];o&&(E(o)!==n?i(e,o,n):n=n.nextSibling)}for(;n;){var f=n.nextSibling;u(e,n),n=f}}function m(e,t,n,r){return new h(e,t,n,r)}function h(e,t,n,r){this.__redom_list=!0,this.View=t,this.key=n,this.initData=r,this.views=[],this.el=k(e),n&&(this.lookup={})}function p(e,t,n){return new z(e,t,n)}function w(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r;if(S(e))r=G(e).cloneNode(!1);else{if(!T(e))throw new Error("At least one argument required");r=e.cloneNode(!1)}return s(r,t),r}var y={},g={},b={};document&&(b=document.createElement("p").style);var x=function(e,n){if(null!=n){if(n in y)return;y[n]=!0}var r=[];if(t(e,function(e){r.push(e)}),r.length){var o=document.createElement("style");o.textContent=r.join(""),document.head.appendChild(o)}},C="#".charCodeAt(0),A=".".charCodeAt(0),N=["onmount","onunmount"],j=function(e){return document.createTextNode(e)},k=function(e){return S(e)?v(e):E(e)},E=function(e){return e.nodeType&&e||!e.el&&e||E(e.el)},S=function(e){return"string"==typeof e},V=function(e){return"number"==typeof e},D=function(e){return"function"==typeof e},T=function(e){return e&&e.nodeType},q={},L=function(e){return q[e]||o(e)};v.extend=function(e){var t=L(e);return v.bind(this,t)};var O=v;h.extend=function(e,t,n,r){return h.bind(h,e,t,n,r)},m.extend=h.extend,h.prototype.update=function(e){void 0===e&&(e=[]);for(var t=this.View,n=this.key,r=D(n),o=this.initData,i=new Array(e.length),u=this.views,f=n&&{},l=n&&this.lookup,a=0;a<e.length;a++){var c=e[a],d=void 0;if(n){var s=r?n(c):c[n];d=i[a]=l[s]||new t(o,c,a,e),f[s]=d,d.__id=s}else d=i[a]=u[a]||new t(o,c,a,e);var v=d.el;v.__redom_list&&(v=v.el),v.__redom_view=d,d.update&&d.update(c,a,e)}_(this,i),n&&(this.lookup=f),this.views=i};var z=function(e,t,n){this.el=k(e),this.Views=t,this.initData=n};z.prototype.update=function(e,t){if(e!==this.route){var n=this.Views[e];this.view=n&&new n(this.initData,t),this.route=e,_(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var B={},G=function(e){return B[e]||o(e,"http://www.w3.org/2000/svg")};w.extend=function(e){var t=G(e);return w.bind(this,t)},e.css=x,e.html=v,e.el=O,e.list=m,e.List=h,e.mount=i,e.unmount=u,e.router=p,e.Router=z,e.setAttr=d,e.setStyle=c,e.setChildren=_,e.svg=w,e.text=j,Object.defineProperty(e,"__esModule",{value:!0})});