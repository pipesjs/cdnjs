{"version":3,"sources":["findAndReplaceDOMText.js"],"names":["root","factory","module","exports","define","amd","findAndReplaceDOMText","this","escapeRegExp","s","String","replace","exposed","deprecated","apply","arguments","regex","node","replacement","captureGroup","elFilter","nodeType","length","isReplacementFunction","original","portion","match","text","startIndex","instance","find","wrap","prepMatch","m","mi","cg","index","indexOf","endIndex","filterElements","revert","options","Finder","preset","PRESETS","portionMode","PORTION_MODE_RETAIN","i","hasOwn","call","reverts","matches","search","processMatches","doc","document","hasOwnProperty","NON_PROSE_ELEMENTS","br","hr","script","style","img","video","audio","canvas","svg","map","object","input","textarea","select","option","optgroup","button","NON_CONTIGUOUS_PROSE_ELEMENTS","address","article","aside","blockquote","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","main","nav","noscript","ol","output","p","pre","section","ul","li","summary","dt","details","rp","rt","rtc","table","tbody","thead","th","tr","td","caption","col","tfoot","colgroup","NON_INLINE_PROSE","el","nodeName","toLowerCase","prose","forceContext","prototype","matchAggregation","textAggregation","l","global","exec","push","self","matchIndex","offset","getAggregateText","RegExp","characterOffset","Error","getText","txt","data","elementFilter","firstChild","innerText","shift","nextSibling","startPortion","endPortion","doAvoidNode","innerPortions","curNode","atIndex","portionIndex","nodeStack","out","substring","indexInMatch","indexInNode","endIndexInNode","isEnd","replaceMatch","pop","prepareReplacementString","string","$0","t","getPortionReplacementNode","wrapper","clone","createElement","innerHTML","outerHTML","XMLSerializer","serializeToString","createTextNode","appendChild","preceedingTextNode","followingTextNode","matchStartNode","matchEndNode","parentNode","insertBefore","newNode","removeChild","previousSibling","replaceChild","firstNode","innerNodes","innerNode","lastNode"],"mappings":"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"}