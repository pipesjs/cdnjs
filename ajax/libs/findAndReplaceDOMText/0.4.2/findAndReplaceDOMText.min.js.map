{"version":3,"sources":["findAndReplaceDOMText.js"],"names":["window","findAndReplaceDOMText","escapeRegExp","s","String","replace","exposed","deprecated","apply","arguments","regex","node","replacement","captureGroup","elFilter","nodeType","length","isReplacementFunction","original","portion","match","text","startIndex","instance","find","wrap","prepMatch","m","mi","cg","index","indexOf","endIndex","filterElements","revert","options","Finder","portionMode","PORTION_MODE_RETAIN","this","reverts","matches","search","processMatches","doc","document","prototype","matchIndex","getAggregateText","RegExp","global","exec","push","Error","getText","data","elementFilter","txt","firstChild","nextSibling","startPortion","endPortion","doAvoidNode","innerPortions","curNode","shift","atIndex","portionIndex","nodeStack","out","substring","indexInMatch","indexInNode","endIndexInNode","isEnd","replaceMatch","pop","l","prepareReplacementString","string","$0","t","input","getPortionReplacementNode","wrapper","clone","createElement","innerHTML","outerHTML","XMLSerializer","serializeToString","createTextNode","el","appendChild","preceedingTextNode","followingTextNode","matchStartNode","matchEndNode","parentNode","insertBefore","newNode","removeChild","previousSibling","replaceChild","firstNode","innerNodes","i","innerNode","lastNode"],"mappings":"AASAA,OAAOC,sBAAyB,WAY/B,SAASC,EAAaC,GACrB,OAAOC,OAAOD,GAAGE,QAAQ,6BAA8B,QAGxD,SAASC,IAER,OAAOC,EAAWC,MAAM,KAAMC,YAAcR,EAAsBO,MAAM,KAAMC,WAG/E,SAASF,EAAWG,EAAOC,EAAMC,EAAaC,EAAcC,GAC3D,GAAKH,IAASA,EAAKI,UAAaN,UAAUO,QAAU,EACnD,OAAO,EAER,IAAIC,EAA8C,mBAAfL,EAE/BK,IACHL,EAAe,SAASM,GACvB,OAAO,SAASC,EAASC,GACxB,OAAOF,EAASC,EAAQE,KAAMD,EAAME,cAEpCV,IAIH,IAAIW,EAAWtB,EAAsBU,GAEpCa,KAAMd,EAENe,KAAMR,EAAwB,KAAOL,EACrCP,QAASY,EAAwBL,EAAc,KAAOC,GAAgB,KAEtEa,UAAW,SAASC,EAAGC,GAItB,IAAKD,EAAE,GAAI,KAAM,0DAEjB,GAAId,EAAe,EAAG,CACrB,IAAIgB,EAAKF,EAAEd,GACXc,EAAEG,OAASH,EAAE,GAAGI,QAAQF,GACxBF,EAAE,GAAKE,EAOR,OAJAF,EAAEK,SAAWL,EAAEG,MAAQH,EAAE,GAAGX,OAC5BW,EAAEL,WAAaK,EAAEG,MACjBH,EAAEG,MAAQF,EAEHD,GAERM,eAAgBnB,IAOjB,OAJAR,EAAQ4B,OAAS,WAChB,OAAOX,EAASW,WAGV,EAgBR,SAASjC,EAAsBU,EAAMwB,GACpC,OAAO,IAAIC,EAAOzB,EAAMwB,GAQzB,SAASC,EAAOzB,EAAMwB,GAErBA,EAAQE,YAAcF,EAAQE,aAAeC,EAE7CC,KAAK5B,KAAOA,EACZ4B,KAAKJ,QAAUA,EAGfI,KAAKb,UAAYS,EAAQT,WAAaa,KAAKb,UAE3Ca,KAAKC,WAELD,KAAKE,QAAUF,KAAKG,SAEhBH,KAAKE,QAAQzB,QAChBuB,KAAKI,iBA1GP,IAAIL,EAAsB,SAGtBM,EAAMC,SAsfV,OAnaAvC,EAAQ8B,OAASA,EAyBjBA,EAAOU,WAKNJ,OAAQ,WAEP,IAAItB,EACA2B,EAAa,EACbrC,EAAQ6B,KAAKJ,QAAQX,KACrBH,EAAOkB,KAAKS,mBACZP,KAIJ,IAFA/B,EAAyB,iBAAVA,EAAqBuC,OAAO/C,EAAaQ,GAAQ,KAAOA,GAE7DwC,OACT,KAAO9B,EAAQV,EAAMyC,KAAK9B,IACzBoB,EAAQW,KAAKb,KAAKb,UAAUN,EAAO2B,WAGhC3B,EAAQC,EAAKD,MAAMV,KACtB+B,EAAQW,KAAKb,KAAKb,UAAUN,EAAO,IAIrC,OAAOqB,GAORf,UAAW,SAASN,EAAO2B,GAE1B,IAAK3B,EAAM,GACV,MAAM,IAAIiC,MAAM,2DAOjB,OAJAjC,EAAMY,SAAWZ,EAAMU,MAAQV,EAAM,GAAGJ,OACxCI,EAAME,WAAaF,EAAMU,MACzBV,EAAMU,MAAQiB,EAEP3B,GAMR4B,iBAAkB,WAUjB,SAASM,EAAQ3C,GAEhB,GAAsB,IAAlBA,EAAKI,SACR,OAAOJ,EAAK4C,KAGb,GAAIC,IAAkBA,EAAc7C,GACnC,MAAO,GAGR,IAAI8C,EAAM,GAEV,GAAI9C,EAAOA,EAAK+C,WAAY,GAC3BD,GAAOH,EAAQ3C,SACPA,EAAOA,EAAKgD,aAErB,OAAOF,EAxBR,IAAID,EAAgBjB,KAAKJ,QAAQF,eAEjC,OAAOqB,EAAQf,KAAK5B,OAgCrBgC,eAAgB,WAEf,IAIIiB,EACHC,EAOAC,EAZGrB,EAAUF,KAAKE,QACf9B,EAAO4B,KAAK5B,KACZ6C,EAAgBjB,KAAKJ,QAAQF,eAIhC8B,KACAC,EAAUrD,EACVS,EAAQqB,EAAQwB,QAChBC,EAAU,EACVnB,EAAa,EACboB,EAAe,EAEfC,GAAazD,GAEd0D,EAAK,OAAa,CA8CjB,GA5CyB,IAArBL,EAAQjD,YAEN8C,GAAcG,EAAQhD,OAASkD,GAAW9C,EAAMY,SAGpD6B,GACClD,KAAMqD,EACNlC,MAAOqC,IACP9C,KAAM2C,EAAQT,KAAKe,UAAUlD,EAAME,WAAa4C,EAAS9C,EAAMY,SAAWkC,GAC1EK,aAAcL,EAAU9C,EAAME,WAC9BkD,YAAapD,EAAME,WAAa4C,EAChCO,eAAgBrD,EAAMY,SAAWkC,EACjCQ,OAAO,GAGEd,GAEVG,EAAcX,MACbzC,KAAMqD,EACNlC,MAAOqC,IACP9C,KAAM2C,EAAQT,KACdgB,aAAcL,EAAU9C,EAAME,WAC9BkD,YAAa,KAIVZ,GAAgBI,EAAQhD,OAASkD,EAAU9C,EAAME,aAErDsC,GACCjD,KAAMqD,EACNlC,MAAOqC,IACPI,aAAc,EACdC,YAAapD,EAAME,WAAa4C,EAChCO,eAAgBrD,EAAMY,SAAWkC,EACjC7C,KAAM2C,EAAQT,KAAKe,UAAUlD,EAAME,WAAa4C,EAAS9C,EAAMY,SAAWkC,KAI5EA,GAAWF,EAAQT,KAAKvC,QAIzB8C,EAAmC,IAArBE,EAAQjD,UAAkByC,IAAkBA,EAAcQ,GAEpEJ,GAAgBC,GAiBnB,GAfAG,EAAUzB,KAAKoC,aAAavD,EAAOwC,EAAcG,EAAeF,GAMhEK,GAAYL,EAAWlD,KAAK4C,KAAKvC,OAAS6C,EAAWY,eAErDb,EAAe,KACfC,EAAa,KACbE,KACA3C,EAAQqB,EAAQwB,QAChBE,EAAe,EACfpB,KAEK3B,EACJ,WAGK,IACL0C,IACAE,EAAQN,YAAcM,EAAQL,aAC9B,CAEGK,EAAQN,YACXU,EAAUhB,KAAKY,GACfA,EAAUA,EAAQN,YAElBM,EAAUA,EAAQL,YAEnB,SAID,OAAa,CACZ,GAAIK,EAAQL,YAAa,CACxBK,EAAUA,EAAQL,YAClB,MAGD,IADAK,EAAUI,EAAUQ,SACJjE,EACf,MAAM0D,KAWVnC,OAAQ,WAGP,IAAK,IAAI2C,EAAItC,KAAKC,QAAQxB,OAAQ6D,KACjCtC,KAAKC,QAAQqC,KAEdtC,KAAKC,YAGNsC,yBAA0B,SAASC,EAAQ5D,EAASC,EAAO2B,GAC1D,IAAIV,EAAcE,KAAKJ,QAAQE,YAC/B,MAlUuB,UAmUtBA,GACAlB,EAAQoD,aAAe,EAEhB,IAERQ,EAASA,EAAO1E,QAAQ,iBAAkB,SAAS2E,EAAIC,GACtD,IAAIrE,EACJ,OAAOqE,GACN,IAAK,IACJrE,EAAcQ,EAAM,GACpB,MACD,IAAK,IACJR,EAAcQ,EAAM8D,MAAMZ,UAAU,EAAGlD,EAAME,YAC7C,MACD,IAAK,IACJV,EAAcQ,EAAM8D,MAAMZ,UAAUlD,EAAMY,UAC1C,MACD,QACCpB,EAAcQ,GAAO6D,GAEvB,OAAOrE,IAvVe,UA0VnByB,EACI0C,EAGJ5D,EAAQuD,MACJK,EAAOT,UAAUnD,EAAQoD,cAG1BQ,EAAOT,UAAUnD,EAAQoD,aAAcpD,EAAQoD,aAAepD,EAAQE,KAAKL,UAGnFmE,0BAA2B,SAAShE,EAASC,EAAO2B,GAEnD,IAAInC,EAAc2B,KAAKJ,QAAQ9B,SAAW,KACtC+E,EAAU7C,KAAKJ,QAAQV,KAE3B,GAAI2D,GAAWA,EAAQrE,SAAU,CAEhC,IAAIsE,EAAQzC,EAAI0C,cAAc,OAC9BD,EAAME,UAAYH,EAAQI,YAAa,IAAIC,eAAgBC,kBAAkBN,GAC7EA,EAAUC,EAAM3B,WAGjB,GAA0B,mBAAf9C,EAEV,OADAA,EAAcA,EAAYO,EAASC,EAAO2B,GACtCnC,GAAeA,EAAYG,SACvBH,EAEDgC,EAAI+C,eAAevF,OAAOQ,IAGlC,IAAIgF,EAAuB,iBAAXR,EAAsBxC,EAAI0C,cAAcF,GAAWA,EAQnE,OANAxE,EAAcgC,EAAI+C,eACjBpD,KAAKuC,yBACJlE,EAAaO,EAASC,EAAO2B,KAIdQ,MAIZqC,GAILA,EAAGC,YAAYjF,GAERgF,GATChF,GAYT+D,aAAc,SAASvD,EAAOwC,EAAcG,EAAeF,GAE1D,IAGIiC,EACAC,EAJAC,EAAiBpC,EAAajD,KAC9BsF,EAAepC,EAAWlD,KAK9B,GAAIqF,IAAmBC,EAAc,CAEpC,IAAItF,EAAOqF,EAEPpC,EAAaY,YAAc,IAE9BsB,EAAqBlD,EAAI+C,eAAehF,EAAK4C,KAAKe,UAAU,EAAGV,EAAaY,cAC5E7D,EAAKuF,WAAWC,aAAaL,EAAoBnF,IAIlD,IAAIyF,EAAU7D,KAAK4C,0BAClBtB,EACAzC,GAuBD,OApBAT,EAAKuF,WAAWC,aAAaC,EAASzF,GAElCkD,EAAWY,eAAiB9D,EAAKK,SAEpC+E,EAAoBnD,EAAI+C,eAAehF,EAAK4C,KAAKe,UAAUT,EAAWY,iBACtE9D,EAAKuF,WAAWC,aAAaJ,EAAmBpF,IAGjDA,EAAKuF,WAAWG,YAAY1F,GAE5B4B,KAAKC,QAAQY,KAAK,WACb0C,IAAuBM,EAAQE,iBAClCR,EAAmBI,WAAWG,YAAYP,GAEvCC,IAAsBK,EAAQzC,aACjCoC,EAAkBG,WAAWG,YAAYN,GAE1CK,EAAQF,WAAWK,aAAa5F,EAAMyF,KAGhCA,EAMPN,EAAqBlD,EAAI+C,eACxBK,EAAezC,KAAKe,UAAU,EAAGV,EAAaY,cAG/CuB,EAAoBnD,EAAI+C,eACvBM,EAAa1C,KAAKe,UAAUT,EAAWY,iBAUxC,IAAK,IAPD+B,EAAYjE,KAAK4C,0BACpBvB,EACAxC,GAGGqF,KAEKC,EAAI,EAAG7B,EAAId,EAAc/C,OAAQ0F,EAAI7B,IAAK6B,EAAG,CACrD,IAAIvF,EAAU4C,EAAc2C,GACxBC,EAAYpE,KAAK4C,0BACpBhE,EACAC,GAEDD,EAAQR,KAAKuF,WAAWK,aAAaI,EAAWxF,EAAQR,MACxD4B,KAAKC,QAAQY,KAAM,SAASjC,EAASwF,GACpC,OAAO,WACNA,EAAUT,WAAWK,aAAapF,EAAQR,KAAMgG,KAEhDxF,EAASwF,IACXF,EAAWrD,KAAKuD,GAGjB,IAAIC,EAAWrE,KAAK4C,0BACnBtB,EACAzC,GAkBD,OAfA4E,EAAeE,WAAWC,aAAaL,EAAoBE,GAC3DA,EAAeE,WAAWC,aAAaK,EAAWR,GAClDA,EAAeE,WAAWG,YAAYL,GAEtCC,EAAaC,WAAWC,aAAaS,EAAUX,GAC/CA,EAAaC,WAAWC,aAAaJ,EAAmBE,GACxDA,EAAaC,WAAWG,YAAYJ,GAEpC1D,KAAKC,QAAQY,KAAK,WACjB0C,EAAmBI,WAAWG,YAAYP,GAC1CU,EAAUN,WAAWK,aAAaP,EAAgBQ,GAClDT,EAAkBG,WAAWG,YAAYN,GACzCa,EAASV,WAAWK,aAAaN,EAAcW,KAGzCA,IAMHtG"}