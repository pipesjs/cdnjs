{"version":3,"sources":["findAndReplaceDOMText.js"],"names":["root","factory","module","exports","define","amd","findAndReplaceDOMText","this","escapeRegExp","s","String","replace","exposed","deprecated","apply","arguments","regex","node","replacement","captureGroup","elFilter","nodeType","length","isReplacementFunction","original","portion","match","text","startIndex","instance","find","wrap","prepMatch","m","mi","cg","index","indexOf","endIndex","filterElements","revert","options","Finder","preset","PRESETS","portionMode","PORTION_MODE_RETAIN","i","hasOwn","call","reverts","matches","search","processMatches","doc","document","hasOwnProperty","NON_PROSE_ELEMENTS","br","hr","script","style","img","video","audio","canvas","svg","map","object","input","textarea","select","option","optgroup","button","NON_CONTIGUOUS_PROSE_ELEMENTS","address","article","aside","blockquote","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","main","nav","noscript","ol","output","p","pre","section","ul","li","summary","dt","details","rp","rt","rtc","table","tbody","thead","th","tr","td","caption","col","tfoot","colgroup","NON_INLINE_PROSE","el","nodeName","toLowerCase","prose","forceContext","prototype","matchAggregation","textAggregation","l","global","exec","push","self","matchIndex","offset","getAggregateText","RegExp","characterOffset","Error","getText","Node","TEXT_NODE","data","elementFilter","txt","firstChild","innerText","ELEMENT_NODE","shift","nextSibling","startPortion","endPortion","doAvoidNode","innerPortions","curNode","atIndex","portionIndex","nodeStack","out","substring","indexInMatch","indexInNode","endIndexInNode","isEnd","replaceMatch","pop","prepareReplacementString","string","$0","t","getPortionReplacementNode","wrapper","wrapperClass","wrapClass","clone","createElement","innerHTML","outerHTML","XMLSerializer","serializeToString","createTextNode","className","appendChild","precedingTextNode","followingTextNode","matchStartNode","matchEndNode","parentNode","insertBefore","newNode","removeChild","previousSibling","replaceChild","firstNode","innerNodes","innerNode","lastNode"],"mappings":"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"}