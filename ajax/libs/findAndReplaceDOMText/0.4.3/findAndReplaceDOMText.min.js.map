{"version":3,"sources":["findAndReplaceDOMText.js"],"names":["window","findAndReplaceDOMText","escapeRegExp","s","String","replace","exposed","deprecated","apply","arguments","regex","node","replacement","captureGroup","elFilter","nodeType","length","isReplacementFunction","original","portion","match","text","startIndex","instance","find","wrap","prepMatch","m","mi","cg","index","indexOf","endIndex","filterElements","revert","options","Finder","preset","PRESETS","portionMode","PORTION_MODE_RETAIN","i","hasOwn","call","this","reverts","matches","search","processMatches","doc","document","hasOwnProperty","NON_PROSE_ELEMENTS","br","hr","script","style","img","video","audio","canvas","svg","map","object","input","textarea","select","option","optgroup","button","NON_CONTIGUOUS_PROSE_ELEMENTS","address","article","aside","blockquote","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","main","nav","noscript","ol","output","p","pre","section","ul","li","summary","dt","details","rp","rt","rtc","table","tbody","thead","th","tr","td","caption","col","tfoot","colgroup","NON_INLINE_PROSE","el","nodeName","toLowerCase","prose","forceContext","prototype","matchAggregation","textAggregation","l","global","exec","push","self","matchIndex","offset","getAggregateText","RegExp","characterOffset","Error","getText","txt","data","elementFilter","firstChild","innerText","shift","nextSibling","startPortion","endPortion","doAvoidNode","innerPortions","curNode","atIndex","portionIndex","nodeStack","out","substring","indexInMatch","indexInNode","endIndexInNode","isEnd","replaceMatch","pop","prepareReplacementString","string","$0","t","getPortionReplacementNode","wrapper","clone","createElement","innerHTML","outerHTML","XMLSerializer","serializeToString","createTextNode","appendChild","preceedingTextNode","followingTextNode","matchStartNode","matchEndNode","parentNode","insertBefore","newNode","removeChild","previousSibling","replaceChild","firstNode","innerNodes","innerNode","lastNode"],"mappings":"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"}