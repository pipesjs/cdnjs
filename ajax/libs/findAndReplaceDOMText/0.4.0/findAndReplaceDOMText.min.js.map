{"version":3,"sources":["findAndReplaceDOMText.js"],"names":["window","findAndReplaceDOMText","escapeRegExp","s","String","replace","exposed","deprecated","apply","arguments","regex","node","replacement","captureGroup","elFilter","nodeType","length","isReplacementFunction","original","portion","match","text","startIndex","instance","find","wrap","prepMatch","m","mi","cg","index","indexOf","endIndex","filterElements","revert","options","Finder","portionMode","PORTION_MODE_RETAIN","this","reverts","matches","search","processMatches","doc","document","prototype","matchIndex","getAggregateText","RegExp","global","exec","push","Error","getText","data","elementFilter","txt","firstChild","nextSibling","startPortion","endPortion","doAvoidNode","innerPortions","curNode","shift","atIndex","portionIndex","out","substring","indexInMatch","indexInNode","endIndexInNode","isEnd","replaceMatch","parentNode","l","prepareReplacementString","string","$0","t","input","getPortionReplacementNode","wrapper","clone","createElement","innerHTML","outerHTML","XMLSerializer","serializeToString","createTextNode","el","appendChild","preceedingTextNode","followingTextNode","matchStartNode","matchEndNode","insertBefore","newNode","removeChild","previousSibling","replaceChild","firstNode","innerNodes","i","innerNode","lastNode"],"mappings":"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"}