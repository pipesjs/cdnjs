!function(e,t,s,n){"use strict";function i(e,t){this.element=e,"object"==typeof this.element&&"object"==typeof t&&isNaN(t.zIndex)&&"auto"===t.zIndex&&(t.zIndex=this._isIE()?a.zIndex:this._zIndex()),this.settings=this._extend({},a,t),"object"==typeof this.element?this._box.init(this):this[this.element]()}var l="custombox",a={url:null,cache:!1,escKey:!0,eClose:null,zIndex:9999,overlay:!0,overlayColor:"#000",overlayOpacity:.8,overlayClose:!0,overlaySpeed:200,customClass:null,width:null,height:null,effect:"fadein",position:null,speed:600,open:null,complete:null,close:null,error:"Error 404!"};i.prototype={_overlay:function(){var e=this._hexToRgb(this.settings.overlayColor),t={};navigator.appVersion.indexOf("MSIE 8.")!=-1?(t.backgroundColor=this.settings.overlayColor,t.zIndex=parseFloat(this.settings.zIndex)+1,t.filter="alpha(opacity="+100*this.settings.overlayOpacity+")"):(t["background-color"]="rgba("+e.r+","+e.g+", "+e.b+","+this.settings.overlayOpacity+")",t["z-index"]=parseFloat(this.settings.zIndex)+1,t.transition="all "+this.settings.overlaySpeed/1e3+"s"),s.getElementsByTagName("body")[0].appendChild(this._create({id:"overlay",eClass:"overlay"},t))},_box:{init:function(e){e.settings.open&&"function"==typeof e.settings.open&&e.settings.open(n!==arguments[0]?arguments[0]:""),e._addClass(s.getElementsByTagName("html")[0],"html");var i=s.body,l=s.documentElement,a=Math.max(i.scrollHeight,i.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight),o="innerHeight"in t?t.innerHeight:s.documentElement.offsetHeight;if(a>o){var r=e._create({},{visibility:"hidden",width:"100px"});i.appendChild(r);var d=r.offsetWidth;r.style.overflow="scroll";var g=e._create({},{width:"100%"});r.appendChild(g);var c=g.offsetWidth;r.parentNode.removeChild(r),e._addClass(i,"scrollbar"),i.style.marginRight=d-c+"px"}null===e.settings.url&&null!==e.element&&(e.settings.url=e.element.getAttribute("href")),"string"==typeof e.settings.url?"#"===e.settings.url.charAt(0)||"."===e.settings.url.charAt(0)?s.querySelector(e.settings.url)?e._box.build(e,s.querySelector(e.settings.url).cloneNode(!0)):e._box.build(e,null):this.ajax(e):e._box.build(e,null)},create:function(e){var t={};e._isIE()?t.zIndex=parseFloat(e.settings.zIndex)+2:t["z-index"]=parseFloat(e.settings.zIndex)+2;var n=e._create({id:"modal",eClass:"modal "+e._box.effect(e)+(e.settings.customClass?" "+e.settings.customClass:"")},t),i=e._create({id:"modal-content",eClass:"modal-content"},{"transition-duration":e.settings.speed/1e3+"s"});return n.appendChild(i),s.body.insertBefore(n,s.body.firstChild),e.settings.overlay&&e._overlay(),[n,i]},effect:function(e){for(var t=["slide","flip","rotate"],n=["letmein","makeway","slip","blur"],i=l+"-"+e.settings.effect,a=0,o=t.length;a<o;a++)t[a]===e.settings.effect&&(i=l+"-"+e.settings.effect+"-"+e.settings.position);for(var r=0,d=n.length;r<d;r++)if(n[r]===e.settings.effect){"blur"!==e.settings.effect&&e._addClass(s.getElementsByTagName("html")[0],"perspective");var g=s.createElement("div");for(g.className=l+"-container";s.body.firstChild;)g.appendChild(s.body.firstChild);s.body.appendChild(g)}return i},build:function(e,t){if(e.settings.error!==!1&&"string"==typeof e.settings.error){null===t&&(t=s.createElement("div"),e._addClass(t,"error"),t.innerHTML=e.settings.error);var i=e._box.create(e);i[1].appendChild(t),t.style.display="block";var a={width:parseInt(e.settings.width,0),height:parseInt(e.settings.height,0)};isNaN(a.width)||a.width!==e.settings.width||a.width.toString()!==e.settings.width.toString()||null===a.width||(t.style.width=a.width+"px"),isNaN(a.height)||a.height!==e.settings.height||a.height.toString()!==e.settings.height.toString()||null===a.height||(t.style.height=a.height+"px"),navigator.appVersion.indexOf("MSIE 8.")!=-1&&(t.style.marginLeft=-t.offsetWidth/2+"px",t.style.marginTop=-t.offsetHeight/2+"px"),setTimeout(function(){e._listeners(),i[0].className+=" "+l+"-show";for(var t=i[1].getElementsByTagName("script"),s=0,a=t.length;s<a;s++)new Function(t[s].text)();setTimeout(function(){e.settings.complete&&"function"==typeof e.settings.complete&&e.settings.complete(n!==arguments[0]?arguments[0]:"")},e.settings.speed)},e.settings.overlay?e.settings.overlaySpeed:200)}},ajax:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){var n=4;if(t.readyState===n)if(200===t.status){var i=s.createElement("div");i.innerHTML=t.responseText,e._box.build(e,i)}else e._box.build(e,null)},t.open("GET",e.settings.url+(e.settings.cache?"":"?_="+(new Date).getTime()),!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(null)}},_close:function(){var e=this,t=s;e._removeClass(e._isIE()?t.querySelectorAll("."+l+"-modal")[0]:t.getElementsByClassName(l+"-modal")[0],l+"-show"),e._removeClass(t.getElementsByTagName("html")[0],l+"-perspective"),setTimeout(function(){e._removeClass(t.getElementsByTagName("html")[0],l+"-html"),e._removeClass(t.getElementsByTagName("body")[0],l+"-scrollbar"),t.getElementsByTagName("body")[0].style.marginRight=null,e._remove(e._isIE()?t.querySelectorAll("."+l+"-modal")[0]:t.getElementsByClassName(l+"-modal")[0]),e.settings.overlay&&e._remove(e._isIE()?t.querySelectorAll("."+l+"-overlay")[0]:t.getElementsByClassName(l+"-overlay")[0]),e.settings.close&&"function"==typeof e.settings.close&&e.settings.close(n!==arguments[0]?arguments[0]:"")},e.settings.speed)},_listeners:function(){var e=this;e._isIE()?"undefined"!=typeof s.querySelectorAll("."+l+"-overlay")[0]&&e.settings.overlayClose&&s.querySelectorAll("."+l+"-overlay")[0].attachEvent("onclick",function(){e._close()}):"undefined"!=typeof s.getElementsByClassName(l+"-overlay")[0]&&e.settings.overlayClose&&s.getElementsByClassName(l+"-overlay")[0].addEventListener("click",function(){e._close()},!1),e.settings.escKey&&(s.onkeydown=function(s){s=s||t.event,27===s.keyCode&&e._close()}),(null!==e.settings.eClose&&"string"==typeof e.settings.eClose&&"#"===e.settings.eClose.charAt(0)||"string"==typeof e.settings.eClose&&"."===e.settings.eClose.charAt(0)&&s.querySelector(e.settings.eClose))&&s.querySelector(e.settings.eClose).addEventListener("click",function(){e._close()},!1)},_extend:function(){for(var e=1,t=arguments.length;e<t;e++)for(var s in arguments[e])arguments[e].hasOwnProperty(s)&&(arguments[0][s]=arguments[e][s]);return arguments[0]},_create:function(e,t,i){var a=i===n||null===i?s.createElement("div"):i;if(null!==e&&(null!==e.id&&(a.id=l+"-"+e.id+(new Date).getTime()),null!==e.eClass&&this._addClass(a,e.eClass)),null!==t)for(var o in t)if(t.hasOwnProperty(o)&&(this._isIE()?a.style[o]=t[o]:a.style.setProperty(o,t[o],null),"transition-duration"===o&&!this._isIE()))for(var r=["-webkit-","-moz-","-o-","-ms-"],d=0,g=r.length;d<g;d++)a.style.setProperty(r[d]+o,t[o],null);return a},_hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,s,n){return t+t+s+s+n+n});var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:null},_addClass:function(e,t){this._hasClass(e,t)||(e.className=e.className.length&&" "!==e.className?e.className+" "+l+"-"+t:l+"-"+t)},_removeClass:function(e,t){if(this._hasClass(e,t)){var s=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(s," ")}},_hasClass:function(e,t){return e!==n&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},_remove:function(e){e!==n&&e.parentNode.removeChild(e)},_zIndex:function(){for(var e=s.getElementsByTagName("*"),t=0,n=0,i=e.length;n<i;n++){var l=s.defaultView.getComputedStyle(e[n],null).getPropertyValue("z-index");l>t&&"auto"!==l&&(t=l)}return t},_isIE:function(){return navigator.appVersion.indexOf("MSIE 9.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1},close:function(){this._close()}},e.fn[l]=function(t){var s=arguments,a="object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName;if(t===n||"object"==typeof t)if(a){if("Microsoft Internet Explorer"===navigator.appName){var o=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(null!=o.exec(navigator.userAgent))var r=parseInt(RegExp.$1)}if("undefined"==typeof r||r>=10){if(t.dataset[l]!==n&&parseInt(t.dataset[l])+1>Math.round((new Date).getTime()/1e3))return;t.setAttribute("data-"+l,Math.round((new Date).getTime()/1e3))}e(t).each(function(){e.data(this,l,new i(this,s[1]))})}else new i(null,s[0]);else"string"==typeof t&&"close"===t&&e.data(this,l,new i(s[0],s[1]))}}(jQuery,window,document);