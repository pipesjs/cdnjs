!function(e,t,s,n){"use strict";function i(e,t){this.element=e,"object"==typeof this.element&&"object"==typeof t&&isNaN(t.zIndex)&&"auto"===t.zIndex&&(t.zIndex=this._isIE()?o.zIndex:this._zIndex()),this.settings=this._extend({},o,t),"object"==typeof this.element?this._box.init(this):this[this.element]()}var l="custombox",o={url:null,cache:!1,escKey:!0,eClose:null,zIndex:9999,overlay:!0,overlayColor:"#000",overlayOpacity:.8,overlayClose:!0,overlaySpeed:200,customClass:null,width:null,height:null,effect:"fadein",position:null,speed:600,open:null,complete:null,close:null,responsive:!0,scrollbar:!1,error:"Error 404!"};i.prototype={_overlay:function(){var e=this._hexToRgb(this.settings.overlayColor),t={};navigator.appVersion.indexOf("MSIE 8.")!=-1?(t.backgroundColor=this.settings.overlayColor,t.zIndex=parseFloat(this.settings.zIndex)+1,t.filter="alpha(opacity="+100*this.settings.overlayOpacity+")"):(t["background-color"]="rgba("+e.r+","+e.g+", "+e.b+","+this.settings.overlayOpacity+")",t["z-index"]=parseFloat(this.settings.zIndex)+1,t.transition="all "+this.settings.overlaySpeed/1e3+"s"),s.getElementsByTagName("body")[0].appendChild(this._create({id:"overlay",eClass:"overlay"},t))},_box:{init:function(e){e.settings.open&&"function"==typeof e.settings.open&&e.settings.open(n!==arguments[0]?arguments[0]:""),null===e.settings.url&&null!==e.element&&(e.settings.url=e.element.getAttribute("href")),"string"==typeof e.settings.url?"#"===e.settings.url.charAt(0)||"."===e.settings.url.charAt(0)?s.querySelector(e.settings.url)?e._box.build(e,s.querySelector(e.settings.url).cloneNode(!0)):e._box.build(e,null):this.ajax(e):e._box.build(e,null)},create:function(e){var t={};e._isIE()?t.zIndex=parseFloat(e.settings.zIndex)+2:t["z-index"]=parseFloat(e.settings.zIndex)+2;var n=e._create({id:"modal",eClass:"modal "+e._box.effect(e)+(e.settings.customClass?" "+e.settings.customClass:"")},t),i=e._create({id:"modal-content",eClass:"modal-content"},{"transition-duration":e.settings.speed+"ms"});return n.appendChild(i),s.body.insertBefore(n,s.body.firstChild),e.settings.overlay&&e._overlay(),[n,i]},effect:function(e){var t=["slide","flip","rotate"],n=["letmein","makeway","slip","blur"],i=l+"-"+e.settings.effect,o="";null!==e.settings.position&&e.settings.position.indexOf(",")!==-1&&(e.settings.position=e.settings.position.split(","),e.settings.position.length>1&&(o=" "+l+"-"+e.settings.effect+"-"+e.settings.position[0].replace(/^\s+|\s+$/g,"")+"-"+e.settings.position[1].replace(/^\s+|\s+$/g,"")));for(var a=0,r=t.length;a<r;a++)t[a]===e.settings.effect&&(i=l+"-"+e.settings.effect+"-"+(""!==o?e.settings.position[0]:e.settings.position)+o);for(var d=0,g=n.length;d<g;d++)if(n[d]===e.settings.effect){"blur"!==e.settings.effect&&e._addClass(s.getElementsByTagName("html")[0],"perspective");var c=s.createElement("div");for(c.className=l+"-container";s.body.firstChild;)c.appendChild(s.body.firstChild);s.body.appendChild(c)}return i},build:function(e,i){var o=s.body,a=s.documentElement,r=a&&a.scrollTop||o&&o.scrollTop||0;if(e.settings.error!==!1&&"string"==typeof e.settings.error){null===i&&(i=s.createElement("div"),e._addClass(i,"error"),i.innerHTML=e.settings.error);var d=e._box.create(e);d[1].appendChild(i),i.style.display="block";var g={width:parseInt(e.settings.width,0),height:parseInt(e.settings.height,0)};isNaN(g.width)||g.width!==e.settings.width||g.width.toString()!==e.settings.width.toString()||null===g.width||(i.style.width=g.width+"px"),isNaN(g.height)||g.height!==e.settings.height||g.height.toString()!==e.settings.height.toString()||null===g.height||(i.style.height=g.height+"px");var c={"margin-left":-i.offsetWidth/2+"px",width:i.offsetWidth+"px"};null!==e.settings.position&&e.settings.position.indexOf("top")!==-1&&(c.transform="none"),e._create({},c,d[0]);var f={width:"innerWidth"in t?t.innerWidth:s.documentElement.offsetWidth,height:"innerHeight"in t?t.innerHeight:s.documentElement.offsetHeight};if(e.settings.scrollbar)e._scrollbar(d[0]);else if(i.offsetHeight<f.height){var u=e._create({},{visibility:"hidden",width:"100px"});o.appendChild(u);var h=u.offsetWidth;u.style.overflow="scroll";var p=e._create({},{width:"100%"});u.appendChild(p);var m=p.offsetWidth;u.parentNode.removeChild(u),o.style.marginRight=h-m+"px",e._addClass(s.getElementsByTagName("html")[0],"hide-scrollbar")}else e._scrollbar(d[0]);e.settings.responsive&&e._box.responsive(e,d,i,f),setTimeout(function(){e._listeners(r),d[0].className+=" "+l+"-show";for(var s=d[1].getElementsByTagName("script"),i=0,o=s.length;i<o;i++)new Function(s[i].text)();if(t.attachEvent)setTimeout(function(){e.settings.complete&&"function"==typeof e.settings.complete&&e.settings.complete(n!==arguments[0]?arguments[0]:"")},e.settings.speed);else{var a=!0;d[0].addEventListener(e._crossBrowser(),function(){a&&(a=!1,e.settings.complete&&"function"==typeof e.settings.complete&&e.settings.complete(n!==arguments[0]?arguments[0]:""))},!1)}},e.settings.overlay?e.settings.overlaySpeed:200)}},responsive:function(e,s,n,i){n.setAttribute("data-"+l+"-width",n.offsetWidth),e._create({},{width:"auto"},n),i.width<n.offsetWidth&&e._create({},{width:i.width-40+"px","margin-left":"20px","margin-right":"20px",left:0},s[0]);var o="onorientationchange"in t,a=o?"orientationchange":"resize";t.attachEvent?t.attachEvent(a,function(){r(this)},!1):t.addEventListener(a,function(){r(this)},!1);var r=function(i){if("undefined"==typeof t.orientation){if(null!==n.getAttribute("data-"+l+"-width")){var o=n.getAttribute("data-"+l+"-width");o>i.innerWidth?e._create({},{width:i.innerWidth-40+"px","margin-left":"20px","margin-right":"20px",left:0},s[0]):e._create({},{width:o+"px","margin-left":-o/2+"px",left:"50%"},s[0])}}else e._create(null,{width:i.innerWidth-40+"px","margin-left":"20px","margin-right":"20px",left:0},s[0])}},ajax:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){var n=4;if(t.readyState===n)if(200===t.status){var i=s.createElement("div");i.innerHTML=t.responseText,e._box.build(e,i)}else e._box.build(e,null)},t.open("GET",e.settings.url+(e.settings.cache?"":"?_="+(new Date).getTime()),!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(null)}},_close:function(e){var i=this;setTimeout(function(){i._removeClass(s.getElementsByTagName("html")[0],l+"-hide-scrollbar"),s.getElementsByTagName("body")[0].style.marginRight=0;var e=i._isIE()?s.querySelectorAll("."+l+"-modal")[0]:s.getElementsByClassName(l+"-modal")[0];if(i._remove(e),i.settings.overlay&&i._remove(i._isIE()?s.querySelectorAll("."+l+"-overlay")[0]:s.getElementsByClassName(l+"-overlay")[0]),i.settings.close&&"function"==typeof i.settings.close&&i.settings.close(n!==arguments[0]?arguments[0]:""),"undefined"!=typeof e&&null!==e.getAttribute("data-"+l)){var t=e.getAttribute("data-"+l),o=new Function("onClose","return "+t)(t);o()}},i.settings.speed),i._addClass(i._isIE()?s.querySelectorAll("."+l+"-modal")[0]:s.getElementsByClassName(l+"-modal")[0],"close"),i._removeClass(i._isIE()?s.querySelectorAll("."+l+"-modal")[0]:s.getElementsByClassName(l+"-modal")[0],l+"-show"),i._removeClass(s.getElementsByTagName("html")[0],l+"-perspective"),t.top.scroll(0,e)},_clean:function(){var e=this;e._removeClass(s.getElementsByTagName("html")[0],l+"-hide-scrollbar"),s.getElementsByTagName("body")[0].style.marginRight=0;var t=e._isIE()?s.querySelectorAll("."+l+"-modal")[0]:s.getElementsByClassName(l+"-modal")[0];if(e._remove(t),e.settings.overlay&&e._remove(e._isIE()?s.querySelectorAll("."+l+"-overlay")[0]:s.getElementsByClassName(l+"-overlay")[0]),e.settings.close&&"function"==typeof e.settings.close&&e.settings.close(n!==arguments[0]?arguments[0]:""),"undefined"!=typeof t&&null!==t.getAttribute("data-"+l)){var i=t.getAttribute("data-"+l),o=new Function("onClose","return "+i)(i);o()}},_listeners:function(e){var n=this;if(n._isIE()?"undefined"!=typeof s.querySelectorAll("."+l+"-overlay")[0]&&n.settings.overlayClose&&s.querySelectorAll("."+l+"-overlay")[0].attachEvent("onclick",function(){n._close(e)}):"undefined"!=typeof s.getElementsByClassName(l+"-overlay")[0]&&n.settings.overlayClose&&s.getElementsByClassName(l+"-overlay")[0].addEventListener("click",function(){n._close(e)},!1),n.settings.escKey&&(s.onkeydown=function(s){s=s||t.event,27===s.keyCode&&n._close(e)}),(null!==n.settings.eClose&&"string"==typeof n.settings.eClose&&"#"===n.settings.eClose.charAt(0)||"string"==typeof n.settings.eClose&&"."===n.settings.eClose.charAt(0)&&s.querySelector(n.settings.eClose))&&s.querySelector(n.settings.eClose).addEventListener("click",function(){n._close(e)},!1),n.settings.close&&"function"==typeof n.settings.close){var i=n.settings.close,o=n._isIE()?s.querySelectorAll("."+l+"-modal")[0]:s.getElementsByClassName(l+"-modal")[0];o.setAttribute("data-"+l,i)}},_extend:function(){for(var e=1,t=arguments.length;e<t;e++)for(var s in arguments[e])arguments[e].hasOwnProperty(s)&&(arguments[0][s]=arguments[e][s]);return arguments[0]},_create:function(e,t,i){var o=i===n||null===i?s.createElement("div"):i;if(null!==e&&0!==Object.keys(e).length&&(null!==e.id&&(o.id=l+"-"+e.id+(new Date).getTime()),null!==e.eClass&&this._addClass(o,e.eClass)),null!==t)for(var a in t)if(t.hasOwnProperty(a)&&(this._isIE()?o.style[a]=t[a]:o.style.setProperty(a,t[a],null),(a.indexOf("transition")!==-1||"transform"===a!==-1)&&!this._isIE()))for(var r=["-webkit-","-ms-"],d=0,g=r.length;d<g;d++)o.style.setProperty(r[d]+a,t[a],null);return o},_hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,s,n){return t+t+s+s+n+n});var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:null},_addClass:function(e,t){this._hasClass(e,t)||(e.className=e.className.length&&" "!==e.className?e.className+" "+l+"-"+t:l+"-"+t)},_removeClass:function(e,t){if(this._hasClass(e,t)){var s=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(s," ")}},_hasClass:function(e,t){return e!==n&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},_remove:function(e){e!==n&&e.parentNode.removeChild(e)},_zIndex:function(){for(var e=s.getElementsByTagName("*"),t=0,n=0,i=e.length;n<i;n++){var l=s.defaultView.getComputedStyle(e[n],null).getPropertyValue("z-index");l>t&&"auto"!==l&&(t=l)}return t},_isIE:function(){return navigator.appVersion.indexOf("MSIE 9.")!=-1||navigator.appVersion.indexOf("MSIE 8.")!=-1},_crossBrowser:function(){var e,t=s.createElement("fakeelement"),i={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var l in i)i.hasOwnProperty(l)&&t.style[l]!==n&&(e=i[l]);return e},_scrollbar:function(e){var s=this;setTimeout(function(){t.scrollTo(0,0)},s.settings.overlay?s.settings.overlaySpeed:200);var n={position:"absolute"};null!==s.settings.position&&s.settings.position.indexOf("top")!==-1&&(n.top=0,n["margin-top"]="20px"),s._create({},n,e)},close:function(){this._close()}},e.fn[l]=function(t){var s=arguments,o="object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName;if(t===n||"object"==typeof t)if(o){if("Microsoft Internet Explorer"===navigator.appName){var a=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(null!=a.exec(navigator.userAgent))var r=parseInt(RegExp.$1)}if("undefined"==typeof r||r>=10){if(null!==t.getAttribute("data-"+l)&&parseInt(t.getAttribute("data-"+l))+1>Math.round((new Date).getTime()/1e3))return;t.setAttribute("data-"+l,Math.round((new Date).getTime()/1e3))}e(t).each(function(){e.data(this,l,new i(this,s[1]))})}else new i(null,s[0]);else"string"==typeof t&&"close"===t&&e.data(this,l,new i(s[0],s[1]))}}(jQuery,window,document);