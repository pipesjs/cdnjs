toGeoJSON=function(){"use strict";function e(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function t(e,t){return e.getElementsByTagName(t)}function r(e,t){return e.getAttribute(t)}function n(e,t){return parseFloat(r(e,t))}function o(e,r){var n=t(e,r);return n.length?n[0]:null}function i(e){return e.normalize&&e.normalize(),e}function u(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function a(e){var t={};for(var r in e)e[r]&&(t[r]=e[r]);return t}function l(e){return e&&i(e),e&&e.firstChild&&e.firstChild.nodeValue}function f(e){return u(e.replace(h,"").split(","))}function s(e){for(var t=e.replace(y,"").split(d),r=[],n=0;n<t.length;n++)r.push(f(t[n]));return r}function c(e){return[n(e,"lon"),n(e,"lat")]}function g(){return{type:"FeatureCollection",features:[]}}function p(e){return v.serializeToString(e)}var h=/\s*/g,y=/^\s*|\s*$/g,d=/\s+/,m=!1;if("undefined"!=typeof XMLSerializer){var v=new XMLSerializer;m=!0}return{kml:function(n,i){function u(e){var r,n,i,a,c,g=[];if(o(e,"MultiGeometry"))return u(o(e,"MultiGeometry"));for(i=0;i<h.length;i++)if(n=t(e,h[i]))for(a=0;a<n.length;a++)if(r=n[a],"Point"==h[i])g.push({type:"Point",coordinates:f(l(o(r,"coordinates")))});else if("LineString"==h[i])g.push({type:"LineString",coordinates:s(l(o(r,"coordinates")))});else if("Polygon"==h[i]){var p=t(r,"LinearRing"),y=[];for(c=0;c<p.length;c++)y.push(s(l(o(p[c],"coordinates"))));g.push({type:"Polygon",coordinates:y})}return g}i=i||{};var a=g(),c={},h=["Polygon","LineString","Point"],y=t(n,"Placemark"),d=t(n,"Style");if(m)for(var v=0;v<d.length;v++)c["#"+r(d[v],"id")]=e(p(d[v])).toString(16);for(var S=0;S<y.length;S++)a.features=a.features.concat(function(e){var r,n=u(e),i={},a=l(o(e,"name")),f=l(o(e,"styleUrl")),s=l(o(e,"description")),g=o(e,"ExtendedData");if(!n.length)return!1;if(a&&(i.name=a),f&&c[f]&&(i.styleUrl=f,i.styleHash=c[f]),s&&(i.description=s),g){var p=t(g,"Data"),h=t(g,"SimpleData");for(r=0;r<p.length;r++)i[p[r].getAttribute("name")]=l(o(p[r],"value"));for(r=0;r<h.length;r++)i[h[r].getAttribute("name")]=l(h[r])}return[{type:"Feature",geometry:1===n.length?n[0]:{type:"GeometryCollection",geometries:n},properties:i}]}(y[S]));return a},gpx:function(e,r){function n(e,r){var n,o=t(e,r),u=[];for(n=0;n<o.length;n++)u.push(c(o[n]));return{type:"Feature",properties:i(e),geometry:{type:"LineString",coordinates:u}}}function i(e){var t,r=["name","desc","author","copyright","link","time","keywords"],n={};for(t=0;t<r.length;t++)n[r[t]]=l(o(e,r[t]));return a(n)}var u,f=t(e,"trk"),s=t(e,"rte"),p=t(e,"wpt"),h=g();for(u=0;u<f.length;u++)h.features.push(n(f[u],"trkpt"));for(u=0;u<s.length;u++)h.features.push(n(s[u],"rtept"));for(u=0;u<p.length;u++)h.features.push(function(e){var t=i(e);return t.ele=l(o(e,"ele")),t.sym=l(o(e,"sym")),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:c(e)}}}(p[u]));return h}}}(),"undefined"!=typeof module&&(module.exports=toGeoJSON);
//# sourceMappingURL=togeojson.min.js.map