toGeoJSON=function(){"use strict";function e(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function t(e,t){return e.getElementsByTagName(t)}function r(e,t){return e.getAttribute(t)}function n(e,t){return parseFloat(r(e,t))}function o(e,r){var n=t(e,r);return n.length?n[0]:null}function i(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function u(e){var t={};for(var r in e)e[r]&&(t[r]=e[r]);return t}function a(e){return e&&e.firstChild&&e.firstChild.nodeValue}function l(e){return i(e.replace(g,"").split(","))}function f(e){for(var t=e.replace(c,"").split(p),r=[],n=0;n<t.length;n++)r.push(l(t[n]));return r}function s(){return{type:"FeatureCollection",features:[]}}var g=/\s*/g,c=/^\s*|\s*$/g,p=/\s+/;return{kml:function(r,n){function i(e){var r,n,u,s,g,p=[];if(o(e,"MultiGeometry"))return i(o(e,"MultiGeometry"));for(u=0;u<c.length;u++)if(n=t(e,c[u]))for(s=0;s<n.length;s++)if(r=n[s],"Point"==c[u])p.push({type:"Point",coordinates:l(a(o(r,"coordinates")))});else if("LineString"==c[u])p.push({type:"LineString",coordinates:f(a(o(r,"coordinates")))});else if("Polygon"==c[u]){var h=t(r,"LinearRing"),y=[];for(g=0;g<h.length;g++)y.push(f(a(o(h[g],"coordinates"))));p.push({type:"Polygon",coordinates:y})}return p}n=n||{};var u=s(),g={},c=["Polygon","LineString","Point"],p=t(r,"Placemark"),h=t(r,"Style");if(n.styles)for(var y=0;y<h.length;y++)g["#"+h[y].id]=e(h[y].innerHTML).toString(16);for(var d=0;d<p.length;d++)u.features=u.features.concat(function(e){var r,n=i(e),u={},l=a(o(e,"name")),f=a(o(e,"styleUrl")),s=a(o(e,"description")),c=o(e,"ExtendedData");if(!n.length)return!1;if(l&&(u.name=l),f&&g[f]&&(u.styleUrl=f,u.styleHash=g[f]),s&&(u.description=s),c){var p=t(c,"Data"),h=t(c,"SimpleData");for(r=0;r<p.length;r++)u[p[r].getAttribute("name")]=a(o(p[r],"value"));for(r=0;r<h.length;r++)u[h[r].getAttribute("name")]=a(h[r])}return[{type:"Feature",geometry:1===n.length?n[0]:{type:"GeometryCollection",geometries:n},properties:u}]}(p[d]));return u},gpx:function(e,r){var i,l,f,g,c=t(e,"trk"),p=s();for(i=0;i<c.length;i++){g=c[i];var h=["name","desc","author","copyright","link","time","keywords"],y={};for(f=0;f<h.length;f++)y[h[f]]=a(o(g,h[f]));var d=t(g,"trkpt"),m=[];for(l=0;l<d.length;l++)m.push([n(d[l],"lon"),n(d[l],"lat")]);p.features.push({type:"Feature",properties:u(y),geometry:{type:"LineString",coordinates:m}})}return p}}}(),"undefined"!=typeof module&&(module.exports=toGeoJSON);
//# sourceMappingURL=togeojson.min.js.map