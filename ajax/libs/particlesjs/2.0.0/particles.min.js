/*!
 * A lightweight, dependency-free and responsive javascript plugin for particle backgrounds.
 * 
 * @author Marc Bruederlin <hello@marcbruederlin.com>
 * @version 2.0.0
 * @license MIT
 * @see https://github.com/marcbruederlin/particles.js
 */
var Particles=function(t,e){"use strict";var n,i={};return n=function(){function t(){var t=this;t.defaults={responsive:null,selector:null,maxParticles:100,sizeVariations:3,speed:.5,color:t._hex2rgb("#000000"),minDistance:120,connectParticles:!1},t.element=null,t.context=null,t.activeBreakpoint=null,t.breakpoints=[],t.breakpointSettings=[],t.originalSettings=null,t.windowWidth=0,t.storage=[]}return t}(),n.prototype.init=function(t){var e=this;t.color=e._hex2rgb(t.color),e.options=e._extend(e.defaults,t),e.originalSettings=JSON.parse(JSON.stringify(e.options)),e._initializeCanvas(),e._initializeEvents(),e._initializeStorage(),e._registerBreakpoints(),e._checkResponsive(),e._animate()},n.prototype._initializeCanvas=function(){var n=this;return n.options.selector?(n.element=e.querySelector(n.options.selector),n.context=n.element.getContext("2d"),n.element.width=t.innerWidth,void(n.element.height=t.innerHeight)):(console.warn("particles.js: No selector specified! Check https://github.com/marcbruederlin/particles.js#options"),!1)},n.prototype._initializeEvents=function(){var e=this;t.addEventListener("resize",e._resize.bind(e),!1)},n.prototype._initializeStorage=function(){var t=this;t.storage=[];for(var e=t.options.maxParticles;e--;)t.storage.push(new i(t.element,t.context,t.options))},n.prototype._registerBreakpoints=function(){var t,e,n,i=this,o=i.options.responsive||null;if("object"==typeof o&&null!==o&&o.length){for(t in o)if(n=i.breakpoints.length-1,e=o[t].breakpoint,o.hasOwnProperty(t)){for(o[t].options.color&&(o[t].options.color=i._hex2rgb(o[t].options.color));n>=0;)i.breakpoints[n]&&i.breakpoints[n]===e&&i.breakpoints.splice(n,1),n--;i.breakpoints.push(e),i.breakpointSettings[e]=o[t].options}i.breakpoints.sort(function(t,e){return e-t})}},n.prototype._checkResponsive=function(){var e,n=this,i=!1,o=t.innerWidth;if(n.options.responsive&&n.options.responsive.length&&null!==n.options.responsive){i=null;for(e in n.breakpoints)n.breakpoints.hasOwnProperty(e)&&o<=n.breakpoints[e]&&(i=n.breakpoints[e]);null!==i?(n.activeBreakpoint=i,n.options=n._extend(n.options,n.breakpointSettings[i])):null!==n.activeBreakpoint&&(n.activeBreakpoint=null,i=null,n.options=n._extend(n.options,n.originalSettings))}},n.prototype._refresh=function(){var t=this;t._initializeStorage(),t._update()},n.prototype._resize=function(){var e=this;e.element.width=t.innerWidth,e.element.height=t.innerHeight,t.innerWidth!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=t.setTimeout(function(){e.windowWidth=t.innerWidth,e._checkResponsive(),e._refresh()},50))},n.prototype._animate=function(){var e=this;e._draw(),t.requestAnimFrame(e._animate.bind(e))},n.prototype._draw=function(){var t=this;t.context.clearRect(0,0,t.element.width,t.element.height);for(var e=t.storage.length;e--;){var n=t.storage[e];n._draw()}t._update()},n.prototype._update=function(){for(var t=this,e=t.storage.length;e--;){var n=t.storage[e];if(n.x+=n.vx,n.y+=n.vy,n.x+n.radius>t.element.width?n.x=n.radius:n.x-n.radius<0&&(n.x=t.element.width-n.radius),n.y+n.radius>t.element.height?n.y=n.radius:n.y-n.radius<0&&(n.y=t.element.height-n.radius),t.options.connectParticles)for(var i=e+1;i<t.storage.length;i++){var o=t.storage[i];t._calculateDistance(n,o)}}},n.prototype._calculateDistance=function(t,e){var n,i=this,o=t.x-e.x,r=t.y-e.y;n=Math.sqrt(o*o+r*r),n<=i.options.minDistance&&(i.context.beginPath(),i.context.strokeStyle="rgba("+i.options.color.r+", "+i.options.color.g+", "+i.options.color.b+", "+(1.2-n/i.options.minDistance)+")",i.context.moveTo(t.x,t.y),i.context.lineTo(e.x,e.y),i.context.stroke(),i.context.closePath())},n.prototype._extend=function(t,e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},n.prototype._hex2rgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},i=function(t,e,n){var i=this;i.element=t,i.context=e,i.options=n,i.x=Math.random()*i.element.width,i.y=Math.random()*i.element.height,i.vx=Math.random()*i.options.speed*2-i.options.speed,i.vy=Math.random()*i.options.speed*2-i.options.speed,i.radius=Math.random()*Math.random()*i.options.sizeVariations,i._draw()},i.prototype._draw=function(){var t=this;t.context.fillStyle="rgb("+t.options.color.r+", "+t.options.color.g+", "+t.options.color.b+")",t.context.beginPath(),t.context.arc(t.x,this.y,t.radius,0,2*Math.PI,!1),t.context.fill()},t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),new n}(window,document);!function(){"use strict";"function"==typeof define&&define.amd?define("Particles",function(){return Particles}):"undefined"!=typeof module&&module.exports?module.exports=Particles:window.Particles=Particles}();