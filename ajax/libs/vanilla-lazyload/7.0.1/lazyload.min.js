!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.LazyLoad=b()}(this,function(){"use strict";var a={elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"original",data_srcset:"original-set",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null};const b=!("onscroll"in window)||/glebot/.test(navigator.userAgent),c=function(a){return a.getBoundingClientRect().top+window.pageYOffset-a.ownerDocument.documentElement.clientTop},d=function(a,b,d){return(b===window?window.innerHeight+window.pageYOffset:c(b)+b.offsetHeight)<=c(a)-d},e=function(a){return a.getBoundingClientRect().left+window.pageXOffset-a.ownerDocument.documentElement.clientLeft},f=function(a,b,c){const d=window.innerWidth;return(b===window?d+window.pageXOffset:e(b)+d)<=e(a)-c},g=function(a,b,d){return(b===window?window.pageYOffset:c(b))>=c(a)+d+a.offsetHeight},h=function(a,b,c){return(b===window?window.pageXOffset:e(b))>=e(a)+c+a.offsetWidth},i=function(a,b,c){return!(d(a,b,c)||g(a,b,c)||f(a,b,c)||h(a,b,c))},j=function(a,b){a&&a(b)},k=function(a,b){let c=new a(b),d=new CustomEvent("LazyLoad::Initialized",{detail:{instance:c}});window.dispatchEvent(d)},l=function(a,b){const c=a.parentElement;if("PICTURE"===c.tagName)for(let a=0;a<c.children.length;a++){let d=c.children[a];if("SOURCE"===d.tagName){let a=d.getAttribute("data-"+b);a&&d.setAttribute("srcset",a)}}},m=function(a,b,c){const d=a.tagName,e=a.getAttribute("data-"+c);if("IMG"===d){l(a,b);const c=a.getAttribute("data-"+b);return c&&a.setAttribute("srcset",c),void(e&&a.setAttribute("src",e))}if("IFRAME"===d)return void(e&&a.setAttribute("src",e));e&&(a.style.backgroundImage="url("+e+")")};class n{constructor(b){this._settings=Object.assign({},a,b),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._boundHandleScroll=this.handleScroll.bind(this),this._isFirstLoop=!0,window.addEventListener("resize",this._boundHandleScroll),this.update()}_reveal(a){const b=this._settings,c=function(){b&&(a.removeEventListener("load",d),a.removeEventListener("error",c),a.classList.remove(b.class_loading),a.classList.add(b.class_error),j(b.callback_error,a))},d=function(){b&&(a.classList.remove(b.class_loading),a.classList.add(b.class_loaded),a.removeEventListener("load",d),a.removeEventListener("error",c),j(b.callback_load,a))};"IMG"!==a.tagName&&"IFRAME"!==a.tagName||(a.addEventListener("load",d),a.addEventListener("error",c),a.classList.add(b.class_loading)),m(a,b.data_srcset,b.data_src),j(b.callback_set,a)}_loopThroughElements(){const a=this._settings,c=this._elements,d=c?c.length:0;let e,f=[],g=this._isFirstLoop;for(e=0;e<d;e++){let d=c[e];a.skip_invisible&&null===d.offsetParent||(b||i(d,a.container,a.threshold))&&(g&&d.classList.add(a.class_initial),this._reveal(d),f.push(e),d.wasProcessed=!0)}for(;f.length>0;)c.splice(f.pop(),1),j(a.callback_processed,c.length);0===d&&this._stopScrollHandler(),g&&(this._isFirstLoop=!1)}_purgeElements(){const a=this._elements,b=a.length;let c,d=[];for(c=0;c<b;c++){let b=a[c];b.wasProcessed&&d.push(c)}for(;d.length>0;)a.splice(d.pop(),1)}_startScrollHandler(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._boundHandleScroll))}_stopScrollHandler(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._boundHandleScroll))}handleScroll(){const a=this._settings.throttle;if(0!==a){const b=()=>{(new Date).getTime()};let c=b(),d=a-(c-this._previousLoopTime);d<=0||d>a?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=c,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(function(){this._previousLoopTime=b(),this._loopTimeout=null,this._loopThroughElements()}.bind(this),d))}else this._loopThroughElements()}update(){this._elements=Array.prototype.slice.call(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()}destroy(){window.removeEventListener("resize",this._boundHandleScroll),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null}}let o=window.lazyLoadOptions;return o&&function(a,b){let c=b.length;if(c)for(let d=0;d<c;d++)k(a,b[d]);else k(a,b)}(n,o),n});