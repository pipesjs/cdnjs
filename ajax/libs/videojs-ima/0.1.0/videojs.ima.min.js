!function(e){"use strict";var n=function(e){var n,t,i;for(t=1;t<arguments.length;t++){n=arguments[t];for(i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},t={debug:!1,timeout:5e3,prerollTimeout:100},i=function(e,i){var o=this;o.ima.createAdContainer_=function(){s=o.getChild("controlBar"),l=s.el().parentNode.insertBefore(document.createElement("div"),s.el()),l.id="ima-ad-container",l.className="ima-ad-container",l.style.width=o.width()+"px",l.style.height=o.height()+"px",l.addEventListener("mouseover",o.ima.showAdControls_,!1),l.addEventListener("mouseout",o.ima.hideAdControls_,!1),o.ima.createControls_(),f=new google.ima.AdDisplayContainer(l,d)},o.ima.createControls_=function(){m=document.createElement("div"),m.id="ima-controls-div",m.style.width="100%",c=document.createElement("div"),c.id="ima-countdown-div",c.innerHTML="Advertisement",c.style.display=r?"block":"none",u=document.createElement("div"),u.id="ima-seek-bar-div",u.style.width=o.width()+"px",g=document.createElement("div"),g.id="ima-progress-div",h=document.createElement("div"),h.id="ima-play-pause-div",h.className="ima-playing",h.addEventListener("click",o.ima.onAdPlayPauseClick_,!1),A=document.createElement("div"),A.id="ima-mute-div",A.className="ima-non-muted",A.addEventListener("click",o.ima.onAdMuteClick_,!1),v=document.createElement("div"),v.id="ima-fullscreen-div",v.className="ima-non-fullscreen",v.addEventListener("click",o.ima.onAdFullscreenClick_,!1),l.insertBefore(m,l.childNodes[l.childNodes.length]),m.insertBefore(c,m.childNodes[m.childNodes.length]),m.insertBefore(u,m.childNodes[m.childNodes.length]),m.insertBefore(h,m.childNodes[m.childNodes.length]),m.insertBefore(A,m.childNodes[m.childNodes.length]),m.insertBefore(v,m.childNodes[m.childNodes.length]),u.insertBefore(g,u.childNodes[m.childNodes.length])},o.ima.initializeAdDisplayContainer=function(){w=!0,f.initialize()},o.ima.requestAds=function(){w||f.initialize();var e=new google.ima.AdsRequest;e.adTagUrl=a.adTagUrl,e.linearAdSlotWidth=o.width(),e.linearAdSlotHeight=o.height(),e.nonLinearAdSlotWidth=a.nonLinearWidth||o.width(),e.nonLinearAdSlotHeight=a.nonLinearHeight||o.height()/3,p.requestAds(e)},o.ima.onAdsManagerLoaded_=function(e){y=e.getAdsManager(S,C),y.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o.ima.onAdError_),y.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,o.ima.onContentPauseRequested_),y.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,o.ima.onContentResumeRequested_),y.addEventListener(google.ima.AdEvent.Type.LOADED,o.ima.onAdLoaded_),y.addEventListener(google.ima.AdEvent.Type.STARTED,o.ima.onAdStarted_),y.addEventListener(google.ima.AdEvent.Type.CLICK,o.ima.onAdPlayPauseClick_),y.addEventListener(google.ima.AdEvent.Type.COMPLETE,o.ima.onAdComplete_),o.trigger("adsready")},o.ima.start=function(){try{y.init(o.width(),o.height(),google.ima.ViewMode.NORMAL),y.setVolume(o.muted()?0:o.volume()),y.start()}catch(e){o.ima.onAdError_(e)}},o.ima.onAdsLoaderError_=function(e){window.console.log("AdsLoader error: "+e.getError()),y&&y.destroy(),o.trigger("adserror")},o.ima.onAdError_=function(e){window.console.log("Ad error: "+e.getError()),y.destroy(),l.style.display="none",o.trigger("adserror")},o.ima.onContentPauseRequested_=function(e){L=!0,T=!0,o.off("ended",I),-1!=e.getAd().getAdPodInfo().getPodIndex()&&o.ads.startLinearAdMode(),l.style.display="block",m.style.display="block",s.hide(),o.pause()},o.ima.onContentResumeRequested_=function(e){L=!1,T=!1,o.on("ended",I),l.style.display="none",s.show(),E?k||-1==E.getAdPodInfo().getPodIndex()||o.ads.endLinearAdMode():o.ads.endLinearAdMode(),c.innerHTML=""},o.ima.onAdLoaded_=function(e){e.getAd().isLinear()||o.play()},o.ima.onAdStarted_=function(e){E=e.getAd(),E.isLinear()&&(_=setInterval(o.ima.onAdPlayheadTrackerInterval_,250))},o.ima.onAdComplete_=function(e){E.isLinear()&&clearInterval(_)},o.ima.onAdPlayheadTrackerInterval_=function(){var e=y.getRemainingTime(),n=E.getDuration(),t=n-e;t=t>0?t:0;var i,o,a=!1;E.getAdPodInfo()&&(a=!0,i=E.getAdPodInfo().getAdPosition(),o=E.getAdPodInfo().getTotalAds());var d=Math.floor(e/60),r=Math.floor(e%60);r.toString().length<2&&(r="0"+r);var s=": ";a&&(s=" ("+i+" of "+o+"): "),c.innerHTML="Advertisement"+s+d+":"+r;var l=t/n,m=100*l;g.style.width=m+"%"},o.ima.hideAdControls_=function(){h.style.display="none",A.style.display="none",v.style.display="none",m.style.height="14px"},o.ima.showAdControls_=function(){m.style.height="37px",h.style.display="block",A.style.display="block",v.style.display="block"},o.ima.onAdPlayPauseClick_=function(){T?(h.className="ima-paused",y.pause(),T=!1):(h.className="ima-playing",y.resume(),T=!0)},o.ima.onAdMuteClick_=function(){N?(A.className="ima-non-muted",y.setVolume(1),o.muted(!1),N=!1):(A.className="ima-muted",y.setVolume(0),o.muted(!0),N=!0)},o.ima.onAdFullscreenClick_=function(){o.isFullscreen()?o.cancelFullscreen():o.requestFullscreen()},o.ima.onFullscreenChange_=function(){o.isFullscreen()?(v.className="ima-fullscreen",l.style.width=window.screen.width+"px",l.style.height=window.screen.height+"px",y.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)):(v.className="ima-non-fullscreen",l.style.width=o.width()+"px",l.style.height=o.height()+"px",y.resize(o.width(),o.height(),google.ima.ViewMode.NORMAL))},o.ima.onVolumeChange_=function(){var e=o.muted()?0:o.volume();y&&y.setVolume(e)},o.ima.seekContentToZero_=function(){o.off("loadedmetadata",o.ima.seekContentToZero_),o.currentTime(0)},o.ima.playContentFromZero_=function(){o.off("loadedmetadata",o.ima.playContentFromZero_),o.currentTime(0),o.play()},o.ima.resetIMA_=function(){y&&(y.destroy(),y=null),p&&!k&&p.contentComplete(),k=!1},o.ima.addEventListener=function(e,n){y&&y.addEventListener(e,n)},o.ima.getAdsManager=function(){return y},o.ima.setContent=function(e,n,t){o.ima.resetIMA_(),a.adTagUrl=n||a.adTagUrl,o.pause(),o.src(e),t?o.on("loadedmetadata",function(){o.ima.playContentFromZero_()}):o.on("loadedmetadata",function(){o.ima.seekContentToZero_()})},o.ima.addContentEndedListener=function(e){P.push(e)},o.ima.pauseAd=function(){L&&T&&(h.className="ima-paused",y.pause(),T=!1)},o.ima.resumeAd=function(){L&&!T&&(h.className="ima-playing",y.resume(),T=!0)},o.ima.updateCurrentTime=function(){S.seeking||(S.currentTime=o.currentTime())},o.ima.checkForSeeking=function(){var e=o.currentTime(),n=1e3*(e-S.previousTime);Math.abs(n)>M+R?S.seeking=!0:S.seeking=!1,S.previousTime=o.currentTime()},o.ima.setShowCountdown=function(e){r=e,c.style.display=r?"block":"none"};var a,d,r,s,l,m,c,u,g,h,A,v,f,p,y,E,_,w=!1,C=null,L=!1,T=!1,N=!1,k=!1,M=1e3,R=100,S={currentTime:0,previousTime:0,seeking:!1,duration:0},P=[],I=function(){p&&!k&&(p.contentComplete(),k=!0);for(var e in P)P[e]()};if(a=n({},t,e||{}),!a.id)return void window.console.log("Error: must provide id of video.js div");if(d=document.getElementById(a.id+"_html5_api"),r=!0,0==a.showCountdown&&(r=!1),setInterval(o.ima.updateCurrentTime,M),setInterval(o.ima.checkForSeeking,M),o.on("ended",I),o.ads({debug:a.debug,timeout:a.timeout,prerollTimeout:a.prerollTimeout}),C=new google.ima.AdsRenderingSettings,C.restoreCustomPlaybackStateOnAdBreakComplete=!0,a.adsRenderingSettings)for(var F in a.adsRenderingSettings)C[F]=a.adsRenderingSettings[F];a.locale&&google.ima.settings.setLocale(a.locale),o.ima.createAdContainer_(),p=new google.ima.AdsLoader(f),p.getSettings().setVpaidAllowed(!0),0==a.vpaidAllowed&&p.getSettings().setVpaidAllowed(!1),a.locale&&p.getSettings().setLocale(a.locale),p.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,o.ima.onAdsManagerLoaded_,!1),p.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o.ima.onAdsLoaderError_,!1),i||(i=o.ima.start),o.on("readyforpreroll",i),o.on("fullscreenchange",o.ima.onFullscreenChange_),o.on("volumechange",o.ima.onVolumeChange_)};e.plugin("ima",i)}(window.videojs);