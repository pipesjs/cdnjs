!function(e){"use strict";var t=function(e){var t,n,i;for(n=1;n<arguments.length;n++){t=arguments[n];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}return e},n={debug:!1,timeout:5e3,prerollTimeout:100,adLabel:"Advertisement"},i=function(e,i){var a=this;a.ima.createAdContainer_=function(){s=a.getChild("controlBar"),m=s.el().parentNode.appendChild(document.createElement("div")),m.id="ima-ad-container",m.style.position="absolute",m.style.zIndex=1111,m.addEventListener("mouseover",a.ima.showAdControls_,!1),m.addEventListener("mouseout",a.ima.hideAdControls_,!1),a.ima.createControls_(),E=new google.ima.AdDisplayContainer(m,d)},a.ima.createControls_=function(){u=document.createElement("div"),u.id="ima-controls-div",u.style.width="100%",c=document.createElement("div"),c.id="ima-countdown-div",c.innerHTML=o.adLabel,c.style.display=r?"block":"none",g=document.createElement("div"),g.id="ima-seek-bar-div",g.style.width="100%",v=document.createElement("div"),v.id="ima-progress-div",p=document.createElement("div"),p.id="ima-play-pause-div",p.className="ima-playing",p.addEventListener("click",a.ima.onAdPlayPauseClick_,!1),A=document.createElement("div"),A.id="ima-mute-div",A.className="ima-non-muted",A.addEventListener("click",a.ima.onAdMuteClick_,!1),y=document.createElement("div"),y.id="ima-slider-div",y.addEventListener("mousedown",a.ima.onAdVolumeSliderMouseDown_,!1),h=document.createElement("div"),h.id="ima-slider-level-div",f=document.createElement("div"),f.id="ima-fullscreen-div",f.className="ima-non-fullscreen",f.addEventListener("click",a.ima.onAdFullscreenClick_,!1),m.appendChild(u),u.appendChild(c),u.appendChild(g),u.appendChild(p),u.appendChild(A),u.appendChild(y),u.appendChild(f),g.appendChild(v),y.appendChild(h)},a.ima.initializeAdDisplayContainer=function(){P=!0,E.initialize()},a.ima.requestAds=function(){P||E.initialize();var e=new google.ima.AdsRequest;e.adTagUrl=o.adTagUrl,o.forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),e.linearAdSlotWidth=a.ima.getPlayerWidth(),e.linearAdSlotHeight=a.ima.getPlayerHeight(),e.nonLinearAdSlotWidth=o.nonLinearWidth||a.ima.getPlayerWidth(),e.nonLinearAdSlotHeight=o.nonLinearHeight||a.ima.getPlayerHeight()/3,_.requestAds(e)},a.ima.onAdsManagerLoaded_=function(e){if(L=e.getAdsManager(O,k),L.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a.ima.onAdError_),L.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,a.ima.onAdBreakReady_),L.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,a.ima.onContentPauseRequested_),L.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,a.ima.onContentResumeRequested_),L.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,a.ima.onAllAdsCompleted_),L.addEventListener(google.ima.AdEvent.Type.LOADED,a.ima.onAdLoaded_),L.addEventListener(google.ima.AdEvent.Type.STARTED,a.ima.onAdStarted_),L.addEventListener(google.ima.AdEvent.Type.CLICK,a.ima.onAdPlayPauseClick_),L.addEventListener(google.ima.AdEvent.Type.COMPLETE,a.ima.onAdComplete_),L.addEventListener(google.ima.AdEvent.Type.SKIPPED,a.ima.onAdComplete_),!l)try{var t=a.ima.getPlayerWidth(),n=a.ima.getPlayerHeight();B.width=t,B.height=n,L.init(t,n,google.ima.ViewMode.NORMAL),L.setVolume(a.muted()?0:a.volume())}catch(e){a.ima.onAdError_(e)}a.trigger("adsready")},a.ima.start=function(){if(l)try{L.init(a.ima.getPlayerWidth(),a.ima.getPlayerHeight(),google.ima.ViewMode.NORMAL),L.setVolume(a.muted()?0:a.volume()),L.start()}catch(e){a.ima.onAdError_(e)}},a.ima.onAdsLoaderError_=function(e){window.console.log("AdsLoader error: "+e.getError()),L&&L.destroy(),a.trigger("adserror")},a.ima.onAdError_=function(e){window.console.log("Ad error: "+e.getError()),s.show(),L.destroy(),m.style.display="none",a.trigger("adserror")},a.ima.onAdBreakReady_=function(e){z(e)},a.ima.playAdBreak=function(){l||L.start()},a.ima.onContentPauseRequested_=function(e){R=!0,I=!0,a.off("ended",q),-1!=e.getAd().getAdPodInfo().getPodIndex()&&a.ads.startLinearAdMode(),m.style.display="block",u.style.display="block",s.hide(),a.pause()},a.ima.onContentResumeRequested_=function(e){R=!1,I=!1,a.on("ended",q),C&&C.isLinear()&&(m.style.display="none"),s.show(),C?V||-1==C.getAdPodInfo().getPodIndex()||a.ads.endLinearAdMode():a.ads.endLinearAdMode(),c.innerHTML=""},a.ima.onAllAdsCompleted_=function(e){if(D=!0,1==V)for(var t in W)W[t]()},a.ima.onAdLoaded_=function(e){e.getAd().isLinear()||a.play()},a.ima.onAdStarted_=function(e){C=e.getAd(),C.isLinear()?(T=setInterval(a.ima.onAdPlayheadTrackerInterval_,250),m.className=""):m.className="bumpable-ima-ad-container"},a.ima.onAdComplete_=function(e){C.isLinear()&&clearInterval(T)},a.ima.onAdPlayheadTrackerInterval_=function(){var e=L.getRemainingTime(),t=C.getDuration(),n=t-e;n=n>0?n:0;var i,a,d=!1;C.getAdPodInfo()&&(d=!0,i=C.getAdPodInfo().getAdPosition(),a=C.getAdPodInfo().getTotalAds());var r=Math.floor(e/60),l=Math.floor(e%60);l.toString().length<2&&(l="0"+l);var s=": ";d&&(s=" ("+i+" of "+a+"): "),c.innerHTML=o.adLabel+s+r+":"+l;var m=n/t,u=100*m;v.style.width=u+"%"},a.ima.getPlayerWidth=function(){return parseInt(getComputedStyle(a.el()).width,10)||a.width()},a.ima.getPlayerHeight=function(){return parseInt(getComputedStyle(a.el()).height,10)||a.height()},a.ima.hideAdControls_=function(){p.style.display="none",A.style.display="none",f.style.display="none",u.style.height="14px"},a.ima.showAdControls_=function(){u.style.height="37px",p.style.display="block",A.style.display="block",y.style.display="block",f.style.display="block"},a.ima.onAdPlayPauseClick_=function(){I?(p.className="ima-paused",L.pause(),I=!1):(p.className="ima-playing",L.resume(),I=!0)},a.ima.onAdMuteClick_=function(){N?(A.className="ima-non-muted",L.setVolume(1),a.muted(!1),N=!1,h.style.width=100*a.volume()+"%"):(A.className="ima-muted",L.setVolume(0),a.muted(!0),N=!0,h.style.width="0%")},a.ima.onAdVolumeSliderMouseDown_=function(){document.addEventListener("mouseup",a.ima.onMouseUp_,!1),document.addEventListener("mousemove",a.ima.onMouseMove_,!1)},a.ima.onMouseMove_=function(e){a.ima.setVolumeSlider_(e)},a.ima.onMouseUp_=function(e){a.ima.setVolumeSlider_(e),document.removeEventListener("mousemove",a.ima.onMouseMove_),document.removeEventListener("mouseup",a.ima.onMouseUp_)},a.ima.setVolumeSlider_=function(e){var t=(e.clientX-y.getBoundingClientRect().left)/y.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),h.style.width=t+"%",a.volume(t/100),L.setVolume(t/100),0==a.volume()?(A.className="ima-muted",a.muted(!0),N=!0):(A.className="ima-non-muted",a.muted(!1),N=!1)},a.ima.onAdFullscreenClick_=function(){a.isFullscreen()?a.exitFullscreen():a.requestFullscreen()},a.ima.onFullscreenChange_=function(){a.isFullscreen()?(f.className="ima-fullscreen",L&&L.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)):(f.className="ima-non-fullscreen",L&&L.resize(a.ima.getPlayerWidth(),a.ima.getPlayerHeight(),google.ima.ViewMode.NORMAL))},a.ima.onVolumeChange_=function(){var e=a.muted()?0:a.volume();L&&L.setVolume(e),0==e?(N=!0,A.className="ima-muted",h.style.width="0%"):(N=!1,A.className="ima-non-muted",h.style.width=100*e+"%")},a.ima.seekContentToZero_=function(){a.off("loadedmetadata",a.ima.seekContentToZero_),a.currentTime(0)},a.ima.playContentFromZero_=function(){a.off("loadedmetadata",a.ima.playContentFromZero_),a.currentTime(0),a.play()},a.ima.resetIMA_=function(){R=!1,I=!1,a.on("ended",q),C&&C.isLinear()&&(m.style.display="none"),s.show(),a.ads.endLinearAdMode(),T&&clearInterval(T),L&&(L.destroy(),L=null),_&&!V&&_.contentComplete(),V=!1,D=!1},a.ima.addEventListener=function(e,t){L&&L.addEventListener(e,t)},a.ima.getAdsManager=function(){return L},a.ima.setContent=function(e,t,n){a.ima.resetIMA_(),o.adTagUrl=t||o.adTagUrl,a.currentSrc()&&(a.currentTime(0),a.pause()),e&&a.src(e),n?a.on("loadedmetadata",a.ima.playContentFromZero_):a.on("loadedmetadata",a.ima.seekContentToZero_)},a.ima.addContentEndedListener=function(e){H.push(e)},a.ima.addContentAndAdsEndedListener=function(e){W.push(e)},a.ima.setAdBreakReadyListener=function(e){z=e},a.ima.pauseAd=function(){R&&I&&(p.className="ima-paused",L.pause(),I=!1)},a.ima.resumeAd=function(){R&&!I&&(p.className="ima-playing",L.resume(),I=!0)},a.ima.setUpPlayerIntervals_=function(){M=setInterval(a.ima.updateCurrentTime_,b),w=setInterval(a.ima.checkForSeeking_,b),S=setInterval(a.ima.checkForResize_,F)},a.ima.updateCurrentTime_=function(){O.seeking||(O.currentTime=a.currentTime())},a.ima.checkForSeeking_=function(){var e=a.currentTime(),t=1e3*(e-O.previousTime);Math.abs(t)>b+U?O.seeking=!0:O.seeking=!1,O.previousTime=a.currentTime()},a.ima.checkForResize_=function(){var e=a.ima.getPlayerWidth(),t=a.ima.getPlayerHeight();!L||e==B.width&&t==B.height||(B.width=e,B.height=t,L.resize(e,t,google.ima.ViewMode.NORMAL))},a.ima.setShowCountdown=function(e){r=e,c.style.display=r?"block":"none"};var o,d,r,l,s,m,u,c,g,v,p,A,y,h,f,E,_,L,C,T,M,w,S,P=!1,k=null,R=!1,I=!1,N=!1,V=!1,D=!1,b=1e3,F=250,U=100,O={currentTime:0,previousTime:0,seeking:!1,duration:0},B={width:0,height:0},H=[],W=[],z=void 0,q=function(){_&&!V&&(_.contentComplete(),V=!0);for(var e in H)H[e]();if(D)for(var e in W)W[e]();clearInterval(M),clearInterval(w),clearInterval(S),a.one("play",a.ima.setUpPlayerIntervals_)};if(o=t({},n,e||{}),!o.id)return void window.console.log("Error: must provide id of video.js div");d=document.getElementById(o.id+"_html5_api"),r=!0,0==o.showCountdown&&(r=!1),l=!0,0==o.autoPlayAdBreaks&&(l=!1),a.one("play",a.ima.setUpPlayerIntervals_),a.on("ended",q);var x={debug:o.debug,timeout:o.timeout,prerollTimeout:o.prerollTimeout},Z=t({},x,e.contribAdsSettings||{});if(a.ads(Z),k=new google.ima.AdsRenderingSettings,k.restoreCustomPlaybackStateOnAdBreakComplete=!0,o.adsRenderingSettings)for(var j in o.adsRenderingSettings)k[j]=o.adsRenderingSettings[j];o.locale&&google.ima.settings.setLocale(o.locale),a.ima.createAdContainer_(),_=new google.ima.AdsLoader(E),_.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==o.vpaidAllowed&&_.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),o.vpaidMode&&_.getSettings().setVpaidMode(o.vpaidMode),o.locale&&_.getSettings().setLocale(o.locale),o.numRedirects&&_.getSettings().setNumRedirects(o.numRedirects),_.getSettings().setPlayerType("videojs-ima"),_.getSettings().setPlayerVersion("0.2.0"),_.getSettings().setAutoPlayAdBreaks(l),_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,a.ima.onAdsManagerLoaded_,!1),_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a.ima.onAdsLoaderError_,!1),i||(i=a.ima.start),a.on("readyforpreroll",i),a.ready(function(){a.on("fullscreenchange",a.ima.onFullscreenChange_),a.on("volumechange",a.ima.onVolumeChange_)})};videojs.plugin("ima",i)}(window.videojs);