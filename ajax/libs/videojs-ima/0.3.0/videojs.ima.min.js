!function(e){"use strict";var t=function(e){var t,n,i;for(n=1;n<arguments.length;n++){t=arguments[n];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}return e},n={debug:!1,timeout:5e3,prerollTimeout:100},i=function(e,i){var o=this;o.ima.createAdContainer_=function(){l=o.getChild("controlBar"),m=l.el().parentNode.insertBefore(document.createElement("div"),l.el()),m.id="ima-ad-container",m.style.width=o.width()+"px",m.style.height=o.height()+"px",m.addEventListener("mouseover",o.ima.showAdControls_,!1),m.addEventListener("mouseout",o.ima.hideAdControls_,!1),o.ima.createControls_(),E=new google.ima.AdDisplayContainer(m,d)},o.ima.createControls_=function(){u=document.createElement("div"),u.id="ima-controls-div",u.style.width="100%",c=document.createElement("div"),c.id="ima-countdown-div",c.innerHTML="Advertisement",c.style.display=r?"block":"none",g=document.createElement("div"),g.id="ima-seek-bar-div",g.style.width="100%",h=document.createElement("div"),h.id="ima-progress-div",v=document.createElement("div"),v.id="ima-play-pause-div",v.className="ima-playing",v.addEventListener("click",o.ima.onAdPlayPauseClick_,!1),A=document.createElement("div"),A.id="ima-mute-div",A.className="ima-non-muted",A.addEventListener("click",o.ima.onAdMuteClick_,!1),p=document.createElement("div"),p.id="ima-slider-div",p.addEventListener("mousedown",o.ima.onAdVolumeSliderMouseDown_,!1),y=document.createElement("div"),y.id="ima-slider-level-div",f=document.createElement("div"),f.id="ima-fullscreen-div",f.className="ima-non-fullscreen",f.addEventListener("click",o.ima.onAdFullscreenClick_,!1),m.insertBefore(u,m.childNodes[m.childNodes.length]),u.insertBefore(c,u.childNodes[u.childNodes.length]),u.insertBefore(g,u.childNodes[u.childNodes.length]),u.insertBefore(v,u.childNodes[u.childNodes.length]),u.insertBefore(A,u.childNodes[u.childNodes.length]),u.insertBefore(p,u.childNodes[u.childNodes.length]),u.insertBefore(f,u.childNodes[u.childNodes.length]),g.insertBefore(h,g.childNodes[u.childNodes.length]),p.insertBefore(y,p.childNodes[p.childNodes.length])},o.ima.initializeAdDisplayContainer=function(){N=!0,E.initialize()},o.ima.requestAds=function(){N||E.initialize();var e=new google.ima.AdsRequest;e.adTagUrl=a.adTagUrl,e.linearAdSlotWidth=o.width(),e.linearAdSlotHeight=o.height(),e.nonLinearAdSlotWidth=a.nonLinearWidth||o.width(),e.nonLinearAdSlotHeight=a.nonLinearHeight||o.height()/3,_.requestAds(e)},o.ima.onAdsManagerLoaded_=function(e){if(L=e.getAdsManager(b,S),L.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o.ima.onAdError_),L.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,o.ima.onAdBreakReady_),L.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,o.ima.onContentPauseRequested_),L.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,o.ima.onContentResumeRequested_),L.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,o.ima.onAllAdsCompleted_),L.addEventListener(google.ima.AdEvent.Type.LOADED,o.ima.onAdLoaded_),L.addEventListener(google.ima.AdEvent.Type.STARTED,o.ima.onAdStarted_),L.addEventListener(google.ima.AdEvent.Type.CLICK,o.ima.onAdPlayPauseClick_),L.addEventListener(google.ima.AdEvent.Type.COMPLETE,o.ima.onAdComplete_),L.addEventListener(google.ima.AdEvent.Type.SKIPPED,o.ima.onAdComplete_),!s)try{L.init(o.width(),o.height(),google.ima.ViewMode.NORMAL),L.setVolume(o.muted()?0:o.volume())}catch(e){o.ima.onAdError_(e)}o.trigger("adsready")},o.ima.start=function(){if(s)try{L.init(o.width(),o.height(),google.ima.ViewMode.NORMAL),L.setVolume(o.muted()?0:o.volume()),L.start()}catch(e){o.ima.onAdError_(e)}},o.ima.onAdsLoaderError_=function(e){window.console.log("AdsLoader error: "+e.getError()),L&&L.destroy(),o.trigger("adserror")},o.ima.onAdError_=function(e){window.console.log("Ad error: "+e.getError()),l.show(),L.destroy(),m.style.display="none",o.trigger("adserror")},o.ima.onAdBreakReady_=function(e){O(e)},o.ima.playAdBreak=function(){s||L.start()},o.ima.onContentPauseRequested_=function(e){k=!0,R=!0,o.off("ended",x),-1!=e.getAd().getAdPodInfo().getPodIndex()&&o.ads.startLinearAdMode(),m.style.display="block",u.style.display="block",l.hide(),o.pause()},o.ima.onContentResumeRequested_=function(e){k=!1,R=!1,o.on("ended",x),w&&w.isLinear()&&(m.style.display="none"),l.show(),w?I||-1==w.getAdPodInfo().getPodIndex()||o.ads.endLinearAdMode():o.ads.endLinearAdMode(),c.innerHTML=""},o.ima.onAllAdsCompleted_=function(e){if(B=!0,1==I)for(var t in F)F[t]()},o.ima.onAdLoaded_=function(e){e.getAd().isLinear()||o.play()},o.ima.onAdStarted_=function(e){w=e.getAd(),w.isLinear()?(C=setInterval(o.ima.onAdPlayheadTrackerInterval_,250),m.className=""):m.className="bumpable-ima-ad-container"},o.ima.onAdComplete_=function(e){w.isLinear()&&clearInterval(C)},o.ima.onAdPlayheadTrackerInterval_=function(){var e=L.getRemainingTime(),t=w.getDuration(),n=t-e;n=n>0?n:0;var i,o,a=!1;w.getAdPodInfo()&&(a=!0,i=w.getAdPodInfo().getAdPosition(),o=w.getAdPodInfo().getTotalAds());var d=Math.floor(e/60),r=Math.floor(e%60);r.toString().length<2&&(r="0"+r);var s=": ";a&&(s=" ("+i+" of "+o+"): "),c.innerHTML="Advertisement"+s+d+":"+r;var l=n/t,m=100*l;h.style.width=m+"%"},o.ima.hideAdControls_=function(){v.style.display="none",A.style.display="none",f.style.display="none",u.style.height="14px"},o.ima.showAdControls_=function(){u.style.height="37px",v.style.display="block",A.style.display="block",p.style.display="block",f.style.display="block"},o.ima.onAdPlayPauseClick_=function(){R?(v.className="ima-paused",L.pause(),R=!1):(v.className="ima-playing",L.resume(),R=!0)},o.ima.onAdMuteClick_=function(){P?(A.className="ima-non-muted",L.setVolume(1),o.muted(!1),P=!1,y.style.width=100*o.volume()+"%"):(A.className="ima-muted",L.setVolume(0),o.muted(!0),P=!0,y.style.width="0%")},o.ima.onAdVolumeSliderMouseDown_=function(){document.addEventListener("mouseup",o.ima.onMouseUp_,!1),document.addEventListener("mousemove",o.ima.onMouseMove_,!1)},o.ima.onMouseMove_=function(e){o.ima.setVolumeSlider_(e)},o.ima.onMouseUp_=function(e){o.ima.setVolumeSlider_(e),document.removeEventListener("mousemove",o.ima.onMouseMove_),document.removeEventListener("mouseup",o.ima.onMouseUp_)},o.ima.setVolumeSlider_=function(e){var t=(e.clientX-p.getBoundingClientRect().left)/p.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),y.style.width=t+"%",o.volume(t/100),L.setVolume(t/100),0==o.volume()?(A.className="ima-muted",o.muted(!0),P=!0):(A.className="ima-non-muted",o.muted(!1),P=!1)},o.ima.onAdFullscreenClick_=function(){o.isFullscreen()?o.exitFullscreen():o.requestFullscreen()},o.ima.onFullscreenChange_=function(){o.isFullscreen()?(f.className="ima-fullscreen",m.style.width=window.screen.width+"px",m.style.height=window.screen.height+"px",L.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)):(f.className="ima-non-fullscreen",m.style.width=o.width()+"px",m.style.height=o.height()+"px",L.resize(o.width(),o.height(),google.ima.ViewMode.NORMAL))},o.ima.onVolumeChange_=function(){var e=o.muted()?0:o.volume();L&&L.setVolume(e),0==e?(P=!0,A.className="ima-muted",y.style.width="0%"):(P=!1,A.className="ima-non-muted",y.style.width=100*e+"%")},o.ima.seekContentToZero_=function(){o.off("loadedmetadata",o.ima.seekContentToZero_),o.currentTime(0)},o.ima.playContentFromZero_=function(){o.off("loadedmetadata",o.ima.playContentFromZero_),o.currentTime(0),o.play()},o.ima.resetIMA_=function(){L&&(L.destroy(),L=null),_&&!I&&_.contentComplete(),I=!1,B=!1},o.ima.addEventListener=function(e,t){L&&L.addEventListener(e,t)},o.ima.getAdsManager=function(){return L},o.ima.setContent=function(e,t,n){o.ima.resetIMA_(),a.adTagUrl=t||a.adTagUrl,o.currentSrc()&&o.pause(),e&&o.src(e),n?o.on("loadedmetadata",o.ima.playContentFromZero_):o.on("loadedmetadata",o.ima.seekContentToZero_)},o.ima.addContentEndedListener=function(e){U.push(e)},o.ima.addContentAndAdsEndedListener=function(e){F.push(e)},o.ima.setAdBreakReadyListener=function(e){O=e},o.ima.pauseAd=function(){k&&R&&(v.className="ima-paused",L.pause(),R=!1)},o.ima.resumeAd=function(){k&&!R&&(v.className="ima-playing",L.resume(),R=!0)},o.ima.setUpPlayerIntervals_=function(){T=setInterval(o.ima.updateCurrentTime,D),M=setInterval(o.ima.checkForSeeking_,D)},o.ima.updateCurrentTime=function(){b.seeking||(b.currentTime=o.currentTime())},o.ima.checkForSeeking_=function(){var e=o.currentTime(),t=1e3*(e-b.previousTime);Math.abs(t)>D+V?b.seeking=!0:b.seeking=!1,b.previousTime=o.currentTime()},o.ima.setShowCountdown=function(e){r=e,c.style.display=r?"block":"none"};var a,d,r,s,l,m,u,c,g,h,v,A,p,y,f,E,_,L,w,C,T,M,N=!1,S=null,k=!1,R=!1,P=!1,I=!1,B=!1,D=1e3,V=100,b={currentTime:0,previousTime:0,seeking:!1,duration:0},U=[],F=[],O=void 0,x=function(){_&&!I&&(_.contentComplete(),I=!0);for(var e in U)U[e]();if(B)for(var e in F)F[e]();clearInterval(T),clearInterval(M),o.one("play",o.ima.setUpPlayerIntervals_)};if(a=t({},n,e||{}),!a.id)return void window.console.log("Error: must provide id of video.js div");d=document.getElementById(a.id+"_html5_api"),r=!0,0==a.showCountdown&&(r=!1),s=!0,0==a.autoPlayAdBreaks&&(s=!1),o.one("play",o.ima.setUpPlayerIntervals_),o.on("ended",x);var q={debug:a.debug,timeout:a.timeout,prerollTimeout:a.prerollTimeout},H=t({},q,e.contribAdsSettings||{});if(o.ads(H),S=new google.ima.AdsRenderingSettings,S.restoreCustomPlaybackStateOnAdBreakComplete=!0,a.adsRenderingSettings)for(var Z in a.adsRenderingSettings)S[Z]=a.adsRenderingSettings[Z];a.locale&&google.ima.settings.setLocale(a.locale),o.ima.createAdContainer_(),_=new google.ima.AdsLoader(E),_.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==a.vpaidAllowed&&_.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),a.vpaidMode&&_.getSettings().setVpaidMode(a.vpaidMode),a.locale&&_.getSettings().setLocale(a.locale),_.getSettings().setPlayerType("videojs-ima"),_.getSettings().setPlayerVersion("0.2.0"),_.getSettings().setAutoPlayAdBreaks(s),_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,o.ima.onAdsManagerLoaded_,!1),_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,o.ima.onAdsLoaderError_,!1),i||(i=o.ima.start),o.on("readyforpreroll",i),o.on("fullscreenchange",o.ima.onFullscreenChange_),o.on("volumechange",o.ima.onVolumeChange_)};videojs.plugin("ima",i)}(window.videojs);