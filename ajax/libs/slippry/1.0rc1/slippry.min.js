/**
 * slippry v1.0rc1 - Simple responsive content slider
 * http://slippry.com
 *
 * Author(s): Lukas Jakob Hafner - @saftsaak 
 *
 * Copyright 2013, booncon oy - http://booncon.com
 *
 * Thanks @ http://bxslider.com for the inspiration!
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
(function($){"use strict";var f;f={slippryWrapper:'<div class="slippry_box" />',slideWrapper:'<div class="slide_box" />',slideCrop:'<div class="slippry_slide_crop" />',boxClass:'slippry_list',elements:'li',activeClass:'active',fillerClass:'filler',loadingClass:'loading',adaptiveHeight:true,start:1,loop:true,captionsSrc:'img',captions:'overlay',captionsClass:'caption',initSingle:true,responsive:true,pager:true,pagerClass:'pager',controls:true,controlClass:'controls',prevClass:'slip_prev',prevText:'Previous',nextClass:'slip_next',nextText:'Next',hideOnEnd:true,transition:'fade',kenZoom:1.2,slideMargin:0,transClass:'transition',speed:800,transEase:'swing',continuous:true,useCSS:true,auto:true,autoDirection:'next',autoHover:true,autoHoverDelay:100,autoDelay:500,pause:4000,onSliderLoad:function(){return this},onSlideBefore:function(){return this},onSlideAfter:function(){return this}};$.fn.slippry=function(d){var e,el,prepareFiller,getFillerProportions,init,updateCaption,initPager,initControls,ready,transitionDone,whichTransitionEvent,initCaptions,updatePager,setFillerProportions,doTransition,updateSlide,updateControls,updatePos,supports,preload,start;el=this;if(el.length===0){return this}if(el.length>1){el.each(function(){$(this).slippry(d)});return this}e={};e.vars={};whichTransitionEvent=function(){var t,el,transitions;el=document.createElement('fakeelement');transitions={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','MSTransition':'msTransitionEnd','OTransition':'oTransitionEnd','transition':'transitionEnd'}for(t in transitions){if(el.style[t]!==undefined){return transitions[t]}}};supports=(function(){var c=document.createElement('div'),vendors=['Khtml','Ms','O','Moz','Webkit'],len=vendors.length;return function(b){if(b in c.style){return true}b=b.replace(/^[a-z]/,function(a){return a.toUpperCase()});while(len--){if(vendors[len]+b in c.style){return true}}return false}}());ready=function(){if(e.vars.fresh){e.vars.slippryWrapper.removeClass(e.settings.loadingClass);e.vars.fresh=false;if(e.settings.auto){el.startAuto()}e.settings.onSliderLoad.call(undefined,e.vars.active.index())}else{$('.'+e.settings.fillerClass,e.vars.slideWrapper).addClass('ready')}};setFillerProportions=function(a,b){var c,p_top,$filler;c=a/b;p_top=1/c*100+'%';$filler=$('.'+e.settings.fillerClass,e.vars.slideWrapper);$filler.css({paddingTop:p_top});ready()};getFillerProportions=function(a){var b,height;if(($('img',a).attr("src")!==undefined)&&(a.text().replace(/^\s+|\s+$/g,'')==='')){$("<img/>").load(function(){b=this.width;height=this.height;setFillerProportions(b,height)}).attr("src",$('img',a).attr("src"))}else{b=a.width();height=a.height();setFillerProportions(b,height)}};prepareFiller=function(){if($('.'+e.settings.fillerClass,e.vars.slideWrapper).length===0){e.vars.slideWrapper.append($('<div class="'+e.settings.fillerClass+'" />'))}if(e.settings.adaptiveHeight===true){getFillerProportions($('.'+e.settings.activeClass,el))}else{var a,height,loop;height=0;loop=0;$(e.vars.slides).each(function(){if($(this).height()>height){a=$(this);height=a.height()}loop=loop+1;if(loop===e.vars.count){if(a===undefined){a=$($(e.vars.slides)[0])}getFillerProportions(a)}})}};updatePager=function(){if(e.settings.pager){$('.pager li',e.vars.slippryWrapper).removeClass('active');$($('.pager li',e.vars.slippryWrapper)[e.vars.active.index()]).addClass(e.settings.activeClass)}};updateControls=function(){if(!e.settings.loop&&e.settings.hideOnEnd){$('.'+e.settings.prevClass,e.vars.slippryWrapper)[e.vars.first?'hide':'show']();$('.'+e.settings.nextClass,e.vars.slippryWrapper)[e.vars.last?'hide':'show']()}};updateCaption=function(){var a,wrapper;if(e.settings.captions!==false){if(e.settings.captionsSrc!=='img'){a=e.vars.active.attr('title')}else{a=$('img',e.vars.active).attr('title')!==undefined?$('img',e.vars.active).attr('title'):$('img',e.vars.active).attr('alt')}if(e.settings.captions!=='custom'){wrapper=$('.'+e.settings.captionsClass,e.vars.slippryWrapper)}else{wrapper=$('.'+e.settings.captionsClass)}if((a!==undefined)&&(a!=='')){wrapper.html(a).show()}else{wrapper.hide()}}};el.startAuto=function(){if((e.vars.timer===undefined)&&(e.vars.delay===undefined)){e.vars.delay=window.setTimeout(function(){e.vars.autodelay=false;e.vars.timer=window.setInterval(function(){el.goToSlide(e.settings.autoDirection)},e.settings.pause)},e.vars.autodelay?e.settings.autoHoverDelay:e.settings.autoDelay)}if(e.settings.autoHover){e.vars.slideWrapper.unbind('mouseenter').unbind('mouseleave').bind('mouseenter',function(){if(e.vars.timer!==undefined){e.vars.hoverStop=true;el.stopAuto()}else{e.vars.hoverStop=false}}).bind('mouseleave',function(){if(e.vars.hoverStop){e.vars.autodelay=true;el.startAuto()}})}};el.stopAuto=function(){window.clearInterval(e.vars.timer);e.vars.timer=undefined;window.clearTimeout(e.vars.delay);e.vars.delay=undefined};el.refresh=function(){e.vars.slides.removeClass(e.settings.activeClass);e.vars.active.addClass(e.settings.activeClass);if(e.settings.responsive){prepareFiller()}else{ready()}updateControls();updatePager();updateCaption()};updateSlide=function(){el.refresh()};transitionDone=function(){e.vars.moving=false;e.vars.slides.removeClass(e.settings.transClass);e.vars.old.removeClass('sy-ken');e.settings.onSlideAfter.call(undefined,e.vars.active,e.vars.old.index(),e.vars.active.index())};doTransition=function(){var a,jump,old_left,old_pos,kenZoom,kenStart,kenX,kenY,kenTime,animProp,cssProp;e.settings.onSlideBefore.call(undefined,e.vars.active,e.vars.old.index(),e.vars.active.index());if(e.settings.transition!==false){e.vars.moving=true;if((e.settings.transition==='fade')||(e.settings.transition==='kenburns')){if(e.settings.transition==='kenburns'){kenTime=e.settings.pause+e.settings.speed*2;if(!e.settings.useCSS){animProp={};cssProp={};e.vars.active.css({top:'auto',left:'auto',bottom:'auto',right:'auto'});kenX=e.vars.active.index()%2===0?'left':'right';kenY=e.vars.active.index()%2===0?'top':'bottom';kenZoom=100*e.settings.kenZoom;kenStart=100-kenZoom;cssProp[kenX]=kenStart+'%';cssProp[kenY]=kenStart+'%';cssProp.width=kenZoom+'%';animProp[kenX]='0%';animProp[kenY]='0%';e.vars.active.css(cssProp).animate(animProp,{duration:kenTime,queue:false})}}if(e.vars.fresh){e.vars.slides.css({transitionDuration:e.settings.speed+'ms',opacity:0});e.vars.active.css('opacity',1);if(e.settings.transition==='kenburns'){if(e.settings.useCSS){e.vars.slides.css({animationDuration:kenTime+'ms'})}e.vars.active.addClass('sy-ken')}transitionDone()}else{if(e.settings.useCSS){e.vars.old.addClass(e.settings.transClass).css('opacity',0);e.vars.active.addClass(e.settings.transClass).css('opacity',1);if(e.settings.transition==='kenburns'){e.vars.active.addClass('sy-ken')}$(window).off('focus').on('focus',function(){e.vars.old.trigger(e.vars.transition)});e.vars.old.one(e.vars.transition,function(){transitionDone();return this})}else{e.vars.old.addClass(e.settings.transClass).stop().animate({opacity:0},e.settings.speed,e.settings.transEase,function(){transitionDone()});e.vars.active.addClass(e.settings.transClass).css('opacity',0).stop().animate({opacity:1},e.settings.speed,e.settings.transEase)}}updateSlide()}else if(e.settings.transition==='horizontal'){a='-'+e.vars.active.index()*(100+e.settings.slideMargin)+'%';if(e.vars.fresh){el.css('left',a);transitionDone()}else{if(e.settings.continuous){if(e.vars.jump&&(e.vars.trigger!=='pager')){jump=true;old_pos=a;if(e.vars.first){old_left=0;e.vars.active.css('left',e.vars.count*(100+e.settings.slideMargin)+'%');a='-'+e.vars.count*(100+e.settings.slideMargin)+'%'}else{old_left=(e.vars.count-1)*(100+e.settings.slideMargin)+'%';e.vars.active.css('left',-(100+e.settings.slideMargin)+'%');a=(100+e.settings.slideMargin)+'%'}}}e.vars.active.addClass(e.settings.transClass);if(e.settings.useCSS){el.addClass(e.settings.transition);el.css({left:a,transitionDuration:e.settings.speed+'ms'});$(window).off('focus').on('focus',function(){el.trigger(e.vars.transition)});el.one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',function(){el.removeClass(e.settings.transition);if(jump){e.vars.active.css('left',old_left);el.css({left:old_pos,transitionDuration:'0ms'})}transitionDone();return this})}else{el.stop().animate({left:a},e.settings.speed,e.settings.transEase,function(){if(jump){e.vars.active.css('left',old_left);el.css('left',old_pos)}transitionDone();return this})}}updateSlide()}}else{updateSlide();transitionDone()}};updatePos=function(a){e.vars.first=false;e.vars.last=false;if((a==='prev')||(a===0)){e.vars.first=true}else if((a==='next')||(a===e.vars.count-1)){e.vars.last=true}};el.goToSlide=function(a){var b;if(!e.vars.moving){b=e.vars.active.index();if(a==='prev'){if(b>0){a=b-1}else if(e.settings.loop){a=e.vars.count-1}}else if(a==='next'){if(b<e.vars.count-1){a=b+1}else if(e.settings.loop){a=0}}else{a=a-1}e.vars.jump=false;if((a!=='prev')&&(a!=='next')&&((a!==b)||(e.vars.fresh))){updatePos(a);e.vars.old=e.vars.active;e.vars.active=$(e.vars.slides[a]);if(((b===0)&&(a===e.vars.count-1))||((b===e.vars.count-1)&&(a===0))){e.vars.jump=true}doTransition()}}};el.goToNextSlide=function(){el.goToSlide('next')};el.goToPrevSlide=function(){el.goToSlide('prev')};initPager=function(){if((e.settings.pager)&&(e.vars.count>1)){var a,loop,pager;a=e.vars.slides.length;pager=$('<ul class="'+e.settings.pagerClass+'" />');for(loop=1;loop<a+1;loop=loop+1){pager.append($('<li />').append($('<a href="#'+loop+'">'+loop+'</a>')))}e.vars.slippryWrapper.append(pager);$('.'+e.settings.pagerClass+' a',e.vars.slippryWrapper).click(function(){e.vars.trigger='pager';el.goToSlide(parseInt(this.hash.split('#')[1],10));return false});updatePager()}};initControls=function(){if((e.settings.controls)&&(e.vars.count>1)){e.vars.slideWrapper.append($('<ul class="'+e.settings.controlClass+'" />').append('<li class="'+e.settings.prevClass+'"><a href="#prev">'+e.settings.prevText+'</a></li>').append('<li class="'+e.settings.nextClass+'"><a href="#next">'+e.settings.nextText+'</a></li>'));$('.'+e.settings.controlClass+' a',e.vars.slippryWrapper).click(function(){e.vars.trigger='controls';el.goToSlide(this.hash.split('#')[1]);return false});updateControls()}};initCaptions=function(){if(e.settings.captions!==false){if(e.settings.captions==='overlay'){e.vars.slideWrapper.append('<div class="caption_wrap"><div class="'+e.settings.captionsClass+'"></div></div>')}else if(e.settings.captions==='below'){e.vars.slippryWrapper.append('<div class="'+e.settings.captionsClass+'" />')}}};start=function(){el.goToSlide(e.vars.active.index()+1)};preload=function(a){var b,loop,elements;elements=$('img, iframe',a);b=elements.length;if(b===0){start();return}loop=0;elements.each(function(){$(this).one('load error',function(){if(++loop===b){start()}}).each(function(){if(this.complete){$(this).load()}})})};el.getCurrentSlide=function(){return e.vars.active};el.getSlideCount=function(){return e.vars.count};el.destroySlider=function(){if(e.vars.fresh===false){el.stopAuto();e.vars.moving=false;e.vars.slides.each(function(){if($(this).data("cssBckup")!==undefined){$(this).attr("style",$(this).data("cssBckup"))}else{$(this).removeAttr('style')}if($(this).data("classBckup")!==undefined){$(this).attr("class",$(this).data("classBckup"))}else{$(this).removeAttr('class')}});if(el.data("cssBckup")!==undefined){el.attr("style",el.data("cssBckup"))}else{el.removeAttr('style')}if(el.data("classBckup")!==undefined){el.attr("class",el.data("classBckup"))}else{el.removeAttr('class')}e.vars.slippryWrapper.before(el);e.vars.slippryWrapper.remove();e.vars.fresh=undefined}};el.reloadSlider=function(){el.destroySlider();init()};init=function(){var a;e.settings=$.extend({},f,d);e.vars.slides=$(e.settings.elements,el);e.vars.count=e.vars.slides.length;if(e.settings.useCSS){if(!supports('transition')){e.settings.useCSS=false}e.vars.transition=whichTransitionEvent()}el.data('cssBckup',el.attr('style'));el.data('classBackup',el.attr('class'));el.addClass(e.settings.boxClass).wrap(e.settings.slippryWrapper).wrap(e.settings.slideWrapper).wrap(e.settings.slideCrop);e.vars.slideWrapper=el.parent().parent();e.vars.slippryWrapper=e.vars.slideWrapper.parent().addClass(e.settings.loadingClass);e.vars.fresh=true;e.vars.slides.each(function(){$(this).addClass('slippry_slide '+e.settings.transition);if(e.settings.useCSS){$(this).addClass('useCSS')}if(e.settings.transition==='horizontal'){$(this).css('left',$(this).index()*(100+e.settings.slideMargin)+'%')}});if((e.vars.count>1)||(e.settings.initSingle)){if($('.'+e.settings.activeClass,el).index()===-1){if(e.settings.start==='random'){a=Math.round(Math.random()*(e.vars.count))}else if(e.settings.start>0&&e.settings.start<=e.vars.count){a=e.settings.start-1}else{a=0}e.vars.active=$(e.vars.slides[a]).addClass(e.settings.activeClass)}else{e.vars.active=$('.'+e.settings.activeClass,el)}initControls();initPager();initCaptions();preload(e.vars.slides)}else{return this}};init();return this}}(jQuery));