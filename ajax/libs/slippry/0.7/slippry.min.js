/**
 * slippry v0.7 - Simple responsive content slider
 * http://slippry.com
 *
 * Author(s): Lukas Jakob Hafner - @saftsaak 
 *
 * Copyright 2013, booncon oy - http://booncon.com
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
(function($){"use strict";var e;e={slippryWrapper:'<div class="slippry_box" />',slideWrapper:'<div class="slide_box" />',boxClass:'slippry_list',elements:'li',activeClass:'active',fillerClass:'filler',adaptHeight:true,randomStart:false,loop:true,captions:'overlay',initSingle:true,usePager:true,pagerClass:'pager',useControls:true,controlClass:'controls',prevClass:'slip_prev',prevText:'Previous',nextClass:'slip_next',nextText:'Next',transition:'slide',transSpace:0,transClass:'transition',transTime:1200,transEase:'swing',continuous:true,onSlideBefore:function(){return this},onSlideAfter:function(){return this}};$.fn.slippry=function(c){var d,el,refresh,prepareFiller,setFillerProportions,init,goToSlide,initPager,initControls,initCaptions,updatePager,doTransition,updateSlide,updateControls,updatePos;el=this;if(el.length===0){return this}if(el.length>1){el.each(function(){$(this).slippry(c)});return this}d={};d.vars={};setFillerProportions=function(a){var b,height,ratio,p_top;b=a.width();height=a.height();ratio=b/height;p_top=1/ratio*100+'%';$('.'+d.settings.fillerClass,d.vars.slideWrapper).css({paddingTop:p_top})};prepareFiller=function(){if($('.'+d.settings.fillerClass,d.vars.slideWrapper).length===0){d.vars.slideWrapper.append($('<div class="'+d.settings.fillerClass+'" />'))}if(d.settings.adaptHeight===true){setFillerProportions($('.'+d.settings.activeClass,el))}else{var a,$highest,height,count,loop;a=$(d.settings.elements,el);height=0;loop=0;count=a.length;$(a).each(function(){if($(this).height()>height){$highest=$(this);height=$highest.height()}loop=loop+1;if(loop===count){if($highest===undefined){$highest=$($(a)[0])}setFillerProportions($highest)}})}};updatePager=function(){if(d.settings.usePager){$('.pager li',d.vars.slippryWrapper).removeClass('active');$($('.pager li',d.vars.slippryWrapper)[d.vars.active.index()]).addClass(d.settings.activeClass)}};updateControls=function(){if(!d.settings.loop){$('.'+d.settings.prevClass,d.vars.slippryWrapper)[d.vars.first?'hide':'show']();$('.'+d.settings.nextClass,d.vars.slippryWrapper)[d.vars.last?'hide':'show']()}};refresh=function(){$(d.settings.elements,el).removeClass(d.settings.activeClass);d.vars.active.addClass(d.settings.activeClass).removeClass(d.settings.transClass);prepareFiller();updateControls();updatePager();if(d.settings.captions!==false){$('.caption',d.vars.slippryWrapper).html(d.vars.active.attr('title'))}};updateSlide=function(){refresh();d.settings.onSlideAfter.call(d.vars.active)};doTransition=function(){var a,jump,old_left,old_pos;d.settings.onSlideBefore.call(d.vars.active);d.vars.moving=true;if(d.settings.transition!==false){if(d.settings.transition==='fade'){d.vars.old.addClass(d.settings.transClass).stop().animate({opacity:0},d.settings.transTime,function(){$(this).removeClass(d.settings.transClass);d.vars.moving=false});d.vars.active.addClass(d.settings.transClass).css('opacity',0).stop().animate({opacity:1},d.settings.transTime,d.settings.transEase,function(){$(this).removeClass(d.settings.transClass)});updateSlide()}else if(d.settings.transition==='slide'){a='-'+d.vars.active.index()*(100+d.settings.transSpace)+'%';if(d.settings.continuous){if(d.vars.jump&&(d.vars.trigger==='controls')){jump=true;old_pos=a;if(d.vars.first){old_left=0;d.vars.active.css('left',d.vars.count*(100+d.settings.transSpace)+'%');a='-'+d.vars.count*(100+d.settings.transSpace)+'%'}else{old_left=(d.vars.count-1)*(100+d.settings.transSpace)+'%';d.vars.active.css('left',-(100+d.settings.transSpace)+'%');a=(100+d.settings.transSpace)+'%'}}}d.vars.active.addClass(d.settings.transClass);el.stop().animate({left:a},d.settings.transTime,d.settings.transEase,function(){if(jump){d.vars.active.css('left',old_left);el.css('left',old_pos)}d.vars.moving=false;return this});updateSlide()}}else{updateSlide()}};updatePos=function(a){d.vars.first=false;d.vars.last=false;if((a==='prev')||(a===0)){d.vars.first=true}else if((a==='next')||(a===d.vars.count-1)){d.vars.last=true}};goToSlide=function(a){var b;if(!d.vars.moving){b=d.vars.active.index();if(a==='prev'){if(b>0){a=b-1}else if(d.settings.loop){a=d.vars.count-1}}else if(a==='next'){if(b<d.vars.count-1){a=b+1}else if(d.settings.loop){a=0}}d.vars.jump=false;if((a!=='prev')&&(a!=='next')){updatePos(a);d.vars.old=d.vars.active;d.vars.active=$($(d.settings.elements,el)[a]);if(((b===0)&&(a===d.vars.count-1))||((b===d.vars.count-1)&&(a===0))){d.vars.jump=true}doTransition()}}};initPager=function(){if((d.settings.usePager)&&(d.vars.count>1)){var a,loop,pager;a=$(d.settings.elements,el).length;pager=$('<ul class="'+d.settings.pagerClass+'" />');for(loop=0;loop<a;loop=loop+1){pager.append($('<li />').append($('<a href="#'+loop+'"></a>')))}d.vars.slippryWrapper.append(pager);$('.'+d.settings.pagerClass+' a',d.vars.slippryWrapper).click(function(){d.vars.trigger='pager';goToSlide(parseInt(this.hash.split('#')[1],10));return false});updatePager()}};initControls=function(){if((d.settings.useControls)&&(d.vars.count>1)){d.vars.slideWrapper.append($('<ul class="'+d.settings.controlClass+'" />').append('<li class="'+d.settings.prevClass+'"><a href="#prev">'+d.settings.prevText+'</a></li>').append('<li class="'+d.settings.nextClass+'"><a href="#next">'+d.settings.nextText+'</a></li>'));$('.'+d.settings.controlClass+' a',d.vars.slippryWrapper).click(function(){d.vars.trigger='controls';goToSlide(this.hash.split('#')[1]);return false});updateControls()}};initCaptions=function(){if(d.settings.captions!==false){if(d.settings.captions==='overlay'){d.vars.slideWrapper.append('<div class="caption_wrap"><div class="caption"></div></div>')}else if(d.settings.captions==='below'){d.vars.slippryWrapper.append('<div class="caption" />')}$('.caption',d.vars.slippryWrapper).html(d.vars.active.attr('title'))}};init=function(){var a;d.settings=$.extend({},e,c);d.vars.count=$(d.settings.elements,el).length;if((d.vars.count!==1)||(d.settings.initSingle)){if($('.'+d.settings.activeClass,el).index()===-1){if(d.settings.randomStart){a=Math.round(Math.random()*(d.vars.count-1))}else{a=0}$($(d.settings.elements,el)[a]).addClass(d.settings.activeClass);d.vars.active=$($(d.settings.elements,el)[a])}else{d.vars.active=$('.'+d.settings.activeClass,el)}updatePos(d.vars.active.index());if(d.settings.transition==='slide'){$(d.settings.elements,el).each(function(){$(this).css('left',$(this).index()*(100+d.settings.transSpace)+'%').addClass('slide')})}el.addClass(d.settings.boxClass).wrap(d.settings.slippryWrapper).wrap(d.settings.slideWrapper);d.vars.slideWrapper=el.parent();d.vars.slippryWrapper=d.vars.slideWrapper.parent();initControls();initPager();initCaptions();refresh()}else{return this}};this.reset=function(){console.log('reset')};init();return this}}(jQuery));