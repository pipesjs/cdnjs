"use strict";!function(e,t){var n={},a=[];n.onReady=function(e){a.push(e)},n.dispatchGlobalReady=function(){for(var e=a.length-1;e>=0;e--)a[e]();a=[],n.dispatchGlobalReady=t},function(){function n(e,n){n=n||{bubbles:!1,cancelable:!1,detail:t};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),a}n.prototype=e.Event.prototype,e.CustomEvent=n}(),n.device=function(){var e=navigator.appVersion,t=navigator.userAgent,n="-",a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in a){var i=a[o];if(i.r.test(t)){n=i.s;break}}var r="-";switch(/Windows/.test(n)&&(r=/Windows (.*)/.exec(n)[1],n="Windows"),n){case"Mac OS X":r=/Mac OS X (10[\.\_\d]+)/.exec(t)[1];break;case"Android":r=/Android ([\.\_\d]+)/.exec(t)[1];break;case"iOS":/(iphone|ipod|ipad).* os 8_/.test(t.toLowerCase())?r=t.toLowerCase().split("version/")[1].split(" ")[0]:(r=/OS (\d+)_(\d+)_?(\d+)?/.exec(e),r=r[1]+"."+r[2]+"."+(0|r[3]))}return{os:n,osVersion:r}}(),n.browser=function(){var e,t,n,a=navigator.userAgent,o=navigator.appName,i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return(t=a.indexOf("Opera"))!=-1&&(o="Opera",i=a.substring(t+6),(t=a.indexOf("Version"))!=-1&&(i=a.substring(t+8))),(t=a.indexOf("OPR"))!=-1?(o="Opera",i=a.substring(t+4)):(t=a.indexOf("MSIE"))!=-1?(o="Microsoft Internet Explorer",i=a.substring(t+5)):(t=a.indexOf("Chrome"))!=-1?(o="Chrome",i=a.substring(t+7)):(t=a.indexOf("Safari"))!=-1?(o="Safari",i=a.substring(t+7),(t=a.indexOf("Version"))!=-1&&(i=a.substring(t+8))):(t=a.indexOf("Firefox"))!=-1?(o="Firefox",i=a.substring(t+8)):a.indexOf("Trident/")!=-1?(o="Microsoft Internet Explorer",i=a.substring(a.indexOf("rv:")+3)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(o=a.substring(e,t),i=a.substring(t+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),(n=i.indexOf(";"))!=-1&&(i=i.substring(0,n)),(n=i.indexOf(" "))!=-1&&(i=i.substring(0,n)),(n=i.indexOf(")"))!=-1&&(i=i.substring(0,n)),r=parseInt(""+i,10),isNaN(r)&&(i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),{name:o,version:i}}(),n.ajax=function(){var t=function(e){var t=null;try{t=new XMLHttpRequest,"withCredentials"in t&&e&&(t.withCredentials=!0)}catch(n){console.error(n)}return t},n=function(e){var t=null;try{t=JSON.parse(e)}catch(n){t=null}return t},a=function(e){var t,n="";for(t in e)n+=t+"="+e[t]+"&";var a=n.lastIndexOf("&");return a!==-1&&(e=n.substring(0,a)),n};return function(o){var i=o.method,r=o.url,s="boolean"==typeof o.crossDomain&&o.crossDomain,c=o.contentType,l=o.dataType,f=o.data,u=o.timeout,d=o.success,p=o.error,h=o.headers;if("string"!=typeof i)throw new TypeError("method must be a string");if("string"!=typeof r)throw new TypeError("url must be a string");if("object"==typeof f&&(f="application/json"===c?JSON.stringify(f):a(f)),"function"!=typeof d)throw new TypeError("success must be a function");var g=t(s),v="NO_INTERNET_ACCESS";if(g){if(g.open(i,r,!0),"string"==typeof c&&g.setRequestHeader("Content-type",c),"xml"===l&&g.overrideMimeType&&g.overrideMimeType("application/xml; charset=utf-8"),"object"==typeof h){var m;for(m in h)g.setRequestHeader(m,h[m])}g.onreadystatechange=function(t){if(4===g.readyState){var a=null;"json"===l?(a=n(g.responseText),null===a&&(v="JSON_MALFORMED")):a="xml"===l?g.responseXML:g.responseText;var o=g.status.toString();"2"===o[0]?d(a,g):"function"==typeof p&&e.setTimeout(function(){p(a,v,g)},1),g=null}},"number"==typeof u&&(g.timeout=u,g.ontimeout=function(){v="TIMEOUT_EXCEEDED"}),g.send(f)}else"function"==typeof p&&(v="XMLHTTPREQUEST_UNAVAILABLE",p(v));return{cancel:function(){v="REQUEST_CANCELED",g&&g.abort()}}}}(),n.event=function(a){var o=["mousedown","mousemove","mouseup"],i=!1;("ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch)&&(i=!0,o=["touchstart","touchmove","touchend","touchcancel"]),e.navigator.pointerEnabled?o=["pointerdown","pointermove","pointerup","pointercancel"]:e.navigator.msPointerEnabled&&(o=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"]);var r={};r.hasTouch=i,r.start=o[0],r.move=o[1],r.end=o[2],r.cancel="undefined"==typeof o[3]?null:o[3],r.tap="tap";var s=document.createElement("div"),c=[{name:"transition",end:"transitionend"},{name:"MozTransition",end:"transitionend"},{name:"msTransition",end:"msTransitionEnd"},{name:"WebkitTransition",end:"webkitTransitionEnd"}],l=[{name:"animation",end:"animationend"},{name:"MozAnimation",end:"animationend"},{name:"msAnimation",end:"msAnimationEnd"},{name:"WebkitAnimation",end:"webkitAnimationEnd"}],f=null,u=null,d=c.length-1;for(d in c)if(s.style[c[d].name]!==t){f=c[d].end;break}var p=l.length-1;for(p in l)if(s.style[l[p].name]!==t){u=l[p].end;break}var h=n.device.osVersion;h.length>2&&(h=n.device.osVersion.substring(0,3)),"android"===n.device.os.toLowerCase()&&"4.1"===h&&(f="webkitTransitionEnd",u="webkitAnimationEnd"),r.transitionEnd=f,r.animationEnd=u;var g=[],v=function(){function t(e,t){this.el=e,this.callback=t,this.moved=!1,this.startX=0,this.startY=0,this.el.addEventListener(r.start,this,!1)}return t.prototype.start=function(e){this.el.addEventListener(r.move,this,!1),this.el.addEventListener(r.end,this,!1),this.moved=!1,this.startX=e.touches?e.touches[0].clientX:e.clientX,this.startY=e.touches?e.touches[0].clientY:e.clientY},t.prototype.move=function(e){var t=e.touches?e.touches[0].clientX:e.clientX,n=e.touches?e.touches[0].clientY:e.clientY;(Math.abs(t-this.startX)>10||Math.abs(n-this.startY)>10)&&(this.moved=!0)},t.prototype.end=function(t){if(this.el.removeEventListener(r.move,this,!1),this.el.removeEventListener(r.end,this,!1),null!==r.cancel&&this.el.removeEventListener(r.cancel,this,!1),!this.moved){if("undefined"!=typeof a){var n=new e.CustomEvent(this.tap,{detail:{},bubbles:!0,cancelable:!0});this.el.dispatchEvent(n)}this.callback(t)}},t.prototype.cancel=function(){this.moved=!1,this.startX=0,this.startY=0},t.prototype.off=function(){this.el.removeEventListener(r.start,this,!1),this.el.removeEventListener(r.move,this,!1),this.el.removeEventListener(r.end,this,!1),null!==r.cancel&&this.el.removeEventListener(r.cancel,this,!1)},t.prototype.handleEvent=function(e){switch(e.type){case r.start:this.start(e);break;case r.move:this.move(e);break;case r.end:this.end(e);break;case r.cancel:this.cancel(e)}},t}();return n.on=function(e,t,n,a){var o=function(e,t,n,a){if(t===r.tap){var o=new v(e,n);return void g.push(o)}e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on"+t,n,a)};if("undefined"==typeof e.length)o(e,t,n,a);else for(var i=0,s=e.length;i<s;i++)o(e[i],t,n,a)},e.on=document.on=NodeList.prototype.on=HTMLElement.prototype.on=function(e,t,a){n.on(this,e,t,a)},n.off=function(e,t,n,a){var o=function(e,t,n,a){if(t!==r.tap)e.removeEventListener?e.removeEventListener(t,n,a):e.attachEvent&&e.detachEvent("on"+t,n,a);else for(var o=0,i=e.length;o<i;o++)if(g[o].el===e){g[o].off(),g.splice(o,1);break}};if("undefined"==typeof e.length)o(e,t,n,a);else for(var i=0,s=e.length;i<s;i++)o(e[i],t,n,a)},e.off=document.off=NodeList.prototype.off=HTMLElement.prototype.off=function(e,t,a){n.off(this,e,t,a)},r}(e.jQuery),n.tagManager=function(){if("undefined"!=typeof riot){var e=[],t=function(t,n){t[0].tagName=n,e.push(t[0])},n=function(){return e},a=function(t,n,a){for(var o=[],i=e.length-1;i>=0;i--)if(e[i].tagName===t){o.push(n);var r=o.concat(a);e[i].trigger.apply(this,r);break}};return{addTag:t,getAll:n,trigger:a}}}(),n.options=function(e){var t=!1;"object"==typeof e.i18n&&null!==e.i18n&&(n.i18n(e.i18n),t=!0),e.navigator.useI18n=t,n.navigator(e.navigator)},n.alert=function(e,t,a,o){return n.dialog().alert(e,t,a,o)},n.confirm=function(e,t,a,o,i){return n.dialog().confirm(e,t,a,o,i)},n.prompt=function(e,t,a,o,i){return n.dialog().prompt(e,t,a,o,i)},n.indicator=function(e,t){return n.dialog().indicator(e,t)},n.updateLocale=function(e){var t="undefined"!=typeof riot;n.i18n().setPreference(e).getAll(function(e){if(t){for(var a=n.tagManager.getAll(),o=a.length-1;o>=0;o--)a[o].i18n=e;riot.update()}else n.i18n().bind()})},e.phonon=n,"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd&&define(function(){return e.phonon=n})}("undefined"!=typeof window?window:this),function(e,t){function n(e){if(f.initCalled)throw new Error("The i18n module has already been instantiated");"string"==typeof e.directory&&(e.directory=e.directory.indexOf("/",e.directory.length-"/".length)!==-1?e.directory:e.directory+"/");var t;for(t in e)f[t]=e[t];f.initCalled=!0}function a(e){if(!f.initCalled)throw new Error("Please, initialize The i18n module using the init method");if("function"!=typeof e)throw new Error("callback must be a function");if(null!==l)return void e(l);var t=new XMLHttpRequest,n=f.localePreferred?f.localePreferred:f.localeFallback;t.open("GET",f.directory+n+".json",!0),t.overrideMimeType&&t.overrideMimeType("application/json; charset=utf-8"),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)l=JSON.parse(t.responseText),e(JSON.parse(t.responseText));else{if(!f.localePreferred)throw new Error("The default locale ["+f.directory+f.localeFallback+".json] file is not found");f.localePreferred=null,console.log("The language ["+n+"] is not available, loading "+f.localeFallback),a(function(t){l=t,e(t)})}},t.send("")}function o(e,t){if("string"!=typeof e&&!(e instanceof Array))throw new Error("key must be a string or an array");var n=e instanceof Array;if(null===l)a(function(a){if(n){for(var o=e.length,i=o-1,r={};i>=0;i--)r[e[i]]=a[e[i]];t(r)}else t(a[e])});else if(n){for(var o=e.length,i=o-1,r={};i>=0;i--)r[e[i]]=l[e[i]];t(r)}else t(l[e])}function i(e,n){var o=e||t,i=n;if(1===arguments.length&&"function"==typeof e&&(o=t,i=e),!u(o))throw new TypeError("Not valid element object "+o);var r=o.querySelectorAll("[data-i18n]");null===l?a(function(e){v(r,e),"function"==typeof i&&i()}):(v(r,l),"function"==typeof i&&i())}function r(e){if("string"!=typeof e)throw new Error("The language must be a string");return f.localePreferred=e,l=null,m}function s(){return f.localePreferred}function c(){return e.navigator.userLanguage||e.navigator.language}var l=null,f={localeFallback:null,localePreferred:e.navigator.userLanguage||e.navigator.language,directory:"./",initCalled:!1},u=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},d=function(e,t){"textContent"in e?e.textContent=t:e.innerText=t},p=function(e,t){e.innerHTML=t},h=function(e,t){e.value=t},g=function(e,t){e.setAttribute("placeholder",t)},v=function(e,t){for(var n=e.length-1;n>=0;n--)for(var a,o=e[n],i=o.getAttribute("data-i18n").trim(),r=/(?:\s|^)(\w+):\s*(.*?)(?=\s+\w+:|$)/g;a=r.exec(i);){var s=a[1].trim(),c=a[2].trim().replace(",","");if(void 0!==t[c])if("text"===s)d(o,t[c]);else if("html"===s)p(o,t[c]);else if("value"===s)h(o,t[c]);else{if("placeholder"!==s)throw new Error("The property: "+s+" is unknown");g(o,t[c])}else console.error("The value: "+c+" does not exist in the JSON file")}},m={};m.init=n,m.getAll=a,m.get=o,m.bind=i,m.setPreference=r,m.getPreference=s,m.getLocale=c,phonon.i18n=function(e){return"object"==typeof e&&n(e),{getAll:function(e){return a(e),this},get:function(e,t){return o(e,t),this},bind:function(e,t){return i(e,t),this},setPreference:function(e){return r(e),this},getPreference:function(){return s()},getLocale:function(){return c()}}}}(window,document),function(e,t,n){function a(e){var t=document.createElement("script");t.text=e,document.head.appendChild(t).parentNode.removeChild(t)}function o(){if(B.animatePages){var e=this;e.classList.remove("page-sliding"),e.classList.remove("left"),e.off(n.event.animationEnd,o,!1),e.classList.remove("app-active")}f(R),u(D),A=!1}function i(){if(B.animatePages){var e=this;e.classList.remove("page-sliding"),e.classList.remove("right"),e.off(n.event.animationEnd,i,!1),e.classList.remove("app-active")}f(R),u(D),A=!1}function r(t,n,a){var o={detail:{page:n},bubbles:!0,cancelable:!0};"undefined"!=typeof a&&(o.detail.req=a);var i=new e.CustomEvent(t,o);document.dispatchEvent(i)}function s(e,t,n){for(var a=0,o=t.length;a<o;a++){var i=t[a];i.event===e&&"function"==typeof i.callback&&i.callback(n)}}function c(e){I&&n.tagManager.trigger(e,"create"),r("pagecreated",e);var t=V(e);t.activity instanceof U&&"function"==typeof t.activity.onCreateCallback&&t.activity.onCreateCallback(),s("create",t.callbackRegistered)}function l(t){var a=V(t);e.setTimeout(function(){I&&n.tagManager.trigger(t,"ready"),r("pageopened",t),a.activity instanceof U&&"function"==typeof a.activity.onReadyCallback&&a.activity.onReadyCallback(),s("ready",a.callbackRegistered)},a.readyDelay)}function f(e){I&&n.tagManager.trigger(e,"transitionend"),r("pagetransitionend",e);var t=V(e);t.activity instanceof U&&"function"==typeof t.activity.onTransitionEndCallback&&t.activity.onTransitionEndCallback(),s("transitionend",t.callbackRegistered)}function u(e){I&&n.tagManager.trigger(e,"hidden"),r("pagehidden",e);var t=V(e);t.activity instanceof U&&"function"==typeof t.activity.onHiddenCallback&&t.activity.onHiddenCallback(),s("hidden",t.callbackRegistered)}function d(e,t){I&&n.tagManager.trigger(e,"tabchanged",t),r("pagetabchanged",e);var a=V(e);a.activity instanceof U&&"function"==typeof a.activity.onTabChangedCallback&&a.activity.onTabChangedCallback(t),s("tabchanged",a.callbackRegistered,t)}function p(t,a,o){function i(){r("pageclosed",t);var n=e.location.hash.split("#")[1];n!==o&&B.useHash?e.location.hash=o:O(o)}if(!w()){var c=V(t);if(!c.async)return void i(!0);var l={close:i};I&&n.tagManager.trigger(t,"close",l),c.activity instanceof U&&"function"==typeof c.activity.onCloseCallback&&c.activity.onCloseCallback(l),s("close",c.callbackRegistered,l)}}function h(e,t){if("undefined"!=typeof t){I&&n.tagManager.trigger(e,"hashchanged",t),r("pagehash",e,t);var a=V(e);a.activity instanceof U&&"function"==typeof a.activity.onHashChangedCallback&&a.activity.onHashChangedCallback(t),s("hashchanged",a.callbackRegistered,t)}}function g(e,t){"tabchanged"===e&&d(t.page,t.tabNumber)}function v(e,o,i){if(I&&t.compile(function(){B.useI18n?n.i18n().getAll(function(a){n.tagManager.addTag(t.mount(e,{i18n:a}),e),o()}):(n.tagManager.addTag(t.mount(e,{i18n:null}),e),o())}),!I){var r=V(e);if(null!==r.content){if(null===r.nocache||null===r.showloader){var s=function(e){var t=_(e);r.nocache=!1,r.showloader=!1,"true"===t.getAttribute("data-nocache")&&(r.nocache=!0),"true"===t.getAttribute("data-loader")&&(r.showloader=!0)};s(e)}r.showloader&&document.body.classList.add("loading"),m(r.content,function(t){r.showloader&&document.body.classList.remove("loading");var i=_(e),s=document.createElement("div");s.innerHTML=t;var c=s.querySelector(e);if(null===c)throw new Error("Error with "+r.content+" : the template for "+e+" must start with the parent node <"+e+' class="app-page">');for(var l=c.attributes,f=l.length-1;f>=0;f--){var u=l.item(f);"class"!==u.nodeName&&"app-page"!==u.nodeValue&&i.setAttribute(u.nodeName,u.nodeValue)}var d=function(e){for(var t=e.getElementsByTagName("script"),n=0;n<t.length;n++)a(t[n].innerHTML)};B.useI18n?n.i18n().bind(c,function(){i.innerHTML=c.innerHTML,d(s),o()}):(i.innerHTML=c.innerHTML,d(s),o())},i)}else o()}}function m(e,t,n){var a=new XMLHttpRequest;a.overrideMimeType&&a.overrideMimeType("text/html; charset=utf-8"),a.onreadystatechange=function(){4===a.readyState&&(200===a.status||!a.status&&a.responseText.length)&&t(a.responseText,B,e)},"string"!=typeof n?(a.open("GET",B.templateRootDirectory+e,!0),a.send("")):(a.open("POST",B.templateRootDirectory+e,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(n))}function y(e,t){t="object"==typeof t?t:{};var n,a={name:e,mounted:!1,async:!1,activity:null,content:null,readyDelay:1,callbackRegistered:[],nocache:null,showloader:null};for(n in t)a[n]=t[n];return a}function b(e,t){t="object"==typeof t?t:{};var n=V(e);if(null===n)return N.push(y(e,t));var a;for(a in t)n[a]=t[a];return!0}function w(){return!("undefined"==typeof n.dialog||!n.dialogUtil.closeActive())||(!("undefined"==typeof n.popover||!n.popoverUtil.closeActive())||(!("undefined"==typeof n.panel||!n.panelUtil.closeActive())||!("undefined"==typeof n.sidePanel||!n.sidePanelUtil.closeActive())))}function E(){var e={page:B.defaultPage,params:""};if(S.length>0){for(var t=-1,n=S.length-1;n>=0;n--)if(S[n].page===R){t=n-1;break}t>-1&&(e=S[t],S.slice(t,1))}return e}function T(t){var n,t=t||e.event,a=t.target,o="";if("object"==typeof a&&"FORM"==a.nodeName){var i;for(i=a.elements.length-1;i>=0;i--)if(n=a.elements[i],n.name&&"file"!=n.type&&"reset"!=n.type)if("select-multiple"==n.type)for(j=a.elements[i].options.length-1;j>=0;j--)n.options[j].selected&&(o+="&"+n.name+"="+encodeURIComponent(n.options[j].value).replace(/%20/g,"+"));else("submit"!=n.type&&"button"!=n.type||t.target==n)&&("checkbox"!=n.type&&"radio"!=n.type||n.checked)&&(o+="&"+n.name+"="+encodeURIComponent(n.value).replace(/%20/g,"+"))}return o.substr(1)}function C(e){X=!0;var t=e.target,n=null,a=!1,o="";if("submit"==e.type){var i=t.getAttribute("action");if(i.match(new RegExp("^#"+B.hashPrefix)))return e.preventDefault(),n=i.substr(1+B.hashPrefix.length),p(R,n,B.hashPrefix+n),x(n,function(){},T(e)),M(i.substr(1+B.hashPrefix.length))}for(;t&&t!==document;t=t.parentNode){var r=t.getAttribute("data-navigation");if("undefined"!=typeof t.href&&t.href.indexOf("#!")!==-1){a=!0;break}if(r){n=r;break}}if((!a||!B.useHash)&&(null!==n||a)){var s=B.defaultPage;if(null!==n)if("$previous-page"===n){var c=E();s=c.page,o=c.params}else s=n;else{var l=t.href.match("/#"+B.hashPrefix+"([A-Za-z0-9-.]+)?(.*)/");l&&(s=l[1],o=l[2])}var f=B.hashPrefix+s;""!==o&&(f=f+"/"+o,f=f.replace("//","/")),p(R,s,f)}}function k(e,t){var a=_(e),r=_(t);r.classList.add("app-active"),B.animatePages?(a.classList.add("page-sliding"),H?(a.classList.add("left"),a.on(n.event.animationEnd,o,!1)):(a.classList.add("right"),a.on(n.event.animationEnd,i,!1))):(a.classList.remove("app-active"),H?o():i());for(var s=r.querySelectorAll(".content"),c=s.length-1;c>=0;c--){var l=s[c];null!==l&&0!==l.scrollTop&&(l.scrollTop=0)}t===B.defaultPage&&(S=[])}function x(e,t,a){if(A&&"function"==typeof t)return t();var o=V(e);W&&(A=!0,D=R,R=e),!o.mounted||o.nocache?v(o.name,function(){if(o.mounted=!0,c(e),l(e),W||n.dispatchGlobalReady(),W&&k(D,e),!W){W=!0;var a=_(e);a.classList.contains("app-active")||a.classList.add("app-active")}"function"==typeof t&&t()},a):(l(e),k(D,e),"function"==typeof t&&t())}function L(e){"string"==typeof e.templateRootDirectory&&""!==e.templateRootDirectory&&(e.templateRootDirectory=e.templateRootDirectory.indexOf("/",e.templateRootDirectory.length-"/".length)!==-1?e.templateRootDirectory:e.templateRootDirectory+"/"),"object"==typeof e.hashPrefix&&(e.hashPrefix="");var t;for(t in e)B[t]=e[t];B.enableBrowserBackButton&&(X=!0);for(var n=document.querySelectorAll("[data-page]"),a=n.length-1;a>=0;a--){var o=n[a];o.classList.contains("app-page")||o.classList.add("app-page"),b(o.tagName.toLowerCase())}}function P(){if(W)throw new Error("The app has been already started");var e=n.device.os.toLowerCase(),t="web";"android"===e?t="android":"ios"===e&&(t="ios"),document.body.classList.contains(t)||document.body.classList.add(t),O()}function M(t,n){var a=V(R),o=V(t);if(!o)throw new Error("The following page: "+t+" does not exists");var i="string"==typeof n?B.hashPrefix+o.name+"/"+n:B.hashPrefix+o.name;if(a.async)p(R,o.name,i);else{var r=e.location.hash.split("/");r[0].indexOf(o.name)===-1&&B.useHash&&(e.location.hash=i)}}function O(t,n){var a,o="string"==typeof t?t:e.location.href.split("#")[1]||"",i=o.split("/"),r=i.slice(1,i.length),s=i[0],c=B.hashPrefix.indexOf("/");c!==-1?(s="undefined"==typeof i[1]?"":i[1],r=i.slice(2,i.length),a=s.substring(c+1,s.length)):a=s.substring(B.hashPrefix.length,s.length);var l=V(a);if(W||l)!W&&l&&(R=l.name);else if(R=B.defaultPage,l=V(B.defaultPage),B.useHash)return void(e.location.hash=B.hashPrefix+B.defaultPage);if(l){if(w(),l.name===R&&W)return void h(l.name,r);if(W&&!X)return;for(var f=!1,u=S.length-1;u>=0;u--)if(S[u].page===l.name){f=!0;break}if(S.length>0?l.name===B.defaultPage&&(H=!1):H=!0,S.length>1&&S[S.length-2].page===l.name&&(H=!1),!f){var d=r.join("/");S.push({page:l.name,params:d})}"function"!=typeof l.callback||l.mounted||l.callback(l.activity),l.mounted?(x(l.name,null,n),h(l.name,r)):x(l.name,function(){h(l.name,r)},n),B.enableBrowserBackButton||(X=!1)}}var N=[],S=[],W=!1,A=!1,R=null,D=null,H=!0,X=!1,I=void 0!==t,B={defaultPage:null,hashPrefix:"!",animatePages:!0,templateRootDirectory:"",useI18n:!0,enableBrowserBackButton:!1,useHash:!0},U=function(){function e(e){if("object"==typeof e){var t;for(t in e)void 0!==this[t]&&"constructor"!==this[t]&&(this[t+"Callback"]=e[t])}}return e.prototype.onCreate=function(e){this.onCreateCallback=e},e.prototype.onReady=function(e){this.onReadyCallback=e},e.prototype.onClose=function(e){this.onCloseCallback=function(t){e(t)}},e.prototype.onHidden=function(e){this.onHiddenCallback=e},e.prototype.onTransitionEnd=function(e){this.onTransitionEndCallback=e},e.prototype.onHashChanged=function(e){this.onHashChangedCallback=function(t){e.apply(this,t)}},e.prototype.onTabChanged=function(e){this.onTabChangedCallback=function(t){e(t)}},e}(),V=function(e){for(var t=N.length-1;t>=0;t--)if(N[t].name===e)return N[t];return null},_=function(e){for(var t=document.querySelectorAll("[data-page]"),n=t.length-1,a=null;n>=0;n--)if(t[n].tagName.toLowerCase()===e){a=t[n];break}return a};document.on("tap",C),document.on("submit",C),B.useHash&&e.addEventListener("hashchange",O),document.on("backbutton",function(){var e=E();p(R,e.page,B.hashPrefix+e.page+"/"+e.params)}),n.navigator=function(t){return"object"==typeof t&&L(t),{currentPage:R,previousPage:D,start:P,changePage:function(t,n){X=!0;var a=w()?400:1;e.setTimeout(function(){M(t,n)},a)},on:function(e,t){if("string"!=typeof e.page)throw new Error("Page name must be a string");if("undefined"!=typeof e.preventClose&&"boolean"!=typeof e.preventClose)throw new Error("preventClose option must be a boolean");if("undefined"!=typeof e.readyDelay&&"number"!=typeof e.readyDelay)throw new Error("readyDelay option must be a number");var n=V(e.page),a=null!==n;a||(n=y(e.page)),"function"==typeof t||"object"==typeof t?n.activity=new U(t):n.activity=null,n.callback=t,n.async="boolean"==typeof e.preventClose&&e.preventClose,n.content="string"==typeof e.content?e.content:null,n.readyDelay="number"==typeof e.readyDelay?e.readyDelay:1,b(e.page.toLowerCase(),n)},onPage:function(e){if("string"!=typeof e)throw new Error("PageName must be a string");return b(e,{}),{addEvent:function(t,n){var a=V(e);a.callbackRegistered.push({event:t,callback:n})}}},callCallback:g}}}("undefined"!=typeof window?window:this,"undefined"!=typeof riot?riot:void 0,phonon);