"use strict";function objectToString(e){return Object.prototype.toString.call(e)}function clone(e,t){function r(e,t,n,f){var c;if("object"==typeof e){if(null==e)return e;for(c in i)if(i[c]===e)return u.push({resolveTo:c,child:n,i:f}),null;if(i[t]=e,util.isArray(e)){n=[];for(c in e)n[c]=r(e[c],t+"["+c+"]",n,c)}else if(util.isDate(e))n=new Date(e.getTime());else if(util.isRegExp(e))n=new RegExp(e.source,util.getRegExpFlags(e)),e.lastIndex&&(n.lastIndex=e.lastIndex);else if(o&&Buffer.isBuffer(e))n=new Buffer(e.length),e.copy(n);else{n={},n.__proto__=e.__proto__;for(c in e)n[c]=r(e[c],t+"["+c+"]",n,c)}l[t]=n}else n=e;return n}void 0===t&&(t=!0);var n,o="undefined"!=typeof Buffer,i={},l={},u=[];if(t){var f=r(e,"*");for(n in u){var c=u[n];c&&c.child&&c.i in c.child&&(c.child[c.i]=l[c.resolveTo])}return f}var s;if("object"==typeof e){if(null==e)return e;if("Array"===e.constructor.name){s=[];for(n in e)s[n]=clone(e[n],t)}else if(util.isDate(e))s=new Date(e.getTime());else if(util.isRegExp(e))s=new RegExp(e.source,util.getRegExpFlags(e)),e.lastIndex&&(s.lastIndex=e.lastIndex);else{s={},s.__proto__=e.__proto__;for(n in e)s[n]=clone(e[n],t)}}else s=e;return s}var util={isArray:function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===objectToString(e)},isDate:function(e){return"object"==typeof e&&"[object Date]"===objectToString(e)},isRegExp:function(e){return"object"==typeof e&&"[object RegExp]"===objectToString(e)},getRegExpFlags:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}};module.exports=clone,clone.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t};