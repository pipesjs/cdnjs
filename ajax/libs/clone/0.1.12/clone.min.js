"use strict";function objectToString(e){return Object.prototype.toString.call(e)}function clone(e,t,r){function o(e,t,r,n){var c;if("object"==typeof e){if(null==e)return e;for(c in l)if(l[c]===e)return f.push({resolveTo:c,child:r,i:n}),null;if(l[t]=e,util.isArray(e)){r=[];for(c in e)r[c]=o(e[c],t+"["+c+"]",r,c)}else if(util.isDate(e))r=new Date(e.getTime());else if(util.isRegExp(e))r=new RegExp(e.source,util.getRegExpFlags(e)),e.lastIndex&&(r.lastIndex=e.lastIndex);else if(i&&Buffer.isBuffer(e))r=new Buffer(e.length),e.copy(r);else{r={},r.__proto__=e.__proto__;for(c in e)r[c]=o(e[c],t+"["+c+"]",r,c)}u[t]=r}else r=e;return r}if(void 0===t&&(t=!0),void 0===r&&(r=1/0),0===r)return e;var n,i="undefined"!=typeof Buffer,l={},u={},f=[];if(t){var c=o(e,"*");for(n in f){var s=f[n];s&&s.child&&s.i in s.child&&(s.child[s.i]=u[s.resolveTo])}return c}var a;if("object"==typeof e){if(null==e)return e;if("Array"===e.constructor.name){a=[];for(n in e)a[n]=clone(e[n],t,r-1)}else if(util.isDate(e))a=new Date(e.getTime());else if(util.isRegExp(e))a=new RegExp(e.source,util.getRegExpFlags(e)),e.lastIndex&&(a.lastIndex=e.lastIndex);else{a={},a.__proto__=e.__proto__;for(n in e)a[n]=clone(e[n],t,r-1)}}else a=e;return a}var util={isArray:function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===objectToString(e)},isDate:function(e){return"object"==typeof e&&"[object Date]"===objectToString(e)},isRegExp:function(e){return"object"==typeof e&&"[object RegExp]"===objectToString(e)},getRegExpFlags:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}};"object"==typeof module&&(module.exports=clone),clone.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t};