function clone(e,n){function o(e,n,l,s){if("object"==typeof e){if(null==e)return e;for(i in r)if(r[i]===e)return f.push({resolveTo:i,child:l,i:s}),null;if(r[n]=e,e instanceof Array){l=[];for(i in e)l[i]=o(e[i],n+"["+i+"]",l,i)}else if(e instanceof Date)l=new Date(e.getTime());else if(e instanceof RegExp)l=new RegExp(e.source);else{l={},l.__proto__=e.__proto__;for(i in e)l[i]=o(e[i],n+"["+i+"]",l,i)}t[n]=l}else l=e;return l}if(void 0==n&&(n=!0),n){var r={},t={},f=[],l=o(e,"*");for(i in f){var s=f[i];s.child[s.i]=t[s.resolveTo]}return l}var c;if("object"==typeof e){if(null==e)return e;if(e instanceof Array){c=[];for(i in e)c[i]=clone(e[i],n)}else if(e instanceof Date)c=new Date(e.getTime());else if(e instanceof RegExp)c=new RegExp(e.source);else{c={},c.__proto__=e.__proto__;for(i in e)c[i]=clone(e[i],n)}}else c=e;return c}module.exports=clone;