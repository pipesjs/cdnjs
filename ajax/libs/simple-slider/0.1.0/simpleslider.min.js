!function(context,definition){"use strict";"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof define&&define.amd?define(definition):window.SimpleSlider=definition()}(this,function(){"use strict";function getdef(val,def){return void 0===val||null===val?def:val}function getUnit(args){for(var item,count=args.length,unit="";--count>=0;)item=args[count],"string"==typeof item&&(unit=item.replace(parseInt(item,10)+"",""));return unit}function testChildrenNum(value){if(0>=value){try{console.warn("A SimpleSlider main container elementshould have at least one child.")}catch(e){}return!0}return!1}function anim(target,prop,unit,transitionDuration,startTime,elapsedTime,fromValue,toValue,zIndex){function loop(){window.requestAnimationFrame(function(time){0===startTime&&(startTime=time),anim(target,prop,unit,transitionDuration,startTime,time,fromValue,toValue,zIndex)})}var percentual;if(0===startTime)return loop();if(percentual=(elapsedTime-startTime)/transitionDuration,1>percentual){var diffVal=toValue-fromValue;target[prop]=fromValue+percentual*diffVal+unit,loop()}else target[prop]=toValue+unit,target.zIndex=zIndex}Date.now||(Date.now=function(){return(new Date).getTime()});for(var vendors=["webkit","moz"],i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vp+"CancelAnimationFrame"]||window[vp+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(callback){var now=Date.now(),nextTime=Math.max(lastTime+16,now);return setTimeout(function(){callback(lastTime=nextTime)},nextTime-now)},window.cancelAnimationFrame=clearTimeout}var SimpleSlider=function(containerElem,options){this.containerElem=containerElem,this.interval=0,options||(options={}),this.trProp=getdef(options.transitionProperty,"opacity"),this.trTime=getdef(options.transitionDuration,.5),this.delay=getdef(options.transitionDelay,2),this.unit=getUnit([options.startValue,options.visibleValue,options.endValue]),this.startVal=parseInt(getdef(options.startValue,0),10),this.visVal=parseInt(getdef(options.visibleValue,1),10),this.endVal=parseInt(getdef(options.endValue,0),10),this.autoPlay=getdef(options.autoPlay,!0),this.init()};return SimpleSlider.prototype.init=function(){this.reset(),this.configSlideshow()},SimpleSlider.prototype.reset=function(){if(!testChildrenNum(this.containerElem.children.length)){var i=this.containerElem.children.length-1;for(this.imgs=[];i>=0;)this.imgs[i]=this.containerElem.children[i],this.imgs[i].style[this.trProp]=this.startVal+this.unit,this.imgs[i].style.zIndex=0,i--;this.imgs[0].style[this.trProp]=this.visVal+this.unit,this.imgs[0].style.zIndex=1,this.actualIndex=0}},SimpleSlider.prototype.configSlideshow=function(){if(this.imgs&&this.autoPlay){var scope=this;this.interval?window.clearInterval(this.interval):this.interval=window.setInterval(function(){scope.change(scope.nextIndex())},1e3*this.delay)}},SimpleSlider.prototype.startAnim=function(target,fromValue,toValue,zIndex){anim(target.style,this.trProp,this.unit,1e3*this.trTime,0,0,fromValue,toValue,zIndex)},SimpleSlider.prototype.remove=function(index){this.imgs[index].style.zIndex=3,this.startAnim(this.imgs[index],this.visVal,this.endVal,1)},SimpleSlider.prototype.insert=function(index){this.imgs[index].style.zIndex=4,this.startAnim(this.imgs[index],this.startVal,this.visVal,2)},SimpleSlider.prototype.change=function(newIndex){this.remove(this.actualIndex),this.insert(newIndex),this.actualIndex=newIndex},SimpleSlider.prototype.nextIndex=function(){var newIndex=this.actualIndex+1;return newIndex>=this.imgs.length&&(newIndex=0),newIndex},SimpleSlider.prototype.dispose=function(){window.clearInterval(this.interval);for(var i=this.imgs.length;--i>=0;)this.imgs.pop();this.imgs=null,this.containerElem=null,this.interval=null,this.trProp=null,this.trTime=null,this.delay=null,this.startVal=null,this.endVal=null,this.autoPlay=null,this.actualIndex=null},SimpleSlider});