!function(e){function t(t,a){var o=this;o.settings=e.extend(n,a),o.element=t,o.inTap=!1,o.inDrag=!1,o.tapStart=null,o.dragStart=null,o.timerTap=null,o.timerTapAndHold=null,o.x=null,o.y=null,o.ex=null,o.ey=null,o.taps=0,o.init()}var n={useTapAndHold:!1,useMouse:!0,dragThreshold:10,swipeThreshold:30,tapLimit:2,tapDelay:250,tapAndHoldDelay:1e3};t.prototype.init=function(){var e=this;e.element.on("touchstart",function(t){t.preventDefault(),e.doStart(t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY)}).on("touchmove",function(t){t.preventDefault(),e.doMove(t.originalEvent.changedTouches[0].pageX,t.originalEvent.changedTouches[0].pageY)}).on("touchend",function(t){t.preventDefault(),e.doEnd(t.originalEvent.changedTouches[0].pageX,t.originalEvent.changedTouches[0].pageY)}),e.settings.useMouse&&(e.mouseDown=!1,e.element.on("mousedown",function(t){t.preventDefault(),e.mouseDown=!0,e.doStart(t.pageX,t.pageY)}).on("mousemove",function(t){e.mouseDown&&(t.preventDefault(),e.doMove(t.pageX,t.pageY))}).on("mouseup mouseleave",function(t){t.preventDefault(),e.mouseDown=!1,e.doEnd(t.pageX,t.pageY)}))},t.prototype.cancel=function(){var e=this;e.taps=0,e.inTap=!1,e.inDrag=!1,e.tapStart=null,e.dragStart=null},t.prototype.doStart=function(e,t){var n=this,a=n.element.offset();n.x=e,n.y=t,n.ex=e-a.left,n.ey=t-a.top,n.tapStart=Date.now(),window.clearTimeout(n.timerTap),n.timerTap=window.setTimeout(function(){n.inTap&&n.taps>0&&(n.element.trigger(2==n.taps?"doubleTap":"tap",{taps:n.taps,x:n.x,y:n.y,ex:n.ex,ey:n.ey,duration:Date.now()-n.tapStart}),n.cancel()),n.timerTap=null},n.settings.tapDelay),window.clearTimeout(n.timerTapAndHold),n.timerTapAndHold=window.setTimeout(function(){n.settings.useTapAndHold&&n.inTap&&(n.element.trigger("tapAndHold",{x:n.x,y:n.y,ex:n.ex,ey:n.ey,duration:Date.now()-n.tapStart}),n.cancel()),n.timerTapAndHold=null},n.settings.tapAndHoldDelay),n.inTap=!0},t.prototype.doMove=function(e,t){var n=this,a=n.element.offset(),o=(Math.abs(n.x-e)+Math.abs(n.y-t))/2;n.inDrag?n.element.trigger("drag",{x:e,y:t,ex:e-a.left,ey:t-a.top}):o>n.settings.dragThreshold&&(n.cancel(),n.inDrag=!0,n.dragStart=Date.now(),n.element.trigger("dragStart",{x:e,y:t,ex:e-a.left,ey:t-a.top}))},t.prototype.doEnd=function(e,t){var n,a,o,i=this,r=i.element.offset(),l=Math.abs(i.x-e),s=Math.abs(i.y-t);i.inTap?(i.taps++,(!i.timerTap||i.taps>=i.settings.tapLimit)&&(i.element.trigger(2==i.taps?"doubleTap":"tap",{taps:i.taps,x:i.x,y:i.y,ex:i.ex,ey:i.ey,duration:Date.now()-i.tapStart}),i.cancel())):i.inDrag&&(o=Date.now()-i.dragStart,n=Math.sqrt(Math.pow(Math.abs(i.x-e),2)+Math.pow(Math.abs(i.y-t),2)),a=n/o,i.element.trigger("dragEnd",{start:{x:i.x,y:i.y,ex:i.ex,ey:i.ey},end:{x:e,y:t,ex:e-r.left,ey:t-r.top},distance:n,duration:o,velocity:a}),(l>i.settings.swipeThreshold||s>i.settings.swipeThreshold)&&(i.element.trigger("swipe",{distance:n,duration:o,velocity:a}),l>s?(a=l/o,e<i.x?i.element.trigger("swipeLeft",{distance:l,duration:o,velocity:a}):i.element.trigger("swipeRight",{distance:l,duration:o,velocity:a})):s>l&&(a=s/o,t<i.y?i.element.trigger("swipeUp",{distance:s,duration:o,velocity:a}):i.element.trigger("swipeDown",{distance:s,duration:o,velocity:a}))),i.inDrag=!1)},e.fn.enableTouch=function(n){if(this.length>1)for(var a=0;a<this.length;a++)e(this[a]).enableTouch();var o=e(this);new t(o,n);return o}}(jQuery);