!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof module&&module.exports?module.exports=e():t.Embedo=window.Embedo=e()}(this,function(){"use strict";function t(t){return this.options=t||{},this.init(this.options),this}function e(t){var e=document.createElement("script");return e.type="text/javascript",e.src=encodeURI(t),e.setAttribute("async",""),e.setAttribute("charset","utf-8"),e}function o(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}}function i(e){var o=/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;if(o.test(e))return e.match(t.defaults.FACEBOOK.REGEX)?"facebook":e.match(t.defaults.TWITTER.REGEX)?"twitter":e.match(t.defaults.INSTAGRAM.REGEX)?"instagram":e.match(t.defaults.YOUTUBE.REGEX)?"youtube":void 0}function n(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&e.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e.join("&")}function r(t,e){function o(){if(i++,!(i>n))if("facebook"===t){if(window.FB)return e();setTimeout(o,100)}else if("twitter"===t){if(window.twttr)return e();setTimeout(o,100)}else if("instagram"===t){if(window.instgrm)return e();setTimeout(o,100)}}var i=0,n=10;o()}function a(t,e,o){"function"==typeof e&&(o=e,e={}),e=e||{};var i="jsonp_callback_"+Math.round(1e5*Math.random());window[i]=function(t){delete window[i],document.body.removeChild(n),o(null,t)};var n=document.createElement("script");n.type="application/javascript",n.async=!0,n.src=t+(t.indexOf("?")>=0?"&":"?")+"callback="+i,document.body.appendChild(n)}function d(t,e){var o=document.createElement("div");return o.setAttribute("data-embed",t),o.innerHTML=e,o}function s(t,e){e=e||{};var o,i,n,r=e.frame?t.querySelectorAll(e.frame)[0]:t.querySelectorAll("[data-embed]")[0];if(r){var a=parseInt(e.width||t.style.width||t.offsetWidth),d=parseInt(e.height||t.style.height||t.offsetHeight),s=parseInt(r.style.maxWidth||r.style.width||r.offsetWidth),f=parseInt(r.style.maxHeight||r.style.height||r.offsetHeight);if(e.frame||(s=r.firstChild.offsetWidth,f=r.firstChild.offsetHeight),o=(a-s)/2,i=(d-f)/2,n="translate("+o+"px,"+i+"px)",e.scale&&r.offsetHeight>d){var c=d/r.offsetHeight;n+=" scale("+c+")"}r.style.webkitTransform=n,r.style.MozTransform=n,r.style.msTransform=n,r.style.OTransform=n,r.style.transform=n}}return t.defaults={FACEBOOK:{SDK:"https://connect.facebook.net/en_US/sdk.js",oEmbed:"https://www.facebook.com/plugins/post/oembed.json",REGEX:/^http[s]*:\/\/[www.]*facebook\.com.*/i},TWITTER:{SDK:"https://platform.twitter.com/widgets.js",oEmbed:"https://publish.twitter.com/oembed",REGEX:/^http[s]*:\/\/[www.]*twitter\.com.*/i},INSTAGRAM:{SDK:"https://platform.instagram.com/en_US/embeds.js",oEmbed:"https://api.instagram.com/oembed",REGEX:/^http[s]*:\/\/[www.]*instagram\.com.*/i},YOUTUBE:{SDK:null,oEmbed:"https://www.youtube.com/embed/",REGEX:/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/}},t.prototype={facebook:function(e,o,i){var f=t.defaults.FACEBOOK.oEmbed,c={url:encodeURI(o),omitscript:!0};i.width&&parseInt(i.width)>0&&(c.maxwidth=i.width),f+="?"+n(c),a(f,function(t,o){t||(e.appendChild(d("facebook",o.html)),r("facebook",function(){window.FB.XFBML.parse(e)}),e.addEventListener("DOMSubtreeModified",function(){s(e,{scale:!0,frame:"fb_iframe_widget"})}))})},twitter:function(e,o,i){var f=t.defaults.TWITTER.oEmbed,c={url:encodeURI(o),omit_script:1};i.width&&parseInt(i.width)>0&&(c.maxwidth=i.width),f+="?"+n(c),a(f,function(t,o){t||(e.appendChild(d("twitter",o.html)),r("twitter",function(){window.twttr.widgets.load(e)}),e.addEventListener("DOMSubtreeModified",function(){s(e,{scale:!0})}),s(e,{scale:!0}))})},instagram:function(e,o,i){var f=t.defaults.INSTAGRAM.oEmbed,c={url:encodeURI(o),omitscript:!0,hidecaption:!0};i.width&&parseInt(i.width)>0&&(c.maxwidth=i.width),f+="?"+n(c),a(f,function(t,o){t||(e.appendChild(d("instagram",o.html)),r("instagram",function(){window.instgrm.Embeds.process()}),e.addEventListener("DOMSubtreeModified",function(){s(e,{scale:!0,frame:"iframe"})}))})},youtube:function(e,o,i){function r(t){var e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,o=t.match(e);return!(!o||11!=o[7].length)&&o[7]}var a=t.defaults.YOUTUBE.oEmbed,s="",f={url:encodeURI(o),modestbranding:1,autohide:1,showinfo:0,controls:0},c=i.width&&parseInt(i.width||0)>10?i.width:600,u=i.height&&parseInt(i.height||0)>10?i.height:400;r(o)&&(a+=s+"?"+n(f),e.appendChild(d("youtube",'<iframe src="'+a+'" width="'+c+'" height="'+u+'"frameborder="0" allowtransparency="true"></iframe>')))}},t.prototype.init=function(o){document.body.appendChild(e(t.defaults.FACEBOOK.SDK)),document.body.appendChild(e(t.defaults.TWITTER.SDK)),document.body.appendChild(e(t.defaults.INSTAGRAM.SDK)),r("facebook",function(){window.FB.init({appId:"771604066204777",xfbml:!0,cookie:!0,version:"v2.7"})})},t.prototype.load=function(t,e,n){if(n=n||{},t&&o(t)){var r=i(e);r&&this[r](t,e,n)}},t});