!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.format={})}(this,function(t){"use strict";function n(t){if(!(n=h.exec(t)))throw new Error("invalid format: "+t);var n,r=n[1]||" ",e=n[2]||">",i=n[3]||"-",o=n[4]||"",a=!!n[5],s=n[6]&&+n[6],u=!!n[7],c=n[8]&&+n[8].slice(1),l=n[9]||"";"n"===l?(u=!0,l="g"):f[l]||(l=""),(a||"0"===r&&"="===e)&&(a=!0,r="0",e="="),this.fill=r,this.align=e,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=l}function r(t){return t}var e,i=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],o=function(t,n){if((r=(t=t.toExponential(n&&n-1)).indexOf("e"))<0)return null;var r,e=t.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+t.slice(r+1)]},a=function(t){return t=o(Math.abs(t)),t?t[1]:0/0},s=function(t,n){var r=o(t,n);if(!r)return t+"";var i=r[0],a=r[1],s=a-(e=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=i.length;return s===u?i:s>u?i+new Array(s-u+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+o(t,n+s-1)[0]},u=function(t,n){var r=o(t,n);if(!r)return t+"";var e=r[0],i=r[1];return 0>i?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")},c=function(t,n){t=t.toPrecision(n);t:for(var r,e=t.length,i=1,o=-1;e>i;++i)switch(t[i]){case".":o=r=i;break;case"0":0===o&&(o=i),r=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(r+1):t},f={"":c,"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},d:function(t){return t.toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return t.toString(8)},p:function(t,n){return u(100*t,n)},r:u,s:s,X:function(t){return t.toString(16).toUpperCase()},x:function(t){return t.toString(16)}},h=/^(?:(.)?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":0|this.width)+(this.comma?",":"")+(null==this.precision?"":"."+(0|this.precision))+this.type};var l=function(t){return new n(t)},m=function(t,n){return function(r,e){for(var i=r.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(r.substring(i-=s,i+s)),!((u+=s+1)>e));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}},g=function(t){function n(t){t=l(t);var n=t.fill,r=t.align,o=t.sign,a=t.symbol,h=t.zero,m=t.width,g=t.comma,p=t.precision,d=t.type,x="$"===a?u[0]:"#"===a&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",M="$"===a?u[1]:/[%p]/.test(d)?"%":"",v=f[d],y=/[bcdoxX]/.test(d),b=!d||/[deg]/.test(d),w=b||/[fprs%]/.test(d);return p=null==p?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),function(t){if(t=+t,y&&t%1)return"";var a=(0>t||0>1/t?(t*=-1,"-"):"-"===o?"":o)+x;t=v(t,p);var u=M+("s"===d?i[8+e/3]:"");if(w){var f=t.indexOf(".");f>=0?(u=c+t.slice(f+1)+u,t=t.slice(0,f)):b&&(f=t.indexOf("e"),f>=0&&(u=t.slice(f)+u,t=t.slice(0,f)))}g&&!h&&(t=s(t,1/0));var l=a.length+t.length+u.length,S=m>l?new Array(m-l+1).join(n):"";switch(g&&h&&(t=s(S+t,S.length?m-u.length:1/0),S=""),r){case"<":return a+t+u+S;case"=":return a+S+t+u;case"^":return S.slice(0,l=S.length>>1)+a+t+u+S.slice(l)}return S+a+t+u}}function o(t,r){var e=n((t=l(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(a(r)/3))),s=Math.pow(10,-o),u=i[8+o/3];return function(t){return e(s*t)+u}}var s=t.grouping&&t.thousands?m(t.grouping,t.thousands):r,u=t.currency,c=t.decimal;return{format:n,formatPrefix:o}},p=g({decimal:".",thousands:",",grouping:[3],currency:["$",""]});t.format=p.format,t.formatPrefix=p.formatPrefix;var d=function(t,n){return Math.max(0,a(Math.abs(n))-a(Math.abs(t)))+1},x=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(n)/3)))-a(Math.abs(t)))},M=function(t){return Math.max(0,-a(Math.abs(t)))};t.formatSpecifier=l,t.localeFormat=g,t.precisionFixed=M,t.precisionPrefix=x,t.precisionRound=d});