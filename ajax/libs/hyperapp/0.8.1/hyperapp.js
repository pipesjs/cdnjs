!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.hyperapp=e.hyperapp||{})}(this,function(e){"use strict";var t=function(e,t){for(var n,r,a,o=[],i=[],u=arguments.length;u-- >2;)o.push(arguments[u]);for(;o.length;)if(Array.isArray(n=o.pop()))for(u=n.length;u--;)o.push(n[u]);else null!=n&&n!==!0&&n!==!1&&(u=i.length,"number"==typeof n&&(n+=""),r="string"==typeof n,r&&a?i[u-1]+=n:(i[u]=n,a=r));return"string"==typeof e?{tag:e,data:t||{},children:i}:e(t,i)},n=function(e){function t(e,n,i){Object.keys(n||[]).map(function(u){var f=n[u],l=i?i+"."+u:u;"function"==typeof f?e[u]=function(e){var t=f(v,r("action",{name:l,data:e}).data,g,r);return null==t||"function"==typeof t.then?t:void a(v=o(v,r("update",t)),h)}:t(e[u]||(e[u]={}),f,l)})}function n(){a(v,h),r("loaded",r)}function r(e,t){return(y[e]||[]).map(function(e){var n=e(v,g,t,r);null!=n&&(t=n)}),t}function a(t,n){p=d(e.root||(e.root=document.body),p,s,s=r("render",n)(t,g))}function o(e,t){var n={};if("object"!=typeof t||Array.isArray(t))return t;for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function i(e,t){if("string"==typeof e)var n=document.createTextNode(e);else{for(var n=(t=t||"svg"===e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag),r=0;r<e.children.length;)n.appendChild(i(e.children[r++],t));for(var a in e.data)"onCreate"===a?e.data[a](n):u(n,a,e.data[a])}return n}function u(e,t,n,r){if("key"===t);else if("style"===(t=t.toLowerCase()))for(var a in o(r,n=n||{}))e.style[a]=n[a]||"";else{try{e[t]=n}catch(e){}"function"!=typeof n&&(n?e.setAttribute(t,n):e.removeAttribute(t))}}function f(e,t,n){for(var r in o(t,n)){var a=n[r],i=t[r];"onUpdate"===r?a(e):a===i&&a===e[r]||u(e,r,a,i)}}function l(e){if(e&&(e=e.data))return e.key}function c(e,t,n){n.data.onRemove&&n.data.onRemove(t),e.removeChild(t)}function d(e,t,n,r){if(null==n)t=e.insertBefore(i(r),t);else if(r.tag&&r.tag===n.tag){f(t,n.data,r.data);for(var a=r.children.length,o=n.children.length,u={},s=[],p={},v=0;v<o;v++){var h=t.childNodes[v];s[v]=h;var g=n.children[v],y=l(g);null!=y&&(u[y]=[h,g])}for(var v=0,m=0;m<a;){var h=s[v],g=n.children[v],b=r.children[m],y=l(g);if(p[y])v++;else{var w=l(b),A=u[w],C=0,k=0;A&&(C=A[0],k=A[1]),null==y&&null==w?(d(t,h,g,b),m++,v++):null==y&&null!=w?(C?(t.insertBefore(C,h),d(t,C,k,b)):d(t,h,null,b),m++,p[w]=b):null!=y&&null==w?v++:(y===w?(d(t,C,k,b),v++):C?(t.insertBefore(C,h),d(t,C,k,b)):d(t,h,null,b),m++,p[w]=b)}}for(;v<o;){var g=n.children[v],y=l(g);null==y&&c(t,s[v],g),v++}for(var v in u){var A=u[v],k=A[1];p[k.data.key]||c(t,A[0],k)}}else if(r!==n){var v=t;e.replaceChild(t=i(r),v)}return t}for(var s,p,v={},h=e.view,g={},y={},m=-1,b=e.plugins||[];m<b.length;m++){var w=b[m]?b[m](e):e;null!=w.state&&(v=o(v,w.state)),t(g,w.actions),Object.keys(w.events||[]).map(function(e){y[e]=(y[e]||[]).concat(w.events[e])})}"l"!==document.readyState[0]?n():addEventListener("DOMContentLoaded",n)},r=function(e){function t(t,n){var r,a={};for(var o in e.view){var i=[];r||"*"===o||t.replace(new RegExp("^"+o.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(e,t){return i.push(t),"([-A-Za-z0-9_]+)"})+"/?$","g"),function(){for(var e=1;e<arguments.length-2;)a[i.shift()]=arguments[e++];r=o})}return n("route",{match:r||"*",params:a})}return{actions:{router:{match:function(e,n,r,a){return{router:t(n,a)}},go:function(e,t,n){history.pushState({},"",t),n.router.match(t)}}},events:{loaded:function(e,t){addEventListener("popstate",function(){t.router.match(location.pathname)})},render:function(e,n,r,a){return r[(e.router||(e.router=t(location.pathname,a))).match]}}}};e.h=t,e.app=n,e.Router=r});
//# sourceMappingURL=hyperapp.js.map
