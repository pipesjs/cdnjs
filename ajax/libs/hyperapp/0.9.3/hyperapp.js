!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.hyperapp=e.hyperapp||{})}(this,function(e){"use strict";var t=function(e,t){for(var n,r=[],a=[],o=arguments.length;o-- >2;)r[r.length]=arguments[o];for(;r.length;)if(Array.isArray(n=r.pop()))for(o=n.length;o--;)r[r.length]=n[o];else null!=n&&!0!==n&&!1!==n&&("number"==typeof n&&(n+=""),a[a.length]=n);return"string"==typeof e?{tag:e,data:t||{},children:a}:e(t,a)},n=function(e){function t(e,n,i){Object.keys(n||[]).map(function(u){var c=n[u],f=i?i+"."+u:u;"function"==typeof c?e[u]=function(e){var t=c(h,g,r("action",{name:f,data:e}).data,r);if(null==t||"function"==typeof t.then)return t;a(h=o(h,r("update",t)),v)}:t(e[u]||(e[u]={}),c,f)})}function n(){a(h,v),r("loaded")}function r(e,t){return(m[e]||[]).map(function(e){var n=e(h,g,t,r);null!=n&&(t=n)}),t}function a(t,n){p=d(e.root||(e.root=document.body),p,s,s=r("render",n)(t,g))}function o(e,t){var n={};if("object"!=typeof t||Array.isArray(t))return t;for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function i(e,t){if("string"==typeof e)n=document.createTextNode(e);else{for(var n=(t=t||"svg"===e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag):document.createElement(e.tag),r=0;r<e.children.length;)n.appendChild(i(e.children[r++],t));for(var r in e.data)"oncreate"===r?e.data[r](n):u(n,r,e.data[r])}return n}function u(e,t,n,r){if("key"===t);else if("style"===t)for(var a in o(r,n=n||{}))e.style[a]=n[a]||"";else{try{e[t]=n}catch(e){}"function"!=typeof n&&(n?e.setAttribute(t,n):e.removeAttribute(t))}}function c(e,t,n){for(var r in o(t,n)){var a=n[r],i="value"===r||"checked"===r?e[r]:t[r];"onupdate"===r&&a?a(e):a!==i&&u(e,r,a,i)}}function f(e){if(e&&(e=e.data))return e.key}function l(e,t,n){function r(){e.removeChild(t)}(n.data&&n.data.onremove||r)(t,r)}function d(e,t,n,r){if(null==n)t=e.insertBefore(i(r),t);else if(r.tag&&r.tag===n.tag){c(t,n.data,r.data);for(var a=r.children.length,o=n.children.length,u={},s=[],p={},h=0;h<o;h++){g=t.childNodes[h];s[h]=g,null!=(x=f(m=n.children[h]))&&(u[x]=[g,m])}for(var h=0,v=0;v<a;){var g=s[h],m=n.children[h],y=r.children[v];if(p[x=f(m)])h++;else{var w=f(y),b=u[w]||[];null==w?(null==x&&(d(t,g,m,y),v++),h++):(x===w?(d(t,b[0],b[1],y),h++):b[0]?(t.insertBefore(b[0],g),d(t,b[0],b[1],y)):d(t,g,null,y),v++,p[w]=y)}}for(;h<o;){var x=f(m=n.children[h]);null==x&&l(t,s[h],m),h++}for(var h in u){var k=(b=u[h])[1];p[k.data.key]||l(t,b[0],k)}}else if(r!==n){h=t;e.replaceChild(t=i(r),h)}return t}for(var s,p,h={},v=e.view,g={},m={},y=-1,w=e.mixins||[];y<w.length;y++){var b=w[y]?w[y](e):e;null!=b.mixins&&b!==e&&(w=w.concat(b.mixins)),null!=b.state&&(h=o(h,b.state)),t(g,b.actions),Object.keys(b.events||[]).map(function(e){m[e]=(m[e]||[]).concat(b.events[e])})}"l"!==document.readyState[0]?n():addEventListener("DOMContentLoaded",n)},r=function(e,t){function n(n){for(var r,a={},o=0,i=e.view.length;o<i;o++){var u=e.view[o][0],c=[];r||n.replace(RegExp("*"===u?"."+u:"^"+u.replace(/\//g,"\\/").replace(/:([\w]+)/g,function(e,t){return c.push(t),"([-\\.\\w]+)"})+"/?$","g"),function(){for(var n=1;n<arguments.length-2;)a[c.shift()]=arguments[n++];r=u,t=e.view[o][1]})}return{match:r,params:a}}return{state:{router:n(location.pathname)},actions:{router:{match:function(e,t,r,a){return{router:a("route",n(r))}},go:function(e,t,n){history.pushState({},"",n),t.router.match(n.split("?")[0])}}},events:{loaded:function(e,t){function n(){t.router.match(location.pathname)}n(),addEventListener("popstate",n)},render:function(){return t}}}};e.h=t,e.app=n,e.Router=r});
//# sourceMappingURL=hyperapp.js.map
