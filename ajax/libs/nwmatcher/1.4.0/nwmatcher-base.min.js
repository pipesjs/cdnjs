!function(e,t){"object"==typeof module&&"object"==typeof exports?module.exports=t:"function"==typeof define&&define.amd?define(t):(e.NW||(e.NW={}),e.NW.Dom=t(e))}(this,function(e){var t,n,r,i,a,s,o,l,u,f,c,g,m,d,p,h,E,N,C,x,S,b,v,A=e.document,R=A.documentElement,I="(?:[#.:]|::)?",y="[\\x20\\t\\n\\r\\f]",O="\\[.*\\]|\\(.*\\)|\\{.*\\}",T='"[^"\\\\]*(?:\\\\.[^"\\\\]*)*"'+"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",w=/([^,\\()[\]]+|\[[^[\]]*\]|\[.*\]|\([^()]+\)|\(.*\)|\{[^{}]+\}|\{.*\}|\\.)+/g,k=RegExp("[\\n\\r\\f]|^"+y+"+|"+y+"+$","g"),U=/\\([0-9a-fA-F]{1,6}[\x20\t\n\r\f]?|.)|([\x22\x27])/g,L={children:RegExp("^"+y+"*\\>"+y+"*(.*)"),adjacent:RegExp("^"+y+"*\\+"+y+"*(.*)"),relative:RegExp("^"+y+"*\\~"+y+"*(.*)"),ancestor:RegExp("^"+y+"+(.*)"),universal:RegExp("^\\*(.*)")},D={prefixes:I,identifier:S,attributes:d},B="getElementsByTagName"in A,H="getElementsByClassName"in A,G="function"!=typeof A.addEventListener,P={checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1},$={value:"defaultValue",checked:"defaultChecked",selected:"defaultSelected"},_={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},j={class:0,href:1,lang:1,src:1,style:1,title:1,type:1,xmlns:1,"xml:lang":1,"xml:space":1},F={},M={"=":"n=='%m'","^=":"n.indexOf('%m')==0","*=":"n.indexOf('%m')>-1","|=":"(n+'-').indexOf('%m-')==0","~=":"(' '+n+' ').indexOf(' %m ')>-1","$=":"n.substr(n.length-'%m'.length)=='%m'"},V=function(e,t,n){for(var r,i=-1;(r=t[++i])&&!1!==n(e[e.length]=r););return e},Q=function(e,t){var n=A;i=e,A=e.ownerDocument||e,(t||n!==A)&&(R=A.documentElement,v="DiV"==A.createElement("DiV").nodeName,b=v||"string"!=typeof A.compatMode?function(){var e=A.createElement("div").style;return e&&(e.width=1)&&"1px"==e.width}():A.compatMode.indexOf("CSS")<0,ie.CACHING&&xe.setCache(!0,A))},W=function(e){if(e<1||e>1114111||e>55295&&e<57344)return"\\ufffd";if(e<65536){var t="000"+e.toString(16);return"\\u"+t.substr(t.length-4)}return"\\u"+(55296+(e-65536>>10)).toString(16)+"\\u"+((e-65536)%1024+56320).toString(16)},z=function(e){return e<1||e>1114111||e>55295&&e<57344?"�":e<65536?String.fromCharCode(e):String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(55296+(e-65536>>10),(e-65536)%1024+56320)},Y=function(e){return e.replace(U,function(e,t,n){return n?"\\"+n:/^[0-9a-fA-F]/.test(t)?W(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t})},Z=function(e){return e.replace(U,function(e,t,n){return n||(/^[0-9a-fA-F]/.test(t)?z(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t)})},q=function(e,t){for(var n,r=-1;(n=t[++r])&&n.getAttribute("id")!=e;);return n||null},J=G?function(e,t){var n=null;return e=/\\/.test(e)?Z(e):e,v||9!=t.nodeType?q(e,t.getElementsByTagName("*")):(n=t.getElementById(e))&&n.name==e&&t.getElementsByName?q(e,t.getElementsByName(e)):n}:function(e,t){return e=/\\/.test(e)?Z(e):e,t.getElementById&&t.getElementById(e)||q(e,t.getElementsByTagName("*"))},K=function(e,t){return t||(t=A),i!==t&&Q(t),J(e,t)},X=function(e,t){var n="*"==e,r=t,i=[],a=r.firstChild;for(n||(e=e.toUpperCase());r=a;)if(r.tagName>"@"&&(n||r.tagName.toUpperCase()==e)&&(i[i.length]=r),!(a=r.firstChild||r.nextSibling))for(;!a&&(r=r.parentNode)&&r!==t;)a=r.nextSibling;return i},ee=G?function(e,t){return t=t.toLowerCase(),"object"==typeof e[t]?e.attributes[t]&&e.attributes[t].value:"type"==t?e.getAttribute(t):_[t]?e.getAttribute(t,2):P[t]?e.getAttribute(t)?t:"false":(e=e.getAttributeNode(t))&&e.value}:function(e,t){return e.getAttribute(t)},te=!G&&R.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){var n=e.getAttributeNode(t=t.toLowerCase());return $[t]&&"value"!=t?e[$[t]]:n&&n.specified},ne=function(e){if("string"==typeof e)return!!ie[e];if("object"!=typeof e)return ie;for(var t in e)ie[t]=!!e[t],"SIMPLENOT"==t&&(pe={},he={},Ee={},Ne={});return ae(),g=RegExp(ie.SIMPLENOT?f:c),!0},re=function(e){if(ie.VERBOSITY)throw Error(e);ie.LOGERRORS&&console&&console.log&&console.log(e)},ie={CACHING:!1,ESCAPECHR:!0,NON_ASCII:!0,SELECTOR3:!0,UNICODE16:!0,SHORTCUTS:!1,SIMPLENOT:!0,UNIQUE_ID:!0,USE_HTML5:!0,VERBOSITY:!0,LOGERRORS:!0},ae=function(){var e="",t=ie.SELECTOR3?"-{2}|":"";ie.NON_ASCII&&(e+="|[^\\x00-\\x9f]"),ie.UNICODE16&&(e+="|\\\\[0-9a-fA-F]{1,6}(?:\\r\\n|[\\x20\\t\\n\\r\\f])?"),ie.ESCAPECHR&&(e+="|\\\\[^\\n\\r\\f0-9a-fA-F]"),e+=ie.UNICODE16||ie.ESCAPECHR?"":"|\\\\.",p=(d=y+"*("+(S="-?(?:"+t+"[_a-zA-Z]"+e+")(?:-|[0-9]|[_a-zA-Z]"+e+")*")+"(?::"+S+")?)"+y+"*(?:([~*^$|!]?={1})"+y+"*"+(m="("+T+"|"+S+")")+")?"+y+"*").replace(m,"([\\x22\\x27]*)((?:\\\\?.)*?)\\3"),f="(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:"+I+S+")|\\x20|[>+~](?=[^>+~])|\\["+d+"\\]|\\("+(h="((?:(?:[-+]?\\d*n)?[-+]?\\d*|"+T+"|"+I+S+"|\\["+d+"\\]|\\(.+\\)|"+y+"*|,)+)")+"\\)|\\{.+\\}|(?:,|"+y+"*))+",N=RegExp("^((?!:not)("+I+S+"|\\([^()]*\\))+|\\["+d+"\\])$"),C=RegExp("("+I+S+"|\\["+d+"\\]|\\("+h+"\\)|\\\\.|[^\\x20\\t\\n\\r\\f>+~])+","g"),E=RegExp(S+"|^$"),x={ID:RegExp("^\\*?#("+S+")|"+O),TAG:RegExp("^("+S+")|"+O),CLASS:RegExp("^\\.("+S+"$)|"+O)},L.id=RegExp("^#("+S+")(.*)"),L.tagName=RegExp("^("+S+")(.*)"),L.className=RegExp("^\\.("+S+")(.*)"),L.attribute=RegExp("^\\["+p+"\\](.*)"),D.identifier=S,D.attributes=d,c=f.replace(h,".*"),g=RegExp(f)},se="r[r.length]=c[k];if(f&&false===f(c[k]))break main;else continue main;",oe=G?'if(e.nodeName<"A")continue;':"",le=G?".toUpperCase()":"",ue=function(e,t,n){var r="string"==typeof e?e.match(w):e;if("string"==typeof t||(t=""),1==r.length)t+=fe(r[0],n?se:"f&&f(k);return true;",n);else for(var i,a=-1,s={};i=r[++a];)!s[i=i.replace(k,"")]&&(s[i]=!0)&&(t+=fe(i,n?se:"f&&f(k);return true;",n));return n?Function("c,s,d,h,g,f","var N,n,x=0,k=-1,e,r=[];main:while((e=c[++k])){"+t+"}return r;"):Function("e,s,d,h,g,f","var N,n,x=0,k=e;"+t+"return false;")},fe=function(e,t,n){for(var r,i,a,s,o,l,u=0;e;){if(u++,i=e.match(L.universal))r="";else if(i=e.match(L.id))i[1]=/\\/.test(i[1])?Y(i[1]):i[1],t="if("+(v?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+i[1]+'"){'+t+"}";else if(i=e.match(L.tagName))t="if(e.nodeName"+(v?'=="'+i[1]+'"':le+'=="'+i[1].toUpperCase()+'"')+"){"+t+"}";else if(i=e.match(L.className))i[1]=/\\/.test(i[1])?Y(i[1]):i[1],i[1]=b?i[1].toLowerCase():i[1],t="if((n="+(v?'e.getAttribute("class")':"e.className")+')&&n.length&&(" "+'+(b?"n.toLowerCase()":"n")+".replace(/"+y+'+/g," ")+" ").indexOf(" '+i[1]+' ")>-1){'+t+"}";else if(i=e.match(L.attribute)){if(i[2]&&!M[i[2]])return re('Unsupported operator in attribute selectors "'+e+'"'),"";o="false",i[2]&&i[4]&&(o=M[i[2]])?(i[4]=/\\/.test(i[4])?Y(i[4]):i[4],j.class=b?1:0,l=j[i[1].toLowerCase()],o=o.replace(/\%m/g,l?i[4].toLowerCase():i[4])):"!="!=i[2]&&"="!=i[2]||(o="n"+i[2]+'=""'),t='if(n=s.hasAttribute(e,"'+i[1]+'")){'+(i[2]?'n=s.getAttribute(e,"'+i[1]+'")':"")+(l&&i[2]?".toLowerCase();":";")+"if("+(i[2]?o:"n")+"){"+t+"}}"}else if(i=e.match(L.adjacent))t="var N"+u+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+t+"break;}}e=N"+u+";";else if(i=e.match(L.relative))t="var N"+u+"=e;e=e.parentNode.firstChild;while(e&&e!==N"+u+'){if(e.nodeName>"@"){'+t+"}e=e.nextSibling;}e=N"+u+";";else if(i=e.match(L.children))t="var N"+u+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+t+"break;}e=N"+u+";";else if(i=e.match(L.ancestor))t="var N"+u+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+t+"}e=N"+u+";";else{r=!1,s=!1;for(r in F)if((i=e.match(F[r].Expression))&&i[1]&&("match"in(a=F[r].Callback(i,t))&&(i=a.match),t=a.source,s=a.status))break;if(!s)return re('Unknown pseudo-class selector "'+e+'"'),"";if(!r)return re('Unknown token in selector "'+e+'"'),""}if(!i)return re('Invalid syntax in selector "'+e+'"'),"";e=i&&i[i.length-1]}return t},ce=function(e,n,r,a){var o;if(!e||1!=e.nodeType)return re("Invalid element argument"),!1;if("string"!=typeof n)return re("Invalid selector argument"),!1;if(i!==r&&Q(r||(r=e.ownerDocument)),n=n.replace(k,"").replace(/\x00|\\$/g,"�"),ie.SHORTCUTS&&(n=xe.shortcuts(n,e,r)),s!=n){if(!(o=n.match(g))||o[0]!=n)return re('The string "'+n+'", is not a valid CSS selector'),!1;t=(o=n.match(w)).length<2,s=n,l=o}else o=l;return he[n]&&pe[n]===r||(he[n]=ue(t?[n]:o,"",!1),pe[n]=r),he[n](e,Ce,A,R,r,a)},ge=function(e,t){return me(e,t,function(){return!1})[0]||null},me=function(e,t,s){var l,f,c,m,d,p=e;if(0===arguments.length)return re("Not enough arguments"),[];if("string"!=typeof e)return[];if(t&&!/1|9|11/.test(t.nodeType))return re("Invalid or illegal context element"),[];if(i!==t&&Q(t||(t=A)),ie.CACHING&&(c=xe.loadResults(p,t,A,R)))return s?V([],c,s):c;if(e=e.replace(k,"").replace(/\x00|\\$/g,"�"),ie.SHORTCUTS&&(e=xe.shortcuts(e,t)),l=o!=e){if(!(m=e.match(g))||m[0]!=e)return re('The string "'+e+'", is not a valid CSS selector'),[];n=(m=e.match(w)).length<2,o=e,u=m}else m=u;if(11==t.nodeType)c=X("*",t);else if(n){if(l&&(d=(m=e.match(C))[m.length-1],r=d.split(":not"),r=r[r.length-1],a=e.length-d.length),ie.UNIQUE_ID&&(m=r.match(x.ID))&&(d=m[1])?(f=J(d,t))&&(ce(f,e)?(s&&s(f),c=[f]):c=[]):ie.UNIQUE_ID&&(m=e.match(x.ID))&&(d=m[1])&&((f=J(d,A))?"#"+d==e?(s&&s(f),c=[f]):t=/[>+~]/.test(e)?f.parentNode:f:c=[]),c)return ie.CACHING&&xe.saveResults(p,t,A,c),c;if(!v&&B&&(m=r.match(x.TAG))&&(d=m[1])){if(0===(c=t.getElementsByTagName(d)).length)return[];e=e.slice(0,a)+e.slice(a).replace(d,"*")}else if(!v&&H&&(m=r.match(x.CLASS))&&(d=m[1])){if(0===(c=t.getElementsByClassName(Z(d))).length)return[];e=e.slice(0,a)+e.slice(a).replace("."+d,E.test(e.charAt(e.indexOf(d)-1))?"":"*")}}return c||(c=G?/^(?:applet|object)$/i.test(t.nodeName)?t.children:X("*",t):t.getElementsByTagName("*")),Ne[e]&&Ee[e]===t||(Ne[e]=ue(n?[e]:m,oe,!0),Ee[e]=t),c=Ne[e](c,Ce,A,R,t,s),ie.CACHING&&xe.saveResults(p,t,A,c),c},de=function(e){return e},pe={},he={},Ee={},Ne={},Ce={byId:J,match:ce,select:me,getAttribute:ee,hasAttribute:te},xe={ACCEPT_NODE:se,byId:K,match:ce,first:ge,select:me,compile:ue,configure:ne,setCache:de,shortcuts:de,loadResults:de,saveResults:de,emit:re,Config:ie,Snapshot:Ce,Operators:M,Selectors:F,Tokens:D,Version:"nwmatcher-1.4.0",registerOperator:function(e,t){M[e]||(M[e]=t)},registerSelector:function(e,t,n){F[e]||(F[e]={Expression:t,Callback:n})}};return function(e){ae(),Q(e,!0)}(A),xe});