!function(e,t){"object"==typeof module&&"object"==typeof exports?module.exports=t:"function"==typeof define&&define.amd?define(t):(e.NW||(e.NW={}),e.NW.Dom=t(e))}(this,function(e){var t,n,r,i,a,s,l,o,c,f,u,d,p,m,h,g,b,E,N,v,y,x,C,S,A,k,I,T=e.document,R=T.documentElement,w=[].slice,L="(?:[#.:]|::)?",O="[\\x20\\t\\n\\r\\f]",U="\\[.*\\]|\\(.*\\)|\\{.*\\}",B='"[^"\\\\]*(?:\\\\.[^"\\\\]*)*"'+"|'[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",D=/([^,\\()[\]]+|\[[^[\]]*\]|\[.*\]|\([^()]+\)|\(.*\)|\{[^{}]+\}|\{.*\}|\\.)+/g,$=RegExp("[\\n\\r\\f]|^"+O+"+|"+O+"+$","g"),H=/\\([0-9a-fA-F]{1,6}[\x20\t\n\r\f]?|.)|([\x22\x27])/g,_=/[\x20\t\n\r\f]+/g,P={spseudos:/^\:(root|empty|(?:first|last|only)(?:-child|-of-type)|nth(?:-last)?(?:-child|-of-type)\(\s*(even|odd|(?:[-+]{0,1}\d*n\s*)?[-+]{0,1}\s*\d*)\s*\))?(.*)/i,dpseudos:/^\:(link|visited|target|active|focus|hover|checked|disabled|enabled|selected|lang\(([-\w]{2,})\)|not\(\s*(:nth(?:-last)?(?:-child|-of-type)\(\s*(?:even|odd|(?:[-+]{0,1}\d*n\s*)?[-+]{0,1}\s*\d*)\s*\)|[^()]*)\s*\))?(.*)/i,epseudos:/^((?:[:]{1,2}(?:after|before|first-letter|first-line))|(?:[:]{2,2}(?:selection|backdrop|placeholder)))?(.*)/i,children:RegExp("^"+O+"*\\>"+O+"*(.*)"),adjacent:RegExp("^"+O+"*\\+"+O+"*(.*)"),relative:RegExp("^"+O+"*\\~"+O+"*(.*)"),ancestor:RegExp("^"+O+"+(.*)"),universal:RegExp("^\\*(.*)")},M={prefixes:L,identifier:C,attributes:m},G=function(){var e=/ \w+\(/,t=String({}.toString).replace(e," (");return function(n){return n&&"string"!=typeof n&&t==String(n).replace(e," (")}}(),F=G(T.hasFocus),j=G(T.querySelector),Q=G(T.getElementById),q=G(R.getElementsByTagName),V=G(R.getElementsByClassName),z=G(R.getAttribute),W=G(R.hasAttribute),X=function(){var e=!1;try{e=!!w.call(T.childNodes,0)[0]}catch(e){}return e}(),Y="nextElementSibling"in R&&"previousElementSibling"in R,Z=!Q||function(){var e=!0,t="x"+String(+new Date),n=T.createElementNS?"a":'<a name="'+t+'">';return(n=T.createElement(n)).name=t,R.insertBefore(n,R.firstChild),e=!!T.getElementById(t),R.removeChild(n),e}(),K=!q||function(){var e=T.createElement("div");return e.appendChild(T.createComment("")),!!e.getElementsByTagName("*")[0]}(),J=!V||function(){var e,t=T.createElement("div");return t.appendChild(T.createElement("span")).setAttribute("class","台北abc 台北"),t.appendChild(T.createElement("span")).setAttribute("class","x"),e=!t.getElementsByClassName("台北")[0],t.lastChild.className="台北",e||2!=t.getElementsByClassName("台北").length}(),ee=!z||function(){var e=T.createElement("input");return e.setAttribute("value",5),5!=e.defaultValue}(),te=!W||function(){var e=T.createElement("option");return e.setAttribute("selected","selected"),!e.hasAttribute("selected")}(),ne=function(){var e=T.createElement("select");return e.appendChild(T.createElement("option")),!e.firstChild.selected}(),re=void 0!==e.opera&&/opera/i.test({}.toString.call(e.opera)),ie=re&&parseFloat(e.opera.version())>=11,ae=!j||function(){var e,t,n=[],r=function(t,n,r){var i=!1;e.appendChild(n);try{i=e.querySelectorAll(t).length==r}catch(e){}for(;e.firstChild;)e.removeChild(e.firstChild);return i};return e=T.implementation&&T.implementation.createDocument?T.implementation.createDocument("","",null).appendChild(T.createElement("html")).appendChild(T.createElement("head")).parentNode.appendChild(T.createElement("body")):T.createElement("div"),t=T.createElement("div"),t.innerHTML='<p id="a"></p><br>',r("p#a+*",t,0)&&n.push("\\w+#\\w+.*[+~]"),(t=T.createElement("p")).setAttribute("class",""),r('[class^=""]',t,1)&&n.push("[*^$]=[\\x20\\t\\n\\r\\f]*(?:\"\"|'')"),(t=T.createElement("option")).setAttribute("selected","selected"),r(":checked",t,0)&&n.push(":checked"),(t=T.createElement("input")).setAttribute("type","hidden"),r(":enabled",t,0)&&n.push(":enabled",":disabled"),(t=T.createElement("link")).setAttribute("href","x"),r(":link",t,1)||n.push(":link"),te&&n.push("\\[[\\x20\\t\\n\\r\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),n.length?RegExp(n.join("|")):{test:function(){return!1}}}(),se="function"!=typeof T.addEventListener,le={a:1,A:1,area:1,AREA:1,link:1,LINK:1},oe={checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1},ce={value:"defaultValue",checked:"defaultChecked",selected:"defaultSelected"},fe={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},ue={class:0,accept:1,"accept-charset":1,align:1,alink:1,axis:1,bgcolor:1,charset:1,checked:1,clear:1,codetype:1,color:1,compact:1,declare:1,defer:1,dir:1,direction:1,disabled:1,enctype:1,face:1,frame:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,method:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,rel:1,rev:1,rules:1,scope:1,scrolling:1,selected:1,shape:1,target:1,text:1,type:1,valign:1,valuetype:1,vlink:1},de={accept:1,"accept-charset":1,alink:1,axis:1,bgcolor:1,charset:1,codetype:1,color:1,enctype:1,face:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,rel:1,rev:1,target:1,text:1,type:1,vlink:1},pe={},me={"=":"n=='%m'","^=":"n.indexOf('%m')==0","*=":"n.indexOf('%m')>-1","|=":"(n+'-').indexOf('%m-')==0","~=":"(' '+n+' ').indexOf(' %m ')>-1","$=":"n.substr(n.length-'%m'.length)=='%m'"},he=function(e,t){var n,r=-1;if(!e.length&&Array.slice)return Array.slice(t);for(;n=t[++r];)e[e.length]=n;return e},ge=function(e,t,n){for(var r,i=-1;(r=t[++i])&&!1!==n(e[e.length]=r););return e},be=function(e,t){var n,r=T;i=e,T=e.ownerDocument||e,(t||r!==T)&&(R=T.documentElement,I="DiV"==T.createElement("DiV").nodeName,k=I||"string"!=typeof T.compatMode?function(){var e=T.createElement("div").style;return e&&(e.width=1)&&"1px"==e.width}():T.compatMode.indexOf("CSS")<0,(n=T.createElement("div")).appendChild(T.createElement("p")).setAttribute("class","xXx"),n.appendChild(T.createElement("p")).setAttribute("class","xxx"),S=!I&&V&&k&&(2!=n.getElementsByClassName("xxx").length||2!=n.getElementsByClassName("xXx").length),A=!I&&j&&k&&(2!=n.querySelectorAll("[class~=xxx]").length||2!=n.querySelectorAll(".xXx").length),He.CACHING&&Ze.setCache(!0,T))},Ee=function(e){if(e<1||e>1114111||e>55295&&e<57344)return"\\ufffd";if(e<65536){var t="000"+e.toString(16);return"\\u"+t.substr(t.length-4)}return"\\u"+(55296+(e-65536>>10)).toString(16)+"\\u"+((e-65536)%1024+56320).toString(16)},Ne=function(e){return e<1||e>1114111||e>55295&&e<57344?"�":e<65536?String.fromCharCode(e):String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(55296+(e-65536>>10),(e-65536)%1024+56320)},ve=function(e){return e.replace(H,function(e,t,n){return n?"\\"+n:/^[0-9a-fA-F]/.test(t)?Ee(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t})},ye=function(e){return e.replace(H,function(e,t,n){return n||(/^[0-9a-fA-F]/.test(t)?Ne(parseInt(t,16)):/^[\\\x22\x27]/.test(t)?e:t)})},xe=function(e,t){for(var n,r=-1;(n=t[++r])&&n.getAttribute("id")!=e;);return n||null},Ce=Z?function(e,t){var n=null;return e=/\\/.test(e)?ye(e):e,I||9!=t.nodeType?xe(e,t.getElementsByTagName("*")):(n=t.getElementById(e))&&n.name==e&&t.getElementsByName?xe(e,t.getElementsByName(e)):n}:function(e,t){return e=/\\/.test(e)?ye(e):e,t.getElementById&&t.getElementById(e)||xe(e,t.getElementsByTagName("*"))},Se=function(e,t){return t||(t=T),i!==t&&be(t),Ce(e,t)},Ae=function(e,t){var n="*"==e,r=t,i=[],a=r.firstChild;for(n||(e=e.toUpperCase());r=a;)if(r.tagName>"@"&&(n||r.tagName.toUpperCase()==e)&&(i[i.length]=r),!(a=r.firstChild||r.nextSibling))for(;!a&&(r=r.parentNode)&&r!==t;)a=r.nextSibling;return i},ke=!K&&X?function(e,t){return I||11==t.nodeType?Ae(e,t):w.call(t.getElementsByTagName(e),0)}:function(e,t){var n,r=-1,i=r,a=[],s=I||11==t.nodeType?Ae(e,t):t.getElementsByTagName(e);if("*"==e)for(;n=s[++r];)n.nodeName>"@"&&(a[++i]=n);else for(;n=s[++r];)a[r]=n;return a},Ie=function(e,t){return t||(t=T),i!==t&&be(t),ke(e,t)},Te=function(e,t){return Qe('[name="'+e.replace(/\\([^\\]{1})/g,"$1")+'"]',t)},Re=function(e,t){var n,r,i=-1,a=i,s=[],l=ke("*",t);for(e=" "+(k?e.toLowerCase():e)+" ";n=l[++i];)(r=I?n.getAttribute("class"):n.className)&&r.length&&(" "+(k?r.toLowerCase():r).replace(_," ")+" ").indexOf(e)>-1&&(s[++a]=n);return s},we=function(e,t){return e=k?e.toLowerCase():e,e=/\\/.test(e)?ye(e):e,J||S||I||!t.getElementsByClassName?Re(e,t):w.call(t.getElementsByClassName(e))},Le=function(e,t){return t||(t=T),i!==t&&be(t),we(e,t)},Oe="compareDocumentPosition"in R?function(e,t){return 16==(16&e.compareDocumentPosition(t))}:"contains"in R?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},Ue=ee||se?function(e,t){return t=t.toLowerCase(),"object"==typeof e[t]?e.attributes[t]&&e.attributes[t].value:"type"==t?e.getAttribute(t):fe[t]?e.getAttribute(t,2):oe[t]?e.getAttribute(t)?t:"false":(e=e.getAttributeNode(t))&&e.value}:function(e,t){return e.getAttribute(t)},Be=te||se?function(e,t){var n=e.getAttributeNode(t=t.toLowerCase());return ce[t]&&"value"!=t?e[ce[t]]:n&&n.specified}:function(e,t){return I?!!e.getAttribute(t):e.hasAttribute(t)},De=function(e){if("string"==typeof e)return!!He[e];if("object"!=typeof e)return He;for(var t in e)He[t]=!!e[t],"SIMPLENOT"==t?(Ve={},ze={},We={},Xe={},He[t]||(He.USE_QSAPI=!1)):"USE_QSAPI"==t&&(He[t]=!!e[t]&&j);return _e(),d=RegExp(He.SIMPLENOT?f:u),!0},$e=function(e){if(He.VERBOSITY)throw Error(e);He.LOGERRORS&&console&&console.log&&console.log(e)},He={CACHING:!1,ESCAPECHR:!0,NON_ASCII:!0,SELECTOR3:!0,UNICODE16:!0,SHORTCUTS:!1,SIMPLENOT:!0,UNIQUE_ID:!0,USE_HTML5:!0,USE_QSAPI:j,VERBOSITY:!0,LOGERRORS:!0},_e=function(){var e="",t=He.SELECTOR3?"-{2}|":"";He.NON_ASCII&&(e+="|[^\\x00-\\x9f]"),He.UNICODE16&&(e+="|\\\\[0-9a-fA-F]{1,6}(?:\\r\\n|[\\x20\\t\\n\\r\\f])?"),He.ESCAPECHR&&(e+="|\\\\[^\\n\\r\\f0-9a-fA-F]"),e+=He.UNICODE16||He.ESCAPECHR?"":"|\\\\.",h=(m=O+"*("+(C="-?(?:"+t+"[_a-zA-Z]"+e+")(?:-|[0-9]|[_a-zA-Z]"+e+")*")+"(?::"+C+")?)"+O+"*(?:([~*^$|!]?={1})"+O+"*"+(p="("+B+"|"+C+")")+")?"+O+"*").replace(p,"([\\x22\\x27]*)((?:\\\\?.)*?)\\3"),f="(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:"+L+C+")|\\x20|[>+~](?=[^>+~])|\\["+m+"\\]|\\("+(g="((?:(?:[-+]?\\d*n)?[-+]?\\d*|"+B+"|"+L+C+"|\\["+m+"\\]|\\(.+\\)|"+O+"*|,)+)")+"\\)|\\{.+\\}|(?:,|"+O+"*))+",E=RegExp("^((?!:not)("+L+C+"|\\([^()]*\\))+|\\["+m+"\\])$"),N=RegExp("("+L+C+"|\\["+m+"\\]|\\("+g+"\\)|\\\\.|[^\\x20\\t\\n\\r\\f>+~])+","g"),b=RegExp(C+"|^$"),x=RegExp(K&&J||re?"^#?"+C+"$":K?"^[.#]?"+C+"$":J?"^(?:\\*|#"+C+")$":"^(?:\\*|[.#]?"+C+")$"),y=RegExp("(?:\\[[\\x20\\t\\n\\r\\f]*class\\b|\\."+C+")"),v={ID:RegExp("^\\*?#("+C+")|"+U),TAG:RegExp("^("+C+")|"+U),CLASS:RegExp("^\\.("+C+"$)|"+U)},P.id=RegExp("^#("+C+")(.*)"),P.tagName=RegExp("^("+C+")(.*)"),P.className=RegExp("^\\.("+C+")(.*)"),P.attribute=RegExp("^\\["+h+"\\](.*)"),M.identifier=C,M.attributes=m,u=f.replace(g,".*"),d=RegExp(f)},Pe="r[r.length]=c[k];if(f&&false===f(c[k]))break main;else continue main;",Me=function(e,t,n){var r="string"==typeof e?e.match(D):e;if("string"==typeof t||(t=""),1==r.length)t+=Ge(r[0],n?Pe:"f&&f(k);return true;",n);else for(var i,a=-1,s={};i=r[++a];)!s[i=i.replace($,"")]&&(s[i]=!0)&&(t+=Ge(i,n?Pe:"f&&f(k);return true;",n));return n?Function("c,s,d,h,g,f","var N,n,x=0,k=-1,e,r=[];main:while((e=c[++k])){"+t+"}return r;"):Function("e,s,d,h,g,f","var N,n,x=0,k=e;"+t+"return false;")},Ge=function(e,t,n){for(var r,i,a,s,l,o,c,f,u,d=0;e;){if(d++,l=e.match(P.universal))s="";else if(l=e.match(P.id))l[1]=/\\/.test(l[1])?ve(l[1]):l[1],t="if("+(I?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+l[1]+'"){'+t+"}";else if(l=e.match(P.tagName))t="if(e.nodeName"+(I?'=="'+l[1]+'"':'.toUpperCase()=="'+l[1].toUpperCase()+'"')+"){"+t+"}";else if(l=e.match(P.className))l[1]=/\\/.test(l[1])?ve(l[1]):l[1],l[1]=k?l[1].toLowerCase():l[1],t="if((n="+(I?'s.getAttribute(e,"class")':"e.className")+')&&n.length&&(" "+'+(k?"n.toLowerCase()":"n")+".replace(/"+O+'+/g," ")+" ").indexOf(" '+l[1]+' ")>-1){'+t+"}";else if(l=e.match(P.attribute)){if(s=l[1].split(":"),s=2==s.length?s[1]:s[0]+"",l[2]&&!me[l[2]])return $e('Unsupported operator in attribute selectors "'+e+'"'),"";f="false",l[2]&&l[4]&&(f=me[l[2]])?(l[4]=/\\/.test(l[4])?ve(l[4]):l[4],ue.class=k?1:0,u=(I?de:ue)[s.toLowerCase()],f=f.replace(/\%m/g,u?l[4].toLowerCase():l[4])):"!="!=l[2]&&"="!=l[2]||(f="n"+l[2]+'=""'),t='if(n=s.hasAttribute(e,"'+l[1]+'")){'+(l[2]?'n=s.getAttribute(e,"'+l[1]+'")':"")+(u&&l[2]?".toLowerCase();":";")+"if("+(l[2]?f:"n")+"){"+t+"}}"}else if(l=e.match(P.adjacent))t=Y?"var N"+d+"=e;while(e&&(e=e.previousElementSibling)){"+t+"break;}e=N"+d+";":"var N"+d+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+t+"break;}}e=N"+d+";";else if(l=e.match(P.relative))t=Y?"var N"+d+"=e;e=e.parentNode.firstElementChild;while(e&&e!==N"+d+"){"+t+"e=e.nextElementSibling;}e=N"+d+";":"var N"+d+"=e;e=e.parentNode.firstChild;while(e&&e!==N"+d+'){if(e.nodeName>"@"){'+t+"}e=e.nextSibling;}e=N"+d+";";else if(l=e.match(P.children))t="var N"+d+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+t+"break;}e=N"+d+";";else if(l=e.match(P.ancestor))t="var N"+d+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+t+"}e=N"+d+";";else if((l=e.match(P.spseudos))&&l[1])switch(l[1]){case"root":t=l[3]?"if(e===h||s.contains(h,e)){"+t+"}":"if(e===h){"+t+"}";break;case"empty":t="if(s.isEmpty(e)){"+t+"}";break;default:if(l[1]&&l[2]){if("n"==l[2]){t="if(e!==h){"+t+"}";break}"even"==l[2]?(r=2,i=0):"odd"==l[2]?(r=2,i=1):(i=(a=l[2].match(/(-?\d+)$/))?parseInt(a[1],10):0,r=(a=l[2].match(/(-?\d*)n/i))?parseInt(a[1],10):0,a&&"-"==a[1]&&(r=-1)),f=r>1?/last/i.test(l[1])?"(n-("+i+"))%"+r+"==0":"n>="+i+"&&(n-("+i+"))%"+r+"==0":r<-1?/last/i.test(l[1])?"(n-("+i+"))%"+r+"==0":"n<="+i+"&&(n-("+i+"))%"+r+"==0":0===r?"n=="+i:-1==r?"n<="+i:"n>="+i,t="if(e!==h){n=s["+(/-of-type/i.test(l[1])?'"nthOfType"':'"nthElement"')+"](e,"+(/last/i.test(l[1])?"true":"false")+");if("+f+"){"+t+"}}"}else r=/first/i.test(l[1])?"previous":"next",a=/only/i.test(l[1])?"previous":"next",i=/first|last/i.test(l[1]),t="if(e!==h){n=e;while((n=n."+r+"Sibling)"+(u=/-of-type/i.test(l[1])?"&&n.nodeName!=e.nodeName":'&&n.nodeName<"@"')+");if(!n){"+(i?t:"n=e;while((n=n."+a+"Sibling)"+u+");if(!n){"+t+"}")+"}}"}else if((l=e.match(P.dpseudos))&&l[1])switch(l[1].match(/^\w+/)[0]){case"not":if(s=l[3].replace($,""),He.SIMPLENOT&&!E.test(s))return $e('Negation pseudo-class only accepts simple selectors "'+e+'"'),"";t="compatMode"in T?"if(!"+Me(s,"",!1)+"(e,s,d,h,g)){"+t+"}":'if(!s.match(e, "'+s.replace(/\x22/g,'\\"')+'",g)){'+t+"}";break;case"checked":t='if((typeof e.form!=="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)&&e.checked)'+(He.USE_HTML5?"||(/^option$/i.test(e.nodeName)&&(e.selected||e.checked))":"")+"){"+t+"}";break;case"disabled":t='if(((typeof e.form!=="undefined"'+(He.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===true){"+t+"}";break;case"enabled":t='if(((typeof e.form!=="undefined"'+(He.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===false){"+t+"}";break;case"lang":f="",l[2]&&(f=l[2].substr(0,2)+"-"),t='do{(n=e.lang||"").toLowerCase();if((n==""&&h.lang=="'+l[2].toLowerCase()+'")||(n&&(n=="'+l[2].toLowerCase()+'"||n.substr(0,3)=="'+f.toLowerCase()+'"))){'+t+"break;}}while((e=e.parentNode)&&e!==g);";break;case"target":t="if(e.id==d.location.hash.slice(1)){"+t+"}";break;case"link":t="if(s.isLink(e)&&!e.visited){"+t+"}";break;case"visited":t="if(s.isLink(e)&&e.visited){"+t+"}";break;case"active":if(I)break;t="if(e===d.activeElement){"+t+"}";break;case"hover":if(I)break;t="if(e===d.hoverElement){"+t+"}";break;case"focus":if(I)break;t=F?'if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href||typeof e.tabIndex=="number")){'+t+"}":"if(e===d.activeElement&&(e.type||e.href)){"+t+"}";break;case"selected":t="if(/^option$/i.test(e.nodeName)&&(e.selected||e.checked"+(s=ne?"||(n=e.parentNode)&&n.options[n.selectedIndex]===e":"")+")){"+t+"}"}else if((l=e.match(P.epseudos))&&l[1])t="if(!(/1|11/).test(e.nodeType)){"+t+"}";else{s=!1,c=!1;for(s in pe)if((l=e.match(pe[s].Expression))&&l[1]&&("match"in(o=pe[s].Callback(l,t))&&(l=o.match),t=o.source,c=o.status))break;if(!c)return $e('Unknown pseudo-class selector "'+e+'"'),"";if(!s)return $e('Unknown token in selector "'+e+'"'),""}if(!l)return $e('Invalid syntax in selector "'+e+'"'),"";e=l&&l[l.length-1]}return t},Fe=function(e,n,r,a){var l;if(!e||1!=e.nodeType)return $e("Invalid element argument"),!1;if("string"!=typeof n)return $e("Invalid selector argument"),!1;if(r&&1==r.nodeType&&!Oe(r,e))return!1;if(i!==r&&be(r||(r=e.ownerDocument)),n=n.replace($,"").replace(/\x00|\\$/g,"�"),He.SHORTCUTS&&(n=Ze.shortcuts(n,e,r)),s!=n){if(!(l=n.match(d))||l[0]!=n)return $e('The string "'+n+'", is not a valid CSS selector'),!1;t=(l=n.match(D)).length<2,s=n,o=l}else l=o;return ze[n]&&Ve[n]===r||(ze[n]=Me(t?[n]:l,"",!1),Ve[n]=r),ze[n](e,Ye,T,R,r,a)},je=function(e,t){return Qe(e,t,function(){return!1})[0]||null},Qe=function(e,t,s){var o,f,u,p,m,h,g=e;if(0===arguments.length)return $e("Not enough arguments"),[];if("string"!=typeof e)return[];if(t&&!/1|9|11/.test(t.nodeType))return $e("Invalid or illegal context element"),[];if(i!==t&&be(t||(t=T)),He.CACHING&&(p=Ze.loadResults(g,t,T,R)))return s?ge([],p,s):p;if(e=e.replace($,"").replace(/\x00|\\$/g,"�"),!ie&&x.test(e))switch(e.charAt(0)){case"#":He.UNIQUE_ID&&(p=(u=Ce(e.slice(1),t))?[u]:[]);break;case".":p=we(e.slice(1),t);break;default:p=ke(e,t)}else if(!I&&He.USE_QSAPI&&(!A||!y.test(e))&&!ae.test(e))try{p=t.querySelectorAll(e)}catch(e){}if(p)return p=s?ge([],p,s):X?w.call(p):he([],p),He.CACHING&&Ze.saveResults(g,t,T,p),p;if(He.SHORTCUTS&&(e=Ze.shortcuts(e,t)),f=l!=e){if(!(m=e.match(d))||m[0]!=e)return $e('The string "'+e+'", is not a valid CSS selector'),[];n=(m=e.match(D)).length<2,l=e,c=m}else m=c;if(11==t.nodeType)p=Ae("*",t);else if(!I&&n){if(f&&(h=(m=e.match(N))[m.length-1],r=h.split(":not"),r=r[r.length-1],a=e.length-h.length),He.UNIQUE_ID&&(m=r.match(v.ID))&&(h=m[1])?(u=Ce(h,t))&&(Fe(u,e)?(s&&s(u),p=[u]):p=[]):He.UNIQUE_ID&&(m=e.match(v.ID))&&(h=m[1])&&((u=Ce(h,T))?"#"+h==e?(s&&s(u),p=[u]):t=/[>+~]/.test(e)?u.parentNode:u:p=[]),p)return He.CACHING&&Ze.saveResults(g,t,T,p),p;if(!V&&(m=r.match(v.TAG))&&(h=m[1])){if(0===(p=ke(h,t)).length)return[];e=e.slice(0,a)+e.slice(a).replace(h,"*")}else if((m=r.match(v.CLASS))&&(h=m[1])){if(0===(p=we(h,t)).length)return[];e=e.slice(0,a)+e.slice(a).replace("."+h,b.test(e.charAt(e.indexOf(h)-1))?"":"*")}else if((m=e.match(v.CLASS))&&(h=m[1])){if(0===(p=we(h,t)).length)return[];for(o=0,els=[];p.length>o;++o)els=he(els,p[o].getElementsByTagName("*"));p=els,e=e.slice(0,a)+e.slice(a).replace("."+h,b.test(e.charAt(e.indexOf(h)-1))?"":"*")}else if(V&&(m=r.match(v.TAG))&&(h=m[1])){if(0===(p=ke(h,t)).length)return[];e=e.slice(0,a)+e.slice(a).replace(h,"*")}}return p||(p=se?/^(?:applet|object)$/i.test(t.nodeName)?t.children:Ae("*",t):t.getElementsByTagName("*")),Xe[e]&&We[e]===t||(Xe[e]=Me(n?[e]:m,"",!0),We[e]=t),p=Xe[e](p,Ye,T,R,t,s),He.CACHING&&Ze.saveResults(g,t,T,p),p},qe=function(e){return e},Ve={},ze={},We={},Xe={},Ye={nthElement:function(e,t){for(var n=1,r=t?"nextSibling":"previousSibling";e=e[r];)e.nodeName>"@"&&++n;return n},nthOfType:function(e,t){for(var n=1,r=t?"nextSibling":"previousSibling",i=e.nodeName;e=e[r];)e.nodeName==i&&++n;return n},getAttribute:Ue,hasAttribute:Be,byClass:we,byName:Te,byTag:ke,byId:Ce,contains:Oe,isEmpty:function(e){for(e=e.firstChild;e;){if(3==e.nodeType||e.nodeName>"@")return!1;e=e.nextSibling}return!0},isLink:function(e){return Be(e,"href")&&le[e.nodeName]},select:Qe,match:Fe},Ze={ACCEPT_NODE:Pe,byId:Se,byTag:Ie,byName:Te,byClass:Le,getAttribute:Ue,hasAttribute:Be,match:Fe,first:je,select:Qe,compile:Me,contains:Oe,configure:De,setCache:qe,loadResults:qe,saveResults:qe,shortcuts:qe,emit:$e,Config:He,Snapshot:Ye,Operators:me,Selectors:pe,Tokens:M,Version:"nwmatcher-1.4.0",registerOperator:function(e,t){me[e]||(me[e]=t)},registerSelector:function(e,t,n){pe[e]||(pe[e]={Expression:t,Callback:n})}};return function(e){_e(),be(e,!0)}(T),Ze});