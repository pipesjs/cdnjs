var TinyDatePicker=function(){"use strict";function e(e,r){function o(e){var t=new Date(e.target.value);isNaN(t)||c.onChange(t,!0)}var c=t(e,r||{});c.isModal?e.readOnly=!0:v("blur",e,a(5,function(){c.el&&!c.el.contains(document.activeElement)&&k(c)}));var i=a(5,function(){x(c)?k(c):n(c)});v("mousedown",e,function(){c.inputFocused()&&i()}),v("focus",e,i),v("input",e,o)}function t(e,t){var a={input:e,mode:t.mode||"dp-modal",days:t.days||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:t.months||["January","February","March","April","May","June","July","August","September","October","November","December"],today:t.today||"Today",clear:t.clear||"Clear",close:t.close||"Close",format:t.format||function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parse:t.parse||function(e){var t=new Date(e);return isNaN(t)?F():t},inputFocused:function(){return e===document.activeElement},onChange:function(t,n){t&&!C(a,t)||(t&&(a.selectedDate=new Date(a.currentDate=t)),n||(e.value=t?a.format(t):""),a.isModal?e.focus():m(y,a),e.dispatchEvent(new N("change",{bubbles:!0})))},weekStartsMonday:t.weekStartsMonday};return a.min=w(a,t.min,-100),a.max=w(a,t.max,100),a.isModal="dp-modal"===a.mode,a}function a(e,t){var a=void 0;return function(){clearTimeout(a),a=setTimeout(t,e)}}function n(e){if(!e.el){var t=e.input,n=document.createElement("div");n.className=e.mode,n.innerHTML='<div class="dp"></div>'+(e.isModal?'<a href="#" class="dp-focuser">.</a>':""),e.el=n;var o=n.querySelector(".dp");v("blur",o,a(10,function(){o.contains(document.activeElement)||(e.isModal?t.focus():e.inputFocused()||k(e))})),i(e),e.isModal?document.body.appendChild(n):(n.style.visibility="hidden",t.parentElement.appendChild(n)),m(y,e),e.isModal||r(n,t),v("mousedown",n,function(e){e.target!==n&&"A"!==e.target.tagName&&e.preventDefault()}),v("keydown",n,function(t){t.keyCode>=E&&t.keyCode<=S&&t.preventDefault(),n.querySelector(".dp-cal")?u(t,n,e):n.querySelector(".dp-months")?d(t,n,e):n.querySelector(".dp-years")&&l(t,n,e)}),v("click",/dp-next/,n,function(){M(e.currentDate,e.currentDate.getMonth()+1),m(y,e)}),v("click",/dp-prev/,n,function(){M(e.currentDate,e.currentDate.getMonth()-1),m(y,e)}),v("click",/dp-day/,n,function(t){e.onChange(new Date(parseInt(t.target.getAttribute("data-date"))))}),v("click",/dp-year/,n,function(t){e.currentDate.setFullYear(parseInt(t.target.getAttribute("data-year"))),m(y,e)}),v("click",/dp-month/,n,function(t){e.currentDate.setMonth(parseInt(t.target.getAttribute("data-month"))),m(y,e)}),v("click",/dp-cal-year/,n,function(){m(g,e)}),v("click",/dp-cal-month/,n,function(){m(h,e)}),v("click",/dp-today/,n,function(){e.onChange(F())}),v("click",/dp-clear/,n,function(){e.onChange(null)}),v("click",/dp-close/,n,function(){t.focus(),!e.isModal&&a(10,function(){k(e)})()})}}function r(e,t){var a=t.getBoundingClientRect(),n=document.documentElement;c(e,t,a,n),o(e,t,a,n),e.style.visibility=""}function o(e,t,a,n){var r=n.clientWidth,o=e.offsetWidth,c=a.left+o,i=c<r||a.right<o,u=t.offsetLeft-(i?0:c-r);e.style.left=u+"px"}function c(e,t,a,n){var r=n.clientHeight,o=e.offsetHeight,c=a.bottom+8+o,i=c>r&&a.top>o,u=t.offsetTop+(i?-o-8:t.offsetHeight+8);e.style.top=u+"px"}function i(e){var t=e.input,a=e.parse(t.value);e.currentDate=C(e,a)?a:new Date(e.min),e.selectedDate=new Date(e.currentDate),t.value&&(t.value=e.format(e.currentDate))}function u(e,t,a){var n=e.keyCode;n===E?p(t,a,-1):n===j?p(t,a,1):n===Y?p(t,a,-7):n===S&&p(t,a,7)}function d(e,t,a){var n=e.keyCode;n===E?f(t,a,-1):n===j?f(t,a,1):n===Y?f(t,a,-3):n===S&&f(t,a,3)}function l(e,t,a){var n=e.keyCode;n===E||n===Y?s(e,t,a,-1):n!==j&&n!==S||s(e,t,a,1)}function s(e,t,a,n){e.preventDefault();var r=a.currentDate.getFullYear()+n,o=Math.min(a.max.getFullYear(),Math.max(a.min.getFullYear(),r));a.currentDate.setFullYear(o),m(g,a)}function f(e,t,a){var n=(12+(t.currentDate.getMonth()+a))%12;M(t.currentDate,n),m(h,t)}function p(e,t,a){var n=t.currentDate;n.setDate(n.getDate()+a),m(y,t)}function v(e,t,a,n){n||(n=a,a=t,t=/./),a.addEventListener(e,function(e){t.test(e.target.className)&&n(e)},!0)}function m(e,t){var a=e(t);if(a&&(t.el.firstChild.innerHTML=a),t.isModal||!t.inputFocused()){var n=t.el.querySelector(".dp-current");return n&&n.focus()}}function g(e){var t=e.currentDate.getFullYear(),a=e.selectedDate.getFullYear();return'<div class="dp-years">'+b(e,function(e){var n="dp-year";return n+=e===t?" dp-current":"",n+=e===a?" dp-selected":"",'<a tabindex="-1" href="javascript:;" class="'+n+'" data-year="'+e+'">'+e+"</a>"})+"</div>"}function h(e){var t=e.months,a=e.currentDate,n=a.getMonth();return'<div class="dp-months">'+t.map(function(e,t){var a="dp-month";return a+=n===t?" dp-current":"",'<a tabindex="-1" href="javascript:;" class="'+a+'" data-month="'+t+'">'+e+"</a>"}).join("")+"</div>"}function y(e){var t=e.days,a=e.weekStartsMonday?1:0,n=e.currentDate,r=e.selectedDate,o=n.getMonth(),c=F().getTime();return'<div class="dp-cal"><header class="dp-cal-header"><a tabindex="-1" href="javascript:;" class="dp-prev">Prev</a><a tabindex="-1" href="javascript:;" class="dp-cal-month">'+e.months[o]+'</a><a tabindex="-1" href="javascript:;" class="dp-cal-year">'+n.getFullYear()+'</a><a tabindex="-1" href="javascript:;" class="dp-next">Next</a></header><div class="dp-days">'+t.map(function(e,n){return'<span class="dp-col-header">'+t[(n+a)%t.length]+"</span>"}).join("")+D(n,a,function(t){var a=t.getMonth()!==o,i=!C(e,t),u=t.getTime()===c,d="dp-day";return d+=a?" dp-edge-day":"",d+=t.getTime()===n.getTime()?" dp-current":"",d+=t.getTime()===r.getTime()?" dp-selected":"",d+=i?" dp-day-disabled":"",d+=u?" dp-day-today":"",'<a tabindex="-1" href="javascript:;" class="'+d+'" data-date="'+t.getTime()+'">'+t.getDate()+"</a>"})+'</div><footer class="dp-cal-footer"><a tabindex="-1" href="javascript:;" class="dp-today">'+e.today+'</a><a tabindex="-1" href="javascript:;" class="dp-clear">'+e.clear+'</a><a tabindex="-1" href="javascript:;" class="dp-close">'+e.close+"</a></footer></div>"}function D(e,t,a){var n="",r=new Date(e);r.setDate(1),r.setDate(t+r.getDate()-r.getDay());for(var o=0;o<42;++o)n+=a(r),r.setDate(r.getDate()+1);return n}function b(e,t){for(var a="",n=e.max.getFullYear(),r=e.min.getFullYear();r<=n;++r)a+=t(r);return a}function M(e,t){var a=e.getDate();e.setDate(1),e.setMonth(t),e.setDate(a),e.getDate()<a&&e.setDate(1-e.getDate())}function x(e){return e.isModal&&!!e.el}function k(e){var t=e.el;t&&t.parentElement.removeChild(t),e.el=void 0}function w(e,t,a){return t?e.parse(t):new Date(F().setFullYear(F().getFullYear()+a))}function C(e,t){return e.min<=t&&e.max>=t}function F(){var e=new Date;return e.setHours(0,0,0,0),e}function T(){var e=window.CustomEvent;return"function"!=typeof e&&(e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a},e.prototype=window.Event.prototype),e}var E=37,Y=38,j=39,S=40,N=T();return e}();"undefined"!=typeof module&&module.exports&&(module.exports=TinyDatePicker);
//# sourceMappingURL=tiny-date-picker.min.js.map