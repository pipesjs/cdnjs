function TinyDatePicker(e,t){"use strict";function n(){M||(u(g.parse(e.value)),C.appendChild(T),C.appendChild(E),setTimeout(function(){T.className+=" dp-visible",r()},1))}function a(){C.contains(T)&&(M=1,e.focus(),e.selectionEnd=e.selectionStart,C.removeChild(T),C.removeChild(E),T.className=T.className.replace(" dp-visible",""),setTimeout(function(){M=0},1))}function o(){T.innerHTML=m(y,g).innerHTML,r()}function r(){T.querySelector(".dp-selected").focus()}function i(t){d(t)&&(e.value=t?g.format(t):"",u(t),a(),e.dispatchEvent(new S("change",{bubbles:!0})))}function u(e){e&&(y=e,o())}function s(e){return function(){y.setDate(y.getDate()+e),u(y)}}function c(e){return function(){var t=new Date(y);t.setDate(1),e>0&&t.setMonth(t.getMonth()+2),t.setDate(t.getDate()-1),y.getDate()<t.getDate()&&t.setDate(y.getDate()),u(t)}}function d(e){var t="String"==typeof e?new Date(e):e,n=t?t.getTime():Date.now();return(!h||n>=h)&&(!w||n<=w)}function l(e){return function(t){var n=e[t.which];n&&/dp-selected/.test(t.target.className)&&(t.preventDefault(),n())}}function p(e){return function(t){t.target.className.split(/[\s]+/g).forEach(function(n){e[n]&&e[n](t)})}}function f(e){return b({format:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parse:function(e){var t=new Date(e);return isNaN(t)?new Date:t},days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",clear:"Clear",close:"Close",min:null,max:null},e)}function m(e,t){function n(){for(var e="",n=0;n<7;++n)e+='<span class="dp-day-of-week">'+t.days[n]+"</span>";return e}function a(){var t=new Date(e),n="";t.setDate(1),t.setDate(t.getDate()-t.getDay());for(var a=0;a<42;++a){var o=t.getDate(),r="dp-day",i=t.toDateString()==e.toDateString(),u=t.toDateString()===(new Date).toDateString(),s=t.getMonth()!==e.getMonth(),c=i?"a":"span",l=!d(t);i&&(r+=" dp-selected"),s&&(r+=" dp-edge-day"),u&&(r+=" dp-day-today"),l&&(r+=" dp-day-disabled"),n+="<"+c+' href="#" class="'+r+'" data-dp="'+t.getTime()+'">'+o+"</"+c+">",t.setDate(o+1)}return n}return D('<div class="dp-wrapper"><div class="dp"><header class="dp-header"><button class="dp-prev"></button><span class="dp-month-year"><span class="dp-month">'+t.months[e.getMonth()]+'</span><span class="dp-year">'+e.getFullYear()+'</span></span><button class="dp-next"></button></header><div class="dp-body">'+n()+a()+'</div><footer class="dp-footer"><button class="dp-today">'+t.today+'</button><button class="dp-clear">'+t.clear+'</button><button class="dp-close">'+t.close+"</button></footer></div></div>")}function v(e,t,n){e.addEventListener(t,n,!0)}function b(e,t){for(var n in t)e[n]=t[n];return e}function D(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}var g=f(t),y=g.parse(e.value),h=g.min&&new Date(g.min).getTime(),w=g.max&&new Date(g.max).getTime(),T=m(y,g),M=!1,E=D('<button style="position: absolute; width: 1; height: 1; overflow: hidden; border: 0; background: transparent; top: 0;"></button>'),C=document.body,S=window.CustomEvent;e.readOnly=!0,d(y)||(u(g.parse(g.min?g.min:g.max)),e.value=g.format(y)),function(){return"function"!=typeof S&&(S=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},void(S.prototype=window.Event.prototype))}(),v(e,"focus",n),v(e,"click",n),v(T,"keydown",l({37:s(-1),38:s(-7),39:s(1),40:s(7),13:function(){i(y)},27:a})),v(T,"click",p({"dp-clear":function(){i()},"dp-close":a,"dp-wrapper":a,"dp-prev":c(-1),"dp-next":c(1),"dp-today":function(){i(new Date)},"dp-day":function(e){var t=e.target.getAttribute("data-dp");t&&i(new Date(parseInt(t)))}})),v(T,"mousedown",function(e){e.preventDefault()}),v(T,"blur",function(e){setTimeout(function(){T.contains(document.activeElement)||a()},1)})}"undefined"!=typeof module&&module.exports&&(module.exports=TinyDatePicker);
//# sourceMappingURL=tiny-date-picker.min.js.map