var TinyDatePicker=function(){"use strict";function e(e,r){var c=t(e,r||{});c.isModal?e.readOnly=!0:s("blur",e,a(5,function(){c.el&&!c.el.contains(document.activeElement)&&b(c)}));var o=a(5,function(){c.isModal&&h(c)?b(c):n(c)});s("click",e,o),s("focus",e,o)}function t(e,t){var a={input:e,mode:t.mode||"dp-modal",days:t.days||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:t.months||["January","February","March","April","May","June","July","August","September","October","November","December"],today:t.today||"Today",clear:t.clear||"Clear",close:t.close||"Close",format:t.format||function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parse:t.parse||function(e){var t=new Date(e);return isNaN(t)?k():t},onChange:function(t){t&&!x(a,t)||(t&&(a.selectedDate=new Date(a.currentDate=t)),e.value=t?a.format(t):"",a.isModal?e.focus():f(m,a),e.dispatchEvent(new Y("change",{bubbles:!0})))},weekStartsMonday:t.weekStartsMonday};return a.min=M(a,t.min,-100),a.max=M(a,t.max,100),a.isModal="dp-modal"===a.mode,a}function a(e,t){var a=void 0;return function(){clearTimeout(a),a=setTimeout(t,e)}}function n(e){if(!e.el){var t=e.input,n=document.createElement("div");n.className=e.mode,n.innerHTML='<div class="dp"></div>'+(e.isModal?'<a href="#" class="dp-focuser">.</a>':""),e.el=n;var u=n.querySelector(".dp");s("blur",u,a(10,function(){u.contains(document.activeElement)||(e.isModal?t.focus():t!==document.activeElement&&b(e))})),r(e),e.isModal?document.body.appendChild(n):(n.style.left=t.offsetLeft+"px",n.style.top=t.offsetTop+t.offsetHeight+"px",t.parentElement.insertBefore(n,t.nextSibling)),f(m,e),s("mousedown",n,function(e){e.target!==n&&"A"!==e.target.tagName&&e.preventDefault()}),s("keydown",n,function(t){t.keyCode>=C&&t.keyCode<=E&&t.preventDefault(),n.querySelector(".dp-cal")?c(t,n,e):n.querySelector(".dp-months")?o(t,n,e):n.querySelector(".dp-years")&&i(t,n,e)}),s("click",/dp-next/,n,function(){D(e.currentDate,e.currentDate.getMonth()+1),f(m,e)}),s("click",/dp-prev/,n,function(){D(e.currentDate,e.currentDate.getMonth()-1),f(m,e)}),s("click",/dp-day/,n,function(t){e.onChange(new Date(parseInt(t.target.getAttribute("data-date"))))}),s("click",/dp-year/,n,function(t){e.currentDate.setFullYear(parseInt(t.target.getAttribute("data-year"))),f(m,e)}),s("click",/dp-month/,n,function(t){e.currentDate.setMonth(parseInt(t.target.getAttribute("data-month"))),f(m,e)}),s("click",/dp-cal-year/,n,function(){f(p,e)}),s("click",/dp-cal-month/,n,function(){f(v,e)}),s("click",/dp-today/,n,function(){e.onChange(k())}),s("click",/dp-clear/,n,function(){e.onChange(null)}),s("click",/dp-close/,n,function(){t.focus(),!e.isModal&&a(10,function(){b(e)})()})}}function r(e){var t=e.input,a=e.parse(t.value);e.currentDate=x(e,a)?a:new Date(e.min),e.selectedDate=new Date(e.currentDate),t.value&&(t.value=e.format(e.currentDate))}function c(e,t,a){var n=e.keyCode;n===C?l(t,a,-1):n===F?l(t,a,1):n===T?l(t,a,-7):n===E&&l(t,a,7)}function o(e,t,a){var n=e.keyCode;n===C?d(t,a,-1):n===F?d(t,a,1):n===T?d(t,a,-3):n===E&&d(t,a,3)}function i(e,t,a){var n=e.keyCode;n===C||n===T?u(e,t,a,-1):n!==F&&n!==E||u(e,t,a,1)}function u(e,t,a,n){e.preventDefault();var r=a.currentDate.getFullYear()+n,c=Math.min(a.max.getFullYear(),Math.max(a.min.getFullYear(),r));a.currentDate.setFullYear(c),f(p,a)}function d(e,t,a){var n=(12+(t.currentDate.getMonth()+a))%12;D(t.currentDate,n),f(v,t)}function l(e,t,a){var n=t.currentDate;n.setDate(n.getDate()+a),f(m,t)}function s(e,t,a,n){n||(n=a,a=t,t=/./),a.addEventListener(e,function(e){t.test(e.target.className)&&n(e)},!0)}function f(e,t){var a=t.input===document.activeElement,n=e(t);if(n&&(t.el.firstChild.innerHTML=n),t.isModal||!a){var r=t.el.querySelector(".dp-current");return r&&r.focus()}}function p(e){var t=e.currentDate.getFullYear(),a=e.selectedDate.getFullYear();return'<div class="dp-years">'+y(e,function(e){var n="dp-year";return n+=e===t?" dp-current":"",n+=e===a?" dp-selected":"",'<a tabindex="-1" href="javascript:;" class="'+n+'" data-year="'+e+'">'+e+"</a>"})+"</div>"}function v(e){var t=e.months,a=e.currentDate,n=a.getMonth();return'<div class="dp-months">'+t.map(function(e,t){var a="dp-month";return a+=n===t?" dp-current":"",'<a tabindex="-1" href="javascript:;" class="'+a+'" data-month="'+t+'">'+e+"</a>"}).join("")+"</div>"}function m(e){var t=e.days,a=e.weekStartsMonday?1:0,n=e.currentDate,r=e.selectedDate,c=n.getMonth(),o=k().getTime();return'<div class="dp-cal"><header class="dp-cal-header"><a tabindex="-1" href="javascript:;" class="dp-prev">Prev</a><a tabindex="-1" href="javascript:;" class="dp-cal-month">'+e.months[c]+'</a><a tabindex="-1" href="javascript:;" class="dp-cal-year">'+n.getFullYear()+'</a><a tabindex="-1" href="javascript:;" class="dp-next">Next</a></header><div class="dp-days">'+t.map(function(e,n){return'<span class="dp-col-header">'+t[(n+a)%t.length]+"</span>"}).join("")+g(n,a,function(t){var a=t.getMonth()!==c,i=!x(e,t),u=t.getTime()===o,d="dp-day";return d+=a?" dp-edge-day":"",d+=t.getTime()===n.getTime()?" dp-current":"",d+=t.getTime()===r.getTime()?" dp-selected":"",d+=i?" dp-day-disabled":"",d+=u?" dp-day-today":"",'<a tabindex="-1" href="javascript:;" class="'+d+'" data-date="'+t.getTime()+'">'+t.getDate()+"</a>"})+'</div><footer class="dp-cal-footer"><a tabindex="-1" href="javascript:;" class="dp-today">'+e.today+'</a><a tabindex="-1" href="javascript:;" class="dp-clear">'+e.clear+'</a><a tabindex="-1" href="javascript:;" class="dp-close">'+e.close+"</a></footer></div>"}function g(e,t,a){var n="",r=new Date(e);r.setDate(1),r.setDate(t+r.getDate()-r.getDay());for(var c=0;c<42;++c)n+=a(r),r.setDate(r.getDate()+1);return n}function y(e,t){for(var a="",n=e.max.getFullYear(),r=e.min.getFullYear();r<=n;++r)a+=t(r);return a}function D(e,t){var a=e.getDate();e.setDate(1),e.setMonth(t),e.setDate(a),e.getDate()<a&&e.setDate(1-e.getDate())}function h(e){return!!e.el}function b(e){var t=e.el;t&&t.parentElement.removeChild(t),e.el=void 0}function M(e,t,a){return t?e.parse(t):new Date(k().setFullYear(k().getFullYear()+a))}function x(e,t){return e.min<=t&&e.max>=t}function k(){var e=new Date;return e.setHours(0,0,0,0),e}function w(){var e=window.CustomEvent;return"function"!=typeof e&&(e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a},e.prototype=window.Event.prototype),e}var C=37,T=38,F=39,E=40,Y=w();return e}();"undefined"!=typeof module&&module.exports&&(module.exports=TinyDatePicker);
//# sourceMappingURL=tiny-date-picker.min.js.map