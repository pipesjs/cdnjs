var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports={dispatch:b().dispatch,getState:b().getState,setState:b().setState,setActions:b().setActions,subscribe:b().subscribe,middleware:b().middleware,unsubscribe:b().unsubscribe}:a.Mockstate=b()}(this,function(){"use strict";var a={localState:{recoveryStateWhenOffline:function(){window.addEventListener("load",function(){null!==localStorage.getItem("mockstate:StateToRecovery")&&(a.mockStoreState=JSON.parse(localStorage.getItem("mockstate:StateToRecovery")),localStorage.removeItem("mockstate:StateToRecovery"))}),window.addEventListener("online",function(b){var c=JSON.parse(localStorage.getItem("mockstate:StateToRecovery"));a.mockStoreState=c,localStorage.setItem("mockstate:LocalState",c),localStorage.removeItem("mockstate:StateToRecovery")}),window.addEventListener("offline",function(b){localStorage.setItem("mockstate:StateToRecovery",JSON.stringify(a.mockStoreState))})},persistInitialStateOnLocalStorage:function(a){localStorage.setItem("mockstate:LocalState",JSON.stringify(a))}},mockStoreState:{},_store:{state:{},actions:{},components:[],middleware:{}},store:{subscribe:function(b,c){a._store.components.push({component:b,handler:c})},unsubscribe:function(b){var c=a._store.components;c.forEach(el,function(a){el===b&&c.splice(a,1)})},middleware:function(b){a._store.middleware=b},dispatch:function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=function(){var c=Promise.resolve(a._store.actions[b].apply(null,[].concat(a.mockStoreState,d))).then(function(c){var d=a._store.middleware,e=a._store.components,f={action:b,value:c};return"function"==typeof d&&d.call(null,f,a.mockStoreState),e.forEach(function(a,b){void 0!==a.component&&"function"==typeof a.handler&&a.handler(f)}),f});return c};return f()},setState:function(b){Object.assign(a._store.state,b);Object.assign(a.mockStoreState,b),a.localState.recoveryStateWhenOffline()},getState:function(b){return"*"===b?a.mockStoreState:a.mockStoreState[b]},setActions:function(b){Object.assign(a._store.actions,b)}}};return a.store});