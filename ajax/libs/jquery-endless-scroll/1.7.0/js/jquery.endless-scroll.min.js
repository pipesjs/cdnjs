var EndlessScroll;EndlessScroll=function(){function e(e,i){var n=this;this.options=$.extend({},t,i),this.contentStack=[],this.scrollDirection="next",this.firing=!0,this.fired=!1,this.fireSequence=0,this.pageSequence=0,this.nextSequence=1,this.prevSequence=-1,this.lastScrollTop=0,this.insertLocation=this.options.insertAfter,this.didScroll=!1,this.isScrollable=!0,this.target=e,this.targetId="",this.content="",this.innerWrap=$(".endless_scroll_inner_wrap",this.target),this.handleDeprecatedOptions(),this.setInsertPositionsWhenNecessary(),$(e).scroll(function(){return n.detectTarget(e),n.detectScrollDirection()})}var t;return e.name="EndlessScroll",t={inflowPixels:50,fireOnce:!0,fireDelay:150,loader:"Loading...",content:"",insertBefore:null,insertAfter:null,intervalFrequency:250,resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1}},e.prototype.run=function(){var e=this;return setInterval(function(){if(e.shouldTryFiring()&&!e.ceaseFireWhenNecessary()&&e.shouldBeFiring())return e.resetFireSequenceWhenNecessary(),e.acknowledgeFiring(),e.insertLoader(),e.hasContent()&&(e.showContent(),e.fireCallback(),e.delayFireingWhenNecessary()),e.removeLoader()},this.options.intervalFrequency)},e.prototype.handleDeprecatedOptions=function(){if(this.options.data&&(this.options.content=this.options.data),this.options.bottomPixels)return this.options.inflowPixels=this.options.bottomPixels},e.prototype.setInsertPositionsWhenNecessary=function(){if(null===t.insertBefore&&(this.options.insertBefore=""+this.target.selector+" div:first"),null===t.insertAfter)return this.options.insertAfter=""+this.target.selector+" div:last"},e.prototype.detectTarget=function(e){return this.target=e,this.targetId=$(this.target).attr("id")},e.prototype.detectScrollDirection=function(){var e;return this.didScroll=!0,e=$(this.target).scrollTop(),e>this.lastScrollTop?this.scrollDirection="next":this.scrollDirection="prev",this.lastScrollTop=e},e.prototype.shouldTryFiring=function(){var e;return e=this.didScroll&&this.firing===!0,e&&(this.didScroll=!1),e},e.prototype.ceaseFireWhenNecessary=function(){return!!this.options.ceaseFire.apply(this.target,[this.fireSequence,this.pageSequence])&&(this.firing=!1,!0)},e.prototype.wrapContainer=function(){if(0===this.innerWrap.length)return this.innerWrap=$(this.target).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")},e.prototype.setScrollPositionWhenNecessary=function(e){if("prev"===this.scrollDirection&&e.scrollTop()<=this.options.inflowPixels)return e.scrollTop(this.options.inflowPixels)},e.prototype.scrollableAreaMargin=function(e,t){switch(this.scrollDirection){case"next":return e.height()-$(t).height()<=$(t).scrollTop()+this.options.inflowPixels;case"prev":return $(t).scrollTop()<=this.options.inflowPixels}},e.prototype.calculateScrollableCanvas=function(){return this.target===document||this.target===window?(this.isScrollable=this.scrollableAreaMargin(document,window),this.setScrollPositionWhenNecessary(window)):(this.wrapContainer(),this.isScrollable=this.innerWrap.length>0&&this.scrollableAreaMargin(this.innerWrap,this.target),this.setScrollPositionWhenNecessary(this.target))},e.prototype.shouldBeFiring=function(){return this.calculateScrollableCanvas(),this.isScrollable&&(this.options.fireOnce===!1||this.options.fireOnce===!0&&this.fired!==!0)},e.prototype.resetFireSequenceWhenNecessary=function(){if(this.options.resetCounter.apply(this.target)===!0)return this.fireSequence=0},e.prototype.acknowledgeFiring=function(){switch(this.fired=!0,this.fireSequence++,this.scrollDirection){case"next":return this.pageSequence=this.nextSequence++;case"prev":return this.pageSequence=this.prevSequence--}},e.prototype.insertContent=function(e){switch(this.scrollDirection){case"next":return $(this.options.insertAfter).after(e);case"prev":return $(this.options.insertBefore).before(e)}},e.prototype.insertLoader=function(){return this.insertContent('<div class="endless_scroll_loader_'+this.targetId+'      endless_scroll_loader">'+this.options.loader+"</div>")},e.prototype.removeLoader=function(){return $(".endless_scroll_loader_"+this.targetId).fadeOut(function(){return $(this).remove()})},e.prototype.hasContent=function(){return"function"==typeof this.options.content?this.content=this.options.content.apply(this.target,[this.fireSequence,this.pageSequence]):this.content=this.options.content,this.content!==!1},e.prototype.showContent=function(){return $("#endless_scroll_content_current").removeAttr("id"),this.insertContent('<div id="endless_scroll_content_current"      class="endless_scroll_content" rel="'+this.pageSequence+'">'+this.content+"</div>")},e.prototype.fireCallback=function(){return this.options.callback.apply(this.target,[this.fireSequence,this.pageSequence])},e.prototype.delayFireingWhenNecessary=function(){var e=this;return this.options.fireDelay>0?($("body").after('<div id="endless_scroll_marker"></div>'),$("#endless_scroll_marker").fadeTo(this.options.fireDelay,1,function(){return $("#endless_scroll_marker").remove(),e.fired=!1})):this.fired=!1},e}(),function(e){return e.fn.endlessScroll=function(e){return new EndlessScroll(this,e).run()}}(jQuery);
//# sourceMappingURL=jquery.endless-scroll.min.js.map