!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.gibon=e()}(this,function(){"use strict";function t(t,n,r,o){function i(t){t=function(){return u(window.location.pathname)},t(),window.addEventListener("onpopstate",t),window.onclick=function(t){r(t,u)}}function u(t,e){return t="string"==typeof t?f(t):t,o=n(t,e||{},o)}function f(n){return n=n.replace(/^\/+/,"/").replace(/\/+$/,"")||"/",window.history.pushState(0,0,n),e(t,n)}return n=n||function(t,e){return t(e)},r=r||function(t,e){if(!(t.metaKey||t.shiftKey||t.ctrlKey||t.altKey)){for(var n=t.target;n&&"a"!==n.localName;)n=n.parentNode;e=window.location,n&&n.host===e.host&&!n.hasAttribute("data-no-routing")&&(u(n.pathname),t.preventDefault())}},{start:i,render:u}}function e(t,e,r){if("function"==typeof t)return t;if(t[e])return t[e];for(var o in t)if(r=n(o),r.regex.test(e)){var i={};if(e.replace(r.regex,function(){for(var t=1;t<arguments.length-2;t++)i[r.keys.shift()]=arguments[t];r.match=1}),r.match)return function(e,n){return n=n||i,t[o](e,n,i)}}}function n(t,e){var n=[];return e="^"+t.replace(/\//g,"\\/").replace(/:(\w+)/g,function(t,e){return n.push(e),"(\\w+)"})+"$",{regex:new RegExp(e,"i"),keys:n}}return t});