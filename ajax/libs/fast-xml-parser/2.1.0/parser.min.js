function parseValue(e){return e=e?isNaN(e)?""+e:e.indexOf(".")!==-1?Number.parseFloat(e):Number.parseInt(e,10):""}function buildAttributesArr(e,t,r){if(e=e||e.trim(),!t&&e.length>3){for(var n=getAllMatches(e,attrsRegx),i={},o=0;o<n.length;o++)i[r+n[o][1]]=n[o][2];return i}}function convertToJson(e){var t={};if(e.val||""===e.val)return e.val;for(var r=0;r<e.child.length;r++){var n=e.child[r].tagname,i=convertToJson(e.child[r]);if(t[n]){if(!Array.isArray(t[n])){var o=t[n];t[n]=[],t[n].push(o)}t[n].push(i)}else t[n]=i}return t}var getAllMatches=function(e,t){for(var r=[],n=t.exec(e);n;){for(var i=[],o=0;o<n.length;o++)i.push(n[o]);r.push(i),n=t.exec(e)}return r},xmlNode=function(e,t,r){this.tagname=e,this.parent=t,this.child=[],this.val=r,this.addChild=function(e){this.child.push(e)}},tagsRegx=new RegExp("<(\\/?[\\w:-]+)([^>]*)>([^<]+)?","g"),defaultOptions={attrPrefix:"@_",textNodeName:"#text",ignoreNonTextNodeAttr:!0,ignoreTextNodeAttr:!0,ignoreNameSpace:!0,ignoreRootElement:!1},buildOptions=function(e){e||(e={});for(var t=["attrPrefix","ignoreNonTextNodeAttr","ignoreTextNodeAttr","ignoreNameSpace","ignoreRootElement","textNodeName"],r=0;r<t.length;r++)void 0===e[t[r]]&&(e[t[r]]=defaultOptions[t[r]]);return e},xml2json=function(e,t){t=buildOptions(t),e=e.replace(/>(\s+)/g,">");for(var r=getAllMatches(e,tagsRegx),n=new xmlNode("_xml"),i=n,o=0;o<r.length-1;o++){var a,l=r[o][1],s=r[o][2],d=r[o][3],u=r[o+1][1];if(0!==l.indexOf("/")){var x="/"===s.charAt(s.length-1),f=new xmlNode(l,i);if(x)a=buildAttributesArr(s,t.ignoreTextNodeAttr,t.attrPrefix),f.val=a||"",i.addChild(f);else if("/"+l===u)a=buildAttributesArr(s,t.ignoreTextNodeAttr,t.attrPrefix),d=parseValue(d),a?(a[t.textNodeName]=d,f.val=a):f.val=d||"",i.addChild(f),o++;else{if(a=buildAttributesArr(s,t.ignoreNonTextNodeAttr,t.attrPrefix))for(var g in a)a.hasOwnProperty(g)&&f.addChild(new xmlNode(g,f,a[g]));i.addChild(f),i=f}}else i=i.parent}return convertToJson(n)},attrsRegx=new RegExp("(\\S+)=.([^'\"]+)","g");"undefined"==typeof exports&&(exports=this),exports.parse=xml2json;
//# sourceMappingURL=parser.min.js.map