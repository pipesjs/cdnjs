!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.parser=e()}}(function(){return function e(t,r,n){function i(a,f){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!f&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var g=r[a]={exports:{}};t[a][0].call(g.exports,function(e){var r=t[a][1][e];return i(r||e)},g,g.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){var n=function(e){this.name="InvalidXmlException",this.message=e,this.stack=(new Error).stack};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.exports=n},{}],2:[function(e,t,r){function n(e){return e.replace(new RegExp("\\]\\]><!\\[CDATA\\[","g"),"")}function i(e,t){if(t){var r=e.split(":"),n="/"===e.charAt(0)?"/":"";2===r.length&&(e=n+r[1])}return e}function o(e){return e=e?isNaN(e)?""+e:-1!==e.indexOf(".")?Number.parseFloat(e):Number.parseInt(e,10):""}function a(e,t,r,n){if(e=e||e.trim(),!t&&e.length>3){for(var o=f(e,d),a={},l=0;l<o.length;l++){a[r+i(o[l][1],n)]=o[l][2]}return a}}var f=e("./util").getAllMatches,l=function(e,t,r){this.tagname=e,this.parent=t,this.child=[],this.val=r,this.addChild=function(e){this.child.push(e)}},u=new RegExp("<(\\/?[\\w:-]+)([^>]*)>(<!\\[CDATA\\[(.*)\\]\\]>)?([^<]+)?","g"),g={attrPrefix:"@_",textNodeName:"#text",ignoreNonTextNodeAttr:!0,ignoreTextNodeAttr:!0,ignoreNameSpace:!1,ignoreRootElement:!1},s=function(e){e||(e={});for(var t=["attrPrefix","ignoreNonTextNodeAttr","ignoreTextNodeAttr","ignoreNameSpace","ignoreRootElement","textNodeName"],r=0;r<t.length;r++)void 0===e[t[r]]&&(e[t[r]]=g[t[r]]);return e},h=function(e,t){t=s(t);for(var r=f(e,u),g=new l("!xml"),h=g,c=0;c<r.length;c++){var d,v=i(r[c][1],t.ignoreNameSpace),p=c+1<r.length?i(r[c+1][1],t.ignoreNameSpace):void 0,w=r[c][2],x=void 0===r[c][4]?r[c][5]:n(r[c][4]);if(0!==v.indexOf("/")){var m="/"===w.charAt(w.length-1),N=new l(v,h);if(m)d=a(w,t.ignoreTextNodeAttr,t.attrPrefix,t.ignoreNameSpace),N.val=d||"",h.addChild(N);else if("/"+v===p)d=a(w,t.ignoreTextNodeAttr,t.attrPrefix,t.ignoreNameSpace),x=o(x),d?(d[t.textNodeName]=x,N.val=d):N.val=x||"",h.addChild(N),c++;else{if(d=a(w,t.ignoreNonTextNodeAttr,t.attrPrefix,t.ignoreNameSpace))for(var A in d)d.hasOwnProperty(A)&&N.addChild(new l(A,N,d[A]));h.addChild(N),h=N}}else h=h.parent}return g},c=function(e,t){return v(h(e,t))},d=new RegExp("(\\S+)=.([^'\"]+)","g"),v=function(e){var t={};if(e.val||""===e.val)return e.val;for(var r=0;r<e.child.length;r++){var n=e.child[r].tagname,i=v(e.child[r]);if(void 0!==t[n]){if(!Array.isArray(t[n])){var o=t[n];t[n]=[],t[n].push(o)}t[n].push(i)}else t[n]=i}return t};r.parse=c,r.getTraversalObj=h,r.convertToJson=v,r.validate=e("./validator").validate},{"./util":3,"./validator":4}],3:[function(e,t,r){var n=function(e,t){for(var r=[],n=t.exec(e);n;){for(var i=[],o=0;o<n.length;o++)i.push(n[o]);r.push(i),n=t.exec(e)}return r};r.getAllMatches=n},{}],4:[function(e,t,r){function n(e,t,r){for(var n=t;n<e.length&&("-"!==e[n]||"-"!==e[n+1]||">"!==e[n+2]);n++);if("<!--"===e.substr(t,4)&&"-->"===e.substr(n,3))return e.substring(t,n);throw new s("Invalid comment tag at "+r+":"+t)}function i(e,t,r){for(var n=t;n<e.length;n++)if("<"===e[n]&&"/"===e[n+1]){n--;break}if("<![CDATA["===e.substr(t,9)&&"]]>"===e.substr(n-2,3))return e.substring(t,n);throw new s("Invalid CDATA tag at "+r+":"+t)}function o(e,t,r){e=e.replace(/\s/g," ");for(var n=t;n<e.length&&" "!==e[n]&&">"!==e[n];n++);if(">"!==e[n-1])for(var i=n;i<e.length&&">"!==e[i];i++)if(" "!==e[i])throw new s("Invalid closing tag at "+r+":"+t);return e.substring(t,n)}function a(e,t,r){for(var n=t;n<e.length&&">"!==e[n];n++);if(">"===e[n]){var i=e.substring(t,n);if(i.length>4){var o=f([],i,c,t,r);o=f(o,i,d,t,r);var a=g(i,v);for(n=0;n<a.length;n++){if(!o[a[n][1].trim()])throw new s("Invalid arguments at "+r+":"+t)}}return i}throw new s("Not closing tag at "+r+":"+t)}function f(e,t,r,n,i){for(var o=g(t,r),a=0;a<o.length;a++){var f=o[a][1];if(e[f])throw new s("Argument "+f+" is redefined at "+i+":"+n);e[f]=!0}return e}function l(e,t){for(var r=t;r<e.length&&(" "!==e[r]&&">"!==e[r]&&("/"!==e[r]||">"!==e[r+1]));r++);return e.substring(t,r)}function u(e,t){for(var r=t;r<e.length&&"<"!==e[r];r++);return e.substring(t,r)}var g=e("./util").getAllMatches,s=e("./InvalidXmlException"),h=function(e){e=e.replace(/[ \t]/g," ");for(var t=[],r="",f=1,g=0;g<e.length;g++)if("\n"===e[g])f++;else if("<"===e[g]){if(" "===e[g+1])throw new s("Invalid tag at "+f+":"+g);if("!"===e[g+1]){var h="";if("-"===e[g+2])h=n(e,g,f);else{if("["!==e[g+2])throw new s("Invalid tag at "+f+":"+g);h=i(e,g,f)}g+=h.length-1}else if("/"===e[g+1]){if(g+=2,r=o(e,g,f),t[t.length-1]!==r)throw new s("closing tag is not matching at "+f+":"+g);t.pop(),g+=r.length}else{r=l(e,++g),g+=r.length;var c=a(e,g,f);!c||"/"!==c[c.length-1]&&"?"!==c[c.length-1]?t.push(r):g+=c.length;var d=u(e,++g);g+=d.length-1}}if(0===t.length)return!0;throw new s("closing tag is missing for "+t)},c=new RegExp('(?:[\\s]+([\\w:-]+)[\\s]*=[\\s]*"([^"]*)")',"g"),d=new RegExp("(?:[\\s]+([\\w:-]+)[\\s]*=[\\s]*'([^']*)')","g"),v=new RegExp("([\\w: -]+)[\\s]*=","g");r.validate=h},{"./InvalidXmlException":1,"./util":3}]},{},[2])(2)});
//# sourceMappingURL=parser.min.js.map