!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.parser=e()}}(function(){return function e(t,r,n){function i(a,l){if(!r[a]){if(!t[a]){var f="function"==typeof require&&require;if(!l&&f)return f(a,!0);if(o)return o(a,!0);var g=new Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g}var s=r[a]={exports:{}};t[a][0].call(s.exports,function(e){var r=t[a][1][e];return i(r?r:e)},s,s.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){var n=function(e){this.name="InvalidXmlException",this.message=e,this.stack=(new Error).stack};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.exports=n},{}],2:[function(e,t,r){function n(e,t){if(t){var r=e.split(":"),n="/"===e.charAt(0)?"/":"";2===r.length&&(e=n+r[1])}return e}function i(e){return e=e?isNaN(e)?""+e:e.indexOf(".")!==-1?Number.parseFloat(e):Number.parseInt(e,10):""}function o(e,t,r,i){if(e=e||e.trim(),!t&&e.length>3){for(var o=a(e,h),l={},f=0;f<o.length;f++){var g=r+n(o[f][1],i);l[g]=o[f][2]}return l}}var a=e("./util").getAllMatches,l=function(e,t,r){this.tagname=e,this.parent=t,this.child=[],this.val=r,this.addChild=function(e){this.child.push(e)}},f=new RegExp("<(\\/?[\\w:-]+)([^>]*)>([^<]+)?","g"),g={attrPrefix:"@_",textNodeName:"#text",ignoreNonTextNodeAttr:!0,ignoreTextNodeAttr:!0,ignoreNameSpace:!1,ignoreRootElement:!1},s=function(e){e||(e={});for(var t=["attrPrefix","ignoreNonTextNodeAttr","ignoreTextNodeAttr","ignoreNameSpace","ignoreRootElement","textNodeName"],r=0;r<t.length;r++)void 0===e[t[r]]&&(e[t[r]]=g[t[r]]);return e},u=function(e,t){t=s(t),e=e.replace(/>(\s+)/g,">");for(var r=a(e,f),g=new l("!xml"),u=g,c=0;c<r.length;c++){var h,d=n(r[c][1],t.ignoreNameSpace),v=c+1<r.length?n(r[c+1][1],t.ignoreNameSpace):void 0,p=r[c][2],w=r[c][3];if(0!==d.indexOf("/")){var x="/"===p.charAt(p.length-1),m=new l(d,u);if(x)h=o(p,t.ignoreTextNodeAttr,t.attrPrefix,t.ignoreNameSpace),m.val=h||"",u.addChild(m);else if("/"+d===v)h=o(p,t.ignoreTextNodeAttr,t.attrPrefix,t.ignoreNameSpace),w=i(w),h?(h[t.textNodeName]=w,m.val=h):m.val=w||"",u.addChild(m),c++;else{if(h=o(p,t.ignoreNonTextNodeAttr,t.attrPrefix,t.ignoreNameSpace))for(var N in h)h.hasOwnProperty(N)&&m.addChild(new l(N,m,h[N]));u.addChild(m),u=m}}else u=u.parent}return g},c=function(e,t){return d(u(e,t))},h=new RegExp("(\\S+)=.([^'\"]+)","g"),d=function(e){var t={};if(e.val||""===e.val)return e.val;for(var r=0;r<e.child.length;r++){var n=e.child[r].tagname,i=d(e.child[r]);if(void 0!==t[n]){if(!Array.isArray(t[n])){var o=t[n];t[n]=[],t[n].push(o)}t[n].push(i)}else t[n]=i}return t};r.parse=c,r.getTraversalObj=u,r.convertToJson=d,r.validate=e("./validator").validate},{"./util":3,"./validator":4}],3:[function(e,t,r){var n=function(e,t){for(var r=[],n=t.exec(e);n;){for(var i=[],o=0;o<n.length;o++)i.push(n[o]);r.push(i),n=t.exec(e)}return r};r.getAllMatches=n},{}],4:[function(e,t,r){function n(e,t,r){for(var n=t;n<e.length&&("-"!==e[n]||"-"!==e[n+1]||">"!==e[n+2]);n++);if("<!--"===e.substr(t,4)&&"-->"===e.substr(n,3))return e.substring(t,n);throw new s("Invalid comment tag at "+r+":"+t)}function i(e,t,r){e=e.replace(/\s/g," ");for(var n=t;n<e.length&&" "!==e[n]&&">"!==e[n];n++);if(">"!==e[n-1])for(var i=n;i<e.length&&">"!==e[i];i++)if(" "!==e[i])throw new s("Invalid closing tag at "+r+":"+t);return e.substring(t,n)}function o(e,t,r){for(var n=t;n<e.length&&">"!==e[n];n++);if(">"===e[n]){var i=e.substring(t,n);if(i.length>4){var o=a([],i,c,t,r);o=a(o,i,h,t,r);var l=g(i,d);for(n=0;n<l.length;n++){var f=l[n][1].trim();if(!o[f])throw new s("Invalid arguments at "+r+":"+t)}}return i}throw new s("Not closing tag at "+r+":"+t)}function a(e,t,r,n,i){for(var o=g(t,r),a=0;a<o.length;a++){var l=o[a][1];if(e[l])throw new s("Argument "+l+" is redefined at "+i+":"+n);e[l]=!0}return e}function l(e,t){for(var r=t;r<e.length&&(" "!==e[r]&&">"!==e[r]&&("/"!==e[r]||">"!==e[r+1]));r++);return e.substring(t,r)}function f(e,t){for(var r=t;r<e.length&&"<"!==e[r];r++);return e.substring(t,r)}var g=e("./util").getAllMatches,s=e("./InvalidXmlException"),u=function(e){e=e.replace(/[ \t]/g," ");for(var t=[],r="",a=1,g=0;g<e.length;g++)if("\n"===e[g])a++;else if("<"===e[g]){if(" "===e[g+1])throw new s("Invalid tag at "+a+":"+g);if("!"===e[g+1]){var u=n(e,g,a);g+=u.length-1}else if("/"===e[g+1]){if(g+=2,r=i(e,g,a),t[t.length-1]!==r)throw new s("closing tag is not matching at "+a+":"+g);t.pop(),g+=r.length}else{r=l(e,++g),g+=r.length;var c=o(e,g,a);!c||"/"!==c[c.length-1]&&"?"!==c[c.length-1]?t.push(r):g+=c.length;var h=f(e,++g);g+=h.length-1}}if(0===t.length)return!0;throw new s("closing tag is missing for "+t)},c=new RegExp('(?:[\\s]+([\\w:-]+)[\\s]*=[\\s]*"([^"]*)")',"g"),h=new RegExp("(?:[\\s]+([\\w:-]+)[\\s]*=[\\s]*'([^']*)')","g"),d=new RegExp("([\\w: -]+)[\\s]*=","g");r.validate=u},{"./InvalidXmlException":1,"./util":3}]},{},[2])(2)});
//# sourceMappingURL=parser.min.js.map