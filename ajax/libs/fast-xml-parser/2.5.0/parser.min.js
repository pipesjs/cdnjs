!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).parser=e()}}(function(){return function e(r,t,n){function i(a,f){if(!t[a]){if(!r[a]){var l="function"==typeof require&&require;if(!f&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=t[a]={exports:{}};r[a][0].call(d.exports,function(e){var t=r[a][1][e];return i(t||e)},d,d.exports,e,r,t,n)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,r,t){function n(e){for(var r=f(e,s),t="",n=0;n<r.length;n++)t+=r[n][1];return t}function i(e,r){if(r){var t=e.split(":"),n="/"===e.charAt(0)?"/":"";2===t.length&&(e=n+t[1])}return e}function o(e,r){return e=e?!r||isNaN(e)?""+e:-1!==e.indexOf(".")?Number.parseFloat(e):Number.parseInt(e,10):""}function a(e,r,t,n){if(e=e||e.trim(),!r&&e.length>3){for(var o=f(e,h),a={},l=0;l<o.length;l++)a[t+i(o[l][1],n)]=o[l][3];return a}}var f=e("./util").getAllMatches,l=function(e,r,t){this.tagname=e,this.parent=r,this.child=[],this.val=t,this.addChild=function(e){this.child.push(e)}},u=new RegExp("<(\\/?[\\w:-]+)([^>]*)>(<!\\[CDATA\\[([^\\]\\]]*)\\]\\]>)*([^<]+)?","g"),d={attrPrefix:"@_",textNodeName:"#text",ignoreNonTextNodeAttr:!0,ignoreTextNodeAttr:!0,ignoreNameSpace:!1,ignoreRootElement:!1,textNodeConversion:!0},g=function(e){e||(e={});for(var r=["attrPrefix","ignoreNonTextNodeAttr","ignoreTextNodeAttr","ignoreNameSpace","ignoreRootElement","textNodeName","textNodeConversion"],t=0;t<r.length;t++)void 0===e[r[t]]&&(e[r[t]]=d[r[t]]);return e},c=function(e,r){r=g(r);for(var t=f(e,u),d=new l("!xml"),c=d,s=0;s<t.length;s++){var h,v=i(t[s][1],r.ignoreNameSpace),p=s+1<t.length?i(t[s+1][1],r.ignoreNameSpace):void 0,x=t[s][2],N=void 0===t[s][4]?t[s][5]:n(t[s][0]);if(0!==v.indexOf("/")){var m="/"===x.charAt(x.length-1),A=new l(v,c);if(m)h=a(x,r.ignoreTextNodeAttr,r.attrPrefix,r.ignoreNameSpace),A.val=h||"",c.addChild(A);else if("/"+v===p)h=a(x,r.ignoreTextNodeAttr,r.attrPrefix,r.ignoreNameSpace),N=o(N,r.textNodeConversion),h?(h[r.textNodeName]=N,A.val=h):A.val=N||"",c.addChild(A),s++;else{if(h=a(x,r.ignoreNonTextNodeAttr,r.attrPrefix,r.ignoreNameSpace))for(var w in h)h.hasOwnProperty(w)&&A.addChild(new l(w,A,h[w]));c.addChild(A),c=A}}else c=c.parent}return d},s=new RegExp("<!\\[CDATA\\[([^\\]\\]]*)\\]\\]>","g"),h=new RegExp("(\\S+)\\s*=\\s*(['\"])(.*?)\\2","g"),v=function(e){var r={};if(e.val||""===e.val)return e.val;for(var t=0;t<e.child.length;t++){var n=e.child[t].tagname,i=v(e.child[t]);if(void 0!==r[n]){if(!Array.isArray(r[n])){var o=r[n];r[n]=[],r[n].push(o)}r[n].push(i)}else r[n]=i}return r};t.parse=function(e,r){return v(c(e,r))},t.getTraversalObj=c,t.convertToJson=v,t.validate=e("./validator").validate},{"./util":2,"./validator":3}],2:[function(e,r,t){t.getAllMatches=function(e,r){for(var t=[],n=r.exec(e);n;){for(var i=[],o=0;o<n.length;o++)i.push(n[o]);t.push(i),n=r.exec(e)}return t}},{}],3:[function(e,r,t){function n(e){var r=a(e,l);for(i=0;i<r.length;i++){if(r[i][1].trim().length>0&&r[i][1].trim().length<4)return!1;if(0!==r[i][1].trim().length){var t=a(r[i][1],u),n=[];for(j=0;j<t.length;j++){if(n[t[j][1]])return!1;n[t[j][1]]=1}}}return!0}function o(e,r){if(e.length===r)return!0;if(0===e[r][0].indexOf("</"))return r;if(e[r][0].indexOf("/>")===e[r][0].length-2)return o(e,r+1);if(e.length>r+1){if(0===e[r+1][0].indexOf("</"))return e[r][1]===e[r+1][1]?o(e,r+2):-1;var t=o(e,r+1);if(-1!==t&&0===e[t][0].indexOf("</"))return e[r][1]===e[t][1]?o(e,t+1):-1}return-1}var a=e("./util").getAllMatches,f=new RegExp("<\\/?([\\w:\\-]+)\\s*/?>","g");t.validate=function(e){if(e=e.replace(/\n/g,""),e=e.replace(/(<!\[CDATA\[.*?\]\]>)/g,""),e=e.replace(/(<!--.*?(?:-->))/g,""),!0!==n(e))return!1;if(e=e.replace(/(\s+(?:[\w:\-]+)\s*=\s*(['\"]).*?\2)/g,""),(e=e.replace(/(^\s*<\?xml\s*\?>)/g,"")).indexOf("<![CDATA[")>0||e.indexOf("\x3c!--")>0)return!1;var r=a(e,f);return 0!==r.length&&!0===o(r,0)};var l=new RegExp("<[\\w:-]+(.*?)/?>","g"),u=new RegExp("\\s+([\\w:-]+)\\s*=\\s*(['\"])(.*?)\\2","g")},{"./util":2}]},{},[1])(1)});