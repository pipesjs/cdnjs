RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},function(e){"use strict";e.csv={defaults:{separator:",",delimiter:'"',escaper:'"',skip:0,headerLine:1,dataLine:2},splitLines:function(e,r){function a(){s.push(t),t="",i=0}var i=0,t="",s=[];return e.replace(/(\"|\n|\r|[^\"\r\n]+)/gm,function(e){switch(i){case 0:if('"'===e)i=1;else if("\n"===e)a();else if(/^\r$/.test(e));else{if(t)throw new Error("Illegal initial state");t=e,i=3}break;case 1:'"'===e?i=2:"\n"===e||"\r"===e?(t+=e,i=1):(t+=e,i=1);break;case 2:if('"'===e&&'"'===t.substr(t.length-1))t+=e,i=1;else if(","===e)t+=e,i=0;else if("\n"===e)a();else if("\r"!==e)throw new Error("Illegal state");break;case 3:if('"'===m1)throw new Error("Unquoted delimiter found in string");if("\n"===e)a();else if("\r"!==e)throw new Error("Two values, no separator?");break;default:throw new Error("Unknown state")}return""}),0!=i&&a(),s},toArray:function(r,a,i){var a=void 0!==a?a:{},t={};if(t.callback=void 0!==i&&"function"==typeof i&&i,t.separator="separator"in a?RegExp.escape(a.separator):e.csv.defaults.separator,t.delimiter="delimiter"in a?RegExp.escape(a.delimiter):e.csv.defaults.delimiter,t.escaper="escaper"in a?RegExp.escape(a.escaper):e.csv.defaults.escaper,void 0===a.reValue){var s=/(?!\s*$)\s*(?:Y([^YZ]*(?:ZY[^YZ]*)*)Y|([^XYZ\s]*(?:\s+[^XYZ\s]+)*))\s*(?:X|$)/,n=s.source;n=n.replace(/X/g,t.separator),n=n.replace(/Y/g,t.delimiter),n=n.replace(/Z/g,t.escaper),a.reValue=RegExp(n,"g")}if(void 0===a.reUnescape){var l=/ED/,c=l.source;c=c.replace(/E/,t.escaper),c=c.replace(/D/,t.delimiter),a.reUnescape=RegExp(c,"g")}if(void 0===a.reEmptyLast){var p=/S\s*$/;a.reEmptyLast=RegExp(p.source.replace(/S/,t.separator))}if(""===r){if(!t.callback)return o;t.callback("",o)}var s=a.reValue,l=a.reUnescape,p=a.reEmptyLast,o=[];return r.replace(s,function(e,r,a){return"string"==typeof r&&r.length?o.push(r.replace(l,t.delimiter)):"string"==typeof r&&0===r.length?o.push(""):void 0!==a&&o.push(a),""}),p.test(r)&&o.push(""),t.callback?void t.callback("",o):o},toArrays:function(r,a,i){var a=void 0!==a?a:{},t={};t.callback=void 0!==i&&"function"==typeof i&&i,t.separator="separator"in a?a.separator:e.csv.defaults.separator,t.delimiter="delimiter"in a?a.delimiter:e.csv.defaults.delimiter,t.escaper="escaper"in a?a.escaper:e.csv.defaults.escaper,t.skip="skip"in a?a.skip:e.csv.defaults.skip,t.experimental="experimental"in a&&a.experimental;var s=[],n=[],a={delimiter:t.delimiter,separator:t.separator,escaper:t.escaper};s=t.experimental?e.csv.splitLines(r,t.delimiter):r.split(/\r\n|\r|\n/g);for(var l in s)if(!(l<t.skip)){var c=e.csv.toArray(s[l],a);n.push(c)}return t.callback?void t.callback("",n):n},toObjects:function(r,a,i){var a=void 0!==a?a:{},t={};t.callback=void 0!==i&&"function"==typeof i&&i,t.separator="separator"in a?a.separator:e.csv.defaults.separator,t.delimiter="delimiter"in a?a.delimiter:e.csv.defaults.delimiter,t.escaper="escaper"in a?a.escaper:e.csv.defaults.escaper,t.headerLine="headerLine"in a?a.headerLine:e.csv.defaults.headerLine,t.dataLine="dataLine"in a?a.dataLine:e.csv.defaults.dataLine,t.experimental="experimental"in a&&a.experimental;var s=[],n=[],a={delimiter:t.delimiter,separator:t.separator,escaper:t.escaper};s=t.experimental?this.splitLines(r,t.delimiter):r.split(/\r\n|\r|\n/g);var l=e.csv.toArray(s[t.headerLine-1]);for(var c in s)if(!(c<t.dataLine-1)){var p=e.csv.toArray(s[c],a),o={};for(var d in l)o[l[d]]=p[d];n.push(o)}return t.callback?void t.callback("",n):n},fromArrays:function(r,a,t){var a=void 0!==a?a:{},s={};if(s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:e.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:e.csv.defaults.delimiter,s.escaper="escaper"in a?a.escaper:e.csv.defaults.escaper,s.experimental="experimental"in a&&a.experimental,!s.experimental)throw new Error("not implemented");var n=[];for(i in r)n.push(r[i]);return s.callback?void s.callback("",n):n},fromObjects2CSV:function(r,a,t){var a=void 0!==a?a:{},s={};if(s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:e.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:e.csv.defaults.delimiter,s.escaper="escaper"in a?a.escaper:e.csv.defaults.escaper,s.experimental="experimental"in a&&a.experimental,!s.experimental)throw new Error("not implemented");var n=[];for(i in r)n.push(arrays[i]);return s.callback?void s.callback("",n):n}},e.csvEntry2Array=e.csv.toArray,e.csv2Array=e.csv.toArrays,e.csv2Dictionary=e.csv.toObjects}(jQuery);
//# sourceMappingURL=jquery.csv.min.js.map