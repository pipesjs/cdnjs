RegExp.escape=function(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},function(r){"use strict";r.csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(r,e){var a=/\./;if(isNaN(r))return r;if(a.test(r))return parseFloat(r);var t=parseInt(r);return isNaN(t)?0:t}},parsers:{parse:function(r,e){function a(){if(t(),l=0,c="",e.start&&e.state.rowNum<e.start)return n=[],e.state.rowNum++,void(e.state.colNum=1);if(void 0===e.onParseEntry)i.push(n);else{var r=e.onParseEntry(n,e.state);r!==!1&&i.push(r)}n=[],e.end&&e.state.rowNum>=e.end&&(u=!0),e.state.rowNum++,e.state.colNum=1}function t(){if(void 0===e.onParseValue)n.push(c);else{var r=e.onParseValue(c,e.state);r!==!1&&n.push(r)}c="",l=0,e.state.colNum++}var s=e.separator,o=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var i=[],n=[],l=0,c="",u=!1,m=RegExp.escape(s),p=RegExp.escape(o),f=/(D|S|\n|\r|[^DS\r\n]+)/,d=f.source;return d=d.replace(/S/g,m),d=d.replace(/D/g,p),f=RegExp(d,"gm"),r.replace(f,function(r){if(!u)switch(l){case 0:if(r===s){c+="",t();break}if(r===o){l=1;break}if("\n"===r||/^\r$/.test(r))break;c+=r,l=3;break;case 1:if(r===o){l=2;break}c+=r,l=1;break;case 2:if(r===o){c+=r,l=1;break}if(r===s){t();break}if("\n"===r||/^\r$/.test(r)){a();break}throw new Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(r===s){t();break}if("\n"===r||/^\r$/.test(r)){a();break}if(r===o)throw new Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),void 0!==n[0]&&a(),i},splitLines:function(r,e){function a(){if(i=0,e.start&&e.state.rowNum<e.start)return n="",void e.state.rowNum++;if(void 0===e.onParseEntry)o.push(n);else{var r=e.onParseEntry(n,e.state);r!==!1&&o.push(r)}n="",e.end&&e.state.rowNum>=e.end&&(l=!0),e.state.rowNum++}var t=e.separator,s=e.delimiter;e.state.rowNum||(e.state.rowNum=1);var o=[],i=0,n="",l=!1,c=RegExp.escape(t),u=RegExp.escape(s),m=/(D|S|\n|\r|[^DS\r\n]+)/,p=m.source;return p=p.replace(/S/g,c),p=p.replace(/D/g,u),m=RegExp(p,"gm"),r.replace(m,function(r){if(!l)switch(i){case 0:if(r===t){n+=r,i=0;break}if(r===s){n+=r,i=1;break}if("\n"===r){a();break}if(/^\r$/.test(r))break;n+=r,i=3;break;case 1:if(r===s){n+=r,i=2;break}n+=r,i=1;break;case 2:var o=n.substr(n.length-1);if(r===s&&o===s){n+=r,i=1;break}if(r===t){n+=r,i=0;break}if("\n"===r){a();break}if("\r"===r)break;throw new Error("CSVDataError: Illegal state [Row:"+e.state.rowNum+"]");case 3:if(r===t){n+=r,i=0;break}if("\n"===r){a();break}if("\r"===r)break;if(r===s)throw new Error("CSVDataError: Illegal quote [Row:"+e.state.rowNum+"]");throw new Error("CSVDataError: Illegal state [Row:"+e.state.rowNum+"]");default:throw new Error("CSVDataError: Unknown state [Row:"+e.state.rowNum+"]")}}),""!==n&&a(),o},parseEntry:function(r,e){function a(){if(void 0===e.onParseValue)o.push(n);else{var r=e.onParseValue(n,e.state);r!==!1&&o.push(r)}n="",i=0,e.state.colNum++}var t=e.separator,s=e.delimiter;e.state.rowNum||(e.state.rowNum=1),e.state.colNum||(e.state.colNum=1);var o=[],i=0,n="";if(!e.match){var l=RegExp.escape(t),c=RegExp.escape(s),u=/(D|S|\n|\r|[^DS\r\n]+)/,m=u.source;m=m.replace(/S/g,l),m=m.replace(/D/g,c),e.match=RegExp(m,"gm")}return r.replace(e.match,function(r){switch(i){case 0:if(r===t){n+="",a();break}if(r===s){i=1;break}if("\r"===r||"\n"===r)break;n+=r,i=3;break;case 1:if(r===s){i=2;break}n+=r,i=1;break;case 2:if(r===s){n+=r,i=1;break}if(r===t){a();break}if("\r"===r||"\n"===r)break;throw new Error("CSVDataError: Illegal State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");case 3:if(r===t){a();break}if("\n"===r||"\r"===r)break;if(r===s)throw new Error("CSVDataError: Illegal Quote [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+e.state.rowNum+"][Col:"+e.state.colNum+"]")}}),a(),o}},toArray:function(e,a,t){var a=void 0!==a?a:{},s={};s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter;var o=void 0!==a.state?a.state:{},a={delimiter:s.delimiter,separator:s.separator,onParseEntry:a.onParseEntry,onParseValue:a.onParseValue,state:o},i=r.csv.parsers.parseEntry(e,a);return s.callback?void s.callback("",i):i},toArrays:function(e,a,t){var a=void 0!==a?a:{},s={};s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter;var o=[],a={delimiter:s.delimiter,separator:s.separator,onParseEntry:a.onParseEntry,onParseValue:a.onParseValue,start:a.start,end:a.end,state:{rowNum:1,colNum:1}};return o=r.csv.parsers.parse(e,a),s.callback?void s.callback("",o):o},toObjects:function(e,a,t){var a=void 0!==a?a:{},s={};s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter,s.headers="headers"in a?a.headers:r.csv.defaults.headers,a.start="start"in a?a.start:1,s.headers&&a.start++,a.end&&s.headers&&a.end++;var o=[],i=[],a={delimiter:s.delimiter,separator:s.separator,onParseEntry:a.onParseEntry,onParseValue:a.onParseValue,start:a.start,end:a.end,state:{rowNum:1,colNum:1},match:!1},n={delimiter:s.delimiter,separator:s.separator,start:1,end:1,state:{rowNum:1,colNum:1}},l=r.csv.parsers.splitLines(e,n),c=r.csv.toArray(l[0],a),o=r.csv.parsers.splitLines(e,a);a.state.colNum=1,c?a.state.rowNum=2:a.state.rowNum=1;for(var u=0,m=o.length;u<m;u++){var p=r.csv.toArray(o[u],a),f={};for(var d in c)f[c[d]]=p[d];i.push(f),a.state.rowNum++}return s.callback?void s.callback("",i):i},fromArrays:function(e,a,t){var a=void 0!==a?a:{},s={};if(s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter,s.escaper="escaper"in a?a.escaper:r.csv.defaults.escaper,s.experimental="experimental"in a&&a.experimental,!s.experimental)throw new Error("not implemented");var o=[];for(i in e)o.push(e[i]);return s.callback?void s.callback("",o):o},fromObjects2CSV:function(e,a,t){var a=void 0!==a?a:{},s={};if(s.callback=void 0!==t&&"function"==typeof t&&t,s.separator="separator"in a?a.separator:r.csv.defaults.separator,s.delimiter="delimiter"in a?a.delimiter:r.csv.defaults.delimiter,s.experimental="experimental"in a&&a.experimental,!s.experimental)throw new Error("not implemented");var o=[];for(i in e)o.push(arrays[i]);return s.callback?void s.callback("",o):o}},r.csvEntry2Array=r.csv.toArray,r.csv2Array=r.csv.toArrays,r.csv2Dictionary=r.csv.toObjects}(jQuery);
//# sourceMappingURL=jquery.csv.min.js.map