!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sigma=e():t.Sigma=e()}(this,function(){return function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e){var a={};a.EPSILON=1e-6,a.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,a.RANDOM=Math.random,a.ENABLE_SIMD=!1,a.SIMD_AVAILABLE=a.ARRAY_TYPE===Float32Array&&"SIMD"in this,a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE,a.setMatrixArrayType=function(t){a.ARRAY_TYPE=t};var r=Math.PI/180;a.toRadian=function(t){return t*r},a.equals=function(t,e){return Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=a},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(3),s=function(t){function e(){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(i.EventEmitter);e.default=s},function(t,e,a){"use strict";function r(t){if(void 0!==s[t])return s[t];var e=0,a=0,r=0;if("#"===t[0])4===t.length?(e=parseInt(t.charAt(1)+t.charAt(1),16),a=parseInt(t.charAt(2)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),a=parseInt(t.charAt(3)+t.charAt(4),16),r=parseInt(t.charAt(5)+t.charAt(6),16));else if(u.test(t)){var n=t.match(l);e=+n[1],a=+n[2],r=+n[3]}var o=256*e*256+256*a+r;return s[t]=o,o}function n(t){var e=t.angle,a=t.ratio,r=t.x,n=t.y,o=i.mat3.create(),s=i.mat3.fromScaling(i.mat3.create(),[1/a,1/a]),u=i.mat3.fromRotation(i.mat3.create(),-e),l=i.mat3.fromTranslation(i.mat3.create(),[-r,-n]);return i.mat3.multiply(o,s,u),i.mat3.multiply(o,o,l),o}function o(t,e,a,r){var n=r||new Uint8Array(4);return t.readPixels(e,a,1,1,t.RGBA,t.UNSIGNED_BYTE,n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.floatColor=r,e.matrixFromCamera=n,e.extractPixel=o;var i=a(11),s={},u=/^\s*rgba?\s*\(/,l=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)\s*(,.*)?\)\s*$/},function(t,e){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(t){if(!n(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},a.prototype.emit=function(t){var e,a,n,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(a=this._events[t],i(a))return!1;if(r(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),a.apply(this,s)}else if(o(a))for(s=Array.prototype.slice.call(arguments,1),l=a.slice(),n=l.length,u=0;u<n;u++)l[u].apply(this,s);return!0},a.prototype.addListener=function(t,e){var n;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=i(this._maxListeners)?a.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(t,e){function a(){this.removeListener(t,a),n||(n=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var n=!1;return a.listener=e,this.on(t,a),this},a.prototype.removeListener=function(t,e){var a,n,i,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=this._events[t],i=a.length,n=-1,a===e||r(a.listener)&&a.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(a)){for(s=i;s-- >0;)if(a[s]===e||a[s].listener&&a[s].listener===e){n=s;break}if(n<0)return this;1===a.length?(a.length=0,delete this._events[t]):a.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},a.prototype.removeAllListeners=function(t){var e,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[t],r(a))this.removeListener(t,a);else if(a)for(;a.length;)this.removeListener(t,a[a.length-1]);return delete this._events[t],this},a.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},a.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},a.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),s=a(3),u=a(19),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(u),h=a(10),c={easing:"quadraticInOut",duration:150},f=function(t){function e(t){r(this,e),t=t||{};var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.x=0,a.y=0,a.angle=0,a.ratio=1,a.width=t.width||0,a.height=t.height||0,a.nextFrame=null,a.enabled=!0,a}return o(e,t),i(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"abstractDisplayToGraph",value:function(t,e){var a=Math.cos(this.angle),r=Math.sin(this.angle);return{x:(t*a-e*r)*this.ratio,y:(e*a+t*r)*this.ratio}}},{key:"displayToGraph",value:function(t,e){var a=Math.cos(this.angle),r=Math.sin(this.angle),n=this.width/2-(this.x*a+this.y*r)/this.ratio,o=this.height/2-(this.y*a-this.x*r)/this.ratio,i=t-n,s=e-o;return{x:(i*a-s*r)*this.ratio,y:(s*a+i*r)*this.ratio}}},{key:"graphToDisplay",value:function(t,e){var a=Math.cos(this.angle)/this.ratio,r=Math.sin(this.angle)/this.ratio;return{x:t*a+e*r+(this.width/2-this.x*a-this.y*r),y:e*a-t*r+(this.height/2-this.y*a+this.x*r)}}},{key:"setState",value:function(t){return this.enabled?("x"in t&&(this.x=t.x),"y"in t&&(this.y=t.y),"angle"in t&&(this.angle=t.angle),"ratio"in t&&(this.ratio=t.ratio),this.emit("updated",this.getState()),this):this}},{key:"resize",value:function(t){return this.enabled?("width"in t&&(this.width=t.width),"height"in t&&(this.height=t.height),this.emit("resized",this.getDimensions()),this):this}},{key:"animate",value:function(t,e){var a=this;if(!this.enabled)return this;e=(0,h.assign)({},c,e);var r="function"==typeof e.easing?e.easing:l[e.easing];this.nextFrame&&cancelAnimationFrame(this.nextFrame);var n=Date.now(),o=this.getState(),i=function i(){var s=(Date.now()-n)/e.duration;if(s>=1)return a.nextFrame=null,void a.setState(t);var u=r(s),l={};"x"in t&&(l.x=o.x+(t.x-o.x)*u),"y"in t&&(l.y=o.y+(t.y-o.y)*u),"angle"in t&&(l.angle=o.angle+(t.angle-o.angle)*u),"ratio"in t&&(l.ratio=o.ratio+(t.ratio-o.ratio)*u),a.setState(l),a.nextFrame=requestAnimationFrame(i)};this.nextFrame=requestAnimationFrame(i)}}]),e}(s.EventEmitter);e.default=f},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),s=a(17),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=a(18),h=function(t){function e(t,a){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return o.container=t,o.camera=a,o.enabled=!0,o.hasDragged=!1,o.downStartTime=null,o.startMouseX=null,o.startMouseY=null,o.isMouseDown=!1,o.isMoving=!0,o.movingTimeout=null,o.startCameraState=null,o.lastCameraState=null,o.clicks=0,o.doubleClickTimeout=null,o.handleClick=o.handleClick.bind(o),o.handleDown=o.handleDown.bind(o),o.handleUp=o.handleUp.bind(o),o.handleMove=o.handleMove.bind(o),o.handleWheel=o.handleWheel.bind(o),o.handleOut=o.handleOut.bind(o),t.addEventListener("click",o.handleClick,!1),t.addEventListener("mousedown",o.handleDown,!1),t.addEventListener("mousemove",o.handleMove,!1),t.addEventListener("DOMMouseScroll",o.handleWheel,!1),t.addEventListener("mousewheel",o.handleWheel,!1),t.addEventListener("mouseout",o.handleOut,!1),document.addEventListener("mouseup",o.handleUp,!1),o}return o(e,t),i(e,[{key:"handleClick",value:function(t){var e=this;if(this.enabled){if(2===++this.clicks)return this.clicks=0,clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null,this.handleDoubleClick(t);setTimeout(function(){e.clicks=0,e.doubleClickTimeout=null},300),this.emit("click",(0,l.getMouseCoords)(t))}}},{key:"handleDoubleClick",value:function(t){if(this.enabled){var e=(0,l.getCenter)(t),a=this.camera.getState(),r=this.camera.abstractDisplayToGraph((0,l.getX)(t)-e.x,(0,l.getY)(t)-e.y);return this.camera.animate({x:r.x*(1-1/2.2)+a.x,y:r.y*(1-1/2.2)+a.y,ratio:1/2.2*a.ratio},{easing:"quadraticInOut",duration:200}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}},{key:"handleDown",value:function(t){this.enabled&&(this.startCameraState=this.camera.getState(),this.lastCameraState=this.startCameraState,this.startMouseX=(0,l.getX)(t),this.startMouseY=(0,l.getY)(t),this.hasDragged=!1,this.downStartTime=Date.now(),t.which,this.isMouseDown=!0,this.emit("mousedown",(0,l.getMouseCoords)(t)))}},{key:"handleUp",value:function(t){if(this.enabled&&this.isMouseDown){this.isMouseDown=!1,this.movingTimeout&&(this.movingTimeout=null,clearTimeout(this.movingTimeout));var e=(0,l.getX)(t),a=(0,l.getY)(t),r=this.camera.getState();this.isMoving?this.camera.animate({x:r.x+3*(r.x-this.lastCameraState.x),y:r.y+3*(r.y-this.lastCameraState.y)},{duration:200,easing:"quadraticOut"}):this.startMouseX===e&&this.startMouseY===a||this.camera.setState({x:r.x,y:r.y}),this.emit("mouseup",(0,l.getMouseCoords)(t)),this.isMoving=!1}}},{key:"handleMove",value:function(t){var e=this;if(this.enabled){if(this.emit("mousemove",(0,l.getMouseCoords)(t)),this.isMouseDown){this.isMoving=!0,this.hasDragged=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=setTimeout(function(){e.movingTimeout=null,e.isMoving=!1},200);var a=this.camera.abstractDisplayToGraph((0,l.getX)(t)-this.startMouseX,(0,l.getY)(t)-this.startMouseY),r=this.startCameraState.x-a.x,n=this.startCameraState.y-a.y,o=this.camera.getState();o.x===r&&o.y===n||(this.lastCameraState=o,this.camera.setState({x:r,y:n}))}return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}},{key:"handleWheel",value:function(t){if(this.enabled){var e=(0,l.getWheelDelta)(t);if(e){var a=e>0?1/1.7:1.7,r=(0,l.getCenter)(t),n=this.camera.getState(),o=this.camera.abstractDisplayToGraph((0,l.getX)(t)-r.x,(0,l.getY)(t)-r.y);return this.camera.animate({x:o.x*(1-a)+n.x,y:o.y*(1-a)+n.y,ratio:a*n.ratio},{easing:"quadraticOut",duration:200}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}}},{key:"handleOut",value:function(){}}]),e}(u.default);e.default=h},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,a,r,n,o,i){return t<r+o&&t+a>r&&e<n+i&&e+a>n}function o(t,e,a,r,n,o){var i=a+n/2,s=r+o/2,u=e<s,l=t<i;return u?l?m:v:l?x:p}function i(t,e){for(var a=[0,0];a.length;){var r=a.pop(),n=a.pop(),o=4*n+l,i=4*n+2*l,s=4*n+3*l,u=4*n+4*l,h=e[n+c],m=e[n+f],v=e[n+d],x=e[n+M],p=v/2,S=x/2;e[o+c]=h,e[o+f]=m,e[o+d]=p,e[o+M]=S,e[i+c]=h+p,e[i+f]=m,e[i+d]=p,e[i+M]=S,e[s+c]=h,e[s+f]=m+S,e[s+d]=p,e[s+M]=S,e[u+c]=h+p,e[u+f]=m+S,e[u+d]=p,e[u+M]=S,r<t-1&&(a.push(u,r+1),a.push(s,r+1),a.push(i,r+1),a.push(o,r+1))}}function s(t,e,a,r,o,i,s){for(var u=o-s,h=i-s,m=2*s,v=[0,0];v.length;){var x=v.pop(),p=v.pop();if(x===t)return a[p]=a[p]||[],void a[p].push(r);var S=4*p+l,g=4*p+2*l,b=4*p+3*l,I=4*p+4*l,y=n(u,h,m,e[S+c],e[S+f],e[S+d],e[S+M]),D=n(u,h,m,e[g+c],e[g+f],e[g+d],e[g+M]),F=n(u,h,m,e[b+c],e[b+f],e[b+d],e[b+M]),w=n(u,h,m,e[I+c],e[I+f],e[I+d],e[I+M]),_=y+D+F+w;if(0===_)throw new Error("sigma/quadtree.insertNode: no collision (level: "+x+", key: "+r+", x: "+o+", y: "+i+", size: "+s+").");if(_>1)return a[p]=a[p]||[],void a[p].push(r);y&&v.push(S,x+1),D&&v.push(g,x+1),F&&v.push(b,x+1),w&&v.push(I,x+1)}}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),l=4,h=5,c=0,f=1,d=2,M=3,m=1,v=2,x=3,p=4,S=function(){function t(e){r(this,t);var a=Math.pow(4,h);this.data=new Float32Array(l*((4*a-1)/3)),this.containers={},e&&this.resize(e)}return u(t,[{key:"add",value:function(t,e,a,r){return s(h,this.data,this.containers,t,e,a,r),this}},{key:"resize",value:function(t){this.clear(),this.data[c]=t.x,this.data[f]=t.y,this.data[d]=t.width,this.data[M]=t.height,i(h,this.data)}},{key:"clear",value:function(){return this.containers={},this}},{key:"point",value:function(t,e){for(var a=[],r=0,n=0;n<=h;){this.containers[r]&&a.push.apply(a,this.containers[r]);r=4*r+o(t,e,this.data[r+c],this.data[r+f],this.data[r+d],this.data[r+M])*l,n++}return a}}]),t}();e.default=S},function(t,e,a){"use strict";function r(t,e){t.fillStyle="#000",t.font="14px arial",t.fillText(e.label,e.x+e.size+3,e.y+14/3)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,a){"use strict";function r(t,e){var a=document.createElement(t);if(!e)return a;for(var r in e)if("style"===r)for(var n in e[r])a.style[n]=e[r][n];else a.setAttribute(r,e[r]);return a}function n(){var t=window.screen;return void 0!==t.deviceXDPI&&void 0!==t.logicalXDPI&&t.deviceXDPI>t.logicalXDPI?t.systemXDPI/t.logicalXDPI:void 0!==window.devicePixelRatio?window.devicePixelRatio:1}function o(t,e){t=t||{};var a=t.mode||i.mode,r=t.height||1,n=t.width||1,o=e.maxX,s=e.maxY,u=e.minX,l=e.minY,h=(o+u)/2,c=(s+l)/2,f="outside"===a?Math.max(n/Math.max(o-u,1),r/Math.max(s-l,1)):Math.min(n/Math.max(o-u,1),r/Math.max(s-l,1)),d=function(t){return{x:(t.x-h)*f,y:(t.y-c)*f}};return d.inverse=function(t){return{x:t.x/f+h,y:t.y/f+c}},d}Object.defineProperty(e,"__esModule",{value:!0}),e.createElement=r,e.getPixelRatio=n,e.createNodeRescalingFunction=o;var i={mode:"inside",margin:0,minSize:1,maxSize:8}},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),o=a(25),i=function(){function t(){r(this,t)}return n(t,[{key:"load",value:function(t){return this.vertexShader=(0,o.loadVertexShader)(t,this.vertexShaderSource),this.fragmentShader=(0,o.loadFragmentShader)(t,this.fragmentShaderSource),this.program=(0,o.loadProgram)(t,[this.vertexShader,this.fragmentShader]),this.program}}]),t}();e.default=i},function(t,e,a){"use strict";function r(t){t=t||{};for(var e=arguments.length,a=Array(e>1?e-1:0),r=1;r<e;r++)a[r-1]=arguments[r];for(var n=0,o=a.length;n<o;n++)if(a[n])for(var i in a[n])t[i]=a[n][i];return t}Object.defineProperty(e,"__esModule",{value:!0}),e.assign=r},function(t,e,a){e.glMatrix=a(0),e.mat2=a(26),e.mat2d=a(27),e.mat3=a(12),e.mat4=a(28),e.quat=a(29),e.vec2=a(30),e.vec3=a(13),e.vec4=a(14)},function(t,e,a){var r=a(0),n={};n.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},n.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromValues=function(t,e,a,n,o,i,s,u,l){var h=new r.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=a,h[3]=n,h[4]=o,h[5]=i,h[6]=s,h[7]=u,h[8]=l,h},n.set=function(t,e,a,r,n,o,i,s,u,l){return t[0]=e,t[1]=a,t[2]=r,t[3]=n,t[4]=o,t[5]=i,t[6]=s,t[7]=u,t[8]=l,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,e){if(t===e){var a=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=a,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},n.invert=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=h*i-s*l,f=-h*o+s*u,d=l*o-i*u,M=a*c+r*f+n*d;return M?(M=1/M,t[0]=c*M,t[1]=(-h*r+n*l)*M,t[2]=(s*r-n*i)*M,t[3]=f*M,t[4]=(h*a-n*u)*M,t[5]=(-s*a+n*o)*M,t[6]=d*M,t[7]=(-l*a+r*u)*M,t[8]=(i*a-r*o)*M,t):null},n.adjoint=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],h=e[8];return t[0]=i*h-s*l,t[1]=n*l-r*h,t[2]=r*s-n*i,t[3]=s*u-o*h,t[4]=a*h-n*u,t[5]=n*o-a*s,t[6]=o*l-i*u,t[7]=r*u-a*l,t[8]=a*i-r*o,t},n.determinant=function(t){var e=t[0],a=t[1],r=t[2],n=t[3],o=t[4],i=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-i*u)+a*(-l*n+i*s)+r*(u*n-o*s)},n.multiply=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=a[0],d=a[1],M=a[2],m=a[3],v=a[4],x=a[5],p=a[6],S=a[7],g=a[8];return t[0]=f*r+d*i+M*l,t[1]=f*n+d*s+M*h,t[2]=f*o+d*u+M*c,t[3]=m*r+v*i+x*l,t[4]=m*n+v*s+x*h,t[5]=m*o+v*u+x*c,t[6]=p*r+S*i+g*l,t[7]=p*n+S*s+g*h,t[8]=p*o+S*u+g*c,t},n.mul=n.multiply,n.translate=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=a[0],d=a[1];return t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=s,t[5]=u,t[6]=f*r+d*i+l,t[7]=f*n+d*s+h,t[8]=f*o+d*u+c,t},n.rotate=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=Math.sin(a),d=Math.cos(a);return t[0]=d*r+f*i,t[1]=d*n+f*s,t[2]=d*o+f*u,t[3]=d*i-f*r,t[4]=d*s-f*n,t[5]=d*u-f*o,t[6]=l,t[7]=h,t[8]=c,t},n.scale=function(t,e,a){var r=a[0],n=a[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},n.fromRotation=function(t,e){var a=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=a,t[2]=0,t[3]=-a,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},n.fromQuat=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=a+a,s=r+r,u=n+n,l=a*i,h=r*i,c=r*s,f=n*i,d=n*s,M=n*u,m=o*i,v=o*s,x=o*u;return t[0]=1-c-M,t[3]=h-x,t[6]=f+v,t[1]=h+x,t[4]=1-l-M,t[7]=d-m,t[2]=f-v,t[5]=d+m,t[8]=1-l-c,t},n.normalFromMat4=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],M=e[12],m=e[13],v=e[14],x=e[15],p=a*s-r*i,S=a*u-n*i,g=a*l-o*i,b=r*u-n*s,I=r*l-o*s,y=n*l-o*u,D=h*m-c*M,F=h*v-f*M,w=h*x-d*M,_=c*v-f*m,E=c*x-d*m,A=f*x-d*v,P=p*A-S*E+g*_+b*w-I*F+y*D;return P?(P=1/P,t[0]=(s*A-u*E+l*_)*P,t[1]=(u*w-i*A-l*F)*P,t[2]=(i*E-s*w+l*D)*P,t[3]=(n*E-r*A-o*_)*P,t[4]=(a*A-n*w+o*F)*P,t[5]=(r*w-a*E-o*D)*P,t[6]=(m*y-v*I+x*b)*P,t[7]=(v*g-M*y-x*S)*P,t[8]=(M*I-m*g+x*p)*P,t):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t},n.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t},n.multiplyScalarAndAdd=function(t,e,a,r){return t[0]=e[0]+a[0]*r,t[1]=e[1]+a[1]*r,t[2]=e[2]+a[2]*r,t[3]=e[3]+a[3]*r,t[4]=e[4]+a[4]*r,t[5]=e[5]+a[5]*r,t[6]=e[6]+a[6]*r,t[7]=e[7]+a[7]*r,t[8]=e[8]+a[8]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},n.equals=function(t,e){var a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],u=t[5],l=t[6],h=t[7],c=t[8],f=e[0],d=e[1],M=e[2],m=e[3],v=e[4],x=e[5],p=t[6],S=e[7],g=e[8];return Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-M)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-m)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-x)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-p)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(h-S)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))},t.exports=n},function(t,e,a){var r=a(0),n={};n.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.fromValues=function(t,e,a){var n=new r.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=a,n},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.set=function(t,e,a,r){return t[0]=e,t[1]=a,t[2]=r,t},n.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t},n.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t},n.sub=n.subtract,n.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t[2]=e[2]*a[2],t},n.mul=n.multiply,n.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t[2]=e[2]/a[2],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},n.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t[2]=Math.min(e[2],a[2]),t},n.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t[2]=Math.max(e[2],a[2]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},n.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},n.scaleAndAdd=function(t,e,a,r){return t[0]=e[0]+a[0]*r,t[1]=e[1]+a[1]*r,t[2]=e[2]+a[2]*r,t},n.distance=function(t,e){var a=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(a*a+r*r+n*n)},n.dist=n.distance,n.squaredDistance=function(t,e){var a=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return a*a+r*r+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],a=t[1],r=t[2];return Math.sqrt(e*e+a*a+r*r)},n.len=n.length,n.squaredLength=function(t){var e=t[0],a=t[1],r=t[2];return e*e+a*a+r*r},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},n.normalize=function(t,e){var a=e[0],r=e[1],n=e[2],o=a*a+r*r+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},n.cross=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=a[0],s=a[1],u=a[2];return t[0]=n*u-o*s,t[1]=o*i-r*u,t[2]=r*s-n*i,t},n.lerp=function(t,e,a,r){var n=e[0],o=e[1],i=e[2];return t[0]=n+r*(a[0]-n),t[1]=o+r*(a[1]-o),t[2]=i+r*(a[2]-i),t},n.hermite=function(t,e,a,r,n,o){var i=o*o,s=i*(2*o-3)+1,u=i*(o-2)+o,l=i*(o-1),h=i*(3-2*o);return t[0]=e[0]*s+a[0]*u+r[0]*l+n[0]*h,t[1]=e[1]*s+a[1]*u+r[1]*l+n[1]*h,t[2]=e[2]*s+a[2]*u+r[2]*l+n[2]*h,t},n.bezier=function(t,e,a,r,n,o){var i=1-o,s=i*i,u=o*o,l=s*i,h=3*o*s,c=3*u*i,f=u*o;return t[0]=e[0]*l+a[0]*h+r[0]*c+n[0]*f,t[1]=e[1]*l+a[1]*h+r[1]*c+n[1]*f,t[2]=e[2]*l+a[2]*h+r[2]*c+n[2]*f,t},n.random=function(t,e){e=e||1;var a=2*r.RANDOM()*Math.PI,n=2*r.RANDOM()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(a)*o,t[1]=Math.sin(a)*o,t[2]=n*e,t},n.transformMat4=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=a[3]*r+a[7]*n+a[11]*o+a[15];return i=i||1,t[0]=(a[0]*r+a[4]*n+a[8]*o+a[12])/i,t[1]=(a[1]*r+a[5]*n+a[9]*o+a[13])/i,t[2]=(a[2]*r+a[6]*n+a[10]*o+a[14])/i,t},n.transformMat3=function(t,e,a){var r=e[0],n=e[1],o=e[2];return t[0]=r*a[0]+n*a[3]+o*a[6],t[1]=r*a[1]+n*a[4]+o*a[7],t[2]=r*a[2]+n*a[5]+o*a[8],t},n.transformQuat=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=a[0],s=a[1],u=a[2],l=a[3],h=l*r+s*o-u*n,c=l*n+u*r-i*o,f=l*o+i*n-s*r,d=-i*r-s*n-u*o;return t[0]=h*l+d*-i+c*-u-f*-s,t[1]=c*l+d*-s+f*-i-h*-u,t[2]=f*l+d*-u+h*-s-c*-i,t},n.rotateX=function(t,e,a,r){var n=[],o=[];return n[0]=e[0]-a[0],n[1]=e[1]-a[1],n[2]=e[2]-a[2],o[0]=n[0],o[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),o[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},n.rotateY=function(t,e,a,r){var n=[],o=[];return n[0]=e[0]-a[0],n[1]=e[1]-a[1],n[2]=e[2]-a[2],o[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),o[1]=n[1],o[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},n.rotateZ=function(t,e,a,r){var n=[],o=[];return n[0]=e[0]-a[0],n[1]=e[1]-a[1],n[2]=e[2]-a[2],o[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),o[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),o[2]=n[2],t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},n.forEach=function(){var t=n.create();return function(e,a,r,n,o,i){var s,u;for(a||(a=3),r||(r=0),u=n?Math.min(n*a+r,e.length):e.length,s=r;s<u;s+=a)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),n.angle=function(t,e){var a=n.fromValues(t[0],t[1],t[2]),r=n.fromValues(e[0],e[1],e[2]);n.normalize(a,a),n.normalize(r,r);var o=n.dot(a,r);return o>1?0:Math.acos(o)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},n.equals=function(t,e){var a=t[0],n=t[1],o=t[2],i=e[0],s=e[1],u=e[2];return Math.abs(a-i)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},t.exports=n},function(t,e,a){var r=a(0),n={};n.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.fromValues=function(t,e,a,n){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=a,o[3]=n,o},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.set=function(t,e,a,r,n){return t[0]=e,t[1]=a,t[2]=r,t[3]=n,t},n.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t},n.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t},n.sub=n.subtract,n.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t[2]=e[2]*a[2],t[3]=e[3]*a[3],t},n.mul=n.multiply,n.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t[2]=e[2]/a[2],t[3]=e[3]/a[3],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},n.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t[2]=Math.min(e[2],a[2]),t[3]=Math.min(e[3],a[3]),t},n.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t[2]=Math.max(e[2],a[2]),t[3]=Math.max(e[3],a[3]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},n.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t},n.scaleAndAdd=function(t,e,a,r){return t[0]=e[0]+a[0]*r,t[1]=e[1]+a[1]*r,t[2]=e[2]+a[2]*r,t[3]=e[3]+a[3]*r,t},n.distance=function(t,e){var a=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(a*a+r*r+n*n+o*o)},n.dist=n.distance,n.squaredDistance=function(t,e){var a=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return a*a+r*r+n*n+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],a=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+a*a+r*r+n*n)},n.len=n.length,n.squaredLength=function(t){var e=t[0],a=t[1],r=t[2],n=t[3];return e*e+a*a+r*r+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},n.normalize=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=a*a+r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=a*i,t[1]=r*i,t[2]=n*i,t[3]=o*i),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},n.lerp=function(t,e,a,r){var n=e[0],o=e[1],i=e[2],s=e[3];return t[0]=n+r*(a[0]-n),t[1]=o+r*(a[1]-o),t[2]=i+r*(a[2]-i),t[3]=s+r*(a[3]-s),t},n.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),n.normalize(t,t),n.scale(t,t,e),t},n.transformMat4=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3];return t[0]=a[0]*r+a[4]*n+a[8]*o+a[12]*i,t[1]=a[1]*r+a[5]*n+a[9]*o+a[13]*i,t[2]=a[2]*r+a[6]*n+a[10]*o+a[14]*i,t[3]=a[3]*r+a[7]*n+a[11]*o+a[15]*i,t},n.transformQuat=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=a[0],s=a[1],u=a[2],l=a[3],h=l*r+s*o-u*n,c=l*n+u*r-i*o,f=l*o+i*n-s*r,d=-i*r-s*n-u*o;return t[0]=h*l+d*-i+c*-u-f*-s,t[1]=c*l+d*-s+f*-i-h*-u,t[2]=f*l+d*-u+h*-s-c*-i,t[3]=e[3],t},n.forEach=function(){var t=n.create();return function(e,a,r,n,o,i){var s,u;for(a||(a=4),r||(r=0),u=n?Math.min(n*a+r,e.length):e.length,s=r;s<u;s+=a)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var a=t[0],n=t[1],o=t[2],i=t[3],s=e[0],u=e[1],l=e[2],h=e[3];return Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))},t.exports=n},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(11),l=a(1),h=r(l),c=a(4),f=r(c),d=a(5),M=r(d),m=a(6),v=r(m),x=a(24),p=r(x),S=a(23),g=r(S),b=a(7),I=r(b),y=a(21),D=r(y),F=a(10),w=a(8),_=a(2),E=(0,w.getPixelRatio)(),A=function(t){function e(t){n(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!(t instanceof HTMLElement))throw new Error("sigma/renderers/webgl: container should be an html element.");a.sigma=null,a.captors={},a.container=t,a.elements={},a.contexts={},a.listeners={},a.quadtree=new v.default,a.nodeArray=null,a.nodeIndicesArray=null,a.nodeOrder={},a.nodeDataCache={},a.edgeArray=null,a.edgeIndicesArray=null,a.edgeOrder={},a.nodePrograms={def:new p.default},a.edgePrograms={def:new g.default},a.nodeRescalingFunction=null,a.width=0,a.height=0,a.highlightedNodes=new Set,a.hoveredNode=null,a.renderFrame=null,a.renderHighlightedNodesFrame=null,a.needToProcess=!1,a.needToSoftProcess=!1,a.pixel=new Uint8Array(4),a.createContext("edges"),a.createContext("nodes"),a.createContext("labels",!1),a.createContext("hovers",!1),a.createContext("mouse",!1),a.resize(),a.camera=new f.default({width:a.width,height:a.height}),a.bindCameraHandlers(),a.captors={mouse:new M.default(a.elements.mouse,a.camera)},a.bindEventHandlers();for(var r in a.nodePrograms)a.nodePrograms[r].load(a.contexts.nodes);for(var i in a.edgePrograms)a.edgePrograms[i].load(a.contexts.edges);return a}return i(e,t),s(e,[{key:"testPixel",value:function(t,e,a){return(0,_.extractPixel)(t,2*e,2*(this.height-a),this.pixel),0!==this.pixel[3]}},{key:"createContext",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(0,w.createElement)("canvas",{class:"sigma-"+t,style:{position:"absolute"}});this.elements[t]=a,this.container.appendChild(a);var r={preserveDrawingBuffer:!0},n=a.getContext(e?"webgl":"2d",r);return this.contexts[t]=n,this}},{key:"bindCameraHandlers",value:function(){var t=this;return this.listeners.camera=function(){t.scheduleRender()},this.camera.on("updated",this.listeners.camera),this}},{key:"bindEventHandlers",value:function(){var t=this,e=function(t,e,a,r,n){return t>a-n&&t<a+n&&e>r-n&&e<r+n&&Math.sqrt(Math.pow(t-a,2)+Math.pow(e-r,2))<n},a=function(e,a){var r=t.camera.displayToGraph(e,a);return t.quadtree.point(r.x,r.y)};return this.listeners.handleMove=function(r){for(var n=Math.pow(t.camera.getState().ratio,.5),o=a(r.clientX,r.clientY),i=0,s=o.length;i<s;i++){var u=o[i],l=t.nodeDataCache[u],h=t.camera.graphToDisplay(l.x,l.y),c=l.size/n;if(e(r.clientX,r.clientY,h.x,h.y,c))return t.hoveredNode=u,t.emit("overNode",{node:u}),t.scheduleHighlightedNodesRender()}if(t.hoveredNode){var f=t.nodeDataCache[t.hoveredNode],d=t.camera.graphToDisplay(f.x,f.y),M=f.size/n;if(!e(r.clientX,r.clientY,d.x,d.y,M))return t.hoveredNode=null,t.emit("outNode",{node:t.hoveredNode}),t.scheduleHighlightedNodesRender()}},this.listeners.handleDown=function(r){for(var n=Math.pow(t.camera.getState().ratio,.5),o=a(r.clientX,r.clientY),i=0,s=o.length;i<s;i++){var u=o[i],l=t.nodeDataCache[u],h=t.camera.graphToDisplay(l.x,l.y),c=l.size/n;if(e(r.clientX,r.clientY,h.x,h.y,c))return t.emit("downNode",{node:u})}},this.listeners.handleClick=function(r){for(var n=Math.pow(t.camera.getState().ratio,.5),o=a(r.clientX,r.clientY),i=0,s=o.length;i<s;i++){var u=o[i],l=t.nodeDataCache[u],h=t.camera.graphToDisplay(l.x,l.y),c=l.size/n;if(e(r.clientX,r.clientY,h.x,h.y,c))return t.emit("clickNode",{node:u})}return t.emit("clickStage")},this.captors.mouse.on("mousemove",this.listeners.handleMove),this.captors.mouse.on("mousedown",this.listeners.handleDown),this.captors.mouse.on("click",this.listeners.handleClick),this}},{key:"bindGraphHandlers",value:function(){var t=this,e=this.sigma.getGraph();return this.listeners.graphUpdate=function(){t.needToProcess=!0,t.scheduleRender()},this.listeners.softGraphUpdate=function(){t.needToSoftProcess=!0,t.scheduleRender()},e.on("nodeAdded",this.listeners.graphUpdate),e.on("nodeDropped",this.listeners.graphUpdate),e.on("nodeAttributesUpdated",this.listeners.softGraphUpdate),e.on("edgeAdded",this.listeners.graphUpdate),e.on("nodeDropped",this.listeners.graphUpdate),e.on("edgeAttributesUpdated",this.listeners.softGraphUpdate),e.on("cleared",this.listeners.graphUpdate),this}},{key:"process",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.sigma.getGraph(),a=this.sigma.getGraphExtent();this.nodeRescalingFunction=(0,w.createNodeRescalingFunction)({width:this.width,height:this.height},a);var r=this.nodeRescalingFunction({x:a.minX,y:a.minY}),n=this.nodeRescalingFunction({x:a.maxX,y:a.maxY});this.quadtree.resize({x:r.x,y:r.y,width:n.x-r.x,height:n.y-r.y}),this.nodeRescaleCache={};var o=this.nodePrograms.def;t||(this.nodeArray=new Float32Array(p.default.POINTS*p.default.ATTRIBUTES*e.order),this.nodeOrder={});for(var i=e.nodes(),s=0,u=i.length;s<u;s++){var l=i[s];this.nodeOrder[l]=s;var h=this.sigma.getNodeData(l),c=this.nodeRescalingFunction(h),f=(0,F.assign)({},h,c);this.quadtree.add(l,f.x,f.y,f.size),this.nodeDataCache[l]=f,o.process(this.nodeArray,f,s*p.default.POINTS*p.default.ATTRIBUTES)}var d=this.edgePrograms.def;t||(this.edgeArray=new Float32Array(g.default.POINTS*g.default.ATTRIBUTES*e.size),this.edgeOrder={});for(var M=e.edges(),m=0,v=M.length;m<v;m++){var x=M[m];this.edgeOrder[x]=m;var S=this.sigma.getEdgeData(x),b=e.extremities(x),I=this.nodeDataCache[b[0]],y=this.nodeDataCache[b[1]];d.process(this.edgeArray,I,y,S,m*g.default.POINTS*g.default.ATTRIBUTES)}return t||"function"!=typeof d.computeIndices||(this.edgeIndicesArray=d.computeIndices(this.edgeArray)),this}},{key:"processNode",value:function(t){var e=this.nodePrograms.def,a=this.sigma.getNodeData(t);return e.process(this.nodeArray,a,this.nodeOrder[t]*p.default.POINTS*p.default.ATTRIBUTES),this}},{key:"processEdge",value:function(t){var e=this.sigma.getGraph(),a=this.edgePrograms.def,r=this.sigma.getEdgeData(t),n=e.extremities(t),o=this.sigma.getNodeData(n[0]),i=this.sigma.getNodeData(n[1]);return a.process(this.edgeArray,o,i,r,this.edgeOrder[t]*g.default.POINTS*g.default.ATTRIBUTES),this}},{key:"bind",value:function(t){return this.sigma=t,this.bindGraphHandlers(),this.process(),this}},{key:"getCamera",value:function(){return this.camera}},{key:"getMouseCaptor",value:function(){return this.captors.mouse}},{key:"resize",value:function(t,e){var a=this.width,r=this.height;if(arguments.length>1?(this.width=t,this.height=e):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight),a===this.width&&r===this.height)return this;for(var n in this.elements){var o=this.elements[n];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var i in this.contexts){var s=this.contexts[i];s.scale?(this.elements[i].setAttribute("width",this.width*E+"px"),this.elements[i].setAttribute("height",this.height*E+"px"),1!==E&&s.scale(E,E)):(this.elements[i].setAttribute("width",2*this.width+"px"),this.elements[i].setAttribute("height",2*this.height+"px")),s.viewport&&s.viewport(0,0,2*this.width,2*this.height)}return this}},{key:"clear",value:function(){var t=this.contexts.nodes;return t.clear(t.COLOR_BUFFER_BIT),t=this.contexts.edges,t.clear(t.COLOR_BUFFER_BIT),t=this.contexts.labels,t.clearRect(0,0,this.width,this.height),t=this.contexts.hovers,t.clearRect(0,0,this.width,this.height),this}},{key:"render",value:function(){this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear();var t=this.camera.getState(),e=(0,_.matrixFromCamera)(t),a=u.mat3.fromTranslation(u.mat3.create(),[this.width/2,this.height/2]);u.mat3.multiply(e,a,e);var r=void 0,n=void 0;n=this.contexts.nodes,r=this.nodePrograms.def,n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.enable(n.BLEND),r.render(n,this.nodeArray,{matrix:e,width:this.width,height:this.height,ratio:t.ratio,nodesPowRatio:.5,scalingRatio:2}),n=this.contexts.edges,r=this.edgePrograms.def,r.render(n,this.edgeArray,{matrix:e,width:this.width,height:this.height,ratio:t.ratio,edgesPowRatio:.5,scalingRatio:2,indices:this.edgeIndicesArray});for(var o=this.sigma.getGraph().nodes(),i=this.contexts.labels,s=Math.pow(t.ratio,.5),l=0,h=o.length;l<h;l++){var c=this.nodeDataCache[o[l]],f=this.camera.graphToDisplay(c.x,c.y),d=f.x,M=f.y,m=c.size/s;m<8||(0,I.default)(i,{label:c.label,size:m,x:d,y:M})}return this.renderHighlightedNodes(),this}},{key:"renderHighlightedNodes",value:function(){var t=this,e=this.camera,a=Math.pow(e.getState().ratio,.5),r=this.contexts.hovers;r.clearRect(0,0,this.width,this.height);var n=function(n){var o=t.nodeDataCache[n],i=e.graphToDisplay(o.x,o.y),s=i.x,u=i.y,l=o.size/a;(0,D.default)(r,{label:o.label,color:o.color,size:l,x:s,y:u})};this.hoveredNode&&n(this.hoveredNode),this.highlightedNodes.forEach(n)}},{key:"scheduleRender",value:function(){var t=this;if(this.renderFrame)return this;this.renderFrame=requestAnimationFrame(function(){(t.needToProcess||t.needToSoftProcess)&&t.process(t.needToSoftProcess),t.renderFrame=null,t.needToProcess=!1,t.needToSoftProcess=!1,t.render()})}},{key:"scheduleHighlightedNodesRender",value:function(){var t=this;if(this.renderHighlightedNodesFrame)return this;this.renderHighlightedNodesFrame=requestAnimationFrame(function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes()})}},{key:"highlightNode",value:function(t){return this.highlightedNodes.add(t),this.scheduleHighlightedNodesRender(),this}},{key:"unhighlightNode",value:function(t){return this.highlightedNodes.delete(t),this.scheduleHighlightedNodesRender(),this}}]),e}(h.default);e.default=A},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),i=a(31),s=r(i),u=a(1),l=r(u),h=function(){function t(e,a){if(n(this,t),!(0,s.default)(e))throw new Error("Sigma.constructor: given graph is not an instance of a graphology implementation.");if(!(a instanceof l.default))throw new Error("Sigma.constructor: given renderer is not an instance of a sigma Renderer.");this.graph=e,this.renderer=a,this.renderer.bind(this),this.state={},this.nodeStates=null,this.edgeStates=null,this.renderer.render()}return o(t,[{key:"getGraph",value:function(){return this.graph}},{key:"getNodeData",value:function(t){return this.graph.getNodeAttributes(t)}},{key:"getEdgeData",value:function(t){return this.graph.getEdgeAttributes(t)}},{key:"getGraphExtent",value:function(){for(var t=this.graph,e=t.nodes(),a=t.edges(),r=-1/0,n=-1/0,o=1/0,i=1/0,s=-1/0,u=-1/0,l=0,h=e.length;l<h;l++){var c=e[l],f=this.getNodeData(c);f.x>r&&(r=f.x),f.y>n&&(n=f.y),f.x<o&&(o=f.x),f.y<i&&(i=f.y);var d=f.size||1;d>s&&(s=d)}for(var M=0,m=a.length;M<m;M++){var v=a[M],x=this.getEdgeData(v),p=x.size||1;p>u&&(u=p)}return{maxX:r,maxY:n,minX:o,minY:i,maxNodeSize:s,maxEdgeSize:u}}}]),t}();e.default=h},function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(3),s=function(t){function e(t,a){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.container=t,o.camera=a,o}return o(e,t),e}(i.EventEmitter);e.default=s},function(t,e,a){"use strict";function r(t){if(void 0!==t.offsetX)return t.offsetX;if(void 0!==t.layerX)return t.layerX;if(void 0!==t.clientX)return t.clientX;throw new Error("sigma/captors/utils.getX: could not extract x from event.")}function n(t){if(void 0!==t.offsetY)return t.offsetY;if(void 0!==t.layerY)return t.layerY;if(void 0!==t.clientY)return t.clientY;throw new Error("sigma/captors/utils.getY: could not extract y from event.")}function o(t){var e=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;if("number"==typeof e)return e;if(void 0!==e&&void 0!==e.baseVal)return e.baseVal.value;throw new Error("sigma/captors/utils.getWidth: could not extract width from event.")}function i(t){var e=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;if("number"==typeof e)return e;if(void 0!==e&&void 0!==e.baseVal)return e.baseVal.value;throw new Error("sigma/captors/utils.getHeight: could not extract height from event.")}function s(t){var e=-1!==t.target.namespaceURI.indexOf("svg")?1:(0,c.getPixelRatio)();return{x:o(t)/(2*e),y:i(t)/(2*e)}}function u(t,e,a){arguments.length<2&&(e=r(t),a=n(t));var o=s(t);return{x:e-o.x,y:a-o.y,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey}}function l(t){if(void 0!==h(t.wheelDelta))return t.wheelDelta;if(void 0!==h(t.detail))return-t.detail;throw new Error("sigma/captors/utils.getDelta: could not extract delta from event.")}Object.defineProperty(e,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getX=r,e.getY=n,e.getWidth=o,e.getHeight=i,e.getCenter=s,e.getMouseCoords=u,e.getWheelDelta=l;var c=a(8)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.linear=function(t){return t},e.quadraticIn=function(t){return t*t},e.quadraticOut=function(t){return t*(2-t)},e.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},e.cubicIn=function(t){return t*t*t},e.cubicOut=function(t){return--t*t*t+1},e.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var n=a(16),o=r(n),i=a(1),s=r(i),u=a(4),l=r(u),h=a(6),c=r(h),f=a(5),d=r(f),M=a(15),m=r(M),v={Sigma:o.default,Renderer:s.default,Camera:l.default,QuadTree:c.default,MouseCaptor:d.default,WebGLRenderer:m.default};for(var x in v)o.default[x]=v[x];t.exports=o.default},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){t.font="14px arial",t.beginPath(),t.fillStyle="#fff",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var a=t.measureText(e.label).width,r=Math.round(e.x-7-2),n=Math.round(e.y-7-2),o=Math.round(a+7+e.size+9),s=Math.round(18),l=Math.round(9);t.moveTo(r,n+l),t.moveTo(r,n+l),t.arcTo(r,n,r+l,n,l),t.lineTo(r+o,n),t.lineTo(r+o,n+s),t.lineTo(r+l,n+s),t.arcTo(r,n+s,r,n+s-l,l),t.lineTo(r,n+l),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,(0,i.default)(t,e),(0,u.default)(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=a(22),i=r(o),s=a(7),u=r(s)},function(t,e,a){"use strict";function r(t,e){t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.size,0,n,!0),t.closePath(),t.fill()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=2*Math.PI},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(9),l=r(u),h=a(2),c=a(33),f=r(c),d=a(32),M=r(d),m=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.vertexShaderSource=f.default,t.fragmentShaderSource=M.default,t}return i(e,t),s(e,[{key:"process",value:function(t,a,r,n,o){if(a.hidden||r.hidden||n.hidden)for(var i=o+e.POINTS*e.ATTRIBUTES;o<i;o++)t[o]=0;var s=n.size||1,u=a.x,l=a.y,c=r.x,f=r.y,d=(0,h.floatColor)(n.color),M=c-u,m=f-l,v=M*M+m*m,x=0,p=0;v&&(v=1/Math.sqrt(v),x=-m*v,p=M*v),t[o++]=u,t[o++]=l,t[o++]=x,t[o++]=p,t[o++]=s,t[o++]=d,t[o++]=u,t[o++]=l,t[o++]=-x,t[o++]=-p,t[o++]=s,t[o++]=d,t[o++]=c,t[o++]=f,t[o++]=x,t[o++]=p,t[o++]=s,t[o++]=d,t[o++]=c,t[o++]=f,t[o++]=-x,t[o++]=-p,t[o++]=s,t[o++]=d}},{key:"computeIndices",value:function(t){for(var a=t.length/e.ATTRIBUTES,r=a+a/2,n=new Uint16Array(r),o=0,i=0;o<r;o+=4)n[i++]=o,n[i++]=o+1,n[i++]=o+2,n[i++]=o+2,n[i++]=o+1,n[i++]=o+3;return n}},{key:"render",value:function(t,a,r){var n=this.program;t.useProgram(n);var o=t.getAttribLocation(n,"a_position"),i=t.getAttribLocation(n,"a_normal"),s=t.getAttribLocation(n,"a_thickness"),u=t.getAttribLocation(n,"a_color"),l=t.getUniformLocation(n,"u_resolution"),h=t.getUniformLocation(n,"u_ratio"),c=t.getUniformLocation(n,"u_matrix"),f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),t.uniform2f(l,r.width,r.height),t.uniform1f(h,r.ratio/Math.pow(r.ratio,r.edgesPowRatio)),t.uniformMatrix3fv(c,!1,r.matrix),t.enableVertexAttribArray(o),t.enableVertexAttribArray(i),t.enableVertexAttribArray(s),t.enableVertexAttribArray(u),t.vertexAttribPointer(o,2,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(i,2,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(s,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(u,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20);var d=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r.indices,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,r.indices.length,t.UNSIGNED_SHORT,0)}}]),e}(l.default);e.default=m,m.POINTS=4,m.ATTRIBUTES=6},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),u=a(9),l=r(u),h=a(2),c=a(35),f=r(c),d=a(34),M=r(d),m=2*Math.PI/3,v=4*Math.PI/3,x=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.vertexShaderSource=f.default,t.fragmentShaderSource=M.default,t}return i(e,t),s(e,[{key:"process",value:function(t,e,a){var r=(0,h.floatColor)(e.color);t[a++]=e.x,t[a++]=e.y,t[a++]=e.size,t[a++]=r,t[a++]=0,t[a++]=e.x,t[a++]=e.y,t[a++]=e.size,t[a++]=r,t[a++]=m,t[a++]=e.x,t[a++]=e.y,t[a++]=e.size,t[a++]=r,t[a++]=v}},{key:"render",value:function(t,a,r){var n=this.program;t.useProgram(n);var o=t.getAttribLocation(n,"a_position"),i=t.getAttribLocation(n,"a_size"),s=t.getAttribLocation(n,"a_color"),u=t.getAttribLocation(n,"a_angle"),l=t.getUniformLocation(n,"u_resolution"),h=t.getUniformLocation(n,"u_matrix"),c=t.getUniformLocation(n,"u_ratio"),f=t.getUniformLocation(n,"u_scale"),d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,a,t.DYNAMIC_DRAW),t.uniform2f(l,r.width,r.height),t.uniform1f(c,1/Math.pow(r.ratio,r.nodesPowRatio)),t.uniform1f(f,r.scalingRatio),t.uniformMatrix3fv(h,!1,r.matrix),t.enableVertexAttribArray(o),t.enableVertexAttribArray(i),t.enableVertexAttribArray(s),t.enableVertexAttribArray(u),t.vertexAttribPointer(o,2,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(i,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(s,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),t.vertexAttribPointer(u,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),t.drawArrays(t.TRIANGLES,0,a.length/e.ATTRIBUTES)}}]),e}(l.default);e.default=x,x.POINTS=3,x.ATTRIBUTES=5},function(t,e,a){"use strict";function r(t,e,a){var r="VERTEX"===t?e.VERTEX_SHADER:e.FRAGMENT_SHADER,n=e.createShader(r);if(e.shaderSource(n,a),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(n);throw e.deleteShader(n),new Error("sigma/renderers/weblg/shaders/utils.loadShader: error while compiling the shader:\n"+o)}return n}function n(t,e){var a=t.createProgram(),r=void 0,n=void 0;for(r=0,n=e.length;r<n;r++)t.attachShader(a,e[r]);if(t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw t.deleteProgram(a),new Error("sigma/renderers/weblg/shaders/utils.loadProgram: error while linking the program.");return a}Object.defineProperty(e,"__esModule",{value:!0}),e.loadProgram=n;var o=r.bind(null,"VERTEX"),i=r.bind(null,"FRAGMENT");e.loadVertexShader=o,e.loadFragmentShader=i},function(t,e,a){var r=a(0),n={};n.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,e,a,n){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=a,o[3]=n,o},n.set=function(t,e,a,r,n){return t[0]=e,t[1]=a,t[2]=r,t[3]=n,t},n.transpose=function(t,e){if(t===e){var a=e[1];t[1]=e[2],t[2]=a}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},n.invert=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=a*o-n*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-n*i,t[3]=a*i,t):null},n.adjoint=function(t,e){var a=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=a,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=a[0],u=a[1],l=a[2],h=a[3];return t[0]=r*s+o*u,t[1]=n*s+i*u,t[2]=r*l+o*h,t[3]=n*l+i*h,t},n.mul=n.multiply,n.rotate=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=r*u+o*s,t[1]=n*u+i*s,t[2]=r*-s+o*u,t[3]=n*-s+i*u,t},n.scale=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=a[0],u=a[1];return t[0]=r*s,t[1]=n*s,t[2]=o*u,t[3]=i*u,t},n.fromRotation=function(t,e){var a=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=a,t[2]=-a,t[3]=r,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,e,a,r){return t[2]=r[2]/r[0],a[0]=r[0],a[1]=r[1],a[3]=r[3]-t[2]*a[1],[t,e,a]},n.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t},n.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t},n.sub=n.subtract,n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var a=t[0],n=t[1],o=t[2],i=t[3],s=e[0],u=e[1],l=e[2],h=e[3];return Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))},n.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t},n.multiplyScalarAndAdd=function(t,e,a,r){return t[0]=e[0]+a[0]*r,t[1]=e[1]+a[1]*r,t[2]=e[2]+a[2]*r,t[3]=e[3]+a[3]*r,t},t.exports=n},function(t,e,a){var r=a(0),n={};n.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,e,a,n,o,i){var s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=a,s[3]=n,s[4]=o,s[5]=i,s},n.set=function(t,e,a,r,n,o,i){return t[0]=e,t[1]=a,t[2]=r,t[3]=n,t[4]=o,t[5]=i,t},n.invert=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=e[4],s=e[5],u=a*o-r*n;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-n*u,t[3]=a*u,t[4]=(n*s-o*i)*u,t[5]=(r*i-a*s)*u,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=a[0],h=a[1],c=a[2],f=a[3],d=a[4],M=a[5];return t[0]=r*l+o*h,t[1]=n*l+i*h,t[2]=r*c+o*f,t[3]=n*c+i*f,t[4]=r*d+o*M+s,t[5]=n*d+i*M+u,t},n.mul=n.multiply,n.rotate=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=Math.sin(a),h=Math.cos(a);return t[0]=r*h+o*l,t[1]=n*h+i*l,t[2]=r*-l+o*h,t[3]=n*-l+i*h,t[4]=s,t[5]=u,t},n.scale=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=a[0],h=a[1];return t[0]=r*l,t[1]=n*l,t[2]=o*h,t[3]=i*h,t[4]=s,t[5]=u,t},n.translate=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=a[0],h=a[1];return t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=r*l+o*h+s,t[5]=n*l+i*h+u,t},n.fromRotation=function(t,e){var a=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=a,t[2]=-a,t[3]=r,t[4]=0,t[5]=0,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t},n.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t},n.multiplyScalarAndAdd=function(t,e,a,r){return t[0]=e[0]+a[0]*r,t[1]=e[1]+a[1]*r,t[2]=e[2]+a[2]*r,t[3]=e[3]+a[3]*r,t[4]=e[4]+a[4]*r,t[5]=e[5]+a[5]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},n.equals=function(t,e){var a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],u=t[5],l=e[0],h=e[1],c=e[2],f=e[3],d=e[4],M=e[5];return Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-d)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))},t.exports=n},function(t,e,a){var r=a(0),n={scalar:{},SIMD:{}};n.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.fromValues=function(t,e,a,n,o,i,s,u,l,h,c,f,d,M,m,v){var x=new r.ARRAY_TYPE(16);return x[0]=t,x[1]=e,x[2]=a,x[3]=n,x[4]=o,x[5]=i,x[6]=s,x[7]=u,x[8]=l,x[9]=h,x[10]=c,x[11]=f,x[12]=d,x[13]=M,x[14]=m,x[15]=v,x},n.set=function(t,e,a,r,n,o,i,s,u,l,h,c,f,d,M,m,v){return t[0]=e,t[1]=a,t[2]=r,t[3]=n,t[4]=o,t[5]=i,t[6]=s,t[7]=u,t[8]=l,t[9]=h,t[10]=c,t[11]=f,t[12]=d,t[13]=M,t[14]=m,t[15]=v,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.scalar.transpose=function(t,e){if(t===e){var a=e[1],r=e[2],n=e[3],o=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=a,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=n,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},n.SIMD.transpose=function(t,e){var a,r,n,o,i,s,u,l,h,c;return a=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(a,r,0,1,4,5),s=SIMD.Float32x4.shuffle(n,o,0,1,4,5),u=SIMD.Float32x4.shuffle(i,s,0,2,4,6),l=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(a,r,2,3,6,7),s=SIMD.Float32x4.shuffle(n,o,2,3,6,7),h=SIMD.Float32x4.shuffle(i,s,0,2,4,6),c=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,c),t},n.transpose=r.USE_SIMD?n.SIMD.transpose:n.scalar.transpose,n.scalar.invert=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],M=e[12],m=e[13],v=e[14],x=e[15],p=a*s-r*i,S=a*u-n*i,g=a*l-o*i,b=r*u-n*s,I=r*l-o*s,y=n*l-o*u,D=h*m-c*M,F=h*v-f*M,w=h*x-d*M,_=c*v-f*m,E=c*x-d*m,A=f*x-d*v,P=p*A-S*E+g*_+b*w-I*F+y*D;return P?(P=1/P,t[0]=(s*A-u*E+l*_)*P,t[1]=(n*E-r*A-o*_)*P,t[2]=(m*y-v*I+x*b)*P,t[3]=(f*I-c*y-d*b)*P,t[4]=(u*w-i*A-l*F)*P,t[5]=(a*A-n*w+o*F)*P,t[6]=(v*g-M*y-x*S)*P,t[7]=(h*y-f*g+d*S)*P,t[8]=(i*E-s*w+l*D)*P,t[9]=(r*w-a*E-o*D)*P,t[10]=(M*I-m*g+x*p)*P,t[11]=(c*g-h*I-d*p)*P,t[12]=(s*F-i*_-u*D)*P,t[13]=(a*_-r*F+n*D)*P,t[14]=(m*S-M*b-v*p)*P,t[15]=(h*b-c*S+f*p)*P,t):null},n.SIMD.invert=function(t,e){var a,r,n,o,i,s,u,l,h,c,f=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),M=SIMD.Float32x4.load(e,8),m=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(f,d,0,1,4,5),r=SIMD.Float32x4.shuffle(M,m,0,1,4,5),a=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,d,2,3,6,7),o=SIMD.Float32x4.shuffle(M,m,2,3,6,7),n=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.mul(r,i),u=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),h=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),s),l=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(a,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),h),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),l),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(a,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),h),c=SIMD.Float32x4.mul(a,s),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),i=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(i,i))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,h)),t):null},n.invert=r.USE_SIMD?n.SIMD.invert:n.scalar.invert,n.scalar.adjoint=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],M=e[12],m=e[13],v=e[14],x=e[15];return t[0]=s*(f*x-d*v)-c*(u*x-l*v)+m*(u*d-l*f),t[1]=-(r*(f*x-d*v)-c*(n*x-o*v)+m*(n*d-o*f)),t[2]=r*(u*x-l*v)-s*(n*x-o*v)+m*(n*l-o*u),t[3]=-(r*(u*d-l*f)-s*(n*d-o*f)+c*(n*l-o*u)),t[4]=-(i*(f*x-d*v)-h*(u*x-l*v)+M*(u*d-l*f)),t[5]=a*(f*x-d*v)-h*(n*x-o*v)+M*(n*d-o*f),t[6]=-(a*(u*x-l*v)-i*(n*x-o*v)+M*(n*l-o*u)),t[7]=a*(u*d-l*f)-i*(n*d-o*f)+h*(n*l-o*u),t[8]=i*(c*x-d*m)-h*(s*x-l*m)+M*(s*d-l*c),t[9]=-(a*(c*x-d*m)-h*(r*x-o*m)+M*(r*d-o*c)),t[10]=a*(s*x-l*m)-i*(r*x-o*m)+M*(r*l-o*s),t[11]=-(a*(s*d-l*c)-i*(r*d-o*c)+h*(r*l-o*s)),t[12]=-(i*(c*v-f*m)-h*(s*v-u*m)+M*(s*f-u*c)),t[13]=a*(c*v-f*m)-h*(r*v-n*m)+M*(r*f-n*c),t[14]=-(a*(s*v-u*m)-i*(r*v-n*m)+M*(r*u-n*s)),t[15]=a*(s*f-u*c)-i*(r*f-n*c)+h*(r*u-n*s),t},n.SIMD.adjoint=function(t,e){var a,r,n,o,i,s,u,l,h,c,f,d,M,a=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return h=SIMD.Float32x4.shuffle(a,r,0,1,4,5),s=SIMD.Float32x4.shuffle(n,o,0,1,4,5),i=SIMD.Float32x4.shuffle(h,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,h,1,3,5,7),h=SIMD.Float32x4.shuffle(a,r,2,3,6,7),l=SIMD.Float32x4.shuffle(n,o,2,3,6,7),u=SIMD.Float32x4.shuffle(h,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,h,1,3,5,7),h=SIMD.Float32x4.mul(u,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.mul(s,h),f=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),c),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.mul(s,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),c),M=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,h)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),c),d=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,h)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),h=SIMD.Float32x4.mul(i,s),h=SIMD.Float32x4.swizzle(h,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),d),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,h),M),h=SIMD.Float32x4.swizzle(h,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,h),d),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,h)),h=SIMD.Float32x4.mul(i,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,h)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,h),d),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,h)),h=SIMD.Float32x4.mul(i,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),f),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,h)),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,h)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,h),M),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,M),t},n.adjoint=r.USE_SIMD?n.SIMD.adjoint:n.scalar.adjoint,n.determinant=function(t){var e=t[0],a=t[1],r=t[2],n=t[3],o=t[4],i=t[5],s=t[6],u=t[7],l=t[8],h=t[9],c=t[10],f=t[11],d=t[12],M=t[13],m=t[14],v=t[15];return(e*i-a*o)*(c*v-f*m)-(e*s-r*o)*(h*v-f*M)+(e*u-n*o)*(h*m-c*M)+(a*s-r*i)*(l*v-f*d)-(a*u-n*i)*(l*m-c*d)+(r*u-n*s)*(l*M-h*d)},n.SIMD.multiply=function(t,e,a){var r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,0,u);var l=SIMD.Float32x4.load(a,4),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,h);var c=SIMD.Float32x4.load(a,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var d=SIMD.Float32x4.load(a,12),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,M),t},n.scalar.multiply=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],M=e[11],m=e[12],v=e[13],x=e[14],p=e[15],S=a[0],g=a[1],b=a[2],I=a[3];return t[0]=S*r+g*s+b*c+I*m,t[1]=S*n+g*u+b*f+I*v,t[2]=S*o+g*l+b*d+I*x,t[3]=S*i+g*h+b*M+I*p,S=a[4],g=a[5],b=a[6],I=a[7],t[4]=S*r+g*s+b*c+I*m,t[5]=S*n+g*u+b*f+I*v,t[6]=S*o+g*l+b*d+I*x,t[7]=S*i+g*h+b*M+I*p,S=a[8],g=a[9],b=a[10],I=a[11],t[8]=S*r+g*s+b*c+I*m,t[9]=S*n+g*u+b*f+I*v,t[10]=S*o+g*l+b*d+I*x,t[11]=S*i+g*h+b*M+I*p,S=a[12],g=a[13],b=a[14],I=a[15],t[12]=S*r+g*s+b*c+I*m,t[13]=S*n+g*u+b*f+I*v,t[14]=S*o+g*l+b*d+I*x,t[15]=S*i+g*h+b*M+I*p,t},n.multiply=r.USE_SIMD?n.SIMD.multiply:n.scalar.multiply,n.mul=n.multiply,n.scalar.translate=function(t,e,a){var r,n,o,i,s,u,l,h,c,f,d,M,m=a[0],v=a[1],x=a[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*x+e[12],t[13]=e[1]*m+e[5]*v+e[9]*x+e[13],t[14]=e[2]*m+e[6]*v+e[10]*x+e[14],t[15]=e[3]*m+e[7]*v+e[11]*x+e[15]):(r=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],M=e[11],t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=s,t[5]=u,t[6]=l,t[7]=h,t[8]=c,t[9]=f,t[10]=d,t[11]=M,t[12]=r*m+s*v+c*x+e[12],t[13]=n*m+u*v+f*x+e[13],t[14]=o*m+l*v+d*x+e[14],t[15]=i*m+h*v+M*x+e[15]),t},n.SIMD.translate=function(t,e,a){var r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(a[0],a[1],a[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,0,0,0,0)),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2));var u=SIMD.Float32x4.add(r,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,u),t},n.translate=r.USE_SIMD?n.SIMD.translate:n.scalar.translate,n.scalar.scale=function(t,e,a){var r=a[0],n=a[1],o=a[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.SIMD.scale=function(t,e,a){var r,n,o,i=SIMD.Float32x4(a[0],a[1],a[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),n=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.scale=r.USE_SIMD?n.SIMD.scale:n.scalar.scale,n.rotate=function(t,e,a,n){var o,i,s,u,l,h,c,f,d,M,m,v,x,p,S,g,b,I,y,D,F,w,_,E,A=n[0],P=n[1],T=n[2],O=Math.sqrt(A*A+P*P+T*T);return Math.abs(O)<r.EPSILON?null:(O=1/O,A*=O,P*=O,T*=O,o=Math.sin(a),i=Math.cos(a),s=1-i,u=e[0],l=e[1],h=e[2],c=e[3],f=e[4],d=e[5],M=e[6],m=e[7],v=e[8],x=e[9],p=e[10],S=e[11],g=A*A*s+i,b=P*A*s+T*o,I=T*A*s-P*o,y=A*P*s-T*o,D=P*P*s+i,F=T*P*s+A*o,w=A*T*s+P*o,_=P*T*s-A*o,E=T*T*s+i,t[0]=u*g+f*b+v*I,t[1]=l*g+d*b+x*I,t[2]=h*g+M*b+p*I,t[3]=c*g+m*b+S*I,t[4]=u*y+f*D+v*F,t[5]=l*y+d*D+x*F,t[6]=h*y+M*D+p*F,t[7]=c*y+m*D+S*F,t[8]=u*w+f*_+v*E,t[9]=l*w+d*_+x*E,t[10]=h*w+M*_+p*E,t[11]=c*w+m*_+S*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},n.scalar.rotateX=function(t,e,a){var r=Math.sin(a),n=Math.cos(a),o=e[4],i=e[5],s=e[6],u=e[7],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+l*r,t[5]=i*n+h*r,t[6]=s*n+c*r,t[7]=u*n+f*r,t[8]=l*n-o*r,t[9]=h*n-i*r,t[10]=c*n-s*r,t[11]=f*n-u*r,t},n.SIMD.rotateX=function(t,e,a){var r=SIMD.Float32x4.splat(Math.sin(a)),n=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,r))),t},n.rotateX=r.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX,n.scalar.rotateY=function(t,e,a){var r=Math.sin(a),n=Math.cos(a),o=e[0],i=e[1],s=e[2],u=e[3],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n-l*r,t[1]=i*n-h*r,t[2]=s*n-c*r,t[3]=u*n-f*r,t[8]=o*r+l*n,t[9]=i*r+h*n,t[10]=s*r+c*n,t[11]=u*r+f*n,t},n.SIMD.rotateY=function(t,e,a){var r=SIMD.Float32x4.splat(Math.sin(a)),n=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),t},n.rotateY=r.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY,n.scalar.rotateZ=function(t,e,a){var r=Math.sin(a),n=Math.cos(a),o=e[0],i=e[1],s=e[2],u=e[3],l=e[4],h=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+l*r,t[1]=i*n+h*r,t[2]=s*n+c*r,t[3]=u*n+f*r,t[4]=l*n-o*r,t[5]=h*n-i*r,t[6]=c*n-s*r,t[7]=f*n-u*r,t},n.SIMD.rotateZ=function(t,e,a){var r=SIMD.Float32x4.splat(Math.sin(a)),n=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,r))),t},n.rotateZ=r.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ,n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,e,a){var n,o,i,s=a[0],u=a[1],l=a[2],h=Math.sqrt(s*s+u*u+l*l);return Math.abs(h)<r.EPSILON?null:(h=1/h,s*=h,u*=h,l*=h,n=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=s*s*i+o,t[1]=u*s*i+l*n,t[2]=l*s*i-u*n,t[3]=0,t[4]=s*u*i-l*n,t[5]=u*u*i+o,t[6]=l*u*i+s*n,t[7]=0,t[8]=s*l*i+u*n,t[9]=u*l*i-s*n,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,e){var a=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,e){var a=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,e){var a=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=r+r,u=n+n,l=o+o,h=r*s,c=r*u,f=r*l,d=n*u,M=n*l,m=o*l,v=i*s,x=i*u,p=i*l;return t[0]=1-(d+m),t[1]=c+p,t[2]=f-x,t[3]=0,t[4]=c-p,t[5]=1-(h+m),t[6]=M+v,t[7]=0,t[8]=f+x,t[9]=M-v,t[10]=1-(h+d),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},n.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},n.getRotation=function(t,e){var a=e[0]+e[5]+e[10],r=0;return a>0?(r=2*Math.sqrt(a+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},n.fromRotationTranslationScale=function(t,e,a,r){var n=e[0],o=e[1],i=e[2],s=e[3],u=n+n,l=o+o,h=i+i,c=n*u,f=n*l,d=n*h,M=o*l,m=o*h,v=i*h,x=s*u,p=s*l,S=s*h,g=r[0],b=r[1],I=r[2];return t[0]=(1-(M+v))*g,t[1]=(f+S)*g,t[2]=(d-p)*g,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(c+v))*b,t[6]=(m+x)*b,t[7]=0,t[8]=(d+p)*I,t[9]=(m-x)*I,t[10]=(1-(c+M))*I,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,e,a,r,n){var o=e[0],i=e[1],s=e[2],u=e[3],l=o+o,h=i+i,c=s+s,f=o*l,d=o*h,M=o*c,m=i*h,v=i*c,x=s*c,p=u*l,S=u*h,g=u*c,b=r[0],I=r[1],y=r[2],D=n[0],F=n[1],w=n[2];return t[0]=(1-(m+x))*b,t[1]=(d+g)*b,t[2]=(M-S)*b,t[3]=0,t[4]=(d-g)*I,t[5]=(1-(f+x))*I,t[6]=(v+p)*I,t[7]=0,t[8]=(M+S)*y,t[9]=(v-p)*y,t[10]=(1-(f+m))*y,t[11]=0,t[12]=a[0]+D-(t[0]*D+t[4]*F+t[8]*w),t[13]=a[1]+F-(t[1]*D+t[5]*F+t[9]*w),t[14]=a[2]+w-(t[2]*D+t[6]*F+t[10]*w),t[15]=1,t},n.fromQuat=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=a+a,s=r+r,u=n+n,l=a*i,h=r*i,c=r*s,f=n*i,d=n*s,M=n*u,m=o*i,v=o*s,x=o*u;return t[0]=1-c-M,t[1]=h+x,t[2]=f-v,t[3]=0,t[4]=h-x,t[5]=1-l-M,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,e,a,r,n,o,i){var s=1/(a-e),u=1/(n-r),l=1/(o-i);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(a+e)*s,t[9]=(n+r)*u,t[10]=(i+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*l,t[15]=0,t},n.perspective=function(t,e,a,r,n){var o=1/Math.tan(e/2),i=1/(r-n);return t[0]=o/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*r*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,e,a,r){var n=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),l=2/(n+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(n-o)*l*.5,t[10]=r/(a-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*a/(a-r),t[15]=0,t},n.ortho=function(t,e,a,r,n,o,i){var s=1/(e-a),u=1/(r-n),l=1/(o-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+a)*s,t[13]=(n+r)*u,t[14]=(i+o)*l,t[15]=1,t},n.lookAt=function(t,e,a,o){var i,s,u,l,h,c,f,d,M,m,v=e[0],x=e[1],p=e[2],S=o[0],g=o[1],b=o[2],I=a[0],y=a[1],D=a[2];return Math.abs(v-I)<r.EPSILON&&Math.abs(x-y)<r.EPSILON&&Math.abs(p-D)<r.EPSILON?n.identity(t):(f=v-I,d=x-y,M=p-D,m=1/Math.sqrt(f*f+d*d+M*M),f*=m,d*=m,M*=m,i=g*M-b*d,s=b*f-S*M,u=S*d-g*f,m=Math.sqrt(i*i+s*s+u*u),m?(m=1/m,i*=m,s*=m,u*=m):(i=0,s=0,u=0),l=d*u-M*s,h=M*i-f*u,c=f*s-d*i,m=Math.sqrt(l*l+h*h+c*c),m?(m=1/m,l*=m,h*=m,c*=m):(l=0,h=0,c=0),t[0]=i,t[1]=l,t[2]=f,t[3]=0,t[4]=s,t[5]=h,t[6]=d,t[7]=0,t[8]=u,t[9]=c,t[10]=M,t[11]=0,t[12]=-(i*v+s*x+u*p),t[13]=-(l*v+h*x+c*p),t[14]=-(f*v+d*x+M*p),t[15]=1,t)},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t[9]=e[9]+a[9],t[10]=e[10]+a[10],t[11]=e[11]+a[11],t[12]=e[12]+a[12],t[13]=e[13]+a[13],t[14]=e[14]+a[14],t[15]=e[15]+a[15],t},n.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t[9]=e[9]-a[9],t[10]=e[10]-a[10],t[11]=e[11]-a[11],t[12]=e[12]-a[12],t[13]=e[13]-a[13],t[14]=e[14]-a[14],t[15]=e[15]-a[15],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12]*a,t[13]=e[13]*a,t[14]=e[14]*a,t[15]=e[15]*a,t},n.multiplyScalarAndAdd=function(t,e,a,r){return t[0]=e[0]+a[0]*r,t[1]=e[1]+a[1]*r,t[2]=e[2]+a[2]*r,t[3]=e[3]+a[3]*r,t[4]=e[4]+a[4]*r,t[5]=e[5]+a[5]*r,t[6]=e[6]+a[6]*r,t[7]=e[7]+a[7]*r,t[8]=e[8]+a[8]*r,t[9]=e[9]+a[9]*r,t[10]=e[10]+a[10]*r,t[11]=e[11]+a[11]*r,t[12]=e[12]+a[12]*r,t[13]=e[13]+a[13]*r,t[14]=e[14]+a[14]*r,t[15]=e[15]+a[15]*r,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},n.equals=function(t,e){var a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],u=t[5],l=t[6],h=t[7],c=t[8],f=t[9],d=t[10],M=t[11],m=t[12],v=t[13],x=t[14],p=t[15],S=e[0],g=e[1],b=e[2],I=e[3],y=e[4],D=e[5],F=e[6],w=e[7],_=e[8],E=e[9],A=e[10],P=e[11],T=e[12],O=e[13],R=e[14],z=e[15];return Math.abs(a-S)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-b)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-I)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-D)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(l-F)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(h-w)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(c-_)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(d-A)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(M-P)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(m-T)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(v-O)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(x-R)<=r.EPSILON*Math.max(1,Math.abs(x),Math.abs(R))&&Math.abs(p-z)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))},t.exports=n},function(t,e,a){var r=a(0),n=a(12),o=a(13),i=a(14),s={};s.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),a=o.fromValues(0,1,0);return function(r,n,i){var u=o.dot(n,i);return u<-.999999?(o.cross(t,e,n),o.length(t)<1e-6&&o.cross(t,a,n),o.normalize(t,t),s.setAxisAngle(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,n,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,s.normalize(r,r))}}(),s.setAxes=function(){var t=n.create();return function(e,a,r,n){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-a[0],t[5]=-a[1],t[8]=-a[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=i.clone,s.fromValues=i.fromValues,s.copy=i.copy,s.set=i.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,a){a*=.5;var r=Math.sin(a);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(a),t},s.getAxisAngle=function(t,e){var a=2*Math.acos(e[3]),r=Math.sin(a/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),a},s.add=i.add,s.multiply=function(t,e,a){var r=e[0],n=e[1],o=e[2],i=e[3],s=a[0],u=a[1],l=a[2],h=a[3];return t[0]=r*h+i*s+n*l-o*u,t[1]=n*h+i*u+o*s-r*l,t[2]=o*h+i*l+r*u-n*s,t[3]=i*h-r*s-n*u-o*l,t},s.mul=s.multiply,s.scale=i.scale,s.rotateX=function(t,e,a){a*=.5;var r=e[0],n=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=r*u+i*s,t[1]=n*u+o*s,t[2]=o*u-n*s,t[3]=i*u-r*s,t},s.rotateY=function(t,e,a){a*=.5;var r=e[0],n=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=r*u-o*s,t[1]=n*u+i*s,t[2]=o*u+r*s,t[3]=i*u-n*s,t},s.rotateZ=function(t,e,a){a*=.5;var r=e[0],n=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=r*u+n*s,t[1]=n*u-r*s,t[2]=o*u+i*s,t[3]=i*u-o*s,t},s.calculateW=function(t,e){var a=e[0],r=e[1],n=e[2];return t[0]=a,t[1]=r,t[2]=n,t[3]=Math.sqrt(Math.abs(1-a*a-r*r-n*n)),t},s.dot=i.dot,s.lerp=i.lerp,s.slerp=function(t,e,a,r){var n,o,i,s,u,l=e[0],h=e[1],c=e[2],f=e[3],d=a[0],M=a[1],m=a[2],v=a[3];return o=l*d+h*M+c*m+f*v,o<0&&(o=-o,d=-d,M=-M,m=-m,v=-v),1-o>1e-6?(n=Math.acos(o),i=Math.sin(n),s=Math.sin((1-r)*n)/i,u=Math.sin(r*n)/i):(s=1-r,u=r),t[0]=s*l+u*d,t[1]=s*h+u*M,t[2]=s*c+u*m,t[3]=s*f+u*v,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(a,r,n,o,i,u){return s.slerp(t,r,i,u),s.slerp(e,n,o,u),s.slerp(a,t,e,2*u*(1-u)),a}}(),s.invert=function(t,e){var a=e[0],r=e[1],n=e[2],o=e[3],i=a*a+r*r+n*n+o*o,s=i?1/i:0;return t[0]=-a*s,t[1]=-r*s,t[2]=-n*s,t[3]=o*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=i.length,s.len=s.length,s.squaredLength=i.squaredLength,s.sqrLen=s.squaredLength,s.normalize=i.normalize,s.fromMat3=function(t,e){var a,r=e[0]+e[4]+e[8];if(r>0)a=Math.sqrt(r+1),t[3]=.5*a,a=.5/a,t[0]=(e[5]-e[7])*a,t[1]=(e[6]-e[2])*a,t[2]=(e[1]-e[3])*a;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);var o=(n+1)%3,i=(n+2)%3;a=Math.sqrt(e[3*n+n]-e[3*o+o]-e[3*i+i]+1),t[n]=.5*a,a=.5/a,t[3]=(e[3*o+i]-e[3*i+o])*a,t[o]=(e[3*o+n]+e[3*n+o])*a,t[i]=(e[3*i+n]+e[3*n+i])*a}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=i.exactEquals,s.equals=i.equals,t.exports=s},function(t,e,a){var r=a(0),n={};n.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var a=new r.ARRAY_TYPE(2);return a[0]=t,a[1]=e,a},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,a){return t[0]=e,t[1]=a,t},n.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t},n.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t},n.sub=n.subtract,n.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t},n.mul=n.multiply,n.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},n.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t},n.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},n.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t},n.scaleAndAdd=function(t,e,a,r){return t[0]=e[0]+a[0]*r,t[1]=e[1]+a[1]*r,t},n.distance=function(t,e){var a=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(a*a+r*r)},n.dist=n.distance,n.squaredDistance=function(t,e){var a=e[0]-t[0],r=e[1]-t[1];return a*a+r*r},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],a=t[1];return Math.sqrt(e*e+a*a)},n.len=n.length,n.squaredLength=function(t){var e=t[0],a=t[1];return e*e+a*a},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},n.normalize=function(t,e){var a=e[0],r=e[1],n=a*a+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.cross=function(t,e,a){var r=e[0]*a[1]-e[1]*a[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,e,a,r){var n=e[0],o=e[1];return t[0]=n+r*(a[0]-n),t[1]=o+r*(a[1]-o),t},n.random=function(t,e){e=e||1;var a=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(a)*e,t[1]=Math.sin(a)*e,t},n.transformMat2=function(t,e,a){var r=e[0],n=e[1];return t[0]=a[0]*r+a[2]*n,t[1]=a[1]*r+a[3]*n,t},n.transformMat2d=function(t,e,a){var r=e[0],n=e[1];return t[0]=a[0]*r+a[2]*n+a[4],t[1]=a[1]*r+a[3]*n+a[5],t},n.transformMat3=function(t,e,a){var r=e[0],n=e[1];return t[0]=a[0]*r+a[3]*n+a[6],t[1]=a[1]*r+a[4]*n+a[7],t},n.transformMat4=function(t,e,a){var r=e[0],n=e[1];return t[0]=a[0]*r+a[4]*n+a[12],t[1]=a[1]*r+a[5]*n+a[13],t},n.forEach=function(){var t=n.create();return function(e,a,r,n,o,i){var s,u;for(a||(a=2),r||(r=0),u=n?Math.min(n*a+r,e.length):e.length,s=r;s<u;s+=a)t[0]=e[s],t[1]=e[s+1],o(t,t,i),e[s]=t[0],e[s+1]=t[1];return e}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},n.equals=function(t,e){var a=t[0],n=t[1],o=e[0],i=e[1];return Math.abs(a-o)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))},t.exports=n},function(t,e){t.exports=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNodes&&"boolean"==typeof t.multi}},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\ngl_FragColor = v_color;\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute float a_color;\n\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\n\nvoid main() {\n\n  // Scale from [[-1 1] [-1 1]] to the container:\n  vec2 delta = vec2(a_normal * a_thickness / 2.0);\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n  position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n  // Applying\n  gl_Position = vec4(position, 0, 1);\n  gl_PointSize = 10.0;\n\n  // Extract the color:\n  float c = a_color;\n  v_color.b = mod(c, 256.0); c = floor(c / 256.0);\n  v_color.g = mod(c, 256.0); c = floor(c / 256.0);\n  v_color.r = mod(c, 256.0); c = floor(c / 256.0); v_color /= 255.0;\n  v_color.a = 1.0;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\n\nvoid main(void) {\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n\n  vec2 m = gl_FragCoord.xy - center;\n  float diff = radius - sqrt(m.x * m.x + m.y * m.y);\n\n  // Here is how we draw a disc instead of a square:\n  if (diff > 0.0)\n    gl_FragColor = color;\n  else\n    gl_FragColor = color0;\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute float a_size;\nattribute float a_color;\nattribute float a_angle;\n\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\n\nvoid main() {\n  // Multiply the point size twice:\n  radius = a_size * u_ratio;\n\n  // Scale from [[-1 1] [-1 1]] to the container:\n  vec2 position = (u_matrix * vec3(a_position, 1)).xy;\n  // center = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n  center = position * u_scale;\n  center = vec2(center.x, u_scale * u_resolution.y - center.y);\n\n  position = position +\n    2.0 * radius * vec2(cos(a_angle), sin(a_angle));\n  position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n  radius = radius * u_scale;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  float c = a_color;\n  color.b = mod(c, 256.0); c = floor(c / 256.0);\n  color.g = mod(c, 256.0); c = floor(c / 256.0);\n  color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;\n  color.a = 1.0;\n}\n"}])});