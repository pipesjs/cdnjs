/*!
 * CanJS - 3.0.0-pre.0
 * http://canjs.com/
 * Copyright (c) 2016 Bitovi
 * Wed, 16 Mar 2016 19:35:27 GMT
 * Licensed MIT
 */

/*[global-shim-start]*/
!function(exports,global){var origDefine=global.define,get=function(e){var o,l=e.split("."),n=global;for(o=0;o<l.length&&n;o++)n=n[l[o]];return n},modules=global.define&&global.define.modules||global._define&&global._define.modules||{},ourDefine=global.define=function(e,o,l){var n;"function"==typeof o&&(l=o,o=[]);var r,t=[];for(r=0;r<o.length;r++)t.push(exports[o[r]]?get(exports[o[r]]):modules[o[r]]||get(o[r]));if(!o.length&&l.length){n={exports:{}};var i=function(e){return exports[e]?get(exports[e]):modules[e]};t.push(i,n.exports,n)}else t[0]||"exports"!==o[0]?t[0]||"module"!==o[0]||(t[0]={id:e}):(n={exports:{}},t[0]=n.exports,"module"===o[1]&&(t[1]=n));global.define=origDefine;var a=l?l.apply(null,t):void 0;global.define=ourDefine,modules[e]=n&&n.exports?n.exports:a};global.define.orig=origDefine,global.define.modules=modules,global.define.amd=!0,ourDefine("@loader",[],function(){var noop=function(){};return{get:function(){return{prepareGlobal:noop,retrieveGlobal:noop}},global:global,__exec:function(__load){eval("(function() { "+__load.source+" \n }).call(global);")}}})}({},window);
/*can@3.0.0-pre.0#util/can*/
define("can/util/can",function(e,n,t){var o="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global,r={};("undefined"==typeof GLOBALCAN||GLOBALCAN!==!1)&&(o.can=r),r.global=o,r.k=function(){},r.isDeferred=r.isPromise=function(e){return e&&"function"==typeof e.then&&"function"==typeof e.pipe},r.isMapLike=function(e){return r.Map&&(e instanceof r.Map||e&&e.___get)};var a=0;r.cid=function(e,n){return e._cid||(a++,e._cid=(n||"")+a),e._cid},r.VERSION="3.0.0-pre.0",r.simpleExtend=function(e,n){for(var t in n)e[t]=n[t];return e},r.last=function(e){return e&&e[e.length-1]},r.isDOM=function(e){return(e.ownerDocument||e)===r.global.document},r.childNodes=function(e){var n=e.childNodes;if("length"in n)return n;for(var t=e.firstChild,o=[];t;)o.push(t),t=t.nextSibling;return o};var i=Function.prototype.bind;i?r.proxy=function(e,n){return i.call(e,n)}:r.proxy=function(e,n){return function(){return e.apply(n,arguments)}},r.frag=function(e,n){var t,o=n||r.document||r.global.document;return e&&"string"!=typeof e?11===e.nodeType?e:"number"==typeof e.nodeType?(t=o.createDocumentFragment(),t.appendChild(e),t):"number"==typeof e.length?(t=o.createDocumentFragment(),r.each(e,function(e){t.appendChild(r.frag(e))}),r.childNodes(t).length||t.appendChild(o.createTextNode("")),t):(t=r.buildFragment(""+e,o),r.childNodes(t).length||t.appendChild(o.createTextNode("")),t):(t=r.buildFragment(null==e?"":""+e,o),t.childNodes.length||t.appendChild(o.createTextNode("")),t)},r.scope=r.viewModel=function(e,n,t){e=r.$(e);var o=r.data(e,"scope")||r.data(e,"viewModel");switch(o||(o=new r.Map,r.data(e,"scope",o),r.data(e,"viewModel",o)),arguments.length){case 0:case 1:return o;case 2:return o.attr(n);default:return o.attr(n,t),e}};var c=function(e){var n=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return n?{href:n[0]||"",protocol:n[1]||"",authority:n[2]||"",host:n[3]||"",hostname:n[4]||"",port:n[5]||"",pathname:n[6]||"",search:n[7]||"",hash:n[8]||""}:null};r.joinURIs=function(e,n){function t(e){var n=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?n.pop():n.push(e)}),n.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return n=c(n||""),e=c(e||""),n&&e?(n.protocol||e.protocol)+(n.protocol||n.authority?n.authority:e.authority)+t(n.protocol||n.authority||"/"===n.pathname.charAt(0)?n.pathname:n.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+n.pathname:e.pathname)+(n.protocol||n.authority||n.pathname?n.search:n.search||e.search)+n.hash:null},r["import"]=function(e,n){var t=new r.Deferred;return"object"==typeof window.System&&r.isFunction(window.System["import"])?window.System["import"](e,{name:n}).then(r.proxy(t.resolve,t),r.proxy(t.reject,t)):window.define&&window.define.amd?window.require([e],function(e){t.resolve(e)}):window.require?t.resolve(window.require(e)):t.resolve(),t.promise()},r.__observe=function(){},r.isNode="object"==typeof process&&"[object process]"==={}.toString.call(process),r.isBrowserWindow="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"==typeof SimpleDOM,r.isWebWorker="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,t.exports=n=r});
/*can@3.0.0-pre.0#util/attr/attr*/
define("can/util/attr/attr",function(t,e,r){var n=t("can/util/can"),a=n.global.setImmediate||function(t){return setTimeout(t,0)},u={input:!0,textarea:!0,select:!0},o=function(t,e){return e in t||n.document&&u[t.nodeName.toLowerCase()]},i={MutationObserver:n.global.MutationObserver||n.global.WebKitMutationObserver||n.global.MozMutationObserver,map:{"class":function(t,e){return e=e||"","http://www.w3.org/2000/svg"===t.namespaceURI?t.setAttribute("class",e):t.className=e,e},value:"value",innertext:"innerText",innerhtml:"innerHTML",textcontent:"textContent","for":"htmlFor",checked:!0,disabled:!0,readonly:function(t,e){return t.readOnly=!0,e},required:!0,src:function(t,e){return null==e||""===e?(t.removeAttribute("src"),null):(t.setAttribute("src",e),e)},style:function(){var t=n.global.document&&document.createElement("div");return t&&t.style&&"cssText"in t.style?function(t,e){return t.style.cssText=e||""}:function(t,e){return t.setAttribute("style",e)}}()},defaultValue:["input","textarea"],setAttrOrProp:function(t,e,r){e=e.toLowerCase();var n=i.map[e];n!==!0||r?this.set(t,e,r):this.remove(t,e)},setSelectValue:function(t,e){if(null!=e)for(var r=t.getElementsByTagName("option"),n=0;n<r.length;n++)if(e==r[n].value)return void(r[n].selected=!0);t.selectedIndex=-1},set:function(t,e,r){var a=n.isDOM(t)&&i.MutationObserver;e=e.toLowerCase();var u;a||(u=i.get(t,e));var s,l=i.map[e];"function"==typeof l?s=l(t,r):l===!0&&o(t,e)?(s=t[e]=!0,"checked"===e&&"radio"===t.type&&n.inArray((t.nodeName+"").toLowerCase(),i.defaultValue)>=0&&(t.defaultChecked=!0)):"string"==typeof l&&o(t,l)?(s=r,(t[l]!==r||"OPTION"===t.nodeName.toUpperCase())&&(t[l]=r),"value"===l&&n.inArray((t.nodeName+"").toLowerCase(),i.defaultValue)>=0&&(t.defaultValue=r)):i.setAttribute(t,e,r),a||s===u||i.trigger(t,e,u)},setAttribute:function(){var t=n.global.document;if(t&&document.createAttribute)try{t.createAttribute("{}")}catch(e){var r={},a=document.createElement("div");return function(t,e,n){var u,o,i=e.charAt(0);"{"!==i&&"("!==i&&"*"!==i||!t.setAttributeNode?t.setAttribute(e,n):(u=r[e],u||(a.innerHTML="<div "+e+'=""></div>',u=r[e]=a.childNodes[0].attributes[0]),o=u.cloneNode(),o.value=n,t.setAttributeNode(o))}}return function(t,e,r){t.setAttribute(e,r)}}(),trigger:function(t,e,r){return n.data(n.$(t),"canHasAttributesBindings")?(e=e.toLowerCase(),a(function(){n.trigger(t,{type:"attributes",attributeName:e,target:t,oldValue:r,bubbles:!1},[])})):void 0},get:function(t,e){e=e.toLowerCase();var r=i.map[e];return"string"==typeof r&&o(t,r)?t[r]:r===!0&&o(t,e)?t[e]:t.getAttribute(e)},remove:function(t,e){e=e.toLowerCase();var r;i.MutationObserver||(r=i.get(t,e));var n=i.map[e];"function"==typeof n&&n(t,void 0),n===!0&&o(t,e)?t[e]=!1:"string"==typeof n&&o(t,n)?t[n]="":t.removeAttribute(e),i.MutationObserver||null==r||i.trigger(t,e,r)},has:function(){var t=n.global.document&&document.createElement("div");return t&&t.hasAttribute?function(t,e){return t.hasAttribute(e)}:function(t,e){return null!==t.getAttribute(e)}}()};r.exports=e=i});
/*can@3.0.0-pre.0#event/event*/
define("can/event/event",function(t,n,e){var i=t("can/util/can");i.addEvent=function(t,n){var e=this.__bindEvents||(this.__bindEvents={}),i=e[t]||(e[t]=[]);return i.push({handler:n,name:t}),this},i.listenTo=function(t,n,e){var r=this.__listenToEvents;r||(r=this.__listenToEvents={});var s=i.cid(t),o=r[s];o||(o=r[s]={obj:t,events:{}});var a=o.events[n];a||(a=o.events[n]=[]),a.push(e),i.bind.call(t,n,e)},i.stopListening=function(t,n,e){var r=this.__listenToEvents,s=r,o=0;if(!r)return this;if(t){var a=i.cid(t);if((s={})[a]=r[a],!r[a])return this}for(var v in s){var l,h=s[v];t=r[v].obj,n?(l={})[n]=h.events[n]:l=h.events;for(var u in l){var d=l[u]||[];for(o=0;o<d.length;)e&&e===d[o]||!e?(i.unbind.call(t,u,d[o]),d.splice(o,1)):o++;d.length||delete h.events[u]}i.isEmptyObject(h.events)&&delete r[v]}return this},i.removeEvent=function(t,n,e){if(!this.__bindEvents)return this;for(var i,r=this.__bindEvents[t]||[],s=0,o="function"==typeof n;s<r.length;)i=r[s],(e?e(i,t,n):o&&i.handler===n||!o&&(i.cid===n||!n))?r.splice(s,1):s++;return this},i.dispatch=function(t,n){var e=this.__bindEvents;if(e){var i;"string"==typeof t?(i=t,t={type:t}):i=t.type;var r=e[i];if(r){r=r.slice(0);var s=[t];n&&s.push.apply(s,n);for(var o=0,a=r.length;a>o;o++)r[o].handler.apply(this,s);return t}}},i.one=function(t,n){var e=function(){return i.unbind.call(this,t,e),n.apply(this,arguments)};return i.bind.call(this,t,e),this},i.event={on:function(){return 0===arguments.length&&i.Control&&this instanceof i.Control?i.Control.prototype.on.call(this):i.addEvent.apply(this,arguments)},off:function(){return 0===arguments.length&&i.Control&&this instanceof i.Control?i.Control.prototype.off.call(this):i.removeEvent.apply(this,arguments)},bind:i.addEvent,unbind:i.removeEvent,delegate:function(t,n,e){return i.addEvent.call(this,n,e)},undelegate:function(t,n,e){return i.removeEvent.call(this,n,e)},trigger:i.dispatch,one:i.one,addEvent:i.addEvent,removeEvent:i.removeEvent,listenTo:i.listenTo,stopListening:i.stopListening,dispatch:i.dispatch},e.exports=n=i.event});
/*can@3.0.0-pre.0#util/fragment*/
define("can/util/fragment",function(e,t,i){var l=e("can/util/can"),n=/^\s*<(\w+)[^>]*>/,r={}.toString,d=function(e,t,i){void 0===t&&(t=n.test(e)&&RegExp.$1),e&&"[object Function]"===r.call(e.replace)&&(e=e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>"));var d=i.createElement("div"),o=i.createElement("div");"tbody"===t||"tfoot"===t||"thead"===t||"colgroup"===t?(o.innerHTML="<table>"+e+"</table>",d=3===o.firstChild.nodeType?o.lastChild:o.firstChild):"col"===t?(o.innerHTML="<table><colgroup>"+e+"</colgroup></table>",d=3===o.firstChild.nodeType?o.lastChild:o.firstChild.firstChild):"tr"===t?(o.innerHTML="<table><tbody>"+e+"</tbody></table>",d=3===o.firstChild.nodeType?o.lastChild:o.firstChild.firstChild):"td"===t||"th"===t?(o.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",d=3===o.firstChild.nodeType?o.lastChild:o.firstChild.firstChild.firstChild):"option"===t?(o.innerHTML="<select>"+e+"</select>",d=3===o.firstChild.nodeType?o.lastChild:o.firstChild):d.innerHTML=""+e;var a={},h=l.childNodes(d);a.length=h.length;for(var c=0;c<h.length;c++)a[c]=h[c];return[].slice.call(a)};l.buildFragment=function(e,t){if(e&&11===e.nodeType)return e;t?t.length&&(t=t[0]):t=document;for(var i=d(e,void 0,t),l=(t||document).createDocumentFragment(),n=0,r=i.length;r>n;n++)l.appendChild(i[n]);return l},function(){var e="<-\n>",t=l.buildFragment(e,document);if(e!==t.firstChild.nodeValue){var i=l.buildFragment;l.buildFragment=function(e,t){var l=i(e,t);return 1===l.childNodes.length&&3===l.childNodes[0].nodeType&&(l.childNodes[0].nodeValue=e),l}}}(),i.exports=l});
/*can@3.0.0-pre.0#util/array/isArrayLike*/
define("can/util/array/isArrayLike",function(n,r,e){var i=n("can/util/can");i.isArrayLike=function(n){var r=n&&"boolean"!=typeof n&&"number"!=typeof n&&"length"in n&&n.length;return"function"!=typeof arr&&(0===r||"number"==typeof r&&r>0&&r-1 in n)},e.exports=i.isArrayLike});
/*can@3.0.0-pre.0#util/array/each*/
define("can/util/array/each",function(a,e,t){var r=a("can/util/can");a("can/util/array/isArrayLike"),r.each=function(a,e,t){var i,l,n,c=0;if(a)if(r.isArrayLike(a))if(r.List&&a instanceof r.List)for(l=a.attr("length");l>c&&(n=a.attr(c),e.call(t||n,n,c,a)!==!1);c++);else for(l=a.length;l>c&&(n=a[c],e.call(t||n,n,c,a)!==!1);c++);else if("object"==typeof a)if(r.Map&&a instanceof r.Map||a===r.route){var f=r.Map.keys(a);for(c=0,l=f.length;l>c&&(i=f[c],n=a.attr(i),e.call(t||n,n,i,a)!==!1);c++);}else for(i in a)if(Object.prototype.hasOwnProperty.call(a,i)&&e.call(t||a[i],a[i],i,a)===!1)break;return a},t.exports=e=r});
/*can@3.0.0-pre.0#util/object/isplain/isplain*/
define("can/util/object/isplain/isplain",function(t,n,r){var o=t("can/util/can"),c=Object.prototype.hasOwnProperty,e=function(t){return null!==t&&t==t.window},i=function(t){if(!t||"object"!=typeof t||t.nodeType||e(t))return!1;try{if(t.constructor&&!c.call(t,"constructor")&&!c.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in t);return void 0===r||c.call(t,r)};o.isPlainObject=i,r.exports=o});
/*can@3.0.0-pre.0#util/deferred*/
define("can/util/deferred",function(t,e,n){var r=t("can/util/can"),s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i=function(t){return this instanceof i?(this._doneFuncs=[],this._failFuncs=[],this._resultArgs=null,this._status="",void(t&&t.call(this,this))):new i};r.Deferred=i,r.when=i.when=function(){var t=r.makeArray(arguments);if(t.length<2){var e=t[0];return e&&r.isFunction(e.isResolved)&&r.isFunction(e.isRejected)?e:i().resolve(e)}var n=i(),s=0,u=[];return r.each(t,function(e,r){e.done(function(){u[r]=arguments.length<2?arguments[0]:arguments,++s===t.length&&n.resolve.apply(n,u)}).fail(function(){n.reject(1===arguments.length?arguments[0]:arguments)})}),n};var u=function(t,e){return function(n){var r=this._resultArgs=arguments.length>1?arguments[1]:[];return this.exec(n,this[t],r,e)}},a=function h(t,e){return function(){var n=this;return r.each(Array.prototype.slice.call(arguments),function(r,s,i){r&&(r.constructor===Array?h.apply(n,r):(n._status===e&&r.apply(n,n._resultArgs||[]),n[t].push(r)))}),this}},o=function(t){return t&&t.then&&t.fail&&t.done},c=function(t,e,n,s){o(e)?e.done(r.proxy(t.resolve,t)).fail(r.proxy(t.reject,t)):n.call(t,void 0!==e?e:s)};s(i.prototype,{then:function(t,e){var n=r.Deferred(),s=n.resolve,i=n.reject;return this.done(function(e){"function"==typeof t?c(n,t.apply(this,arguments),s,e):s.apply(n,arguments)}),this.fail(function(t){"function"==typeof e?c(n,e.apply(this,arguments),i,t):i.apply(n,arguments)}),n},resolveWith:u("_doneFuncs","rs"),rejectWith:u("_failFuncs","rj"),done:a("_doneFuncs","rs"),fail:a("_failFuncs","rj"),always:function(){var t=r.makeArray(arguments);return t.length&&t[0]&&this.done(t[0]).fail(t[0]),this},state:function(){switch(this._status){case"rs":return"resolved";case"rj":return"rejected";default:return"pending"}},isResolved:function(){return"rs"===this._status},isRejected:function(){return"rj"===this._status},reject:function(){return this.rejectWith(this,arguments)},resolve:function(){return this.resolveWith(this,arguments)},exec:function(t,e,n,s){return""!==this._status?this:(this._status=s,r.each(e,function(e){"function"==typeof e.apply&&e.apply(t,n)}),this)},promise:function(){var t=this.then();return t.reject=t.resolve=void 0,t}}),i.prototype.pipe=i.prototype.then,n.exports=r});
/*can@3.0.0-pre.0#util/hashchange*/
define("can/util/hashchange",function(n,a,t){var e=n("can/util/can");!function(){var n=function(n,a,t){n.addEventListener?n.addEventListener(a,t,!1):n.attachEvent?n.attachEvent("on"+a,t):n["on"+a]=t},a=function(){e.trigger(window,"hashchange")};n(window,"hashchange",a)}()});
/*can@3.0.0-pre.0#util/inserted/inserted*/
define("can/util/inserted/inserted",function(e,n,r){var i=e("can/util/can");i.inserted=function(e,n){if(e.length){e=i.makeArray(e);for(var r,t,a=n||e[0].ownerDocument||e[0],d=!1,o=i.$(a.contains?a:a.body),s=0;void 0!==(t=e[s]);s++){if(!d){if(!t.getElementsByTagName)continue;if(!i.has(o,t).length)return;d=!0}if(d&&t.getElementsByTagName){r=i.makeArray(t.getElementsByTagName("*")),i.trigger(t,"inserted",[],!1);for(var f,c=0;void 0!==(f=r[c]);c++)i.trigger(f,"inserted",[],!1)}}}},i.appendChild=function(e,n,r){var t;t=11===n.nodeType?i.makeArray(i.childNodes(n)):[n],e.appendChild(n),i.inserted(t,r)},i.insertBefore=function(e,n,r,t){var a;a=11===n.nodeType?i.makeArray(i.childNodes(n)):[n],e.insertBefore(n,r),i.inserted(a,t)}});
/*can@3.0.0-pre.0#util/util*/
define("can/util/util",function(require,exports,module){"format cjs";var can=require("can/util/can"),attr=require("can/util/attr/attr"),YUI=require("can/yui/yui");require("can/event/event"),require("can/util/fragment"),require("can/util/array/each"),require("can/util/object/isplain/isplain"),require("can/util/deferred"),require("can/util/hashchange"),require("can/util/inserted/inserted"),YUI=YUI||window.YUI,YUI.add("can-modifications",function(e,n){var t=e.DOM.addHTML;e.DOM.addHTML=function(e,n,a){("string"==typeof n||"number"==typeof n)&&(n=can.buildFragment(n,e.ownerDocument||e.getDOMNode().ownerDocument));var r;r=11===n.nodeType?can.makeArray(n.childNodes):[n];var i=t.call(this,e,n,a);return can.inserted(r),i};var a=e.Node.prototype.on;e.Node.prototype.on=function(e,n){if("attributes"===e){var t=can.$(this);can.data(t,"canHasAttributesBindings",(can.data(t,"canHasAttributesBindings")||0)+1);var r=a.apply(this,arguments),i=r.detach;return r.detach=function(){var e=can.data(t,"canHasAttributesBindings")||0;return 0>=e?can.cleanData(t,"canHasAttributesBindings"):can.data(t,"canHasAttributesBindings",e-1),i.apply(this,arguments)},r}return a.apply(this,arguments)}},"3.7.3",{requires:["node-base"]});var Y=can.Y=can.Y||YUI().use("*");can.trim=function(e){return Y.Lang.trim(e)},can.makeArray=function(e){return e?Y.Array(e):[]},can.isArray=Y.Lang.isArray,can.inArray=function(e,n,t){return n?Y.Array.indexOf(n,e,t):-1},can.map=function(e,n){return Y.Array.map(can.makeArray(e||[]),n)},can.extend=function(e){for(var n,t=e===!0?1:0,a=arguments[t],r=t+1;n=arguments[r];r++)Y.mix(a,n,!0,null,null,!!t);return a},can.param=function(e){return Y.QueryString.stringify(e,{arrayKey:!0})},can.isEmptyObject=function(e){return Y.Object.isEmpty(e)},can.proxy=function(e,n){return Y.bind.apply(Y,arguments)},can.isFunction=function(e){return Y.Lang.isFunction(e)};var prepareNodeList=function(e){return e.each(function(n,t){e[t]=n.getDOMNode()}),e.length=e.size(),e};can.$=function(e){return e===window?window:e instanceof Y.NodeList?prepareNodeList(e):"object"!=typeof e||can.isArray(e)||"undefined"!=typeof e.nodeType||e.getDOMNode?prepareNodeList(Y.all(e)):new Y.NodeList(e)},can.get=function(e,n){return e._nodes[n]},can.append=function(e,n){e.each(function(e){"string"==typeof n&&(n=can.buildFragment(n,e.getDOMNode().ownerDocument)),e.append(n)})},can.addClass=function(e,n){return e.addClass(n)},can.data=function(e,n,t){return e.item(0)?void 0===t?e.item(0).getData(n):e.item(0).setData(n,t):void 0},can.remove=function(e){return e.remove()&&e.destroy()},can.has=function(e,n){return Y.DOM.contains(e[0],n)?e:[]},can._yNodeRemove=can._yNodeRemove||Y.Node.prototype.remove,Y.Node.prototype.remove=function(){var e=this.getDOMNode();if(1===e.nodeType){can.trigger(this,"removed",[],!1);for(var n,t=e.getElementsByTagName("*"),a=0;void 0!==(n=t[a]);a++)can.trigger(n,"removed",[],!1)}can._yNodeRemove.apply(this,arguments)},Y.NodeList.addMethod("remove",Y.Node.prototype.remove);var optionsMap={type:"method",success:void 0,error:void 0},updateDeferred=function(e,n){if(e&&e.io){var t=e.io;for(var a in t)"function"==typeof n[a]?n[a]=function(){t[a].apply(t,arguments)}:n[a]=a[t]}};can.ajax=function(options){var d=can.Deferred(),requestOptions=can.extend({},options);for(var option in optionsMap)void 0!==requestOptions[option]&&(requestOptions[optionsMap[option]]=requestOptions[option],delete requestOptions[option]);requestOptions.sync=!options.async;var success=options.success,error=options.error;requestOptions.on={success:function(transactionid,response){var data=response.responseText;"json"===options.dataType&&(data=eval("("+data+")")),updateDeferred(request,d),d.resolve(data),success&&success(data,"success",request)},failure:function(e,n){updateDeferred(request,d),d.reject(request,"error"),error&&error(request,"error")}};var request=Y.io(requestOptions.url,requestOptions);return updateDeferred(request,d),d};var yuiEventId=0,addBinding=function(e,n,t,a){if(e instanceof Y.NodeList||!e.on||e.getDOMNode)e.each(function(e){e=can.$(e);var r=can.data(e,"events"),i=t+":"+n;r||can.data(e,"events",r={}),r[i]||(r[i]={}),void 0===a.__bindingsIds&&(a.__bindingsIds=yuiEventId++),r[i][a.__bindingsIds]=n?e.item(0).delegate(t,a,n):e.item(0).on(t,a)});else{var r=e,i=r.__canEvents=r.__canEvents||{};i[t]||(i[t]={}),void 0===a.__bindingsIds&&(a.__bindingsIds=yuiEventId++),i[t][a.__bindingsIds]=r.on(t,a)}},removeBinding=function(e,n,t,a){if(e instanceof Y.NodeList||!e.on||e.getDOMNode)e.each(function(e){e=can.$(e);var r=can.data(e,"events");if(r){var i=t+":"+n,o=r[i],s=o[a.__bindingsIds];s.detach(),delete o[a.__bindingsIds],can.isEmptyObject(o)&&delete r[t],can.isEmptyObject(r)}});else{var r=e,i=r.__canEvents||{},o=i[t],s=o[a.__bindingsIds];s.detach(),delete o[a.__bindingsIds],can.isEmptyObject(o)&&delete i[t],can.isEmptyObject(i)}};can.bind=function(e,n){return this.bind&&this.bind!==can.bind?this.bind(e,n):this.on||this.nodeType?addBinding(can.$(this),void 0,e,n):this.addEvent?this.addEvent(e,n):can.addEvent.call(this,e,n),this},can.unbind=function(e,n){return this.unbind&&this.unbind!==can.unbind?this.unbind(e,n):this.on||this.nodeType?removeBinding(can.$(this),void 0,e,n):can.removeEvent.call(this,e,n),this},can.on=can.bind,can.off=can.unbind,can.trigger=function(e,n,t,a){e instanceof Y.NodeList&&(e=e.item(0)),e.getDOMNode&&(e=e.getDOMNode()),e.nodeName?(e=Y.Node(e),a===!1&&e.once(n,function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e._stopper&&e._stopper()}),"string"!=typeof n&&(t=n,n=t.type,delete t.type),realTrigger(e.getDOMNode(),n,t||{})):("string"==typeof n&&(n={type:n}),n.target=n.target||e,can.dispatch.call(e,n,can.makeArray(t)))},Y.mix(Y.Node.DOM_EVENTS,{removed:!0,inserted:!0,attributes:!0,foo:!0}),Y.Env.evt.plugins.attributes={on:function(){var e=can.makeArray(arguments);return Y.Event._attach(e,{facade:!1})}},can.delegate=function(e,n,t){return this.on||this.nodeType?addBinding(can.$(this),e,n,t):this.delegate?this.delegate(e,n,t):can.bind.call(this,n,t),this},can.undelegate=function(e,n,t){return this.on||this.nodeType?removeBinding(can.$(this),e,n,t):this.undelegate?this.undelegate(e,n,t):can.unbind.call(this,n,t),this};var realTrigger,realTriggerHandler=function(e,n,t){var a,r=Y.Node(e),i=can.Y.Event.getListeners(r._yuid,n);if(i)for(a=0;a<i.length;a++)if(i[a].fire)i[a].fire(t);else{if(!i[a].handles)throw"can not fire event";can.each(i[a].handles,function(e){e.evt.fire(t)})}},fakeTrigger=function(e,n,t){var a=!1,r=can.extend({type:n,target:e,faux:!0,_stopper:function(){a=this.cancelBubble},stopPropagation:function(){a=this.cancelBubble},preventDefault:function(){}},t);if(realTriggerHandler(e,n,r),"inserted"!==n&&"removed"!==n)for(;!a&&e!==document&&e.parentNode;)e=e.parentNode,realTriggerHandler(e,n,r)};realTrigger=document.createEvent?function(e,n,t){fakeTrigger(e,n,t)}:function(e,n,t){fakeTrigger(e,n,t)},can.attr=attr,delete attr.MutationObserver,module.exports=can});
/*can@3.0.0-pre.0#view/view*/
define("can/view/view",function(e,r,n){var t=e("can/util/util"),i=t.isFunction,u=t.makeArray,o=1,a=function(e){var r=function(){return p.frag(e.apply(this,arguments))};return r.render=function(){return e.apply(e,arguments)},r},c=function(e,r){if(!e.length)throw new Error("can.view: No template or empty template:"+r)},d=function(r,n){if(i(r)){var u=t.Deferred();return u.resolve(r)}var o,a,d,s="string"==typeof r?r:r.url,f=r.engine&&"."+r.engine||s.match(/\.[\w\d]+$/);if(s.match(/^#/)&&(s=s.substr(1)),(a=document.getElementById(s))&&(f="."+a.type.match(/\/(x\-)?(.+)/)[2]),f||p.cached[s]||(s+=f=p.ext),t.isArray(f)&&(f=f[0]),d=p.toId(s),s.match(/^\/\//)&&(s=s.substr(2),s=window.steal?steal.config().root.mapJoin(""+steal.id(s)):s),window.require&&e.toUrl&&(s=e.toUrl(s)),o=p.types[f],p.cached[d])return p.cached[d];if(a)return p.registerView(d,a.innerHTML,o);var l=new t.Deferred;return t.ajax({async:n,url:s,dataType:"text",error:function(e){c("",s),l.reject(e)},success:function(e){c(e,s),p.registerView(d,e,o,l)}}),l},s=function(e){var r=[];if(t.isDeferred(e))return[e];for(var n in e)t.isDeferred(e[n])&&r.push(e[n]);return r},f=function(e){return t.isArray(e)&&"success"===e[1]?e[0]:e},p=t.view=t.template=function(e,r,n,t){return i(n)&&(t=n,n=void 0),p.renderAs("fragment",e,r,n,t)};t.extend(p,{frag:function(e,r){return p.hookup(p.fragment(e),r)},fragment:function(e){return t.frag(e,document)},toId:function(e){return t.map(e.toString().split(/\/|\./g),function(e){return e?e:void 0}).join("_")},toStr:function(e){return null==e?"":""+e},hookup:function(e,r){var n,i,u=[];return t.each(e.childNodes?t.makeArray(e.childNodes):e,function(e){1===e.nodeType&&(u.push(e),u.push.apply(u,t.makeArray(e.getElementsByTagName("*"))))}),t.each(u,function(e){e.getAttribute&&(n=e.getAttribute("data-view-id"))&&(i=p.hookups[n])&&(i(e,r,n),delete p.hookups[n],e.removeAttribute("data-view-id"))}),e},hookups:{},hook:function(e){return p.hookups[++o]=e," data-view-id='"+o+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(e){this.types["."+e.suffix]=e,t[e.suffix]=p[e.suffix]=function(r,n){var t,i;if(!n)return i=function(){return t||(t=e.fragRenderer?e.fragRenderer(null,r):a(e.renderer(null,r))),t.apply(this,arguments)},i.render=function(){var n=e.renderer(null,r);return n.apply(n,arguments)},i;var u=function(){return t||(t=e.fragRenderer?e.fragRenderer(r,n):e.renderer(r,n)),t.apply(this,arguments)};return e.fragRenderer?p.preload(r,u):p.preloadStringRenderer(r,u)}},types:{},ext:".stache",registerScript:function(e,r,n){return"can.view.preloadStringRenderer('"+r+"',"+p.types["."+e].script(r,n)+");"},preload:function(e,r){var n=p.cached[e]=(new t.Deferred).resolve(function(e,n){return r.call(e,e,n)});return n.__view_id=e,p.cachedRenderers[e]=r,r},preloadStringRenderer:function(e,r){return this.preload(e,a(r))},render:function(e,r,n,i,u){return t.view.renderAs("string",e,r,n,i,u)},renderTo:function(e,r,n,t,i){return("string"===e&&r.render?r.render:r)(n,t,i)},renderAs:function(e,r,n,o,a,c){void 0!==a&&"string"==typeof a.expression&&(c=a,a=void 0),i(o)&&(a=o,o=void 0);var l,h,g,v,m=s(n);if(m.length)return l=new t.Deferred,h=t.extend({},n),m.push(d(r,!0)),t.when.apply(t,m).then(function(r){var i,d=u(arguments),s=d.pop();if(t.isDeferred(n))h=f(r);else for(var p in n)t.isDeferred(n[p])&&(h[p]=f(d.shift()));i=t.view.renderTo(e,s,h,o,c),l.resolve(i,h),a&&a(i,h)},function(){l.reject.apply(l,arguments)}),l;if(g=i(a),l=t.__notObserve(d)(r,g),g)v=l,l.then(function(r){a(n?t.view.renderTo(e,r,n,o,c):r)});else{if("resolved"===l.state()&&l.__view_id){var w=p.cachedRenderers[l.__view_id];return n?t.view.renderTo(e,w,n,o,c):w}l.then(function(r){v=n?t.view.renderTo(e,r,n,o,c):r})}return v},registerView:function(e,r,n,i){var u,o="object"==typeof n?n:p.types[n||p.ext];return u=o.fragRenderer?o.fragRenderer(e,r):a(o.renderer(e,r)),i=i||new t.Deferred,p.cache&&(p.cached[e]=i,i.__view_id=e,p.cachedRenderers[e]=u),i.resolve(u)},simpleHelper:function(e){return function(){var r=[];return t.each(arguments,function(e,n){if(n<=arguments.length){for(;e&&e.isComputed;)e=e();r.push(e)}}),e.apply(this,r)}}}),n.exports=t});
/*can@3.0.0-pre.0#view/elements*/
define("can/view/elements",function(e,t,n){var o=e("can/util/util");e("can/view/view");var r="undefined"!=typeof document?document:null,a=r&&function(){return 1===o.$(document.createComment("~")).length}(),l={tagToContentPropMap:{option:r&&"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:o.attr.map,attrReg:/([^\s=]+)[\s]*=[\s]*/,defaultValue:o.attr.defaultValue,tagMap:{"":"span",colgroup:"col",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{col:"colgroup",tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},selfClosingTags:{col:!0},getParentNode:function(e,t){return t&&11===e.parentNode.nodeType?t:e.parentNode},setAttr:o.attr.set,getAttr:o.attr.get,removeAttr:o.attr.remove,contentText:function(e){return"string"==typeof e?e:e||0===e?""+e:""},after:function(e,t){var n=e[e.length-1];n.nextSibling?o.insertBefore(n.parentNode,t,n.nextSibling,o.document):o.appendChild(n.parentNode,t,o.document)},replace:function(e,t){var n,r=e[0].parentNode;"SELECT"===r.nodeName.toUpperCase()&&r.selectedIndex>=0&&(n=r.value),l.after(e,t),o.remove(o.$(e)).length<e.length&&!a&&o.each(e,function(e){8===e.nodeType&&e.parentNode.removeChild(e)}),void 0!==n&&(r.value=n)}};o.view.elements=l,n.exports=l});
/*can@3.0.0-pre.0#util/bind/bind*/
define("can/util/bind/bind",function(i,n,t){var s=i("can/util/util");s.bindAndSetup=function(){return s.addEvent.apply(this,arguments),this.__inSetup||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},s.unbindAndTeardown=function(i,n){if(!this.__bindEvents)return this;var t=this.__bindEvents[i]||[],d=t.length;return s.removeEvent.apply(this,arguments),null===this._bindings?this._bindings=0:this._bindings=this._bindings-(d-t.length),!this._bindings&&this._bindteardown&&this._bindteardown(),this},t.exports=n=s});
/*can@3.0.0-pre.0#util/batch/batch*/
define("can/util/batch/batch",function(t,a,n){var c=t("can/util/can"),e=1,s=0,u=null,l=null,h=[],r=!1;c.batch={start:function(t){if(s++,1===s){var a={events:[],callbacks:[],number:e++};h.push(a),t&&a.callbacks.push(t),l=a}},stop:function(t,a){if(t?s=0:s--,0===s){l=null;var n;if(r===!1){for(r=!0;n=h.shift();){var e=n.events,i=n.callbacks;u=n,c.batch.batchNum=n.number;var b,f;for(a&&c.batch.start(),b=0,f=e.length;f>b;b++)c.dispatch.apply(e[b][0],e[b][1]);for(c.batch._onDispatchedEvents(n.number),b=0;b<i.length;b++)i[b]();u=null,c.batch.batchNum=void 0}r=!1}}},_onDispatchedEvents:function(){},trigger:function(t,a,n){t.__inSetup||(a="string"==typeof a?{type:a}:a,l?(a.batchNum=l.number,l.events.push([t,[a,n]])):a.batchNum?c.dispatch.call(t,a,n):h.length?(c.batch.start(),a.batchNum=l.number,l.events.push([t,[a,n]]),c.batch.stop()):c.dispatch.call(t,a,n))},afterPreviousEvents:function(t){var a=c.last(h);if(a){var n={};c.bind.call(n,"ready",t),a.events.push([n,[{type:"ready"},[]]])}else t({})},after:function(t){var a=l||u;a?a.callbacks.push(t):t({})}}});
/*can@3.0.0-pre.0#compute/read*/
define("can/compute/read",function(e,t,r){var n=e("can/util/util"),a=function(e,t,r){r=r||{};for(var n,o,i={foundObservable:!1},u=s(e,0,t,r,i),d=t.length,v=0;d>v;){o=u;for(var l=0,f=a.propertyReaders.length;f>l;l++){var c=a.propertyReaders[l];if(c.test(u)){u=c.read(u,t[v],v,r,i);break}}if(v+=1,u=s(u,v,t,r,i,o),n=typeof u,v<t.length&&(null===u||"function"!==n&&"object"!==n))return r.earlyExit&&r.earlyExit(o,v-1,u),{value:void 0,parent:o}}return void 0===u&&r.earlyExit&&r.earlyExit(o,v-1),{value:u,parent:o}},o=function(e,t){var r=t[e-1];return r&&r.at},s=function(e,t,r,n,o,s){var i;do{i=!1;for(var u=0,d=a.valueReaders.length;d>u;u++)a.valueReaders[u].test(e,t,r,n)&&(e=a.valueReaders[u].read(e,t,r,n,o,s))}while(i);return e};a.valueReaders=[{name:"compute",test:function(e,t,r,n){return e&&e.isComputed&&!o(t,r)},read:function(e,t,r,a,o){return a.readCompute===!1&&t===r.length?e:(!o.foundObservable&&a.foundObservable&&(a.foundObservable(e,t),o.foundObservable=!0),e instanceof n.Compute?e.get():e())}},{name:"function",test:function(e,t,r,a){var o=typeof e;return!("function"!==o||e.isComputed||n.Construct&&e.prototype instanceof n.Construct||n.route&&e===n.route)},read:function(e,t,r,a,s,i){return o(t,r)?t===r.length?n.proxy(e,i):e:a.callMethodsOnObservables&&n.isMapLike(i)?e.apply(i,a.args||[]):a.isArgument&&t===r.length?a.proxyMethods!==!1?n.proxy(e,i):e:e.apply(i,a.args||[])}}],a.propertyReaders=[{name:"map",test:n.isMapLike,read:function(e,t,r,n,a){!a.foundObservable&&n.foundObservable&&(n.foundObservable(e,r),a.foundObservable=!0);var o=e.attr(t.key);return void 0!==o?o:e[t.key]}},{name:"promise",test:function(e){return n.isPromise(e)},read:function(e,t,r,a,o){!o.foundObservable&&a.foundObservable&&(a.foundObservable(e,r),o.foundObservable=!0);var s=e.__observeData;return e.__observeData||(s=e.__observeData={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0},n.cid(s),n.simpleExtend(s,n.event),e.then(function(e){s.isPending=!1,s.isResolved=!0,s.value=e,s.state="resolved",s.dispatch("state",["resolved","pending"])},function(e){s.isPending=!1,s.isRejected=!0,s.reason=e,s.state="rejected",s.dispatch("state",["rejected","pending"])})),n.__observe(s,"state"),t.key in s?s[t.key]:e[t.key]}},{name:"object",test:function(){return!0},read:function(e,t){return null==e?void 0:t.key in e?e[t.key]:t.at&&i[t.key]&&"@"+t.key in e?(t.at=!1,e["@"+t.key]):void 0}}];var i={index:!0,key:!0,event:!0,element:!0,viewModel:!0};a.write=function(e,t,r,a){return a=a||{},n.isMapLike(e)?!a.isArgument&&e._data&&e._data[t]&&e._data[t].isComputed?e._data[t](r):e.attr(t,r):e[t]&&e[t].isComputed?e[t](r):void("object"==typeof e&&(e[t]=r))},a.reads=function(e){var t=[],r=0,n=!1;"@"===e.charAt(0)&&(r=1,n=!0);for(var a="",o=r;o<e.length;o++){var s=e.charAt(o);"."===s||"@"===s?"\\"!==e.charAt(o-1)?(t.push({key:a,at:n}),n="@"===s,a=""):a=a.substr(0,a.length-1)+".":a+=s}return t.push({key:a,at:n}),t},r.exports=t=a});
/*can@3.0.0-pre.0#compute/get_value_and_bind*/
define("can/compute/get_value_and_bind",function(e,t,n){function i(e,t,n){this.newObserved={},this.oldObserved=null,this.func=e,this.context=t,this.compute=n,this.onDependencyChange=r.proxy(this.onDependencyChange,this),this.depth=null,this.childDepths={},this.ignore=0,this.inBatch=!1,this.ready=!1,n.observedInfo=this,this.setReady=r.proxy(this._setReady,this)}var r=e("can/util/util"),s=[];r.simpleExtend(i.prototype,{getPrimaryDepth:function(){return this.compute._primaryDepth},_setReady:function(){this.ready=!0},getDepth:function(){return null!==this.depth?this.depth:this.depth=this._getDepth()},_getDepth:function(){var e=0,t=this.childDepths;for(var n in t)t[n]>e&&(e=t[n]);return e+1},addEdge:function(e){e.obj.bind(e.event,this.onDependencyChange),e.obj.observedInfo&&(this.childDepths[e.obj._cid]=e.obj.observedInfo.getDepth(),this.depth=null)},removeEdge:function(e){e.obj.unbind(e.event,this.onDependencyChange),e.obj.observedInfo&&(delete this.childDepths[e.obj._cid],this.depth=null)},dependencyChange:function(e){this.bound&&this.ready&&(void 0!==e.batchNum?e.batchNum!==this.batchNum&&(i.registerUpdate(this),this.batchNum=e.batchNum):this.updateCompute(e.batchNum))},onDependencyChange:function(e,t,n){this.dependencyChange(e,t,n)},updateCompute:function(e){if(this.bound){var t=this.value;this.getValueAndBind(),this.compute.updater(this.value,t,e)}},getValueAndBind:function(){this.bound=!0,this.oldObserved=this.newObserved||{},this.ignore=0,this.newObserved={},this.ready=!1,s.push(this),this.value=this.func.call(this.context),s.pop(),this.updateBindings(),r.batch.afterPreviousEvents(this.setReady)},updateBindings:function(){var e,t,n=this.newObserved,i=this.oldObserved;for(e in n)t=n[e],i[e]?i[e]=null:this.addEdge(t);for(e in i)t=i[e],t&&this.removeEdge(t)},teardown:function(){this.bound=!1;for(var e in this.newObserved){var t=this.newObserved[e];this.removeEdge(t)}this.newObserved={}}});var h=[],o=1/0,a=0;i.registerUpdate=function(e,t){var n=e.getDepth()-1,i=e.getPrimaryDepth();o=Math.min(i,o),a=Math.max(i,a);var r=h[i]||(h[i]={observeInfos:[],current:1/0,max:0}),s=r.observeInfos[n]||(r.observeInfos[n]=[]);s.push(e),r.current=Math.min(n,r.current),r.max=Math.max(n,r.max)},i.batchEnd=function(e){for(var t;;){if(!(a>=o))return h=[],o=1/0,void(a=0);var n=h[o];if(n&&n.current<=n.max){var i=n.observeInfos[n.current];i&&(t=i.pop())?t.updateCompute(e):n.current++}else o++}},r.__observe=function(e,t){var n=s[s.length-1];if(n&&!n.ignore){var i=t+"",r=e._cid+"|"+i;n.traps?n.traps.push({obj:e,event:i,name:r}):n.newObserved[r]||(n.newObserved[r]={obj:e,event:i})}},r.__reading=r.__observe,r.__trapObserves=function(){if(s.length){var e=s[s.length-1],t=e.traps=[];return function(){return e.traps=null,t}}return function(){return[]}},r.__observes=function(e){var t=s[s.length-1];if(t)for(var n=0,i=e.length;i>n;n++){var r=e[n],h=r.name;t.newObserved[h]||(t.newObserved[h]=r)}},r.__isRecordingObserves=function(){var e=s.length;return e&&0===s[e-1].ignore},r.__notObserve=function(e){return function(){if(s.length){var t=s[s.length-1];t.ignore++;var n=e.apply(this,arguments);return t.ignore--,n}return e.apply(this,arguments)}},r.batch._onDispatchedEvents=i.batchEnd,n.exports=t=i});
/*can@3.0.0-pre.0#compute/proto_compute*/
define("can/compute/proto_compute",function(t,e,n){var i=t("can/util/util"),s=t("can/compute/read"),u=t("can/compute/get_value_and_bind");t("can/util/bind/bind"),t("can/util/batch/batch"),i.Compute=function(t,e,n,s){i.cid(this,"compute");for(var u=[],o=0,a=arguments.length;a>o;o++)u[o]=arguments[o];var r=typeof u[1];"function"==typeof u[0]?this._setupGetterSetterFn(u[0],u[1],u[2],u[3]):u[1]?"string"===r?this._setupProperty(u[0],u[1],u[2]):"function"===r?this._setupSetter(u[0],u[1],u[2]):u[1]&&u[1].fn?this._setupAsyncCompute(u[0],u[1]):this._setupSettings(u[0],u[1]):this._setupSimpleValue(u[0]),this._args=u,this._primaryDepth=0,this.isComputed=!0},i.simpleExtend(i.Compute.prototype,{setPrimaryDepth:function(t){this._primaryDepth=t},_setupGetterSetterFn:function(t,e,n){this._set=e?i.proxy(t,e):t,this._get=e?i.proxy(t,e):t,this._canObserve=n===!1?!1:!0;var s=a(this,t,e||this);i.simpleExtend(this,s)},_setupProperty:function(t,e,n){var s,u=i.isMapLike(t),o=this;u?(s=function(t,e,n){o.updater(e,n,t.batchNum)},this.hasDependencies=!0,this._get=function(){return t.attr(e)},this._set=function(n){t.attr(e,n)}):(s=function(){o.updater(o._get(),o.value)},this._get=function(){return i.getObject(e,[t])},this._set=function(n){var s=e.split("."),u=s.pop(),o=i.getObject(s.join("."),[t]);o[u]=n}),this._on=function(u){i.bind.call(t,n||e,s),this.value=this._get()},this._off=function(){return i.unbind.call(t,n||e,s)}},_setupSetter:function(t,e,n){this.value=t,this._set=e,i.simpleExtend(this,n)},_setupSettings:function(t,e){if(this.value=t,this._set=e.set||this._set,this._get=e.get||this._get,!e.__selfUpdater){var n=this,i=this.updater;this.updater=function(){i.call(n,n._get(),n.value)}}this._on=e.on?e.on:this._on,this._off=e.off?e.off:this._off},_setupAsyncCompute:function(t,e){var n=this;this.value=t,this._setUpdates=!0,this.lastSetValue=new i.Compute(t),this._set=function(t){return t===n.lastSetValue.get()?this.value:n.lastSetValue.set(t)},this._get=function(){return u.call(e.context,n.lastSetValue.get())};var s,u=e.fn;if(0===u.length)s=a(this,u,e.context);else if(1===u.length)s=a(this,function(){return u.call(e.context,n.lastSetValue.get())},e);else{var o=this.updater,r=function(t){o.call(n,t,n.value)};this.updater=function(t){o.call(n,t,n.value)},s=a(this,function(){var t=u.call(e.context,n.lastSetValue.get(),r);return void 0!==t?t:this.value},this)}i.simpleExtend(this,s)},_setupSimpleValue:function(t){this.value=t},_bindsetup:i.__notObserve(function(){this.bound=!0,this._on(this.updater)}),_bindteardown:function(){this._off(this.updater),this.bound=!1},bind:i.bindAndSetup,unbind:i.unbindAndTeardown,clone:function(t){return t&&"function"==typeof this._args[0]?this._args[1]=t:t&&(this._args[2]=t),new i.Compute(this._args[0],this._args[1],this._args[2],this._args[3])},_on:i.k,_off:i.k,get:function(){return i.__isRecordingObserves()&&this._canObserve!==!1&&(i.__observe(this,"change"),this.bound||i.Compute.temporarilyBind(this)),this.bound?this.value:this._get()},_get:function(){return this.value},set:function(t){var e=this.value,n=this._set(t,e);return this._setUpdates?this.value:this.hasDependencies?this._get():(void 0===n?this.value=this._get():this.value=n,o(this,this.value,e),this.value)},_set:function(t){return this.value=t},updater:function(t,e,n){this.value=t,o(this,t,e,n)},toFunction:function(){return i.proxy(this._computeFn,this)},_computeFn:function(t){return arguments.length?this.set(t):this.get()}});var o=function(t,e,n,s){var u=e!==n&&!(e!==e&&n!==n);u&&i.batch.trigger(t,{type:"change",batchNum:s},[e,n])},a=function(t,e,n){var s=new u(e,n,t);return{_on:function(){s.getValueAndBind(),t.value=s.value,t.hasDependencies=!i.isEmptyObject(s.newObserved)},_off:function(){s.teardown()},getDepth:function(){return s.getDepth()}}};i.Compute.temporarilyBind=function(t){var e=t.computeInstance||t;e.bind("change",i.k),r||(r=[],setTimeout(h,10)),r.push(e)};var r,h=function(){for(var t=0,e=r.length;e>t;t++)r[t].unbind("change",i.k);r=null};i.Compute.async=function(t,e,n){return new i.Compute(t,{fn:e,context:n})},i.Compute.truthy=function(t){return new i.Compute(function(){var e=t.get();return"function"==typeof e&&(e=e.get()),!!e})},i.Compute.read=s,i.Compute.set=s.write,n.exports=e=i.Compute});
/*can@3.0.0-pre.0#compute/compute*/
define("can/compute/compute",function(t,n,e){var u=t("can/util/util");t("can/util/bind/bind"),t("can/util/batch/batch"),t("can/compute/proto_compute"),u.compute=function(t,n,e,o){var c=new u.Compute(t,n,e,o),r=c.bind,p=c.unbind,i=function(t){return arguments.length?c.set(t):c.get()},m=u.cid(i,"compute"),a="__handler"+m;return i.bind=function(t,n){var e=n&&n[a];return n&&!e&&(e=n[a]=function(){n.apply(i,arguments)}),r.call(c,t,e)},i.unbind=function(t,n){var e=n&&n[a];return e?(delete n[a],c.unbind(t,e)):p.apply(c,arguments)},i.isComputed=c.isComputed,i.clone=function(e){return"function"==typeof t&&(n=e),u.compute(t,n,e,o)},i.computeInstance=c,i},u.compute.truthy=function(t){return u.compute(function(){var n=t();return"function"==typeof n&&(n=n()),!!n})},u.compute.async=function(t,n,e){return u.compute(t,{fn:n,context:e})},u.compute.read=u.Compute.read,u.compute.set=u.Compute.set,u.compute.temporarilyBind=u.Compute.temporarilyBind,e.exports=n=u.compute});
/*can@3.0.0-pre.0#view/scope/compute_data*/
define("can/view/scope/compute_data",function(e,t,n){var o=e("can/util/util");e("can/compute/compute");var a=e("can/compute/get_value_and_bind"),r=function(e){return e.reads&&1===e.reads.length&&e.root instanceof o.Map&&!o.isFunction(e.root[e.reads[0].key])},u=function(e,t,n,a,r){if(!(arguments.length>4)){if(a.root)return o.compute.read(a.root,a.reads,n).value;var u=e.read(t,n);return a.scope=u.scope,a.initialValue=u.value,a.reads=u.reads,a.root=u.rootObserve,a.setRoot=u.setRoot,u.value}var c=a.root||a.setRoot;if(c)if(c.isComputed)c(r);else if(a.reads.length){var s=a.reads.length-1,d=a.reads.length?o.compute.read(c,a.reads.slice(0,s)).value:c;o.compute.set(d,a.reads[s].key,r,n)}};n.exports=function(e,t,n){n=n||{args:[]};var c={},s=function(o){return arguments.length?u(e,t,n,c,o):u(e,t,n,c)},d=o.compute(void 0,{on:function(){i.getValueAndBind(),r(c)&&(i.dependencyChange=function(e,t){return"function"!=typeof t?this.newVal=t:(i.dependencyChange=a.prototype.dependencyChange,i.getValueAndBind=a.prototype.getValueAndBind),a.prototype.dependencyChange.call(this,e)},i.getValueAndBind=function(){this.value=this.newVal}),d.computeInstance.value=i.value,d.computeInstance.hasDependencies=!o.isEmptyObject(i.newObserved)},off:function(){i.teardown()},set:s,get:s,__selfUpdater:!0}),i=new a(s,null,d.computeInstance);return c.compute=d,c}});
/*can@3.0.0-pre.0#util/string/string*/
define("can/util/string/string",function(e,r,n){var t=e("can/util/util"),a=/_|-/,i=/\=\=/,u=/([A-Z]+)([A-Z][a-z])/g,c=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,l=/\{([^\}]+)\}/g,p=/"/g,f=/'/g,g=/-+(.)?/g,s=/[a-z][A-Z]/g,d=function(e,r,n){var t=e[r];return void 0===t&&n===!0&&(t=e[r]={}),t},v=function(e){return/^f|^o/.test(typeof e)},h=function(e){var r=null===e||void 0===e||isNaN(e)&&""+e=="NaN";return""+(r?"":e)};t.extend(t,{esc:function(e){return h(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(p,"&#34;").replace(f,"&#39;")},getObject:function(e,r,n){var a,i,u,c,o=e?e.split("."):[],l=o.length,p=0;if(r=t.isArray(r)?r:[r||window],c=r.length,!l)return r[0];for(p;c>p;p++){for(a=r[p],u=void 0,i=0;l>i&&v(a);i++)u=a,a=d(u,o[i]);if(void 0!==u&&void 0!==a)break}if(n===!1&&void 0!==a&&delete u[o[i-1]],n===!0&&void 0===a)for(a=r[0],i=0;l>i&&v(a);i++)a=d(a,o[i],!0);return a},capitalize:function(e,r){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return h(e).replace(g,function(e,r){return r?r.toUpperCase():""})},hyphenate:function(e){return h(e).replace(s,function(e,r){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},underscore:function(e){return e.replace(i,"/").replace(u,"$1_$2").replace(c,"$1_$2").replace(o,"_").toLowerCase()},sub:function(e,r,n){var a=[];return e=e||"",a.push(e.replace(l,function(e,i){var u=t.getObject(i,r,n===!0?!1:void 0);return void 0===u||null===u?(a=null,""):v(u)&&a?(a.push(u),""):""+u})),null===a?a:a.length<=1?a[0]:a},replacer:l,undHash:a}),n.exports=t});
/*can@3.0.0-pre.0#construct/construct*/
define("can/construct/construct",function(t,n,e){var r,o=t("can/util/string/string"),s=0;try{Object.getOwnPropertyDescriptor({}),r=!0}catch(i){r=!1}var u=function(t,n){var e=Object.getOwnPropertyDescriptor(t,n);return e&&(e.get||e.set)?e:null},c=function(t,n,e){e=e||t;var r;for(var s in t)(r=u(t,s))?this._defineProperty(e,n,s,r):o.Construct._overwrite(e,n,s,t[s])},a=function(t,n,e){e=e||t;for(var r in t)o.Construct._overwrite(e,n,r,t[r])};o.Construct=function(){return arguments.length?o.Construct.extend.apply(o.Construct,arguments):void 0},o.extend(o.Construct,{constructorExtends:!0,newInstance:function(){var t,n=this.instance();return n.setup&&(n.__inSetup=!0,t=n.setup.apply(n,arguments),delete n.__inSetup),n.init&&n.init.apply(n,t||arguments),n},_inherit:r?c:a,_defineProperty:function(t,n,e,r){Object.defineProperty(t,e,r)},_overwrite:function(t,n,e,r){t[e]=r},setup:function(t,n){this.defaults=o.extend(!0,{},t.defaults,this.defaults)},instance:function(){s=1;var t=new this;return s=0,t},extend:function(t,n,e){function r(){return s?void 0:this.constructor!==a&&arguments.length&&a.constructorExtends?a.extend.apply(a,arguments):a.newInstance.apply(a,arguments)}var i=t,u=n,c=e;"string"!=typeof i&&(c=u,u=i,i=null),c||(c=u,u=null),c=c||{};var a,p,f,l,h,d,y,m,g,v=this,_=this.prototype;g=this.instance(),o.Construct._inherit(c,_,g),i?(p=i.split("."),y=p.pop()):u&&u.shortName?y=u.shortName:this.shortName&&(y=this.shortName),"undefined"==typeof constructorName&&(a=function(){return r.apply(this,arguments)});for(d in v)v.hasOwnProperty(d)&&(a[d]=v[d]);o.Construct._inherit(u,v,a),i&&(f=o.getObject(p.join("."),window,!0),m=f,l=o.underscore(i.replace(/\./g,"_")),h=o.underscore(y),f[y]=a),o.extend(a,{constructor:a,prototype:g,namespace:m,_shortName:h,fullName:i,_fullName:l}),void 0!==y&&(a.shortName=y),a.prototype.constructor=a;var w=[v].concat(o.makeArray(arguments)),C=a.setup.apply(a,w);return a.init&&a.init.apply(a,C||w),a}}),o.Construct.prototype.setup=function(){},o.Construct.prototype.init=function(){},e.exports=n=o.Construct});
/*can@3.0.0-pre.0#map/bubble*/
define("can/map/bubble",function(n,i,e){var b=n("can/util/util"),t=b.bubble={bind:function(n,i){if(!n.__inSetup){var e,b=t.events(n,i),r=b.length;n._bubbleBindings||(n._bubbleBindings={});for(var d=0;r>d;d++)e=b[d],n._bubbleBindings[e]?n._bubbleBindings[e]++:(n._bubbleBindings[e]=1,t.childrenOf(n,e))}},unbind:function(n,i){for(var e,r=t.events(n,i),d=r.length,u=0;d>u;u++)e=r[u],n._bubbleBindings&&n._bubbleBindings[e]--,n._bubbleBindings&&!n._bubbleBindings[e]&&(delete n._bubbleBindings[e],t.teardownChildrenFrom(n,e),b.isEmptyObject(n._bubbleBindings)&&delete n._bubbleBindings)},add:function(n,i,e){if(i instanceof b.Map&&n._bubbleBindings)for(var r in n._bubbleBindings)n._bubbleBindings[r]&&(t.teardownFromParent(n,i,r),t.toParent(i,n,e,r))},addMany:function(n,i){for(var e=0,b=i.length;b>e;e++)t.add(n,i[e],e)},remove:function(n,i){if(i instanceof b.Map&&n._bubbleBindings)for(var e in n._bubbleBindings)n._bubbleBindings[e]&&t.teardownFromParent(n,i,e)},removeMany:function(n,i){for(var e=0,b=i.length;b>e;e++)t.remove(n,i[e])},set:function(n,i,e,r){return b.isMapLike(e)&&t.add(n,e,i),b.isMapLike(r)&&t.remove(n,r),e},events:function(n,i){return n.constructor._bubbleRule(i,n)},toParent:function(n,i,e,t){b.listenTo.call(i,n,t,function(){var r=b.makeArray(arguments),d=r.shift();r[0]=(b.List&&i instanceof b.List?i.indexOf(n):e)+(r[0]?"."+r[0]:""),d.triggeredNS=d.triggeredNS||{},d.triggeredNS[i._cid]||(d.triggeredNS[i._cid]=!0,b.trigger(i,d,r),"change"===t&&b.trigger(i,r[0],[r[2],r[3]]))})},childrenOf:function(n,i){n._each(function(e,b){e&&e.bind&&t.toParent(e,n,b,i)})},teardownFromParent:function(n,i,e){i&&i.unbind&&b.stopListening.call(n,i,e)},teardownChildrenFrom:function(n,i){n._each(function(e){t.teardownFromParent(n,e,i)})},isBubbling:function(n,i){return n._bubbleBindings&&n._bubbleBindings[i]}};e.exports=i=t});
/*can@3.0.0-pre.0#map/map_helpers*/
define("can/map/map_helpers",function(n,e,t){var i=n("can/util/util");n("can/util/object/isplain/isplain");var r={attrParts:function(n,e){return e?[n]:"object"==typeof n?n:(""+n).split(".")},canMakeObserve:function(n){return n&&!i.isDeferred(n)&&(i.isArray(n)||i.isPlainObject(n))},serialize:function(){var n=null;return function(e,t,a){var c=i.cid(e),u=!1;return n||(u=!0,n={attr:{},serialize:{}}),n[t][c]=a,e.each(function(c,u){var o,d=i.isMapLike(c),l=d&&n[t][i.cid(c)];o=l?l:e["___"+t]?e["___"+t](u,c):r.getValue(e,u,c,t),void 0!==o&&(a[u]=o)}),u&&(n=null),a}}(),getValue:function(n,e,t,r){return i.isMapLike(t)?t[r]():t},define:null,addComputedAttr:function(n,e,t){n._computedAttrs[e]={compute:t,count:0,handler:function(t,i,r){n._triggerChange(e,"set",i,r,t.batchNum)}}},addToMap:function(n,e){var t;a||(t=c,a={});var r=n._cid,u=i.cid(n);return a[u]||(a[u]={obj:n,instance:e,added:!r}),t},getMapFromObject:function(n){return a&&a[n._cid]&&a[n._cid].instance}},a=null,c=function(){for(var n in a)a[n].added&&delete a[n].obj._cid;a=null};t.exports=e=r});
/*can@3.0.0-pre.0#map/map*/
define("can/map/map",function(t,e,i){var r=t("can/util/util"),n=t("can/map/bubble"),s=t("can/map/map_helpers");t("can/util/bind/bind"),t("can/construct/construct"),t("can/util/batch/batch"),t("can/compute/get_value_and_bind");var o={constructor:!0},a=r.Map=r.Construct.extend({setup:function(){if(r.Construct.setup.apply(this,arguments),this._computedPropertyNames=[],r.Map){this.defaults||(this.defaults={});for(var t in this.prototype)"define"!==t&&"constructor"!==t&&("function"!=typeof this.prototype[t]||this.prototype[t].prototype instanceof r.Construct)?this.defaults[t]=this.prototype[t]:this.prototype[t].isComputed&&this._computedPropertyNames.push(t);s.define&&s.define(this)}!r.List||this.prototype instanceof r.List||(this.List=a.List.extend({Map:this},{}))},shortName:"Map",_bubbleRule:function(t){return"change"===t||t.indexOf(".")>=0?["change"]:[]},bind:r.bindAndSetup,unbind:r.unbindAndTeardown,id:"id",keys:function(t){var e=[];r.__observe(t,"__keys");for(var i in t._data)e.push(i);return e}},{setup:function(t){t instanceof r.Map&&(t=t.serialize()),this._data={},r.cid(this,".map"),this._setupComputedProperties();var e=t&&s.addToMap(t,this),i=this._setupDefaults(t),n=r.extend(r.extend(!0,{},i),t);this.attr(n),e&&e()},_setupComputedProperties:function(){this._computedAttrs={};for(var t=this.constructor._computedPropertyNames,e=0,i=t.length;i>e;e++){var r=t[e];s.addComputedAttr(this,r,this[r].clone(this))}},_setupDefaults:function(){return this.constructor.defaults||{}},attr:function(t,e){var i=typeof t;return void 0===t?this._getAttrs():"string"!==i&&"number"!==i?this._setAttrs(t,e):1===arguments.length?this._get(t+""):(this._set(t+"",e),this)},_get:function(t){var e=t.indexOf(".");if(e>=0){var i=this.___get(t);if(void 0!==i)return r.__observe(this,t),i;var n=t.substr(0,e),s=t.substr(e+1),o=this.__get(n);return o&&o._get?o._get(s):void 0}return this.__get(t)},__get:function(t){return o[t]||this._computedAttrs[t]||r.__observe(this,t),this.___get(t)},___get:function(t){if(void 0!==t){var e=this._computedAttrs[t];return e&&e.compute?e.compute():this._data.hasOwnProperty(t)?this._data[t]:void 0}return this._data},_set:function(t,e,i){var n,s=t.indexOf(".");if(s>=0&&!i){var o=t.substr(0,s),a=t.substr(s+1);if(n=this.__inSetup?void 0:this.___get(o),!r.isMapLike(n))throw new Error("can.Map: Object does not exist");n._set(a,e)}else n=this.__inSetup?void 0:this.___get(t),this.__convert&&(e=this.__convert(t,e)),this.__set(t,this.__type(e,t),n)},__type:function(t,e){if("object"==typeof t&&!(t instanceof r.Map)&&s.canMakeObserve(t)){var i=s.getMapFromObject(t);if(i)return i;if(r.isArray(t)){var n=r.List;return new n(t)}var o=this.constructor.Map||r.Map;return new o(t)}return t},__set:function(t,e,i){if(e!==i){var r=this._computedAttrs[t],s=r||void 0!==i||this.___get().hasOwnProperty(t)?"set":"add";this.___set(t,"object"==typeof e?n.set(this,t,e,i):e),r&&r.count||this._triggerChange(t,s,e,i),"object"==typeof i&&n.teardownFromParent(this,i)}},___set:function(t,e){var i=this._computedAttrs[t];i?i.compute(e):this._data[t]=e,"function"==typeof this.constructor.prototype[t]||i||(this[t]=e)},removeAttr:function(t){return this._remove(t)},_remove:function(t){var e=s.attrParts(t),i=e.shift(),r=this.___get(i);return e.length&&r?r.removeAttr(e):("string"==typeof t&&~t.indexOf(".")&&(i=t),this.__remove(i,r),r)},__remove:function(t,e){t in this._data&&(this.___remove(t),this._triggerChange(t,"remove",void 0,e))},___remove:function(t){delete this._data[t],t in this.constructor.prototype||delete this[t]},___serialize:function(t,e){return s.getValue(this,t,e,"serialize")},_getAttrs:function(){return s.serialize(this,"attr",{})},_setAttrs:function(t,e){t=r.simpleExtend({},t);var i,n,o=this;r.batch.start(),this._each(function(i,a){if("_cid"!==a){if(n=t[a],void 0===n)return void(e&&o.removeAttr(a));o.__convert&&(n=o.__convert(a,n)),r.isMapLike(i)&&s.canMakeObserve(n)?i.attr(n,e):i!==n&&o.__set(a,o.__type(n,a),i),delete t[a]}});for(i in t)"_cid"!==i&&(n=t[i],this._set(i,n,!0));return r.batch.stop(),this},serialize:function(){return s.serialize(this,"serialize",{})},_triggerChange:function(t,e,i,s,o){n.isBubbling(this,"change")&&r.batch.trigger(this,{type:"change",target:this,batchNum:o},[t,e,i,s]),r.batch.trigger(this,{type:t,target:this,batchNum:o},[i,s]),("remove"===e||"add"===e)&&r.batch.trigger(this,{type:"__keys",target:this,batchNum:o})},_bindsetup:function(){},_bindteardown:function(){},one:r.one,bind:function(t,e){var i=this._computedAttrs&&this._computedAttrs[t];return i&&i.compute&&(i.count?i.count++:(i.count=1,i.compute.bind("change",i.handler))),n.bind(this,t),r.bindAndSetup.apply(this,arguments)},unbind:function(t,e){var i=this._computedAttrs&&this._computedAttrs[t];return i&&(1===i.count?(i.count=0,i.compute.unbind("change",i.handler)):i.count--),n.unbind(this,t),r.unbindAndTeardown.apply(this,arguments)},compute:function(t){if(r.isFunction(this.constructor.prototype[t]))return r.compute(this[t],this);var e=r.compute.read.reads(t),i=e.length-1;return r.compute(function(t){return arguments.length?void r.compute.read(this,e.slice(0,i)).value.attr(e[i].key,t):r.compute.read(this,e,{args:[]}).value},this)},each:function(){return r.each.apply(void 0,[this].concat(r.makeArray(arguments)))},_each:function(t){var e=this.___get();for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)},dispatch:r.dispatch});a.prototype.on=a.prototype.bind,a.prototype.off=a.prototype.unbind,a.on=a.bind,a.off=a.unbind,i.exports=e=a});
/*can@3.0.0-pre.0#list/list*/
define("can/list/list",function(t,e,i){var r=t("can/util/util"),n=t("can/map/map"),s=t("can/map/bubble"),h=t("can/map/map_helpers"),a=[].splice,o=function(){var t={0:"a",length:1};return a.call(t,0,1),!t[0]}(),l=n.extend({Map:n},{setup:function(t,e){this.length=0,r.cid(this,".map"),this._setupComputedProperties(),t=t||[];var i;r.isDeferred(t)?this.replace(t):(i=t.length&&h.addToMap(t,this),this.push.apply(this,r.makeArray(t||[]))),i&&i(),r.simpleExtend(this,e)},_triggerChange:function(t,e,i,s){n.prototype._triggerChange.apply(this,arguments);var h=+t;~(""+t).indexOf(".")||isNaN(h)||("add"===e?(r.batch.trigger(this,e,[i,h]),r.batch.trigger(this,"length",[this.length])):"remove"===e?(r.batch.trigger(this,e,[s,h]),r.batch.trigger(this,"length",[this.length])):r.batch.trigger(this,e,[i,h]))},___get:function(t){return t?this[t]&&this[t].isComputed&&r.isFunction(this.constructor.prototype[t])?this[t]():this[t]:this},__set:function(t,e,i){if(t=isNaN(+t)||t%1?t:+t,"number"==typeof t&&t>this.length-1){var n=new Array(t+1-this.length);return n[n.length-1]=e,this.push.apply(this,n),n}return r.Map.prototype.__set.call(this,""+t,e,i)},___set:function(t,e){this[t]=e,+t>=this.length&&(this.length=+t+1)},__remove:function(t,e){isNaN(+t)?(delete this[t],this._triggerChange(t,"remove",void 0,e)):this.splice(t,1)},_each:function(t){for(var e=this.___get(),i=0;i<e.length;i++)t(e[i],i)},serialize:function(){return h.serialize(this,"serialize",[])},splice:function(t,e){var i,n,h,l=r.makeArray(arguments),c=[],u=l.length>2;for(t=t||0,i=0,n=l.length-2;n>i;i++)h=i+2,l[h]=this.__type(l[h],h),c.push(l[h]),this[i+t]!==l[h]&&(u=!1);if(u&&this.length<=c.length)return c;void 0===e&&(e=l[1]=this.length-t);var p=a.apply(this,l);if(!o)for(i=this.length;i<p.length+this.length;i++)delete this[i];return r.batch.start(),e>0&&(s.removeMany(this,p),this._triggerChange(""+t,"remove",void 0,p)),l.length>2&&(s.addMany(this,c),this._triggerChange(""+t,"add",c,p)),r.batch.stop(),p},_getAttrs:function(){return h.serialize(this,"attr",[])},_setAttrs:function(t,e){t=r.makeArray(t),r.batch.start(),this._updateAttrs(t,e),r.batch.stop()},_updateAttrs:function(t,e){for(var i=Math.min(t.length,this.length),n=0;i>n;n++){var s=this[n],a=t[n];r.isMapLike(s)&&h.canMakeObserve(a)?s.attr(a,e):s!==a&&this._set(n+"",a)}t.length>this.length?this.push.apply(this,t.slice(this.length)):t.length<this.length&&e&&this.splice(t.length)}}),c=function(t){return t[0]&&r.isArray(t[0])?t[0]:r.makeArray(t)};r.each({push:"length",unshift:0},function(t,e){var i=[][e];l.prototype[e]=function(){for(var e,r,n=[],h=t?this.length:0,a=arguments.length;a--;)r=arguments[a],n[a]=s.set(this,a,this.__type(r,a));return e=i.apply(this,n),(!this.comparator||n.length)&&this._triggerChange(""+h,"add",n,void 0),e}}),r.each({pop:"length",shift:0},function(t,e){l.prototype[e]=function(){if(!this.length)return void 0;var i=c(arguments),r=t&&this.length?this.length-1:0,n=[][e].apply(this,i);return this._triggerChange(""+r,"remove",void 0,[n]),n&&n.unbind&&s.remove(this,n),n}}),r.extend(l.prototype,{indexOf:function(t,e){return r.__observe(this,"length"),r.inArray(t,this,e)},join:function(){return r.__observe(this,"length"),[].join.apply(this,arguments)},reverse:function(){var t=[].reverse.call(r.makeArray(this));return this.replace(t)},slice:function(){r.__observe(this,"length");var t=Array.prototype.slice.apply(this,arguments);return new this.constructor(t)},concat:function(){var t=[];return r.each(r.makeArray(arguments),function(e,i){t[i]=e instanceof r.List?e.serialize():e}),new this.constructor(Array.prototype.concat.apply(this.serialize(),t))},forEach:function(t,e){return r.each(this,t,e||this)},replace:function(t){if(r.isDeferred(t)){this._promise&&(this._promise.__isCurrentPromise=!1);var e=this._promise=t;e.__isCurrentPromise=!0;var i=this;t.then(function(t){e.__isCurrentPromise&&i.replace(t)})}else this.splice.apply(this,[0,this.length].concat(r.makeArray(t||[])));return this},filter:function(t,e){var i,r=new this.constructor,n=this;return this.each(function(s,h,a){i=t.call(e|n,s,h,n),i&&r.push(s)}),r},map:function(t,e){var i=new r.List,n=this;return this.each(function(r,s,h){var a=t.call(e|n,r,s,n);i.push(a)}),i}}),r.List=n.List=l,i.exports=e=r.List});
/*can@3.0.0-pre.0#view/scope/scope*/
define("can/view/scope/scope",function(t,e,n){function r(t,e,n){this._context=t,this._parent=e,this._meta=n||{},this.__cache={}}function s(t,e,n){t.helpers||t.partials||t.tags||(t={helpers:t}),r.call(this,t,e,n)}var o=t("can/util/util"),i=t("can/view/scope/compute_data");t("can/construct/construct"),t("can/compute/compute"),t("can/map/map"),t("can/list/list"),t("can/view/view"),o.simpleExtend(r,{read:o.compute.read,Refs:o.Map.extend({shortName:"ReferenceMap"},{}),refsScope:function(){return new o.view.Scope(new this.Refs)}}),o.simpleExtend(r.prototype,{add:function(t,e){return t!==this._context?new this.constructor(t,this,e):this},read:function(t,e){if("%root"===t)return{value:this.getRoot()};var n="./"===t.substr(0,2),r="../"===t.substr(0,3),s="."===t||"this"===t,i=".."===t,a=n||r||s||i;if(a&&this._meta.notContext)return this._parent.read(t,e);var u;if(n)u=!0,t=t.substr(2);else{if(r){for(var c=this._parent;c._meta.notContext;)c=c._parent;return c.read(t.substr(3)||".",e)}if(s)return{value:this._context};if(i)return{value:this._parent._context}}var f=o.compute.read.reads(t);return"*"===f[0].key.charAt(0)?this.getRefs()._read(f,e,!0):this._read(f,e,u)},_read:function(t,e,n){for(var r,s,i,a,u,c=this,f=[],p=-1,h=o.simpleExtend({foundObservable:function(e,n){s=e,i=t.slice(n)},earlyExit:function(t,e){e>p&&(u=s,a=i,p=e)}},e);c;){if(r=c._context,null!==r&&("object"==typeof r||"function"==typeof r)){var _=o.__trapObserves(),l=o.compute.read(r,t,h),v=_();if(void 0!==l.value)return o.__observes(v),{scope:c,rootObserve:s,value:l.value,reads:i};f.push.apply(f,v)}c=n?null:c._parent}return o.__observes(f),{setRoot:u,reads:a,value:void 0}},get:o.__notObserve(function(t,e){e=o.simpleExtend({isArgument:!0},e);var n=this.read(t,e);return n.value}),getScope:function(t){for(var e=this;e;){if(t(e))return e;e=e._parent}},getContext:function(t){var e=this.getScope(t);return e&&e._context},getRefs:function(){return this.getScope(function(t){return t._context instanceof r.Refs})},getRoot:function(){for(var t=this,e=this;t._parent;)e=t,t=t._parent;return t._context instanceof r.Refs&&(t=e),t._context},set:function(t,e,n){var r,s,i=t.lastIndexOf("."),a=t.lastIndexOf("/");if(a>i?(r=t.substring(0,a),s=t.substring(a+1,t.length)):-1!==i?(r=t.substring(0,i),s=t.substring(i+1,t.length)):(r=".",s=t),"*"===t.charAt(0))o.compute.set(this.getRefs()._context,t,e,n);else{var u=this.read(r,n).value;o.compute.set(u,s,e,n)}},attr:o.__notObserve(function(t,e,n){return n=o.simpleExtend({isArgument:!0},n),2===arguments.length?this.set(t,e,n):this.get(t,n)}),computeData:function(t,e){return i(this,t,e)},compute:function(t,e){return this.computeData(t,e).compute},cloneFromRef:function(){for(var t,e,n=[],s=this;s;){if(t=s._context,t instanceof r.Refs){e=s._parent;break}n.unshift(t),s=s._parent}return e?(o.each(n,function(t){e=e.add(t)}),e):this}}),o.view.Scope=r,s.prototype=new r,s.prototype.constructor=s,o.view.Options=s,n.exports=r});
/*can@3.0.0-pre.0#view/stache/utils*/
define("can/view/stache/utils",function(require,exports,module){var can=require("can/util/util");require("can/view/scope/scope");var Options=can.view.Options;module.exports={isArrayLike:function(e){return e&&e.splice&&"number"==typeof e.length},isObserveLike:function(e){return e instanceof can.Map||e&&!!e._get},emptyHandler:function(){},jsonParse:function(str){return"'"===str[0]?str.substr(1,str.length-2):"undefined"===str?void 0:can.global.JSON?JSON.parse(str):eval("("+str+")")},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(e){this.last().add(e)},subSectionDepth:function(){return this.stack.length-1}},convertToScopes:function(e,n,t,r,i,s){i&&(e.fn=this.makeRendererConvertScopes(i,n,t,r)),s&&(e.inverse=this.makeRendererConvertScopes(s,n,t,r))},makeRendererConvertScopes:function(e,n,t,r){var i=function(t,r,i){return e(t||n,r,i)};return can.__notObserve(function(e,s,o){void 0===e||e instanceof can.view.Scope||(e=n.add(e)),void 0===s||s instanceof Options||(s=t.add(s));var c=i(e,s||t,o||r);return c})},Options:Options}});
/*can@3.0.0-pre.0#view/node_lists/node_lists*/
define("can/view/node_lists/node_lists",function(e,n,r){var t=e("can/util/util");e("can/view/elements");var i=!0;try{document.createTextNode("")._=0}catch(a){i=!1}var s={},u={},l="stache_"+Math.random(),p=0,c=function(e,n){var r=n||u,t=d(e,r);return t?t:i||3!==e.nodeType?(++p,e[l]=(e.nodeName?"element_":"obj_")+p):(++p,r["text_"+p]=e,"text_"+p)},d=function(e,n){if(i||3!==e.nodeType)return e[l];for(var r in n)if(n[r]===e)return r},o=[].splice,f=[].push,h=function(e){for(var n=0,r=0,t=e.length;t>r;r++){var i=e[r];i.nodeType?n++:n+=h(i)}return n},v=function(e,n){for(var r={},t=0,i=e.length;i>t;t++){var a=m.first(e[t]);r[c(a,n)]=e[t]}return r},g=function(e,n,r){for(var t in n)r[t]||e.newDeepChildren.push(n[t])},m={id:c,update:function(e,n){var r=m.unregisterChildren(e);n=t.makeArray(n);var i=e.length;return o.apply(e,[0,i].concat(n)),e.replacements?(m.nestReplacements(e),e.deepChildren=e.newDeepChildren,e.newDeepChildren=[]):m.nestList(e),r},nestReplacements:function(e){for(var n=0,r={},t=v(e.replacements,r),i=e.replacements.length,a={};n<e.length&&i;){var s=e[n],u=d(s,r),l=t[u];l&&(e.splice(n,h(l),l),a[u]=!0,i--),n++}i&&g(e,t,a),e.replacements=[]},nestList:function(e){for(var n=0;n<e.length;){var r=e[n],t=s[c(r)];t?t!==e&&e.splice(n,h(t),t):s[c(r)]=e,n++}},last:function(e){var n=e[e.length-1];return n.nodeType?n:m.last(n)},first:function(e){var n=e[0];return n.nodeType?n:m.first(n)},flatten:function(e){for(var n=[],r=0;r<e.length;r++){var t=e[r];t.nodeType?n.push(t):n.push.apply(n,m.flatten(t))}return n},register:function(e,n,r,i){return t.cid(e),e.unregistered=n,e.parentList=r,e.nesting=r&&"undefined"!=typeof r.nesting?r.nesting+1:0,r?(e.deepChildren=[],e.newDeepChildren=[],e.replacements=[],r!==!0&&(i?r.replacements.push(e):r.newDeepChildren.push(e))):m.nestList(e),e},unregisterChildren:function(e){var n=[];return t.each(e,function(r){r.nodeType?(e.replacements||delete s[c(r)],n.push(r)):f.apply(n,m.unregister(r,!0))}),t.each(e.deepChildren,function(e){m.unregister(e,!0)}),n},unregister:function(e,n){var r=m.unregisterChildren(e,!0);if(e.unregistered){var t=e.unregistered;if(e.replacements=e.unregistered=null,!n){var i=e.parentList&&e.parentList.deepChildren;if(i){var a=i.indexOf(e);-1!==a&&i.splice(a,1)}}t()}return r},nodeMap:s};t.view.nodeLists=m,r.exports=m});
/*can@3.0.0-pre.0#view/parser/parser*/
define("can/view/parser/parser",function(t,e,a){function r(t,e){for(var a=0;a<t.length;a++)e(t[a],a)}function n(t){var e={},a=t.split(",");return r(a,function(t){e[t]=!0}),e}function o(t,e){for(var a=0,r=t.length;r>a;a++){var n=t[a];e[n.tokenType].apply(e,n.args)}return t}var i="A-Za-z0-9",l="-:_"+i,s="[^=>\\s\\/]+",u="\\s*=\\s*",c="\\{[^\\}\\{]\\}",f="\\{\\{[^\\}]\\}\\}\\}?",g="(?:"+u+"(?:(?:"+f+")|(?:"+c+")|(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?",p="\\{\\{[^\\}]*\\}\\}\\}?",d="\\{\\{([^\\}]*)\\}\\}\\}?",m=new RegExp("^<(["+i+"]["+l+"]*)((?:\\s*(?:(?:(?:"+s+")?"+g+")|(?:"+p+")+))*)\\s*(\\/?)>"),h=new RegExp("^<\\/(["+l+"]+)[^>]*>"),b=new RegExp(d,"g"),v=/<|\{\{/,S=/\s/,k=n("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),F=n("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),V=n("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),E=n("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),y=n("script"),x="start,end,close,attrStart,attrEnd,attrValue,chars,comment,special,done".split(","),N=function(){},q=function(t,e,a){function n(t,a,r,n){if(a=a.toLowerCase(),F[a]&&!V[a])for(var o=p.last();o&&V[o]&&!F[o];)i("",o),o=p.last();E[a]&&p.last()===a&&i("",a),n=k[a]||!!n,e.start(a,n),n||p.push(a),q.parseAttrs(r,e),e.end(a,n)}function i(t,a){var r;if(a)for(a=a.toLowerCase(),r=p.length-1;r>=0&&p[r]!==a;r--);else r=0;if(r>=0){for(var n=p.length-1;n>=r;n--)e.close&&e.close(p[n]);p.length=r}}function l(t,a){e.special&&e.special(a)}if("object"==typeof t)return o(t,e);var s=[];e=e||{},a&&r(x,function(t){var a=e[t]||N;e[t]=function(){a.apply(this,arguments)!==!1&&s.push({tokenType:t,args:[].slice.call(arguments,0)})}});var u,c,f,g=function(){S&&e.chars&&e.chars(S),S=""},p=[],d=t,S="";for(p.last=function(){return this[this.length-1]};t;){if(c=!0,p.last()&&y[p.last()])t=t.replace(new RegExp("([\\s\\S]*?)</"+p.last()+"[^>]*>"),function(t,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),e.chars&&e.chars(a),""}),i("",p.last());else if(0===t.indexOf("<!--")?(u=t.indexOf("-->"),u>=0&&(g(),e.comment&&e.comment(t.substring(4,u)),t=t.substring(u+3),c=!1)):0===t.indexOf("</")?(f=t.match(h),f&&(g(),t=t.substring(f[0].length),f[0].replace(h,i),c=!1)):0===t.indexOf("<")?(f=t.match(m),f&&(g(),t=t.substring(f[0].length),f[0].replace(m,n),c=!1)):0===t.indexOf("{{")&&(f=t.match(b),f&&(g(),t=t.substring(f[0].length),f[0].replace(b,l))),c){u=t.search(v),0===u&&t===d&&(S+=t.charAt(0),t=t.substr(1),u=t.search(v));var w=0>u?t:t.substring(0,u);t=0>u?"":t.substring(u),w&&(S+=w)}if(t===d)throw new Error("Parse Error: "+t);d=t}return g(),i(),e.done(),s},w=function(t,e,a,r){t.attrStart=r.substring("number"==typeof t.nameStart?t.nameStart:e,e),a.attrStart(t.attrStart),t.inName=!1},A=function(t,e,a,r){void 0!==t.valueStart&&t.valueStart<e?a.attrValue(r.substring(t.valueStart,e)):!t.inValue,a.attrEnd(t.attrStart),t.attrStart=void 0,t.valueStart=void 0,t.inValue=!1,t.inName=!1,t.lookingForEq=!1,t.inQuote=!1,t.lookingForName=!0};q.parseAttrs=function(t,e){if(t){for(var a,r=0,n={inDoubleCurly:!1,inName:!1,nameStart:void 0,inValue:!1,valueStart:void 0,inQuote:!1,attrStart:void 0,lookingForName:!0,lookingForValue:!1,lookingForEq:!1};r<t.length;){a=r;var o=t.charAt(r),i=t.charAt(r+1),l=t.charAt(r+2);if(r++,"{"===o&&"{"===i)n.inValue&&a>n.valueStart?e.attrValue(t.substring(n.valueStart,a)):n.inName&&n.nameStart<a?(w(n,a,e,t),A(n,a,e,t)):n.lookingForValue?n.inValue=!0:n.lookingForEq&&n.attrStart&&A(n,a,e,t),n.inDoubleCurly=!0,n.doubleCurlyStart=a+2,r++;else if(n.inDoubleCurly){if("}"===o&&"}"===i){var s="}"===l?1:0;e.special(t.substring(n.doubleCurlyStart,a)),n.inDoubleCurly=!1,n.inValue&&(n.valueStart=a+2+s),r+=1+s}}else n.inValue?n.inQuote?o===n.inQuote&&A(n,a,e,t):S.test(o)&&A(n,a,e,t):"="===o&&(n.lookingForEq||n.lookingForName||n.inName)?(n.attrStart||w(n,a,e,t),n.lookingForValue=!0,n.lookingForEq=!1,n.lookingForName=!1):n.inName?S.test(o)&&(w(n,a,e,t),n.lookingForEq=!0):n.lookingForName?S.test(o)||(n.attrStart&&A(n,a,e,t),n.nameStart=a,n.inName=!0):n.lookingForValue&&(S.test(o)||(n.lookingForValue=!1,n.inValue=!0,"'"===o||'"'===o?(n.inQuote=o,n.valueStart=a+1):n.valueStart=a))}n.inName?(w(n,a+1,e,t),A(n,a+1,e,t)):n.lookingForEq?A(n,a+1,e,t):n.inValue&&A(n,a+1,e,t)}},a.exports=q});
/*can@3.0.0-pre.0#util/array/diff*/
define("can/util/array/diff",function(e,n,t){var i=[].slice;t.exports=n=function(e,n){for(var t=0,r=0,l=e.length,u=n.length,s=[];l>t&&u>r;){var d=e[t],f=n[r];if(d!==f)if(u>r+1&&n[r+1]===d)s.push({index:r,deleteCount:0,insert:[n[r]]}),t++,r+=2;else{if(!(l>t+1&&e[t+1]===f))return s.push({index:r,deleteCount:l-t,insert:i.call(n,r)}),s;s.push({index:r,deleteCount:1,insert:[]}),t+=2,r++}else t++,r++}return r===u&&t===l?s:(s.push({index:r,deleteCount:l-t,insert:i.call(n,r)}),s)}});
/*can@3.0.0-pre.0#view/live/live*/
define("can/view/live/live",function(t,e,n){var r=t("can/util/util"),a=t("can/view/elements"),i=t("can/view/node_lists/node_lists"),o=t("can/view/parser/parser"),c=t("can/util/array/diff");t("can/view/view"),a=a||r.view.elements,i=i||r.view.NodeLists,o=o||r.view.parser;var l=function(t,e,n){var a=!1,i=function(){return a||(a=!0,n(o),r.unbind.call(t,"removed",i)),!0},o={teardownCheck:function(t){return t?!1:i()}};return r.bind.call(t,"removed",i),e(o),o},u=function(t){var e=t.childNodes;if("length"in e)return e;for(var n=t.firstChild,r=[];n;)r.push(n),n=n.nextSibling;return r},d=function(t,e,n){return l(t,function(){e.computeInstance.bind("change",n)},function(t){e.computeInstance.unbind("change",n),t.nodeList&&i.unregister(t.nodeList)})},s=function(t){var e,n={};return o.parseAttrs(t,{attrStart:function(t){n[t]="",e=t},attrValue:function(t){n[e]+=t},attrEnd:function(){}}),n},f=[].splice,p=function(t){return t&&t.nodeType},v=function(t){t.firstChild||t.appendChild(t.ownerDocument.createTextNode(""))},h=function(t){var e="string"==typeof t,n=r.frag(t);return e?r.view.hookup(n):n},b=function(t,e,n,a,o){var c=[];e&&(i.register(c,null,e,!0),c.parentList=e,c.expression="#each SUBEXPRESSION");var l=n.apply(a,o.concat([c])),d=h(l),s=r.makeArray(u(d));return e?(i.update(c,s),t.push(c)):t.push(i.register(s)),d},g=function(t,e,n){var a=t.splice(e+1,n),o=[];return r.each(a,function(t){var e=i.unregister(t);[].push.apply(o,e)}),o},C=function(t,e,n,r){if(e&&0===t.length){var i=[],o=b(i,r,e,t,[t]);a.after([n[0]],o),n.push(i[0])}},m={},k={registerChildMutationCallback:function(t,e){return e?void(m[t]=e):m[t]},callChildMutationCallback:function(t){var e=t&&m[t.nodeName.toLowerCase()];e&&e(t)},list:function(t,e,n,o,u,d,s){var p,v=d||[t],h=[],m=!1,w=!1,N=function(t,e,c){if(m){var l=x.ownerDocument.createDocumentFragment(),u=[],s=[];r.each(e,function(t,e){var a=r.compute(e+c),i=b(u,d,n,o,[t,a]);l.appendChild(i),s.push(a)});var p=c+1;if(!h.length){var C=g(v,0,v.length-1);r.remove(r.$(C))}if(v[p]){var w=i.first(v[p]);r.insertBefore(w.parentNode,l,w)}else a.after(1===p?[x]:[i.last(v[p-1])],l);f.apply(v,[p,0].concat(u)),f.apply(h,[c,0].concat(s));for(var N=c+s.length,y=h.length;y>N;N++)h[N](N);t.callChildMutationCallback!==!1&&k.callChildMutationCallback(x.parentNode)}},y=function(t,e,n){A({},{length:1},n,!0),N({},[e],n)},A=function(t,e,n,a,o){if(m&&(a||!S.teardownCheck(x.parentNode))){0>n&&(n=h.length+n);var c=g(v,n,e.length);h.splice(n,e.length);for(var l=n,u=h.length;u>l;l++)h[l](l);o?i.unregister(v):(C(p,s,v,d),r.remove(r.$(c)),t.callChildMutationCallback!==!1&&k.callChildMutationCallback(x.parentNode))}},M=function(t,e,n,a){if(m){n+=1,a+=1;var o,c=v[n],l=r.frag(i.flatten(v[a]));o=n>a?i.last(c).nextSibling:i.first(c);var u=v[0].parentNode;u.insertBefore(l,o);var d=v[a];[].splice.apply(v,[a,1]),[].splice.apply(v,[n,0,d]),n-=1,a-=1;var s=h[a];[].splice.apply(h,[a,1]),[].splice.apply(h,[n,0,s]);var f=Math.min(a,n),p=h.length;for(p;p>f;f++)h[f](f);t.callChildMutationCallback!==!1&&k.callChildMutationCallback(x.parentNode)}},x=t.ownerDocument.createTextNode(""),_=function(t){p&&p.unbind&&p.unbind("add",N).unbind("set",y).unbind("remove",A).unbind("move",M),A({callChildMutationCallback:!!t},{length:v.length-1},0,!0,t)},P=function(t,e,n){if(!w){if(m=!0,e&&n){p=e||[];var a=c(n,e);n.unbind&&n.unbind("add",N).unbind("set",y).unbind("remove",A).unbind("move",M);for(var i=0,o=a.length;o>i;i++){var l=a[i];l.deleteCount&&A({callChildMutationCallback:!1},{length:l.deleteCount},l.index,!0),l.insert.length&&N({callChildMutationCallback:!1},l.insert,l.index)}}else n&&_(),p=e||[],N({callChildMutationCallback:!1},p,0),C(p,s,v,d);k.callChildMutationCallback(x.parentNode),m=!1,p.bind&&p.bind("add",N).bind("set",y).bind("remove",A).bind("move",M),r.batch.afterPreviousEvents(function(){m=!0})}};u=a.getParentNode(t,u);var S=l(u,function(){r.isFunction(e)&&e.bind("change",P)},function(){r.isFunction(e)&&e.unbind("change",P),_(!0)});d?(a.replace(v,x),i.update(v,[x]),d.unregistered=function(){S.teardownCheck(),w=!0}):k.replace(v,x,S.teardownCheck),P({},r.isFunction(e)?e():e)},html:function(t,e,n,o){var c;n=a.getParentNode(t,n),c=d(n,e,function(t,e,n){var r=i.first(l).parentNode;r&&s(e);var a=i.first(l).parentNode;c.teardownCheck(a),k.callChildMutationCallback(a)});var l=o||[t],s=function(t){var e="function"==typeof t,o=p(t),c=r.frag(e?"":t),d=r.makeArray(l);v(c),o||e||(c=r.view.hookup(c,n)),d=i.update(l,u(c)),e&&t(c.firstChild),a.replace(d,c)};c.nodeList=l,o?o.unregistered=c.teardownCheck:i.register(l,c.teardownCheck),s(e())},replace:function(t,e,n){var o=t.slice(0),c=r.frag(e);return i.register(t,n),"string"==typeof e&&(c=r.view.hookup(c,t[0].parentNode)),i.update(t,u(c)),a.replace(o,c),t},text:function(t,e,n,o){var c=a.getParentNode(t,n),l=d(c,e,function(t,e,n){"unknown"!=typeof u.nodeValue&&(u.nodeValue=r.view.toStr(e)),l.teardownCheck(u.parentNode)}),u=t.ownerDocument.createTextNode(r.view.toStr(e()));o?(o.unregistered=l.teardownCheck,l.nodeList=o,i.update(o,[u]),a.replace([t],u)):l.nodeList=k.replace([t],u,l.teardownCheck)},setAttributes:function(t,e){var n=s(e);for(var a in n)r.attr.set(t,a,n[a])},attributes:function(t,e,n){var i={},o=function(e){var n,o=s(e);for(n in o){var c=o[n],l=i[n];c!==l&&r.attr.set(t,n,c),delete i[n]}for(n in i)a.removeAttr(t,n);i=o};d(t,e,function(t,e){o(e)}),arguments.length>=3?i=s(n):o(e())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(t,e,n){d(t,n,function(n,r){a.setAttr(t,e,c.render())});var i,o=r.$(t);i=r.data(o,"hooks"),i||r.data(o,"hooks",i={});var c,l=String(a.getAttr(t,e)),u=l.split(k.attributePlaceholder),s=[];s.push(u.shift(),u.join(k.attributePlaceholder)),i[e]?i[e].computes.push(n):i[e]={render:function(){var t=0,e=l?l.replace(k.attributeReplace,function(){return a.contentText(c.computes[t++]())}):a.contentText(c.computes[t++]());return e},computes:[n],batchNum:void 0},c=i[e],s.splice(1,0,n()),a.setAttr(t,e,s.join(""))},specialAttribute:function(t,e,n){d(t,n,function(n,r){a.setAttr(t,e,N(r))}),a.setAttr(t,e,N(n()))},simpleAttribute:function(t,e,n){d(t,n,function(n,r){a.setAttr(t,e,r)}),a.setAttr(t,e,n())}};k.attr=k.simpleAttribute,k.attrs=k.attributes,k.getAttributeParts=s;var w=/(\r|\n)+/g,N=function(t){var e=/^["'].*["']$/;return t=t.replace(a.attrReg,"").replace(w,""),e.test(t)?t.substr(1,t.length-2):t};r.view.live=k,n.exports=k});
/*can@3.0.0-pre.0#view/stache/mustache_helpers*/
define("can/view/stache/mustache_helpers",function(e,n,t){var r=e("can/util/util"),i=e("can/view/stache/utils"),o=e("can/view/live/live"),s=function(e){return i.isObserveLike(e)&&i.isArrayLike(e)&&e.attr("length")?e:r.isFunction(e)?e():e},u=function(e){var n={};for(var t in e){var r=e[t];r&&r.isComputed?n[t]=r():n[t]=r}return n},a=function(e){return e&&"function"==typeof e.fn&&"function"==typeof e.inverse},c={each:function(e,n){var t,u,a,c=s(e),f=[];if(c instanceof r.List)return function(t){var i=[t];i.expression="live.list",r.view.nodeLists.register(i,null,n.nodeList,!0),r.view.nodeLists.update(n.nodeList,[t]);var s=function(e,t,r){return n.fn(n.scope.add({"%index":t,"@index":t},{notContext:!0}).add(e),n.options,r)};o.list(t,e,s,n.context,t.parentNode,i,function(e,t){return n.inverse(n.scope.add(e),n.options,t)})};var l=c;if(l&&i.isArrayLike(l))for(a=0;a<l.length;a++)f.push(n.fn(n.scope.add({"%index":a,"@index":a},{notContext:!0}).add(l[a])));else if(i.isObserveLike(l))for(t=r.Map.keys(l),a=0;a<t.length;a++)u=t[a],f.push(n.fn(n.scope.add({"%key":u,"@key":u},{notContext:!0}).add(l[u])));else if(l instanceof Object)for(u in l)f.push(n.fn(n.scope.add({"%key":u,"@key":u},{notContext:!0}).add(l[u])));return f},"@index":function(e,n){n||(n=e,e=0);var t=n.scope.attr("@index");return""+((r.isFunction(t)?t():t)+e)},"if":function(e,n){var t;return t=r.isFunction(e)?r.compute.truthy(e)():!!s(e),t?n.fn(n.scope||this):n.inverse(n.scope||this)},is:function(){var e,n,t=arguments[arguments.length-1];if(arguments.length-2<=0)return t.inverse();var i=arguments,o=r.compute(function(){for(var t=0;t<i.length-1;t++){if(n=s(i[t]),n=r.isFunction(n)?n():n,t>0&&n!==e)return!1;e=n}return!0});return o()?t.fn():t.inverse()},eq:function(){return c.is.apply(this,arguments)},unless:function(e,n){return c["if"].apply(this,[e,r.extend({},n,{fn:n.inverse,inverse:n.fn})])},"with":function(e,n){var t=e;return e=s(e),e?n.fn(t):void 0},log:function(e,n){"undefined"!=typeof console&&console.log&&(n?console.log(e,n.context):console.log(e.context))},data:function(e){var n=2===arguments.length?this:arguments[1];return function(t){r.data(r.$(t),e,n||this.context)}},"switch":function(e,n){s(e);var t=!1,r=n.helpers.add({"case":function(n,r){return t||s(e)!==s(n)?void 0:(t=!0,r.fn(r.scope||this))},"default":function(e){return t?void 0:e.fn(e.scope||this)}});return n.fn(n.scope,r)},joinBase:function(e){var n=[].slice.call(arguments),t=n.pop(),i=r.map(n,function(e){var n=s(e);return r.isFunction(n)?n():n}).join(""),o=t.helpers.attr("helpers.module"),u=o?o.uri:void 0,a="."===i[0];if(a&&u)return r.joinURIs(u,i);var c=r.baseURL||"undefined"!=typeof System&&(System.renderingLoader&&System.renderingLoader.baseURL||System.baseURL)||location.pathname;return"/"!==i[0]&&"/"!==c[c.length-1]&&(c+="/"),r.joinURIs(c,i)},routeUrl:function(e,n){return e||(e={}),"function"==typeof e.fn&&"function"==typeof e.inverse&&(e=u(e.hash)),r.route.url(e,"boolean"==typeof n?n:void 0)},routeCurrent:function(e){var n=r.last(arguments),t=n&&a(n);return!n||!t||n.exprData instanceof r.expression.Call?r.route.current(a(e)?{}:e||{}):r.route.current(u(e.hash||{}))?e.fn():e.inverse()}};c.routeCurrent.callAsMethod=!0,c.eachOf=c.each;var f=function(e,n){c[e]=n};t.exports={registerHelper:f,registerSimpleHelper:function(e,n){f(e,r.view.simpleHelper(n))},getHelper:function(e,n){var t=n&&n.get("helpers."+e,{proxyMethods:!1});return t||(t=c[e]),t?{fn:t}:void 0}}});
/*can@3.0.0-pre.0#view/stache/expression*/
define("can/view/stache/expression",function(t,e,r){var o=t("can/util/util"),n=t("can/view/stache/utils"),s=t("can/view/stache/mustache_helpers");t("can/view/scope/scope");var a=function(t,e,r){var n=e.computeData(t,r);return o.compute.temporarilyBind(n.compute),n},p=function(t,e,r,o){var n=a(t,e,o);return n.compute.computeInstance.hasDependencies?{value:n.compute,computeData:n}:{value:n.initialValue,computeData:n}},i=function(t,e,r,o){var n=p(t,e,r,o);if(void 0===n.computeData.initialValue){"@"===t.charAt(0)&&"@index"!==t&&(t=t.substr(1));var a=s.getHelper(t,r);n.helper=a&&a.fn}return n},u=function(t){return t instanceof f||t instanceof h?t:new f(t)},h=function(t){this._value=t};h.prototype.value=function(){return this._value};var l=function(t,e){this.key=t,this.rootExpr=e};l.prototype.value=function(t,e){var r=i(this.key,t,e);return this.isHelper=r.helper&&!r.helper.callAsMethod,r.helper||r.value};var c=function(t,e){l.apply(this,arguments)};c.prototype.value=function(t,e){return p(this.key,t,e).value};var f=function(t,e){this.expr=t,this.modifiers=e||{},this.isCompute=!1};f.prototype.value=function(){return this.expr.value.apply(this.expr,arguments)};var d=function(){},v=function(t,e,r){this.methodExpr=t,this.argExprs=o.map(e,u);var n=this.hashExprs={};o.each(r,function(t,e){n[e]=u(t)})};v.prototype.args=function(t,e){for(var r=[],o=0,n=this.argExprs.length;n>o;o++){var s=this.argExprs[o],a=s.value.apply(s,arguments);r.push({call:a&&a.isComputed&&!s.modifiers.compute,value:a})}return function(){for(var t=[],e=0,o=r.length;o>e;e++)t[e]=r[e].call?r[e].value():r[e].value;return t}},v.prototype.hash=function(t,e){var r={};for(var o in this.hashExprs){var n=this.hashExprs[o],s=n.value.apply(n,arguments);r[o]={call:s&&s.isComputed&&!n.modifiers.compute,value:s}}return function(){var t={};for(var e in r)t[e]=r[e].call?r[e].value():r[e].value;return t}},v.prototype.value=function(t,e,r){var n=this.methodExpr.value(t,e);this.isHelper=this.methodExpr.isHelper;var s=!o.isEmptyObject(this.hashExprs),a=this.args(t,e),p=this.hash(t,e);return o.compute(function(t){var e=n;if(e&&e.isComputed&&(e=e()),"function"==typeof e){var o=a();return s&&o.push(p()),r&&o.push(r),arguments.length&&o.unshift(new P.SetIdentifier(t)),e.apply(null,o)}})};var y=function(){l.apply(this,arguments)};y.prototype.value=function(t,e){var r=i(this.key,t,e,{isArgument:!0,args:[t.attr("."),t]});return r.helper||r.value};var m=function(){l.apply(this,arguments)};m.prototype.value=function(t,e){return p(this.key,t,e,{callMethodsOnObservables:!0,isArgument:!0,args:[t.attr("."),t]}).value};var g=function(t,e,r){this.methodExpr=t,this.argExprs=e,this.hashExprs=r,this.mode=null};g.prototype.args=function(t,e){for(var r=[],o=0,n=this.argExprs.length;n>o;o++){var s=this.argExprs[o];r.push(s.value.apply(s,arguments))}return r},g.prototype.hash=function(t,e){var r={};for(var o in this.hashExprs){var n=this.hashExprs[o];r[o]=n.value.apply(n,arguments)}return r},g.prototype.helperAndValue=function(t,e){var r,n,p,i,u=this.argExprs.length||!o.isEmptyObject(this.hashExprs),l=this.methodExpr instanceof h?""+this.methodExpr._value:this.methodExpr.key;if(u){r=s.getHelper(l,e);var c=t.attr(".");r||"function"!=typeof c[l]||(r={fn:c[l]})}if(!r){i=this.args(t,e);var f=a(l,t,{isArgument:!1,args:i&&i.length?i:[t.attr("."),t]}),d=f.compute;p=f.initialValue,n=f.compute.computeInstance.hasDependencies?d:p,u||void 0!==p||(r=s.getHelper(l,e))}return{value:n,args:i,helper:r&&r.fn}},g.prototype.evaluator=function(t,e,r,s,a,p,i,u){var h={fn:function(){},inverse:function(){}},l=e.attr("."),c=this.args(e,r,a,p,i,u),f=this.hash(e,r,a,p,i,u);return n.convertToScopes(h,e,r,a,p,i),o.simpleExtend(h,{context:l,scope:e,contexts:e,hash:f,nodeList:a,exprData:this,helperOptions:r,helpers:r}),c.push(h),function(){return t.apply(l,c)}},g.prototype.value=function(t,e,r,n,s,a){var p=this.helperAndValue(t,e),i=p.helper;if(!i)return p.value;var u=this.evaluator(i,t,e,r,n,s,a),h=o.compute(u);return o.compute.temporarilyBind(h),h.computeInstance.hasDependencies?h:h()};var k=/[\w\.\\\-_@\/\&%]+/,x=/('.*?'|".*?"|=|[\w\.\\\-_@\/*%\$]+|[\(\)]|,|\~)/g,A=/^('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false|null|undefined)$/,E=function(t){return k.test(t)},H=/^[\.@]\w/,C=function(t){return E(t)&&H.test(t)},L=function(t){return t.children||(t.children=[]),t},T=function(){this.root={children:[],type:"Root"},this.current=this.root,this.stack=[this.root]};o.simpleExtend(T.prototype,{top:function(){return o.last(this.stack)},isRootTop:function(){return this.top()===this.root},popTo:function(t){this.popUntil(t),this.isRootTop()||this.stack.pop()},firstParent:function(t){for(var e=this.stack.length-2;e>0&&-1===o.inArray(this.stack[e].type,t);)e--;return this.stack[e]},popUntil:function(t){for(;-1===o.inArray(this.top().type,t)&&!this.isRootTop();)this.stack.pop();return this.top()},addTo:function(t,e){var r=this.popUntil(t);L(r).children.push(e)},addToAndPush:function(t,e){this.addTo(t,e),this.stack.push(e)},topLastChild:function(){return o.last(this.top().children)},replaceTopLastChild:function(t){var e=L(this.top()).children;return e.pop(),e.push(t),t},replaceTopLastChildAndPush:function(t){this.replaceTopLastChild(t),this.stack.push(t)},replaceTopAndPush:function(t){var e;return this.top()===this.root?e=L(this.top()).children:(this.stack.pop(),e=L(this.top()).children),e.pop(),e.push(t),this.stack.push(t),t}});var R=function(t){var e=t.lastIndexOf("./"),r=t.lastIndexOf(".");if(r>e)return t.substr(0,r)+"@"+t.substr(r+1);var o=-1===e?0:e+2,n=t.charAt(o);return"."===n||"@"===n?t.substr(0,o)+"@"+t.substr(o+1):t.substr(0,o)+"@"+t.substr(o)},w=function(t){return"Lookup"===t.type&&(t.key=R(t.key)),t},b=function(t){var e=t.top();if(e&&"Lookup"===e.type){var r=t.stack[t.stack.length-2];"Helper"!==r.type&&r&&t.replaceTopAndPush({type:"Helper",method:e})}},P={convertKeyToLookup:R,Literal:h,Lookup:l,ScopeLookup:c,Arg:f,Hash:d,Call:v,Helper:g,HelperLookup:y,HelperScopeLookup:m,SetIdentifier:function(t){this.value=t},tokenize:function(t){var e=[];return(o.trim(t)+" ").replace(x,function(t,r){e.push(r)}),e},lookupRules:{"default":function(t,e,r){var o=("Helper"!==e||t.root?"":"Helper")+(r?"Scope":"")+"Lookup";return P[o]},method:function(t,e,r){return c}},methodRules:{"default":function(t){return"Call"===t.type?v:g},call:function(t){return v}},parse:function(t,e){e=e||{};var r=this.ast(t);e.lookupRule||(e.lookupRule="default"),"string"==typeof e.lookupRule&&(e.lookupRule=P.lookupRules[e.lookupRule]),e.methodRule||(e.methodRule="default"),"string"==typeof e.methodRule&&(e.methodRule=P.methodRules[e.methodRule]);var o=this.hydrateAst(r,e,e.baseMethodType||"Helper");return o},hydrateAst:function(t,e,r,o){if("Lookup"===t.type)return new(e.lookupRule(t,r,o))(t.key,t.root&&this.hydrateAst(t.root,e,r));if("Literal"===t.type)return new h(t.value);if("Arg"===t.type)return new f(this.hydrateAst(t.children[0],e,r,o),{compute:!0});if("Hash"===t.type)throw new Error("");if("Call"===t.type||"Helper"===t.type){var n={},s=[],a=t.children;if(a)for(var p=0;p<a.length;p++){var i=a[p];"Hash"===i.type?n[i.prop]=this.hydrateAst(i.children[0],e,t.type,!0):s.push(this.hydrateAst(i,e,t.type,!0))}return new(e.methodRule(t))(this.hydrateAst(t.method,e,t.type),s,n)}},ast:function(t){var e=this.tokenize(t);return this.parseAst(e,{index:0})},parseAst:function(t,e){for(var r,s=new T;e.index<t.length;){var a=t[e.index],p=t[e.index+1];if(e.index++,A.test(a))b(s),s.addTo(["Helper","Call","Hash"],{type:"Literal",value:n.jsonParse(a)});else if("="===p){if(r=s.top(),r&&"Lookup"===r.type){var i=s.firstParent(["Call","Helper","Hash"]);("Call"===i.type||"Root"===i.type)&&(s.popUntil(["Call"]),r=s.top(),s.replaceTopAndPush({type:"Helper",method:"Root"===r.type?o.last(r.children):r}))}s.addToAndPush(["Helper","Call"],{type:"Hash",prop:a}),e.index++}else if(k.test(a)){var u=s.topLastChild();u&&"Call"===u.type&&C(a)?s.replaceTopLastChildAndPush({type:"Lookup",root:u,key:a}):(b(s),s.addToAndPush(["Helper","Call","Hash","Arg"],{type:"Lookup",key:a}))}else if("~"===a)b(s),s.addToAndPush(["Helper","Call","Hash"],{type:"Arg",key:a});else if("("===a){if(r=s.top(),"Lookup"!==r.type)throw new Error("Unable to understand expression "+t.join(""));s.replaceTopAndPush({type:"Call",method:w(r)})}else")"===a?s.popTo(["Call"]):","===a&&s.popUntil(["Call"])}return s.root.children[0]}};o.expression=P,r.exports=P});
/*can@3.0.0-pre.0#view/callbacks/callbacks*/
define("can/view/callbacks/callbacks",function(t,a,e){var r=t("can/util/util");t("can/view/view");var i=r.view.attr=function(t,a){if(!a){var e=n[t];if(!e)for(var r=0,i=l.length;i>r;r++){var o=l[r];if(o.match.test(t)){e=o.handler;break}}return e}"string"==typeof t?n[t]=a:l.push({match:t,handler:a})},n={},l=[],o=/[-\:]/,s=r.view.tag=function(t,a){if(!a){var e=c[t.toLowerCase()];return!e&&o.test(t)&&(e=function(){}),e}r.global.html5&&(r.global.html5.elements+=" "+t,r.global.html5.shivDocument()),c[t.toLowerCase()]=a},c={};r.view.callbacks={_tags:c,_attributes:n,_regExpAttributes:l,tag:s,attr:i,tagHandler:function(t,a,e){var i,n=e.options.get("tags."+a,{proxyMethods:!1}),l=n||c[a],o=e.scope;if(i=l?r.__notObserve(l)(t,e):o,i&&e.subtemplate){o!==i&&(o=o.add(i));var s=e.subtemplate(o,e.options),v="string"==typeof s?r.view.frag(s):s;r.appendChild(t,v)}}},e.exports=r.view.callbacks});
/*can@3.0.0-pre.0#util/string/deparam/deparam*/
define("can/util/string/deparam/deparam",function(t,n,e){var r=t("can/util/util");t("can/util/string/string");var a=/^\d+$/,i=/([^\[\]]+)|(\[\])/g,c=/([^?#]*)(#.*)?$/,o=function(t){return decodeURIComponent(t.replace(/\+/g," "))};r.extend(r,{deparam:function(t){var n,e,p={};return t&&c.test(t)&&(n=t.split("&"),r.each(n,function(t){var n=t.split("="),r=o(n.shift()),c=o(n.join("=")),u=p;if(r){n=r.match(i);for(var s=0,d=n.length-1;d>s;s++)u[n[s]]||(u[n[s]]=a.test(n[s+1])||"[]"===n[s+1]?[]:{}),u=u[n[s]];e=n.pop(),"[]"===e?u.push(c):u[e]=c}})),p}}),e.exports=r});
/*can@3.0.0-pre.0#route/route*/
define("can/route/route",function(t,e,r){var n=t("can/util/util");t("can/map/map"),t("can/list/list"),t("can/util/string/deparam/deparam");var a,u,o,i,c=/\:([\w\.]+)/g,l=/^(?:&[^=]+=[^&]*)+/,s=function(t){var e=[];return n.each(t,function(t,r){e.push(("className"===r?"class":r)+'="'+("href"===r?t:n.esc(t))+'"')}),e.join(" ")},d=function(t,e){var r=0,n=0,a={};for(var u in t.defaults)t.defaults[u]===e[u]&&(a[u]=1,r++);for(;n<t.names.length;n++){if(!e.hasOwnProperty(t.names[n]))return-1;a[t.names[n]]||r++}return r},f="undefined"!=typeof window?window.location:{},h=function(t){return(t+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},p=n.each,g=n.extend,m=function(t){return t&&"object"==typeof t?(t=t instanceof n.Map?t:n.isFunction(t.slice)?t.slice():n.extend({},t),n.each(t,function(e,r){t[r]=m(e)})):void 0!==t&&null!==t&&n.isFunction(t.toString)&&(t=t.toString()),t},_=function(t){return t.replace(/\\/g,"")},b=[],v=function(t,e,r,u){i=1,b.push(e),clearTimeout(a),a=setTimeout(function(){i=0;var t=n.route.data.serialize(),e=n.route.param(t,!0);n.route._call("setURL",e,b),n.batch.trigger(y,"__url",[e,o]),o=e,b=[]},10)},y=n.extend({},n.event),w=function(t){var e=t.attr;return t.attr=function(t,r){var n,a=void 0===this.define||void 0===this.define[t]||!!this.define[t].serialize;return n=a?m(Array.apply(null,arguments)):arguments,e.apply(this,n)},t};n.route=function(t,e){var r=n.route._call("root");r.lastIndexOf("/")===r.length-1&&0===t.indexOf("/")&&(t=t.substr(1)),e=e||{};for(var a,u,o=[],i="",l=c.lastIndex=0,s=n.route._call("querySeparator"),d=n.route._call("matchSlashes");a=c.exec(t);)o.push(a[1]),i+=_(t.substring(l,c.lastIndex-a[0].length)),u="\\"+(_(t.substr(c.lastIndex,1))||s+(d?"":"|/")),i+="([^"+u+"]"+(e[a[1]]?"*":"+")+")",l=c.lastIndex;return i+=t.substr(l).replace("\\",""),n.route.routes[t]={test:new RegExp("^"+i+"($|"+h(s)+")"),route:t,names:o,defaults:e,length:t.split("/").length},n.route},g(n.route,{param:function(t,e){var r,a,u=0,o=t.route,i=0;if(delete t.route,p(t,function(){i++}),p(n.route.routes,function(e,n){return a=d(e,t),a>u&&(r=e,u=a),a>=i?!1:void 0}),n.route.routes[o]&&d(n.route.routes[o],t)===u&&(r=n.route.routes[o]),r){var l,s=g({},t),f=r.route.replace(c,function(e,n){return delete s[n],t[n]===r.defaults[n]?"":encodeURIComponent(t[n])}).replace("\\","");return p(r.defaults,function(t,e){s[e]===t&&delete s[e]}),l=n.param(s),e&&n.route.attr("route",r.route),f+(l?n.route._call("querySeparator")+l:"")}return n.isEmptyObject(t)?"":n.route._call("querySeparator")+n.param(t)},deparam:function(t){var e=n.route._call("root");e.lastIndexOf("/")===e.length-1&&0===t.indexOf("/")&&(t=t.substr(1));var r={length:-1},a=n.route._call("querySeparator"),u=n.route._call("paramsMatcher");if(p(n.route.routes,function(e,n){e.test.test(t)&&e.length>r.length&&(r=e)}),r.length>-1){var o=t.match(r.test),i=o.shift(),c=t.substr(i.length-(o[o.length-1]===a?1:0)),l=c&&u.test(c)?n.deparam(c.slice(1)):{};return l=g(!0,{},r.defaults,l),p(o,function(t,e){t&&t!==a&&(l[r.names[e]]=decodeURIComponent(t))}),l.route=r.route,l}return t.charAt(0)!==a&&(t=a+t),u.test(t)?n.deparam(t.slice(1)):{}},data:w(new n.Map({})),map:function(t){var e;e=t.prototype instanceof n.Map?new t:t,n.route.data=w(e)},routes:{},ready:function(t){return t!==!0&&(n.route._setup(),(n.isBrowserWindow||n.isWebWorker)&&n.route.setState()),n.route},url:function(t,e){return e&&(n.__observe(y,"__url"),t=n.extend({},n.route.deparam(n.route._call("matchingPartOfURL")),t)),n.route._call("root")+n.route.param(t)},link:function(t,e,r,a){return"<a "+s(g({href:n.route.url(e,a)},r))+">"+t+"</a>"},current:function(t){return n.__observe(y,"__url"),this._call("matchingPartOfURL")===n.route.param(t)},bindings:{hashchange:{paramsMatcher:l,querySeparator:"&",matchSlashes:!1,bind:function(){n.bind.call(window,"hashchange",x)},unbind:function(){n.unbind.call(window,"hashchange",x)},matchingPartOfURL:function(){var t=n.route.location||f;return t.href.split(/#!?/)[1]||""},setURL:function(t){return f.hash!=="#"+t&&(f.hash="!"+t),t},root:"#!"}},defaultBinding:"hashchange",currentBinding:null,_setup:function(){n.route.currentBinding||(n.route._call("bind"),n.route.bind("change",v),n.route.currentBinding=n.route.defaultBinding)},_teardown:function(){n.route.currentBinding&&(n.route._call("unbind"),n.route.unbind("change",v),n.route.currentBinding=null),clearTimeout(a),i=0},_call:function(){var t=n.makeArray(arguments),e=t.shift(),r=n.route.bindings[n.route.currentBinding||n.route.defaultBinding],a=r[e];return a.apply?a.apply(r,t):a}}),p(["bind","unbind","on","off","delegate","undelegate","removeAttr","compute","_get","___get","each"],function(t){n.route[t]=function(){return n.route.data[t]?n.route.data[t].apply(n.route.data,arguments):void 0}}),n.route.attr=function(){return n.route.data.attr.apply(n.route.data,arguments)},n.route.batch=n.batch;var x=n.route.setState=function(){var t=n.route._call("matchingPartOfURL"),e=u;u=n.route.deparam(t),i&&t===o||(n.route.batch.start(),O(e,u,n.route.data),n.route.attr(u),n.route.batch.trigger(y,"__url",[t,o]),n.route.batch.stop())},O=function(t,e,r){for(var n in t)void 0===e[n]?r.removeAttr(n):"[object Object]"===Object.prototype.toString.call(t[n])&&O(t[n],e[n],r.attr(n))};r.exports=e=n.route});
/*can@3.0.0-pre.0#view/href/href*/
define("can/view/href/href",function(e,t,n){var c=e("can/util/util"),r=e("can/view/stache/expression");e("can/view/callbacks/callbacks"),e("can/view/scope/scope"),e("can/route/route");var a=function(e){return"{"===e[0]&&"}"===e[e.length-1]?e.substr(1,e.length-2):e};c.view.attr("can-href",function(e,t){var n=r.parse("tmp("+a(e.getAttribute("can-href"))+")",{baseMethodType:"Call"}),i=n.hash(t.scope,null),u=c.compute(function(){return c.route.url(i())});e.setAttribute("href",u());var o=function(t,n){e.setAttribute("href",n)};u.bind("change",o),c.bind.call(e,"removed",function(){u.unbind("change",o)})})});
/*can@3.0.0-pre.0#view/bindings/bindings*/
define("can/view/bindings/bindings",function(e,t,n){var a=e("can/util/util"),i=e("can/view/stache/expression"),r=e("can/view/callbacks/callbacks"),o=e("can/view/live/live");e("can/view/scope/scope"),e("can/view/href/href");var l={viewModel:function(e,t,n,i){i=i||{};var r,o={},l=[],c={},u={},d=a.extend({},i);a.each(a.makeArray(e.attributes),function(n){var a=v(n,e,{templateType:t.templateType,scope:t.scope,semaphore:o,getViewModel:function(){return r},attributeViewModelBindings:d,alreadyUpdatedChild:!0,nodeList:t.parentNodeList});a&&(a.onCompleteBinding&&(a.bindingInfo.parentToChild&&void 0!==a.value&&(i[C(a.bindingInfo.childName)]=a.value),l.push(a.onCompleteBinding)),c[n.name]=a.onTeardown)}),r=n(i);for(var s=0,p=l.length;p>s;s++)l[s]();return a.bind.call(e,"attributes",function(n){var a=n.attributeName,i=e.getAttribute(a);c[a]&&c[a]();var o=u[a]&&"attribute"===u[a].parent;if(null!==i||o){var l=v({name:a,value:i},e,{templateType:t.templateType,scope:t.scope,semaphore:{},getViewModel:function(){return r},attributeViewModelBindings:d,initializeValues:!0,nodeList:t.parentNodeList});l&&(l.onCompleteBinding&&l.onCompleteBinding(),u[a]=l.bindingInfo,c[a]=l.onTeardown)}}),function(){for(var e in c)c[e]()}},data:function(e,t){if(!a.data(a.$(e),"preventDataBindings")){var n,i=a.viewModel(e),r={},o=v({name:t.attributeName,value:e.getAttribute(t.attributeName),nodeList:t.nodeList},e,{templateType:t.templateType,scope:t.scope,semaphore:r,getViewModel:function(){return i}});o.onCompleteBinding&&o.onCompleteBinding(),n=o.onTeardown,a.one.call(e,"removed",function(){n()}),a.bind.call(e,"attributes",function(a){var o=a.attributeName,l=e.getAttribute(o);if(o===t.attributeName&&(n&&n(),null!==l)){var c=v({name:o,value:l},e,{templateType:t.templateType,scope:t.scope,semaphore:r,getViewModel:function(){return i},initializeValues:!0,nodeList:t.nodeList});c&&(c.onCompleteBinding&&c.onCompleteBinding(),n=c.onTeardown)}})}},reference:function(e,t){e.getAttribute(t.attributeName)&&console.warn("*reference attributes can only export the view model.");var n=a.camelize(t.attributeName.substr(1).toLowerCase()),i=a.viewModel(e),r=t.scope.getRefs();r._context.attr("*"+n,i)},event:function(e,t){var n=t.attributeName,r=0===n.indexOf("can-"),o=0===n.indexOf("can-")?n.substr("can-".length):b(n,"(",")"),l=r;"$"===o.charAt(0)&&(o=o.substr(1),l=!0);var c=function(r){var o=e.getAttribute(n);if(o){var l=a.$(e),c=a.viewModel(l[0]),u=i.parse(b(o),{lookupRule:"method",methodRule:"call"});if(!(u instanceof i.Call||u instanceof i.Helper)){var d=a.map([t.scope._context,l].concat(a.makeArray(arguments)),function(e){return new i.Literal(e)});u=new i.Call(u,d,{})}var s=t.scope.read(u.methodExpr.key,{isArgument:!0});if(!s.value)return s=t.scope.read(u.methodExpr.key,{isArgument:!0}),null;var p=t.scope.add({"@element":l,"@event":r,"@viewModel":c,"@scope":t.scope,"@context":t.scope._context,"%element":this,$element:l,"%event":r,"%viewModel":c,"%scope":t.scope,"%context":t.scope._context},{notContext:!0}),v=u.args(p,null)(),f=u.hash(p,null)();return a.isEmptyObject(f)||v.push(f),s.value.apply(s.parent,v)}};if(T[o]){var u=T[o](t,e,c);c=u.handler,o=u.event}a.bind.call(l?e:a.viewModel(e),o,c);var d=function(t){t.attributeName!==n||this.getAttribute(n)||(a.unbind.call(l?e:a.viewModel(e),o,c),a.unbind.call(e,"attributes",d))};a.bind.call(e,"attributes",d)},value:function(e,t){var n,i="$value",r=a.trim(b(e.getAttribute("can-value")));if("input"!==e.nodeName.toLowerCase()||"checkbox"!==e.type&&"radio"!==e.type)h(e)&&(i="$innerHTML");else{var o=c.scope(e,t.scope,r,{},!0);if("checkbox"===e.type){var l=a.attr.has(e,"can-true-value")?e.getAttribute("can-true-value"):!0,u=a.attr.has(e,"can-false-value")?e.getAttribute("can-false-value"):!1;n=a.compute(function(e){return arguments.length?void o(e?l:u):o()==l})}else"radio"===e.type&&(n=a.compute(function(t){return arguments.length?void(t&&o(e.value)):o()==e.value}));i="$checked",r="getterSetter",t.scope=new a.view.Scope({getterSetter:n})}var d=v({name:"{("+i+"})",value:r},e,{templateType:t.templateType,scope:t.scope,semaphore:{},initializeValues:!0,legacyBindings:!0,syncChildWithParent:!0});a.one.call(e,"removed",function(){d.onTeardown()})}};a.view.attr(/^\{[^\}]+\}$/,l.data),a.view.attr(/\*[\w\.\-_]+/,l.reference),a.view.attr(/^\([\$?\w\.]+\)$/,l.event),a.view.attr(/can-[\w\.]+/,l.event),a.view.attr("can-value",l.value);var c={scope:function(e,t,n,r,o,l){if(n){if(o){var c=i.parse(n,{baseMethodType:"Call"});return c.value(t,new a.view.Options({}))}return function(e){t.attr(C(n),e)}}return a.compute()},viewModel:function(e,t,n,i,r,o){var l=C(n);return r?a.compute(function(e){var t=i.getViewModel();return arguments.length?void t.attr(l,e):"."===n?t:a.compute.read(t,a.compute.read.reads(n),{}).value}):function(e){i.getViewModel().attr(l,e)}},attribute:function(e,t,n,i,r,o,l){l||(l="innerHTML"===n?["blur","change"]:"change"),a.isArray(l)||(l=[l]);var c,u,d,s="select"===e.nodeName.toLowerCase(),p="value"===n&&s&&e.multiple,v=!1,f=function(t){if(s&&!v&&(clearTimeout(d),d=setTimeout(function(){f(t)},1)),u=t,p){t&&"string"==typeof t?(t=t.split(";"),c=!0):t=t?a.makeArray(t):[];var r={};a.each(t,function(e){r[e]=!0}),a.each(e.childNodes,function(e){e.value&&(e.selected=!!r[e.value])})}else!i.legacyBindings&&s&&"selectedIndex"in e&&"value"===n?a.attr.setSelectValue(e,t):a.attr.setAttrOrProp(e,n,null==t?"":t);return t},m=function(){if(p){var t=[],i=e.childNodes;return a.each(i,function(e){e.selected&&e.value&&t.push(e.value)}),c?t.join(";"):t}return s&&"selectedIndex"in e&&-1===e.selectedIndex?void 0:a.attr.get(e,n)};s&&setTimeout(function(){v=!0},1);var h;return a.compute(m(),{on:function(t){if(a.each(l,function(n){a.bind.call(e,n,t)}),s){var n=function(e){o&&f(o()),t()};a.attr.MutationObserver?(h=new a.attr.MutationObserver(n),h.observe(e,{childList:!0,subtree:!0})):a.data(a.$(e),"canBindingCallback",{onMutation:n})}},off:function(t){a.each(l,function(n){a.unbind.call(e,n,t)}),s&&(a.attr.MutationObserver?h.disconnect():a.data(a.$(e),"canBindingCallback",null))},get:m,set:f})}},u={childToParent:function(e,t,n,i,r,o){var l="function"==typeof t,c=function(e,c){i[r]||(l?(t(c),o&&t()!==n()&&(i[r]=(i[r]||0)+1,n(t()),a.batch.after(function(){--i[r]}))):t instanceof a.Map&&t.attr(c,!0))};return n&&n.isComputed&&n.bind("change",c),c},parentToChild:function(e,t,n,i,r){var o=function(e,t){i[r]=(i[r]||0)+1,n(t),a.batch.after(function(){--i[r]})};return t&&t.isComputed&&t.bind("change",o),o}},d=function(e,t,n,i){var o=e.name,l=e.value||"",c=o.match(s);if(!c){var u=p.test(o),d=a.camelize(o);if(u||r.attr(o))return;var v="{"===l[0]&&"}"===a.last(l),f="legacy"===n?t[d]:!v,m=v?l.substr(1,l.length-2):l;return f?{bindingAttributeName:o,parent:"attribute",parentName:o,child:"viewModel",childName:d,parentToChild:!0,childToParent:!0}:{bindingAttributeName:o,parent:"scope",parentName:m,child:"viewModel",childName:d,parentToChild:!0,childToParent:!0}}var h=!!c[1],b=h||!!c[2],g=h||!b,w=c[3],C="$"===w.charAt(0);if(C){var T={parent:"scope",child:"attribute",childToParent:b,parentToChild:g,bindingAttributeName:o,childName:w.substr(1),parentName:l,initializeValues:!0};return"select"===i&&(T.stickyParentToChild=!0),T}return{parent:"scope",child:"viewModel",childToParent:b,parentToChild:g,bindingAttributeName:o,childName:a.camelize(w),parentName:l,initializeValues:!0}},s=/\{(\()?(\^)?([^\}\)]+)\)?\}/,p=/^(data-view-id|class|id|\[[\w\.-]+\]|#[\w\.-])$/i,v=function(e,t,n){var i=d(e,n.attributeViewModelBindings,n.templateType,t.nodeName.toLowerCase());if(i){i.alreadyUpdatedChild=n.alreadyUpdatedChild,n.initializeValues&&(i.initializeValues=!0);var r,o,l,s=c[i.parent](t,n.scope,i.parentName,n,i.parentToChild),p=c[i.child](t,n.scope,i.childName,n,i.childToParent,i.stickyParentToChild&&s);n.nodeList&&(s&&s.isComputed&&s.computeInstance.setPrimaryDepth(n.nodeList.nesting+1),p&&p.isComputed&&p.computeInstance.setPrimaryDepth(n.nodeList.nesting+1)),i.parentToChild&&(o=u.parentToChild(t,s,p,n.semaphore,i.bindingAttributeName));var v=function(){i.childToParent?r=u.childToParent(t,s,p,n.semaphore,i.bindingAttributeName,n.syncChildWithParent):i.stickyParentToChild&&p.bind("change",l=a.k),i.initializeValues&&f(i,p,s,o,r)},m=function(){w(s,o),w(p,r),w(p,l)};return"viewModel"===i.child?{value:g(s),onCompleteBinding:v,bindingInfo:i,onTeardown:m}:(v(),{bindingInfo:i,onTeardown:m})}},f=function(e,t,n,a,i){var r=!1;e.parentToChild&&!e.childToParent||(!e.parentToChild&&e.childToParent?r=!0:void 0===g(t)||void 0===g(n)&&(r=!0)),r?i({},g(t)):e.alreadyUpdatedChild||a({},g(n))};if(!a.attr.MutationObserver){var m=function(e){var t=a.data(a.$(e),"canBindingCallback");t&&t.onMutation(e)};o.registerChildMutationCallback("select",m),o.registerChildMutationCallback("optgroup",function(e){m(e.parentNode)})}var h=function(){var e={"":!0,"true":!0,"false":!1},t=function(t){if(t&&t.getAttribute){var n=t.getAttribute("contenteditable");return e[n]}};return function(e){var n=t(e);return"boolean"==typeof n?n:!!t(e.parentNode)}}(),b=function(e,t,n){return t=t||"{",n=n||"}",e[0]===t&&e[e.length-1]===n?e.substr(1,e.length-2):e},g=function(e){return e&&e.isComputed?e():e},w=function(e,t){e&&e.isComputed&&"function"==typeof t&&e.unbind("change",t)},C=function(e){return e.replace(/@/g,"")},T={enter:function(e,t,n){return{event:"keyup",handler:function(e){return 13===e.keyCode?n.call(this,e):void 0}}}};a.bindings={behaviors:l,getBindingInfo:d,special:T},n.exports=a.bindings});
/*can@3.0.0-pre.0#control/control*/
define("can/control/control",function(t,n,e){var o=t("can/util/util");t("can/construct/construct");var s,r=function(t,n,e){return o.bind.call(t,n,e),function(){o.unbind.call(t,n,e)}},i=o.isFunction,c=o.extend,u=o.each,l=[].slice,a=/\{([^\}]+)\}/g,h=o.getObject("$.event.special",[o])||{},f=function(t,n,e,s){return o.delegate.call(t,n,e,s),function(){o.undelegate.call(t,n,e,s)}},d=function(t,n,e,s){return s?f(t,o.trim(s),n,e):r(t,n,e)},p=o.Control=o.Construct({setup:function(){if(o.Construct.setup.apply(this,arguments),o.Control){var t,n=this;n.actions={};for(t in n.prototype)n._isAction(t)&&(n.actions[t]=n._action(t))}},_shifter:function(t,n){var e="string"==typeof n?t[n]:n;return i(e)||(e=t[e]),function(){return t.called=n,e.apply(t,[this.nodeName?o.$(this):this].concat(l.call(arguments,0)))}},_isAction:function(t){var n=this.prototype[t],e=typeof n;return"constructor"!==t&&("function"===e||"string"===e&&i(this.prototype[n]))&&!!(h[t]||m[t]||/[^\w]/.test(t))},_action:function(t,n){if(a.lastIndex=0,n||!a.test(t)){var e=n?o.sub(t,this._lookup(n)):t;if(!e)return null;var r=o.isArray(e),i=r?e[1]:e,c=i.split(/\s+/g),u=c.pop();return{processor:m[u]||s,parts:[i,c.join(" "),u],delegate:r?e[0]:void 0}}},_lookup:function(t){return[t,window]},processors:{},defaults:{}},{setup:function(t,n){var e,s=this.constructor,r=s.pluginName||s._fullName;return this.element=o.$(t),r&&"can_control"!==r&&this.element.addClass(r),e=o.data(this.element,"controls"),e||(e=[],o.data(this.element,"controls",e)),e.push(this),this.options=c({},s.defaults,n),this.on(),[this.element,this.options]},on:function(t,n,e,s){if(!t){this.off();var r,i,c=this.constructor,u=this._bindings,l=c.actions,a=this.element,h=o.Control._shifter(this,"destroy");for(r in l)l.hasOwnProperty(r)&&(i=l[r]||c._action(r,this.options,this),i&&(u.control[r]=i.processor(i.delegate||a,i.parts[2],i.parts[1],r,this)));return o.bind.call(a,"removed",h),u.user.push(function(t){o.unbind.call(t,"removed",h)}),u.user.length}return"string"==typeof t&&(s=e,e=n,n=t,t=this.element),void 0===s&&(s=e,e=n,n=null),"string"==typeof s&&(s=o.Control._shifter(this,s)),this._bindings.user.push(d(t,e,s,n)),this._bindings.user.length},off:function(){var t=this.element[0],n=this._bindings;n&&(u(n.user||[],function(n){n(t)}),u(n.control||{},function(n){n(t)})),this._bindings={user:[],control:{}}},destroy:function(){if(null!==this.element){var t,n=this.constructor,e=n.pluginName||n._fullName;this.off(),e&&"can_control"!==e&&this.element.removeClass(e),t=o.data(this.element,"controls"),t.splice(o.inArray(this,t),1),o.trigger(this,"destroyed"),this.element=null}}}),m=o.Control.processors;s=function(t,n,e,s,r){return d(t,n,o.Control._shifter(r,s),e)},u(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed","dragstart","dragenter","dragover","dragleave","drag","drop","dragend"],function(t){m[t]=s}),e.exports=n=p});
/*can@3.0.0-pre.0#observe/observe*/
define("can/observe/observe",function(t,e,a){var c=t("can/util/util");t("can/compute/compute"),t("can/map/map"),t("can/list/list"),c.Observe=c.Map,c.Observe.startBatch=c.batch.start,c.Observe.stopBatch=c.batch.stop,c.Observe.triggerBatch=c.batch.trigger,a.exports=e=c});
/*can@3.0.0-pre.0#view/target/target*/
define("can/view/target/target",function(e,t,n){function a(e,t,n,a){var c,r,l,o,s,p=n,h=typeof e,b=function(){return c||(c={path:n,callbacks:[]},t.push(c),p=[]),c};if("object"===h){if(e.tag){if(r=m&&e.namespace?a.createElementNS(e.namespace,e.tag):a.createElement(e.tag),e.attrs)for(var g in e.attrs){var v=e.attrs[g];"function"==typeof v?b().callbacks.push({callback:v}):f(r,g,v)}if(e.attributes)for(o=0,s=e.attributes.length;s>o;o++)b().callbacks.push({callback:e.attributes[o]});e.children&&e.children.length&&(l=c?c.paths=[]:t,r.appendChild(d(e.children,l,p,a)))}else if(e.comment&&(r=a.createComment(e.comment),e.callbacks))for(o=0,s=e.attributes.length;s>o;o++)b().callbacks.push({callback:e.callbacks[o]})}else"string"===h?r=a.createTextNode(e):"function"===h&&(i?(r=a.createTextNode(""),b().callbacks.push({callback:e})):(r=a.createComment("~"),b().callbacks.push({callback:function(){var t=a.createTextNode("");return u.replace([this],t),e.apply(t,arguments)}})));return r}function c(e,t,n){for(var a=t.path,r=t.callbacks,l=t.paths,o=e,u=a?a.length:0,d=l?l.length:0,i=0;u>i;i++)o=o.childNodes.item(a[i]);for(i=0;d>i;i++)c(o,l[i],n);n.push({element:o,callbacks:r})}function r(e,t){for(var n,a,c,r=e.length,l=0;r>l;l++){c=e[l],n=c.callbacks.length,a=c.element;for(var o=0;n>o;o++)c.callbacks[o].callback.apply(a,t)}}function l(e,t){var n=[],a=d(e,n,[],t||o.global.document);return{paths:n,clone:a,hydrate:function(){for(var e=p(this.clone),t=o.makeArray(arguments),a=[],l=0;l<n.length;l++)c(e,n[l],a);return r(a,t),e}}}var o=e("can/util/util"),u=e("can/view/elements"),d=function(e,t,n,c){for(var r=c.createDocumentFragment(),l=0,o=e.length;o>l;l++){var u=e[l];r.appendChild(a(u,t,n.concat(l),c))}return r},i="undefined"!=typeof document&&function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.appendChild(document.createTextNode("")),t.appendChild(document.createTextNode("")),e.appendChild(t);var n=e.cloneNode(!0);return 2===o.childNodes(n.firstChild).length}(),s="undefined"!=typeof document&&function(){var e=document.createElement("a");e.innerHTML="<xyz></xyz>";var t=e.cloneNode(!0);return"<xyz></xyz>"===t.innerHTML}(),m="undefined"!=typeof document&&!!document.createElementNS,f=o.attr.setAttribute,p=s?function(e){return e.cloneNode(!0)}:function(e){var t;if(1===e.nodeType?t=document.createElement(e.nodeName):3===e.nodeType?t=document.createTextNode(e.nodeValue):8===e.nodeType?t=document.createComment(e.nodeValue):11===e.nodeType&&(t=document.createDocumentFragment()),e.attributes){var n=o.makeArray(e.attributes);o.each(n,function(e){e&&e.specified&&f(t,e.nodeName,e.nodeValue)})}return e.childNodes&&o.each(e.childNodes,function(e){t.appendChild(p(e))}),t};l.keepsTextNodes=i,o.view.target=l,n.exports=l});
/*can@3.0.0-pre.0#view/stache/mustache_core*/
define("can/view/stache/mustache_core",function(e,n,t){var r=e("can/util/util"),i=e("can/view/stache/utils"),a=e("can/view/stache/expression"),s=e("can/view/live/live"),o=e("can/view/elements"),u=e("can/view/scope/scope"),c=e("can/view/node_lists/node_lists");s=s||r.view.live,o=o||r.view.elements,u=u||r.view.Scope,c=c||r.view.nodeLists;var l=/(?:(?:^|(\r?)\n)(\s*)(\{\{([^\}]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([^\}]*)\}\}\}?)/g,p=function(e,n,t,i){for(var a=(r.document||r.global.document).createDocumentFragment(),s=0,o=e.length;o>s;s++)f(a,t.fn(n?e.attr(""+s):e[s],i));return a},f=function(e,n){n&&e.appendChild("string"==typeof n?e.ownerDocument.createTextNode(n):n)},v=function(e,n,t,r){for(var i="",a=0,s=e.length;s>a;a++)i+=t.fn(n?e.attr(""+a):e[a],r);return i},d=function(){},h={expression:a,makeEvaluator:function(e,n,t,s,o,u,c,l){if("^"===s){var f=u;u=c,c=f}var d,h;if(o instanceof a.Call){if(h={fn:function(){},inverse:function(){},context:e.attr("."),scope:e,nodeList:t,exprData:o,helpersScope:n},i.convertToScopes(h,e,n,t,u,c),d=o.value(e,n,h),o.isHelper)return d}else{var m={isArgument:!0,args:[e.attr("."),e],asCompute:!0},g=o.helperAndValue(e,n,m,t,u,c,l),x=g.helper;if(d=g.value,x)return o.evaluator(x,e,n,m,t,u,c,l)}return s?"#"===s||"^"===s?(h={fn:function(){},inverse:function(){}},i.convertToScopes(h,e,n,t,u,c),function(){var t;if(t=r.isFunction(d)&&d.isComputed?d():d,"function"==typeof t)return t;if(i.isArrayLike(t)){var a=i.isObserveLike(t);return(a?t.attr("length"):t.length)?(l?v:p)(t,a,h,n):h.inverse(e,n)}return t?h.fn(t||e,n):h.inverse(e,n)}):void 0:d&&d.isComputed?d:function(){return""+(null!=d?d:"")}},makeLiveBindingPartialRenderer:function(e,n){return e=r.trim(e),function(t,i,a){var o=[this];o.expression=">"+e,c.register(o,null,a||!0,n.directlyNested);var u=r.compute(function(){var n,a=e,s=i.attr("partials."+a);if(s)n=function(){return s.render?s.render(t,i,o):s(t,i)};else{var u=t.read(a,{isArgument:!0}).value;if(null===u||!u&&"*"===a[0])return r.frag("");u&&(a=u),n=function(){return r.isFunction(a)?a(t,i,o):r.view.render(a,t,i,o)}}var c=r.__notObserve(n)();return r.frag(c)});u.computeInstance.setPrimaryDepth(o.nesting),s.html(this,u,this.parentNode,o)}},makeStringBranchRenderer:function(e,n){var t=h.expression.parse(n),r=e+n;return t instanceof a.Helper||t instanceof a.Call||(t=new a.Helper(t,[],{})),function(n,i,a,s){var o=n.__cache[r];(e||!o)&&(o=m(n,i,null,e,t,a,s,!0),e||(n.__cache[r]=o));var u=o();return null==u?"":""+u}},makeLiveBindingBranchRenderer:function(e,n,t){var i=h.expression.parse(n);return i instanceof a.Helper||i instanceof a.Call||(i=new a.Helper(i,[],{})),function(a,u,l,p,f){var v=[this];v.expression=n,c.register(v,null,l||!0,t.directlyNested);var h,g=m(a,u,v,e,i,p,f,t.tag),x=g.isComputed;h=x?g:r.compute(g,null,!1),h.computeInstance.setPrimaryDepth(v.nesting),h.computeInstance.bind("change",d);var w=h();"function"==typeof w?r.__notObserve(w)(this):x||h.computeInstance.hasDependencies?t.attr?s.simpleAttribute(this,t.attr,h):t.tag?s.attributes(this,h):t.text&&"object"!=typeof w?s.text(this,h,this.parentNode,v):s.html(this,h,this.parentNode,v):t.attr?r.attr.set(this,t.attr,w):t.tag?s.setAttributes(this,w):t.text&&"string"==typeof w?this.nodeValue=w:null!=w&&o.replace([this],r.frag(w,this.ownerDocument)),h.computeInstance.unbind("change",d)}},splitModeFromExpression:function(e,n){e=r.trim(e);var t=e.charAt(0);return"#/{&^>!".indexOf(t)>=0?e=r.trim(e.substr(1)):t=null,"{"===t&&n.node&&(t=null),{mode:t,expression:e}},cleanLineEndings:function(e){return e.replace(l,function(e,n,t,r,i,a,s,o,u,c){a=a||"",n=n||"",t=t||"";var l=g(i||u,{});return o||">{".indexOf(l.mode)>=0?e:"^#!/".indexOf(l.mode)>=0?r+(0!==c&&s.length?n+"\n":""):t+r+a+(t.length||0!==c?n+"\n":"")})},Options:i.Options},m=h.makeEvaluator,g=h.splitModeFromExpression;r.view.mustacheCore=h,t.exports=h});
/*can@3.0.0-pre.0#view/stache/html_section*/
define("can/view/stache/html_section",function(t,e,i){var n=t("can/util/util"),a=t("can/view/target/target"),s=t("can/view/stache/utils"),r=t("can/view/stache/mustache_core");t("can/view/scope/scope");var c="undefined"!=typeof document&&function(){var t=document.createElement("div");return function(e){return-1===e.indexOf("&")?e.replace(/\r\n/g,"\n"):(t.innerHTML=e,0===t.childNodes.length?"":t.childNodes.item(0).nodeValue)}}(),o=function(){this.stack=[new h]};n.extend(o.prototype,s.mixins),n.extend(o.prototype,{startSubSection:function(t){var e=new h(t);return this.stack.push(e),e},endSubSectionAndReturnRenderer:function(){if(this.last().isEmpty())return this.stack.pop(),null;var t=this.endSection();return n.proxy(t.compiled.hydrate,t.compiled)},startSection:function(t){var e=new h(t);this.last().add(e.targetCallback),this.stack.push(e)},endSection:function(){return this.last().compile(),this.stack.pop()},inverse:function(){this.last().inverse()},compile:function(){var t=this.stack.pop().compile();return function(e,i,a){return e instanceof n.view.Scope||(e=n.view.Scope.refsScope().add(e||{})),i instanceof r.Options||(i=new r.Options(i||{})),t.hydrate(e,i,a)}},push:function(t){this.last().push(t)},pop:function(){return this.last().pop()}});var h=function(t){this.data="targetData",this.targetData=[],this.targetStack=[];var e=this;this.targetCallback=function(i,a,s){t.call(this,i,a,s,n.proxy(e.compiled.hydrate,e.compiled),e.inverseCompiled&&n.proxy(e.inverseCompiled.hydrate,e.inverseCompiled))}};n.extend(h.prototype,{inverse:function(){this.inverseData=[],this.data="inverseData"},push:function(t){this.add(t),this.targetStack.push(t)},pop:function(){return this.targetStack.pop()},add:function(t){"string"==typeof t&&(t=c(t)),this.targetStack.length?n.last(this.targetStack).children.push(t):this[this.data].push(t)},compile:function(){return this.compiled=a(this.targetData,n.document||n.global.document),this.inverseData&&(this.inverseCompiled=a(this.inverseData,n.document||n.global.document),delete this.inverseData),this.targetStack=this.targetData=null,this.compiled},children:function(){return this.targetStack.length?n.last(this.targetStack).children:this[this.data]},isEmpty:function(){return!this.targetData.length}}),o.HTMLSection=h,i.exports=o});
/*can@3.0.0-pre.0#view/stache/live_attr*/
define("can/view/stache/live_attr",function(e,t,i){var a=e("can/util/util"),n=e("can/view/live/live"),c=e("can/view/elements"),r=e("can/view/callbacks/callbacks");n=n||a.view.live,c=c||a.view.elements,r=r||a.view.callbacks,i.exports={attributes:function(e,t,i,v){var l={},o=function(t){var o,s=n.getAttributeParts(t);for(o in s){var u=s[o],b=l[o];if(u!==b){a.attr.set(e,o,u);var f=r.attr(o);f&&f(e,{attributeName:o,scope:i,options:v})}delete l[o]}for(o in l)c.removeAttr(e,o);l=s},s=function(e,t){o(t)};t.bind("change",s),a.bind.call(e,"removed",function(){t.unbind("change",s)}),o(t())}}});
/*can@3.0.0-pre.0#view/stache/text_section*/
define("can/view/stache/text_section",function(t,e,n){var s=t("can/util/util"),i=t("can/view/live/live"),a=t("can/view/stache/utils"),c=t("can/view/stache/live_attr"),r=function(){this.stack=[new o]};s.extend(r.prototype,a.mixins),s.extend(r.prototype,{startSection:function(t){var e=new o;this.last().add({process:t,truthy:e}),this.stack.push(e)},endSection:function(){this.stack.pop()},inverse:function(){this.stack.pop();var t=new o;this.last().last().falsey=t,this.stack.push(t)},compile:function(t){var e=this.stack[0].compile();return function(n,a){var r=s.compute(function(){return e(n,a)},null,!1);r.computeInstance.bind("change",s.k);var u=r();r.computeInstance.hasDependencies?(t.textContentOnly?i.text(this,r):t.attr?i.simpleAttribute(this,t.attr,r):c.attributes(this,r,n,a),r.computeInstance.unbind("change",s.k)):t.textContentOnly?this.nodeValue=u:t.attr?s.attr.set(this,t.attr,u):i.setAttributes(this,u)}}});var u=function(t,e,n){return function(s,i){return t.call(this,s,i,e,n)}},o=function(){this.values=[]};s.extend(o.prototype,{add:function(t){this.values.push(t)},last:function(){return this.values[this.values.length-1]},compile:function(){for(var t=this.values,e=t.length,n=0;e>n;n++){var s=this.values[n];"object"==typeof s&&(t[n]=u(s.process,s.truthy&&s.truthy.compile(),s.falsey&&s.falsey.compile()))}return function(n,s){for(var i,a="",c=0;e>c;c++)i=t[c],a+="string"==typeof i?i:i.call(this,n,s);return a}}}),n.exports=r});
/*can@3.0.0-pre.0#view/import/import*/
define("can/view/import/import",function(e,t,a){var i=e("can/util/util");e("can/view/callbacks/callbacks"),i.view.tag("can-import",function(e,t){var a,o=i.$(e),d=e.getAttribute("from"),n=t.options.attr("helpers.module"),r=n?n.id:void 0;a=d?i["import"](d,r):i.Deferred().reject("No moduleName provided").promise();var s=t.scope.attr("%root");s&&i.isFunction(s.waitFor)&&s.waitFor(a),i.data(o,"viewModel",a),i.data(o,"scope",a);var c=t.scope.add(a),p=e.getAttribute("can-tag");if(p){var v=i.view.tag(p);i.data(o,"preventDataBindings",!0),v(e,i.extend(t,{scope:c})),i.data(o,"preventDataBindings",!1),i.data(o,"viewModel",a),i.data(o,"scope",a)}else{var l=t.subtemplate?t.subtemplate(c,t.options):document.createDocumentFragment(),u=i.view.nodeLists.register([],void 0,!0);i.one.call(e,"removed",function(){i.view.nodeLists.unregister(u)}),i.appendChild(e,l,i.document),i.view.nodeLists.update(u,i.childNodes(e))}})});
/*can@3.0.0-pre.0#view/stache/intermediate_and_imports*/
define("can/view/stache/intermediate_and_imports",function(t,n,a){var r=t("can/view/stache/mustache_core"),e=t("can/view/parser/parser");t("can/view/import/import"),a.exports=function(t){var n=r.cleanLineEndings(t),a=[],i=[],o={},c=!1,s=!1,p=!1,m=!1,u="",f="",d=e(n,{start:function(t,n){m=n,"can-import"===t?c=!0:c&&(c=!1)},attrStart:function(t){"from"===t?s=!0:("as"===t||"export-as"===t)&&(p=!0)},attrEnd:function(t){"from"===t?s=!1:("as"===t||"export-as"===t)&&(p=!1)},attrValue:function(t){s&&c?(a.push(t),m||i.push(t),f=t):p&&c&&(u=t)},end:function(t){"can-import"===t&&u&&(o[u]=f,u="")},close:function(t){"can-import"===t&&a.pop()}},!0);return{intermediate:d,imports:a,dynamicImports:i,ases:o,exports:o}}});
/*can@3.0.0-pre.0#view/stache/stache*/
define("can/view/stache/stache",function(t,e,n){function a(t){"string"==typeof t&&(t=r.cleanLineEndings(t));var e=new s,n={node:null,attr:null,sectionElementStack:[],text:!1,namespaceStack:[],textContentOnly:null},a=function(t,e,a){if(">"===e)t.add(r.makeLiveBindingPartialRenderer(a,d()));else if("/"===e)t.endSection(),t instanceof s&&n.sectionElementStack.pop();else if("else"===e)t.inverse();else{var i=t instanceof s?r.makeLiveBindingBranchRenderer:r.makeStringBranchRenderer;"{"===e||"&"===e?t.add(i(null,a,d())):"#"===e||"^"===e?(t.startSection(i(e,a,d())),t instanceof s&&n.sectionElementStack.push("section")):t.add(i(null,a,d({text:!0})))}},d=function(t){var e=n.sectionElementStack[n.sectionElementStack.length-1],a={tag:n.node&&n.node.tag,attr:n.attr&&n.attr.name,directlyNested:n.sectionElementStack.length?"section"===e||"custom"===e:!0,textContentOnly:!!n.textContentOnly};return t?i.simpleExtend(a,t):a},u=function(t,e){t.attributes||(t.attributes=[]),t.attributes.unshift(e)};return o(t,{start:function(t,e){var a=f[t];a&&!e&&n.namespaceStack.push(a),n.node={tag:t,children:[],namespace:a||i.last(n.namespaceStack)}},end:function(t,a){var i=l.tag(t);a?(e.add(n.node),i&&u(n.node,function(e,n,a){l.tagHandler(this,t,{scope:e,options:n,subtemplate:null,templateType:"stache",parentNodeList:a})})):(e.push(n.node),n.sectionElementStack.push(i?"custom":t),i?e.startSubSection():m[t]&&(n.textContentOnly=new c)),n.node=null},close:function(t){var a=f[t];a&&n.namespaceStack.pop();var i,o=l.tag(t);o&&(i=e.endSubSectionAndReturnRenderer()),m[t]&&(e.last().add(n.textContentOnly.compile(d())),n.textContentOnly=null);var s=e.pop();o&&u(s,function(e,n,a){l.tagHandler(this,t,{scope:e,options:n,subtemplate:i,templateType:"stache",parentNodeList:a})}),n.sectionElementStack.pop()},attrStart:function(t){n.node.section?n.node.section.add(t+'="'):n.attr={name:t,value:""}},attrEnd:function(t){if(n.node.section)n.node.section.add('" ');else{n.node.attrs||(n.node.attrs={}),n.node.attrs[n.attr.name]=n.attr.section?n.attr.section.compile(d()):n.attr.value;var e=l.attr(t);e&&(n.node.attributes||(n.node.attributes=[]),n.node.attributes.push(function(n,a,i){e(this,{attributeName:t,scope:n,options:a,nodeList:i})})),n.attr=null}},attrValue:function(t){var e=n.node.section||n.attr.section;e?e.add(t):n.attr.value+=t},chars:function(t){(n.textContentOnly||e).add(t)},special:function(t){var i=r.splitModeFromExpression(t,n),o=i.mode,s=i.expression;if("else"===s){var u;return u=n.attr&&n.attr.section?n.attr.section:n.node&&n.node.section?n.node.section:n.textContentOnly||e,void u.inverse()}if("!"!==o)if(n.node&&n.node.section)a(n.node.section,o,s),0===n.node.section.subSectionDepth()&&(n.node.attributes.push(n.node.section.compile(d())),delete n.node.section);else if(n.attr)n.attr.section||(n.attr.section=new c,n.attr.value&&n.attr.section.add(n.attr.value)),a(n.attr.section,o,s);else if(n.node)if(n.node.attributes||(n.node.attributes=[]),o){if("#"!==o&&"^"!==o)throw new Error(o+" is currently not supported within a tag.");n.node.section||(n.node.section=new c),a(n.node.section,o,s)}else n.node.attributes.push(r.makeLiveBindingBranchRenderer(null,s,d()));else a(n.textContentOnly||e,o,s)},comment:function(t){e.add({comment:t})},done:function(){}}),e.compile()}var i=t("can/util/util"),o=t("can/view/parser/parser"),s=t("can/view/stache/html_section"),c=t("can/view/stache/text_section"),r=t("can/view/stache/mustache_core"),d=t("can/view/stache/mustache_helpers"),u=t("can/view/stache/intermediate_and_imports"),l=t("can/view/callbacks/callbacks");t("can/view/bindings/bindings"),t("can/view/target/target"),t("can/view/elements"),o=o||i.view.parser,i.view.parser=o,l=l||i.view.callbacks;var p="http://www.w3.org/2000/svg",f={svg:p,g:p},m={style:!0,script:!0},h={"\n":"\\n","\r":"\\r","\u2028":"\\u2028","\u2029":"\\u2029"},v=function(t){return(""+t).replace(/["'\\\n\r\u2028\u2029]/g,function(t){return"'\"\\".indexOf(t)>=0?"\\"+t:h[t]})};i.view.register({suffix:"stache",contentType:"x-stache-template",fragRenderer:function(t,e){return a(e)},script:function(t,e){return'can.stache("'+v(e)+'")'}}),i.view.ext=".stache",i.extend(i.stache,d),i.extend(a,d),i.stache.safeString=a.safeString=function(t){return{toString:function(){return t}}},i.stache.async=function(t){var e=u(t),n=i.map(e.imports,function(t){return i["import"](t)});return i.when.apply(i,n).then(function(){return a(e.intermediate)})},n.exports=a});
/*can@3.0.0-pre.0#util/view_model/view_model*/
define("can/util/view_model/view_model",function(e,n,i){var t=e("can/util/util"),a=t.$;a.fn&&(a.fn.scope=a.fn.viewModel=function(){return t.viewModel.apply(t,[this].concat(t.makeArray(arguments)))})});
/*can@3.0.0-pre.0#component/component*/
define("can/component/component",function(e,t,o){var n=e("can/util/util"),i=e("can/view/elements"),s=e("can/view/bindings/bindings");e("can/view/callbacks/callbacks"),e("can/control/control"),e("can/observe/observe"),e("can/view/stache/stache"),e("can/util/view_model/view_model");var r=/\{([^\}]+)\}/g,p=n.Control.extend({_lookup:function(e){return[e.scope,e,window]},_action:function(e,t,o){var i,s;if(r.lastIndex=0,i=r.test(e),o||!i){if(i){s=n.compute(function(){var o,i=e.replace(r,function(e,i){var s;return"scope"===i||"viewModel"===i?(o=t.viewModel,""):(i=i.replace(/^(scope|^viewModel)\./,""),s=n.compute.read(t.viewModel,n.compute.read.reads(i),{readCompute:!1}).value,void 0===s&&(s=n.getObject(i)),"string"==typeof s?s:(o=s,""))}),s=i.split(/\s+/g),p=s.pop();return{processor:this.processors[p]||this.processors.click,parts:[i,s.join(" "),p],delegate:o||void 0}},this);var p=function(t,n){o._bindings.control[e](o.element),o._bindings.control[e]=n.processor(n.delegate||o.element,n.parts[2],n.parts[1],e,o)};return s.bind("change",p),o._bindings.readyComputes[e]={compute:s,handler:p},s()}return n.Control._action.apply(this,arguments)}}},{setup:function(e,t){return this.scope=t.scope,this.viewModel=t.viewModel,n.Control.prototype.setup.call(this,e,t)},off:function(){this._bindings&&n.each(this._bindings.readyComputes||{},function(e){e.compute.unbind("change",e.handler)}),n.Control.prototype.off.apply(this,arguments),this._bindings.readyComputes={}},destroy:function(){n.Control.prototype.destroy.apply(this,arguments),"function"==typeof this.options.destroy&&this.options.destroy.apply(this,arguments)}}),a=n.Component=n.Construct.extend({setup:function(){if(n.Construct.setup.apply(this,arguments),n.Component){var e=this,t=this.prototype.scope||this.prototype.viewModel;if(this.Control=p.extend(this.prototype.events),t&&("object"!=typeof t||t instanceof n.Map)?t.prototype instanceof n.Map&&(this.Map=t):this.Map=n.Map.extend(t||{}),this.attributeScopeMappings={},n.each(this.Map?this.Map.defaults:{},function(t,o){"@"===t&&(e.attributeScopeMappings[o]=o)}),this.prototype.template)if("function"==typeof this.prototype.template){var o=this.prototype.template;this.renderer=function(){return n.view.frag(o.apply(null,arguments))}}else this.renderer=n.view.stache(this.prototype.template);n.view.tag(this.prototype.tag,function(t,o){new e(t,o)})}}},{setup:function(e,t){var o,r,p={},a=this,c=("undefined"==typeof this.leakScope?!1:!this.leakScope)&&!!this.template,l=[],d=function(){for(var e=0,t=l.length;t>e;e++)l[e]()},u=n.$(e),h=!n.data(u,"preventDataBindings");n.each(this.constructor.attributeScopeMappings,function(t,o){p[o]=e.getAttribute(n.hyphenate(t))}),h&&l.push(s.behaviors.viewModel(e,t,function(i){i["%root"]=t.scope.attr("%root");var s=a.scope||a.viewModel;if(a.constructor.Map)o=new a.constructor.Map(i);else if(s instanceof n.Map)o=s;else if(n.isFunction(s)){var r=s.call(a,i,t.scope,e);o=r instanceof n.Map?r:r.prototype instanceof n.Map?new r(i):new(n.Map.extend(r))(i)}var p=o.serialize;return o.serialize=function(){var e=p.apply(this,arguments);return delete e["%root"],e},o},p)),this.scope=this.viewModel=o,n.data(u,"scope",this.viewModel),n.data(u,"viewModel",this.viewModel),n.data(u,"preventDataBindings",!0);var v;v=c?n.view.Scope.refsScope().add(this.viewModel,{viewModel:!0}):(this.constructor.renderer?t.scope.add(new n.view.Scope.Refs):t.scope).add(this.viewModel,{viewModel:!0});var f={helpers:{}},m=function(e,t){f.helpers[e]=function(){return t.apply(o,arguments)}};n.each(this.helpers||{},function(e,t){n.isFunction(e)&&m(t,e)}),n.each(this.simpleHelpers||{},function(e,t){m(t,n.view.simpleHelper(e))}),this._control=new this.constructor.Control(e,{scope:this.viewModel,viewModel:this.viewModel,destroy:d});var w=n.view.nodeLists.register([],void 0,t.parentNodeList||!0,!1);w.expression="<"+this.tag+">",l.push(function(){n.view.nodeLists.unregister(w)}),this.constructor.renderer?(f.tags||(f.tags={}),f.tags.content=function g(e,o){var s=t.subtemplate||o.subtemplate,r=s===t.subtemplate;if(s){delete f.tags.content;var p;if(p=r?c?t:{scope:o.scope.cloneFromRef(),options:o.options}:o,o.parentNodeList){var a=s(p.scope,p.options,o.parentNodeList);i.replace([e],a)}else n.view.live.replace([e],s(p.scope,p.options));f.tags.content=g}},r=this.constructor.renderer(v,t.options.add(f),w)):r="legacy"===t.templateType?n.view.frag(t.subtemplate?t.subtemplate(v,t.options.add(f)):""):t.subtemplate?t.subtemplate(v,t.options.add(f),w):document.createDocumentFragment(),n.appendChild(e,r,n.document),n.view.nodeLists.update(w,n.childNodes(e))}});n.view.tag("content",function(e,t){return t.scope});var c=n.$;c.fn&&(c.fn.scope=c.fn.viewModel=function(){return n.viewModel.apply(n,[this].concat(n.makeArray(arguments)))}),o.exports=a});
/*can@3.0.0-pre.0#model/model*/
define("can/model/model",function(t,e,r){var i=t("can/util/util");t("can/map/map"),t("can/list/list");var n=function(t,e,r){var n=new i.Deferred;return t.then(function(){var t=i.makeArray(arguments),s=!0;try{t[0]=r.apply(e,t)}catch(o){s=!1,n.rejectWith(n,[o].concat(t))}s&&n.resolveWith(n,t)},function(){n.rejectWith(this,arguments)}),"function"==typeof t.abort&&(n.abort=function(){return t.abort()}),n},s=0,o=function(t){return i.__observe(t,t.constructor.id),t.___get(t.constructor.id)},a=function(t,e,r,n,s,o){var a={};if("string"==typeof t){var u=t.split(/\s+/);a.url=u.pop(),u.length&&(a.type=u.pop())}else i.extend(a,t);return a.data="object"!=typeof e||i.isArray(e)?e:i.extend(a.data||{},e),a.url=i.sub(a.url,a.data,!0),i.ajax(i.extend({type:r||"post",dataType:n||"json",success:s,error:o},a))},u=function(t,e,r,s,a){var u;i.isArray(t)?(u=t[1],t=t[0]):u=t.serialize(),u=[u];var c,l,d=t.constructor;return("update"===e||"destroy"===e)&&u.unshift(o(t)),l=d[e].apply(d,u),c=n(l,t,function(r){return t[a||e+"d"](r,l),t}),l.abort&&(c.abort=function(){l.abort()}),c.then(r,s),c},c={models:function(t,e,r){if(i.Model._reqs++,t){if(t instanceof this.List)return t;var n=this,s=[],o=n.List||v,a=e instanceof i.List?e:new o,u=t instanceof v,c=u?t.serialize():t;if(c=n.parseModels(c,r),c.data&&(t=c,c=c.data),"undefined"==typeof c||!i.isArray(c))throw new Error("Could not get any raw data while converting using .models");return a.length&&a.splice(0),i.each(c,function(t){s.push(n.model(t,r))}),a.push.apply(a,s),i.isArray(t)||i.each(t,function(t,e){"data"!==e&&a.attr(e,t)}),setTimeout(i.proxy(this._clean,this),1),a}},model:function(t,e,r){if(t){t="function"==typeof t.serialize?t.serialize():this.parseModel(t,r);var n=t[this.id];(n||0===n)&&this.store[n]&&(e=this.store[n]);var s=e&&i.isFunction(e.attr)?e.attr(t,this.removeAttr||!1):new this(t);return s}}},l={parseModel:function(t){return function(e){return t?i.getObject(t,e):e}},parseModels:function(t){return function(e){if(i.isArray(e))return e;t=t||"data";var r=i.getObject(t,e);if(!i.isArray(r))throw new Error("Could not get any raw data while converting using .models");return r}}},d={create:{url:"_shortName",type:"post"},update:{data:function(t,e){e=e||{};var r=this.id;return e[r]&&e[r]!==t&&(e["new"+i.capitalize(t)]=e[r],delete e[r]),e[r]=t,e},type:"put"},destroy:{type:"delete",data:function(t,e){return e=e||{},e.id=e[this.id]=t,e}},findAll:{url:"_shortName"},findOne:{}},p=function(t,e){return function(r){return r=t.data?t.data.apply(this,arguments):r,a(e||this[t.url||"_url"],r,t.type||"get")}},h=function(t,e){if(t.resource){var r=t.resource.replace(/\/+$/,"");return"findAll"===e||"create"===e?r:r+"/{"+t.id+"}"}};i.Model=i.Map.extend({fullName:"can.Model",_reqs:0,setup:function(t,e,r,n){if("string"!=typeof e&&(n=r,r=e),n||(n=r),this.store={},i.Map.setup.apply(this,arguments),i.Model){r&&r.List?(this.List=r.List,this.List.Map=this):this.List=t.List.extend({Map:this},{});var o=this,a=i.proxy(this._clean,o);i.each(d,function(e,n){if(r&&r[n]&&("string"==typeof r[n]||"object"==typeof r[n])?o[n]=p(e,r[n]):r&&r.resource&&!i.isFunction(r[n])&&(o[n]=p(e,h(o,n))),o["make"+i.capitalize(n)]){var s=o["make"+i.capitalize(n)](o[n]);i.Construct._overwrite(o,t,n,function(){i.Model._reqs++;var t=s.apply(this,arguments),e=t.then(a,a);return e.abort=t.abort,e})}});var u={};i.each(c,function(e,n){var s="parse"+i.capitalize(n),a=r&&r[n]||o[n];"string"==typeof a?(o[s]=a,i.Construct._overwrite(o,t,n,e)):r&&r[n]&&(u[s]=!0)}),i.each(l,function(e,n){var s=r&&r[n]||o[n];if("string"==typeof s)i.Construct._overwrite(o,t,n,e(s));else if(!(r&&i.isFunction(r[n])||o[n])){var a=e();a.useModelConverter=u[n],i.Construct._overwrite(o,t,n,a)}}),"can.Model"!==o.fullName&&o.fullName||(o.fullName="Model"+ ++s),i.Model._reqs=0,this._url=this._shortName+"/{"+this.id+"}"}},_ajax:p,_makeRequest:u,_clean:function(){if(i.Model._reqs--,!i.Model._reqs)for(var t in this.store)this.store[t]._bindings||delete this.store[t];return arguments[0]},models:c.models,model:c.model},{setup:function(t){var e=t&&t[this.constructor.id];i.Model._reqs&&null!=e&&(this.constructor.store[e]=this),i.Map.prototype.setup.apply(this,arguments)},isNew:function(){var t=o(this);return!(t||0===t)},save:function(t,e){return u(this,this.isNew()?"create":"update",t,e)},destroy:function(t,e){if(this.isNew()){var r=this,n=i.Deferred();return n.then(t,e),n.done(function(t){r.destroyed(t)}).resolve(r)}return u(this,"destroy",t,e,"destroyed")},_bindsetup:function(){var t=this.___get(this.constructor.id);return null!=t&&(this.constructor.store[t]=this),i.Map.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){return delete this.constructor.store[o(this)],i.Map.prototype._bindteardown.apply(this,arguments)},___set:function(t,e){i.Map.prototype.___set.call(this,t,e),t===this.constructor.id&&this._bindings&&(this.constructor.store[o(this)]=this)}});var f=function(t){return function(e,r,i){return this[t](e,null,i)}},y=function(t){return this.parseModel.useModelConverter?this.model(t):this.parseModel(t)},m={makeFindAll:f("models"),makeFindOne:f("model"),makeCreate:y,makeUpdate:y,makeDestroy:y};i.each(m,function(t,e){i.Model[e]=function(e){return function(){var r=i.makeArray(arguments),s=i.isFunction(r[1])?r.splice(0,1):r.splice(0,2),o=n(e.apply(this,s),this,t);return o.then(r[0],r[1]),o}}}),i.each(["created","updated","destroyed"],function(t){i.Model.prototype[t]=function(e){var r=this,n=r.constructor;e&&"object"==typeof e&&this.attr(i.isFunction(e.attr)?e.attr():e),i.dispatch.call(this,{type:t,target:this},[]),i.dispatch.call(n,t,[this])}});var v=i.Model.List=i.List.extend({_bubbleRule:function(t,e){var r=i.List._bubbleRule(t,e);return r.push("destroyed"),r}},{setup:function(t){i.isPlainObject(t)&&!i.isArray(t)?(i.List.prototype.setup.apply(this),this.replace(i.isDeferred(t)?t:this.constructor.Map.findAll(t))):i.List.prototype.setup.apply(this,arguments),this.bind("destroyed",i.proxy(this._destroyed,this))},_destroyed:function(t,e){if(/\w+/.test(e))for(var r;(r=this.indexOf(t.target))>-1;)this.splice(r,1)}});r.exports=e=i.Model});
/*[global-shim-end]*/
!function(){window._define=window.define,window.define=window.define.orig}();