!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.html5tooltips=e()}(this,function(){"use strict";function t(t,e){function n(t,e){return Array.prototype.slice.call(t,e)}function i(t){var e=n(t).map(function(t){return typeof t}),i={};if("object"===e[0])i=t[0];else if("string"===e[0]){var o=t[0].split(" ");for(var r in o)i[o[r]]=t[1]}else"function"===e[0]&&(i={"":t[0]});return i}function o(t,e){for(var n,i=0;i<t.length;i++){for(var r=0;r<t[i].attributes.length;r++)n=t[i].attributes.item(r).name.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()}),e[n]=e[n]||[],e[n].push(t[i]);o(t[i].children,e)}}function r(t){clearTimeout(c[t]),c[t]=setTimeout(function(){for(var e in a[t])a[t][e](l.model[t]);if(a[""])for(var e in a[""])a[""][e]()})}var l=this,s={},a={},c={};if(l.anchors=[],l.elements=[],l.model={},l.publ=t||{},l.destroy=function(){"undefined"!=typeof window&&(window.removeEventListener("resize",moveTooltip),window.removeEventListener("scroll",moveTooltip)),l.unmount()},l.dispatch=function(t){var e=n(arguments,1);setTimeout(function(){for(var n in s[t])s[t][n].apply(l.publ,e)})},l.onModelUpdate=function(){var t=i(arguments);for(var e in t)l.model[e]=l.model[e]||null,a[e]=a[e]||[],a[e].push(t[e]),r(e)},l.mount=function(t){t=t||document.body;try{for(var e,n=0;e=l.elements[n++];)t.appendChild(e)}catch(t){throw"Could not mount component: "+t.message}},l.set=function(){var t=i(arguments);for(var e in t)l.model[e]=t[e],r(e)},l.unmount=function(){for(var t,e=0;t=l.elements[e++];)t.parentNode&&t.parentNode.removeChild(t)},Object.defineProperty(l,"element",{configurable:!0,enumerable:!0,get:function(){return l.elements[0]},set:function(t){l.elements[0]=t}}),["element","elements","model","set"].forEach(function(t){Object.defineProperty(l.publ,t,{configurable:!0,enumerable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})}),l.publ.destroy=function(){l.destroy()},l.publ.mount=function(t){l.mount(t)},l.publ.on=function(){var t=i(arguments);for(var e in t)s[e]=s[e]||[],s[e].push(t[e])},l.publ.unmount=function(){l.unmount()},e&&document){var u=document.createElement("div");u.innerHTML=e,l.elements=n(u.children),o(l.elements,l.anchors)}}function e(){function e(t,e){g.disableAnimation?e():(t.getBoundingClientRect(),t.classList.add("animating"),e&&e(),setTimeout(function(){t.classList.remove("animating")},g.animateDuration))}function n(t,e,n,i){g.disableAnimation?i&&i():(t.classList.add(e),t.getBoundingClientRect(),t.classList.add("animating"),t.classList.remove(e),t.classList.add(n),setTimeout(function(){t.classList.remove("animating"),t.classList.remove(n),i&&i()},g.animateDuration))}function i(){"collapse"!==p.style.visibility&&(p.style.visibility="collapse"),p.style.left="-9999px",p.style.top="-9999px","none"!==f.style.display&&(f.style.display="none",f.style.visibility="collapse",f.style.height="auto")}function o(t){return b=!0,n(m,g.animateFunction+"-to",g.animateFunction+"-from",function(){b&&(i(),t&&t())}),this}function r(){var t,e;if(a.model.target&&"visible"===p.style.visibility){p.style.width="auto",e=p.getBoundingClientRect();var n=parseInt(g.maxWidth);switch(n&&(p.style.width=e.width>n?n+"px":"auto"),t=a.model.target.getBoundingClientRect(),e=p.getBoundingClientRect(),g.stickTo){case u.stickTo.bottom:p.style.left=t.left+parseInt((t.width-e.width)/2)+"px",p.style.top=t.top+t.height+parseInt(g.stickDistance)+"px";break;case u.stickTo.left:p.style.left=t.left-e.width-parseInt(g.stickDistance)+"px",p.style.top=t.top+(t.height-e.height)/2+"px";break;case u.stickTo.right:p.style.left=t.left+t.width+parseInt(g.stickDistance)+"px",p.style.top=t.top+(t.height-e.height)/2+"px";break;case u.stickTo.top:p.style.left=t.left+(t.width-e.width)/2+"px",p.style.top=t.top-e.height-parseInt(g.stickDistance)+"px"}}}function l(){return b=!1,"visible"!==p.style.visibility&&(p.style.visibility="visible",setTimeout(function(){r(),n(m,g.animateFunction+"-from",g.animateFunction+"-to")})),this}function s(){if("visible"!==p.style.visibility)p.style.visibility="visible",n(m,g.animateFunction+"-from",g.animateFunction+"-to"),g.contentMore&&(f.style.display="block",f.style.visibility="visible"),r();else if("block"!==f.style.display&&g.contentMore){f.style.display="block",e(p),r();var t=f.getBoundingClientRect().height;f.style.visibility="visible",f.style.height="0px",e(f,function(){f.style.height=t>0?t+"px":"auto"})}return this}var a=new t(this,c),m=a.anchors.box[0],f=(a.anchors.text[0],a.anchors.more[0]),p=(a.anchors.moreText[0],a.elements[0]),b=!1;i(),"undefined"!=typeof window&&(window.addEventListener("resize",r,!1),window.addEventListener("scroll",r,!1)),a.set(d);var g=a.model;a.onModelUpdate({color:function(t){u.color[t]&&(t=u.color[t],t="rgb("+t.r+", "+t.g+", "+t.b+")"),m.style.backgroundColor=t},contentText:function(t){a.anchors.text[0].innerHTML=t},contentMore:function(t){a.anchors.moreText[0].innerHTML=t},stickTo:function(t){a.elements[0].className="html5tooltip-"+t}}),this.hide=o,this.show=l,this.showMore=s,this.moveTooltip=r,a.publ.unmount=function(){i(),a.unmount()}}function n(t,n,i){function o(){t!==a&&l.element!==a&&(l.model.persistent?l.hide(function(){l.unmount()}):l.unmount())}function r(){a=null,t!==c&&(l.model.persistent?setTimeout(o,l.model.hideDelay):o())}for(var l,s=i.length;s--;)if(i[s].model.target===t){l=i[s];break}l||(l=new e,i.push(l)),l.set(n),l.set("target",t);var a,c;t.addEventListener("mouseenter",function(){this!==a&&this!==c&&(a=this,setTimeout(function(){this===a&&(l.mount(),l.show())}.bind(this),l.model.delay))}),t.addEventListener("mouseleave",r),t.addEventListener("focus",function(){-1===["INPUT","TEXTAREA"].indexOf(this.tagName)&&null===this.getAttribute("contenteditable")||(c=this,l.mount(),l.showMore())}),t.addEventListener("blur",function(){c=null,a!==l.element&&l.unmount()}),l.element.addEventListener("mouseenter",function(){a=this}),l.element.addEventListener("mouseleave",r)}function i(t,e){for(var n,i=(e||document).getElementsByTagName("*"),o=[],r=0;n=i[r];r++)n.getAttribute(t)&&o.push(n);return o}function o(t,e,n){for(var i=t.getAttribute(e),o=t;!i&&(o=o.parentNode)&&o.getAttribute;)i=o.getAttribute(e);return i||n}function r(){i("data-tooltip").forEach(function(t){n(t,{animateFunction:o(t,"data-tooltip-animate-function",d.animateFunction),color:o(t,"data-tooltip-color",""),contentMore:o(t,"data-tooltip-more",""),contentText:o(t,"data-tooltip",""),delay:o(t,"data-tooltip-delay",d.delay),hideDelay:o(t,"data-tooltip-hide-delay",d.delay),maxWidth:o(t,"data-tooltip-maxwidth","auto"),persistent:o(t,"data-tooltip-persistent",d.persistent),stickTo:o(t,"data-tooltip-stickto",d.stickTo)},f)})}function l(t,e){var n=[];try{n=Array.prototype.slice.call((e||document).querySelectorAll(t))}catch(t){}return n}function s(t){t.forEach(function(t){var e=[];t.targetSelector&&(e=l(t.targetSelector)),e.forEach(function(e){n(e,t,m)})})}function a(){document.removeEventListener("DOMContentLoaded",a,!1),window.removeEventListener("load",a,!1),p.refresh()}var c='<div class="html5tooltip" style="box-sizing:border-box;position:fixed;z-index:2147483647">  <div class="html5tooltip-box" box>    <div class="html5tooltip-text" text></div>    <div class="html5tooltip-more" style="overflow:hidden;" more>      <div class="html5tooltip-text" more-text></div>    </div>  </div></div>',u={animateFunction:{fadeIn:"fadein",foldIn:"foldin",foldOut:"foldout",roll:"roll",scaleIn:"scalein",slideIn:"slidein",spin:"spin"},color:{daffodil:{r:255,g:230,b:23},daisy:{r:250,g:211,b:28},mustard:{r:253,g:183,b:23},"citrus zest":{r:250,g:170,b:33},pumpkin:{r:241,g:117,b:63},tangerine:{r:237,g:87,b:36},salmon:{r:240,g:70,b:57},persimmon:{r:234,g:40,b:48},rouge:{r:188,g:35,b:38},scarlet:{r:140,g:12,b:3},"hot pink":{r:229,g:24,b:93},princess:{r:243,g:132,b:174},petal:{r:250,g:198,b:210},lilac:{r:178,g:150,b:199},lavender:{r:123,g:103,b:174},violet:{r:95,g:53,b:119},cloud:{r:195,g:222,b:241},dream:{r:85,g:190,b:237},gulf:{r:49,g:168,b:224},turquoise:{r:35,g:138,b:204},sky:{r:13,g:96,b:174},indigo:{r:20,g:59,b:134},navy:{r:0,g:27,b:74},"sea foam":{r:125,g:205,b:194},teal:{r:0,g:168,b:168},peacock:{r:18,g:149,b:159},ceadon:{r:193,g:209,b:138},olive:{r:121,g:145,b:85},bamboo:{r:128,g:188,b:66},grass:{r:74,g:160,b:63},kelly:{r:22,g:136,b:74},forrest:{r:0,g:63,b:46},chocolate:{r:56,g:30,b:17},"terra cotta":{r:192,g:92,b:32},camel:{r:191,g:155,b:107},linen:{r:233,g:212,b:167},stone:{r:231,g:230,b:225},smoke:{r:207,g:208,b:210},steel:{r:138,g:139,b:143},slate:{r:119,g:133,b:144},charcoal:{r:71,g:77,b:77},black:{r:5,g:6,b:8},white:{r:255,g:255,b:255},"metalic silver":{r:152,g:162,b:171},"metalic gold":{r:159,g:135,b:89},"metalic copper":{r:140,g:102,b:65}},stickTo:{bottom:"bottom",left:"left",right:"right",top:"top"}},d={animateDuration:300,animateFunction:u.animateFunction.fadeIn,delay:500,disableAnimation:!1,hideDelay:300,persistent:!1,stickTo:u.stickTo.bottom,stickDistance:10},m=[],f=[],p=function(t){Array.isArray(t)||(t=[t]),s(t)};return p.autoinit=p.refresh=function(){r()},p.getTooltipByTarget=function(t){for(var e=m.length;e--;)if(m[e].model.target===t)return m[e];for(var e=f.length;e--;)if(f[e].model.target===t)return f[e]},"undefined"!=typeof window&&("complete"===document.readyState?a():(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)),window.html5tooltipsPredefined||(window.html5tooltipsPredefined=u,window.HTML5TooltipUIComponent=e)),p});
//# sourceMappingURL=html5tooltips.min.js.map