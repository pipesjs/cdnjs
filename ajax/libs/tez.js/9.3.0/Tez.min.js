!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Tez=t()}(this,function(){"use strict";function e(e){if(!e||!e.attributes)return"{}";for(var t={},n=e.attributes,r=0,i=void 0,s=n.length;r<s;r++)i=n[r],i.value&&(t[i.name]=i.value);return JSON.stringify(t)}function t(e){return e&&u?(u.innerHTML=e,Array.from(u.children)):[]}function n(e,t){void 0===e&&(e={}),void 0===t&&(t={});for(var n in t)void 0===e[n]&&void 0!==t[n]&&(e[n]=t[n]);return e}function r(e,t){if(e.isEqualNode(t))return e;var n,i,s,o=[].concat(t.children),a=0;if(o.length)for(;a<o.length;){if(o[a]&&o[a].isEqualNode(e)){n=o[a],i=t;break}if(s=r(e,i=o[a])){n=s;break}a++}else e.isEqualNode(t)&&(n=t);return n?{matched:n,matchParent:i}:null}function i(t,r,s,o,a){if(void 0===s&&(s=[]),void 0===o&&(o=[]),void 0===a&&(a=[]),!t||!r)return null;var d,p,u,f=e(t),l=e(r),h=0,v=Math.max(s.length,o.length),y=t.tagName,g=r.tagName,m=t.nodeType,_=r.nodeType,N=3===m,T=3===_,b=t&&t.style&&t.style.cssText,x=r&&r.style&&r.style.cssText,S=t.innerHTML,R=r.innerHTML,q=S===R,k=b===x,C=y===g,E=k&&C,L=N===!0&&N===T,O=t===l;if(v)for(;h<v;)u=s[h],p=o[h],u&&!p?a.push({index:h,diff:!1,virtual:u,real:"append"}):p&&!s[h]?a.push({index:h,diff:!1,virtual:"append",real:p}):u&&u.isEqualNode(p)===!1&&a.push({index:h,diff:!0,virtual:u,real:p}),h++;if(a.length)for(var M;d=a.shift();){h=d.index;var H=h+1,w=d.virtual,P=d.real;d.diff||"append"!==P?d.diff||"append"!==w?d.diff&&(void 0===P.tagName||void 0===w.tagName||P.tagName!==w.tagName?t.replaceChild(w,P):i(P,w,w.childNodes,P.childNodes)):void 0!==P.remove?P.remove():t.removeChild(P):(M=o[H],M?t.insertBefore(w,M):t.appendChild(w))}else if(L&&t.value!==r.value)t.value=r.value;else if(!C&&null!==t.parentNode&&r&&r.nodeType)t.parentNode.replaceChild(r,t);else if(!O&&E&&q){var A=n(JSON.parse(l),JSON.parse(f));for(var j in A)"style"!==j&&t.setAttribute(j,A[j])}else c.test(R)&&S!==R?t.childNodes&&t.childNodes.length?i(t,r,r.childNodes,t.childNodes):t.isEqualNode(r)?t.innerHTML=r.innerHTML:t.parentNode.replaceChild(r,t):t.textContent?t.textContent=r.textContent:t.innerText=r.innerText;return t}function s(e){if(e&&e.tag){var t=e.tag,n=e.css,r=e.content,i=e.attr,s=document.createElement(t);if(n&&(s.style.cssText=n),r&&(s.innerHTML=r),i)for(var o in i)s.setAttribute(o,i[o]);return s}}function o(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];if(!e)throw new Error("tagName has to be defined, non-empty string");if(n=n||[],t=t||[],!(this instanceof o))return new(Function.prototype.bind.apply(o,[null].concat([e],[t],n)));if("function"==typeof e)return{constructor:e,attrs:t,childs:n};"string"!=typeof e&&"number"!=typeof e&&e&&e instanceof f&&e.setProps(t);var i="<"+e,s=Object.keys(t);return s.map(function(e,n){var r=t[e];i+=" "+e+'="'+r+'"'}),i+=">",n.map(function(e){e instanceof HTMLElement?i+=e.outerHTML:"object"==typeof e&&e.instance instanceof o?i+=e.element:"string"==typeof e||"number"==typeof e?e.includes(" ")?e.split(" ").map(function(e){i+="<span>"+e+"</span> "}):i+="<span>"+e+"</span>":e.constructor&&(i+=l.getComponentRendered(e))}),i+="</"+e+">",{instance:this,element:i}}if(String.prototype.includes||(String.prototype.includes=function(e){return this.indexOf(e)>-1}),!Array.from){var a=[].slice;Array.from=function(e){return a.call(e)}}var d="undefined"!=typeof window?window:"undefined"!=typeof global?global:{},p=d.document,u=void 0!==p&&p.createElement("div"),c=new RegExp("&lt;|&gt;|/>|<|>","g"),f=function(e){this.super=e};f.prototype.setProps=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!1),this.super.setProps(e),this.super[t?"setView":"setContent"](this,e),this.changed&&this.changed(e),this};var l=function(t,n){return void 0===n&&(n={}),this._vars=n,n.quickRender||(n.quickRender=!0),this._opt={},this._node="string"==typeof t?document.querySelector(t):t.length&&t[0].nodeType?t[0]:t,this._vnode=this._node.cloneNode(!0),this._quickRender=n.quickRender,this._disableSafeParse=n.disableSafeParse,this._appendStore=[],this.props={},this._listOfNodes=[],void 0===n.styling&&(n.styling=this._vnode.style.cssText),void 0===n.attrs&&(n.attrs=e(this._vnode)),void 0===n.content&&(n.content=this._vnode.innerHTML),this.render()};l.getComponentRendered=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=Object.assign({},n?n.props:{},t);if(n&&(n.props=r),"string"==typeof e||"number"==typeof e)return e;if(void 0===e||null===e)return"";if("function"==typeof e||"object"==typeof e){e.constructor&&(e.attrs&&(n.props=Object.assign(n.props,e.attrs)),e=e.constructor);var i=e;e="function"==typeof e?n&&!e.initted?new e(n):e(n):e,e.props=r,e.Render||e.render||(e=i),n&&(e.super=n),e&&!e.initted&&"function"==typeof e.init&&(e.init(),e.initted=!0);var s=e.Render?"Render":"render",a=e&&e[s]&&e[s]();return a&&void 0!==a.instance&&a.instance instanceof o?a=a.element:"undefined"!=typeof n&&!n._disableSafeParse&&a&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;")),a}return""},l.parseComponent=function(e,t,n){var r;if(e&&e.nodeType)r=e.outerHTML;else if("string"==typeof e){var i=e.includes("</")||e.includes("/>");"undefined"==typeof n||n._disableSafeParse||(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;")),r=i?e:e}else if("function"==typeof e||"object"==typeof e){var s=l.getComponentRendered(e,t,n);s&&void 0!==s.instance&&s.instance instanceof o?s=s.element:"undefined"==typeof n||n._disableSafeParse||(s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;")),r=s?s:"function"==typeof e?new e:e}return r},l.prototype.createElement=function(e){var t,n=this._appendStore,r=n.length;return n[r]={real:"append",virtual:t=_makeNode(e),diff:!1,index:r},t},l.prototype.sync=function(e){var t=e.props,n=e.content,r=e.styling,i=e.attrs;return t&&(this.props=t),n&&(this.vars.content=n),r&&(this.vars.styling=r),i&&(this.vars.attrs=i),this},l.prototype.setProps=function(e){return void 0===e&&(e={}),this.props=Object.assign(this.props,e),this._quickRender?this.render():this},l.prototype.setEvent=function(e,t,n){var r=this,i=this,s=i._node;void 0===n&&"function"==typeof t&&(n=t,t=e,e=null);var o=function(e){n.call(r,this,e)};return n&&null===e?s.addEventListener(t,o):n&&(e=s.querySelector(e),e.addEventListener(t,o)),this._quickRender?this.render():this},l.prototype.createFunction=function(e){return e.call(this),this._quickRender?this.render():this},l.prototype.render=function(){var t,n,r=this,s=r._vars,o=r._node,a=r._vnode,d=r._appendStore,p=r._listOfNodes,u=(r._disableSafeParse,s.attrs),c=e(o);if(c!==u){t=JSON.parse(u),n=JSON.parse(c);for(var f in t)o.setAttribute(f,t[f]);for(var l in n)void 0===t[l]&&o.removeAttribute(l);s.attrs=e(a)}u=s.styling,c=o.style.cssText,u!==c&&(this._node.style.cssText=u,s.styling=o.style.cssText);for(var h=0,v=void 0,y=p.length;h<y;h++)v=d.length,d[v]={virtual:p[h],real:"append",diff:!1,index:v};return u=s.content,c=o.innerHTML,(d.length||c!==u)&&(a.innerHTML=u,i(o,a,a.childNodes,o.childNodes,d)),this},l.prototype.setNode=function(e){return this._listOfNodes.push(e),this._quickRender?this.render():this},l.prototype.setAttrs=function(e){var t={},n=JSON.parse(this._vars.attrs);for(var r in n)void 0!==n[r]&&(t[r]=n[r]);for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return this._vars.attrs=JSON.stringify(t),this._quickRender?this.render():this},l.prototype.setStyling=function(e){var t=this._vars.styling,n=this._vnode.style;n.cssText=t;for(var r in e)n[r]=e[r];return this._vars.styling=n.cssText,this._quickRender?this.render():this},l.prototype.setView=function(e,t){var n=l.parseComponent(e,t,this);return n&&(this._vars.content=n),this._quickRender?this.render():this},l.prototype.setContent=function(e,n){var i=this._vars.content;if(e=l.getComponentRendered("string"==typeof e?e:e.nodeType?e.outerHTML:e,n,this),!e)return this._quickRender?this.render():this;e=e.nodeType?e.outerHTML:e;var s=e.includes("=")?"+"===e.charAt(0)?1:"-"===e.charAt(0)?-1:0:0;if(0===s)i=e;else if(1===s)i+=e.substr(2);else if(s===-1){var o=t(e.substr(2))[0],a=r(o,this._node);a&&a.matched&&this._appendStore.push({virtual:a.matched,real:"append",remove:!0})}return this._vars.content=i,this._quickRender?this.render():this};var h=Object.assign(l,{createElement:o,customElement:s,Component:f});return h});
