!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3_timer={})}(this,function(t){"use strict";function n(){return w||(b(e),w=T.now()+d)}function e(){w=0}function i(){this._call=this._time=this._next=null}function r(t,n,e){var r=new i;return r.restart(t,n,e),r}function o(){n(),++p;for(var t,e=m;e;)(t=w-e._time)>=0&&e._call.call(null,t),e=e._next;--p}function u(t){w=(x=t||T.now())+d,p=h=0;try{o()}finally{p=0,a(),w=0}}function l(){var t=T.now(),n=t-x;n>y&&(d-=n,x=t)}function a(){for(var t,n=m,e=1/0;n;)n._call?(e>n._time&&(e=n._time),n=(t=n)._next):n=t?t._next=n._next:m=n._next;_=t,c(e)}function c(t){if(!p){h&&(h=clearTimeout(h));var n=t-w;n>24?(1/0>t&&(h=setTimeout(u,n)),v&&(v=clearInterval(v))):(v||(v=setInterval(l,y)),p=1,b(u))}}function f(t,n,e){var r=new i;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}function s(t,e,r){var o=new i,u=e;return null==e?(o.restart(t,e,r),o):(e=+e,r=null==r?n():+r,o.restart(function l(n){o.restart(l,u+=e,r),t(n-e+u)},u,r),o)}var m,_,p=0,h=0,v=0,y=1e3,x=0,w=0,d=0,T="object"==typeof performance?performance:Date,b="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,17)};i.prototype=r.prototype={restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?n():+i)+(null==e?0:+e),this._call||(_?_._next=this:m=this,_=this),this._call=t,this._time=i,c()},stop:function(){this._call&&(this._call=null,this._time=1/0,c())}};var F="0.4.0";t.version=F,t.now=n,t.timer=r,t.timerFlush=o,t.timeout=f,t.interval=s});