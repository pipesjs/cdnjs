!function(e){"use strict";function r(r,t,a,n,s){function d(){var e,r;!h.length||m&&!v.idle.length||(e=h.shift(),m?(r=v.idle.shift(),v.busy[e.uuid]=r,r.addEventListener("message",e.onMessage),r.addEventListener("error",e.onError),r.postMessage({load:e.load.toString(),parameter:e.parameter},l&&a(e.parameter,l)?[e.parameter]:null)):n(function(){try{e.deferred.resolve(e.load.apply(null,e.parameter))}catch(r){e.deferred.reject()}d()}))}function i(e){var r=v.busy[e.uuid];delete v.busy[e.uuid],r.removeEventListener("message",e.onMessage),r.removeEventListener("error",e.onError),v.idle.push(r),d()}function o(e,a){var n=r.call(this),s=t.defer();return n.deferred=s,n.load=e,n.parameter=a||[],h.push(n),d(),s.pledge}var u,l="ArrayBuffer"in e?l:null,c=s("Worker"),p=s("URL"),f=s("Blob"),m=c&&p&&f,v={idle:[],busy:{}},h=[],g=0;if(o.prototype={onMessage:function(e){var r=this;"result"===e.data.type&&(r.deferred.resolve(e.data.result),i(r))},onError:function(){var e=this;e.deferred.reject(),i(e)}},m)try{for(u=p.createObjectURL(new f(['function d(a){return a.replace(c,"").trim()}function e(a){return a}var a=this,b=/functions.*?(([^)]*))/,c=//*.**//;a.addEventListener("message",function(b){a.postMessage({type:"result",result:a.process(b.data.load).apply(null,b.data.parameter)})},!1),a.process=function(a){var c=a.match(b)[1].split(",").map(d).filter(e);return c.push(a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))),Function.apply(null,c)};'],{type:"application/javascript"}));g<4;g++)v.idle[g]=new c(u)}catch(e){m=!1}return o.extends(r)}provide(["/demand/abstract/uuid","/demand/pledge","/demand/validator/isInstanceOf","/demand/function/defer","./support/method"],r)}(this);
//# sourceMappingURL=task.js.map
