"undefined"==typeof Map&&(Map=function(){this.clear()},Map.prototype={set:function(t,n){return this._[t]=n,this},get:function(t){return this._[t]},has:function(t){return t in this._},"delete":function(t){return t in this._&&delete this._[t]},clear:function(){this._=Object.create(null)},get size(){var t=0;for(var n in this._)++t;return t},forEach:function(t){for(var n in this._)t(this._[n],n,this)}}),"undefined"==typeof requestAnimationFrame&&(requestAnimationFrame="undefined"!=typeof window&&(window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame)||function(t){return setTimeout(t,17)}),function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.d3=n()}(this,function(){"use strict";function t(){this.active=null,this.pending=[]}function n(n,e){return function(){var r=this[n]||(this[n]=new t);r.scheduled(e)}}function e(t,e,r,i){this._root=t,this._depth=e,this._key=r||"__transition__",this._id=i||++nt,this.each(n(this._key,this._id))}function r(t){return+t}function i(t,n){t=Math.max(1,rt(t,1)),n=1.5*rt(n,.3)*et;var e=n*Math.asin(1/t);return function(r){return t*((r=2*r-1)<0?Math.pow(2,10*r)*Math.sin((e-r)/n):Math.pow(2,-10*r)*Math.sin((r-e)/n)+2)/2}}function o(t,n){t=Math.max(1,rt(t,1)),n=rt(n,.3)*et;var e=n*Math.asin(1/t);return function(r){return t*Math.pow(2,-10*r)*Math.sin((r-e)/n)+1}}function u(t,n){t=Math.max(1,rt(t,1)),n=rt(n,.3)*et;var e=n*Math.asin(1/t);return function(r){return t*Math.pow(2,10*--r)*Math.sin((e-r)/n)}}function a(t){return t=1.525*rt(t,1.70158),function(n){return((n*=2)<1?n*n*((t+1)*n-t):(n-=2)*n*((t+1)*n+t)+2)/2}}function s(t){return t=rt(t,1.70158),function(n){return--n*n*((t+1)*n+t)+1}}function c(t){return t=rt(t,1.70158),function(n){return n*n*((t+1)*n-t)}}function f(t){return it>t?pt*t*t:ut>t?pt*(t-=ot)*t+at:ct>t?pt*(t-=st)*t+ft:pt*(t-=ht)*t+lt}function h(t){return((t*=2)<=1?1-f(1-t):f(t-1)+1)/2}function l(t){return 1-f(1-t)}function p(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function _(t){return Math.sqrt(1- --t*t)}function d(t){return 1-Math.sqrt(1-t*t)}function m(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function g(t){return 1-Math.pow(2,-10*t)}function v(t){return Math.pow(2,10*t-10)}function y(t){return(1-Math.cos(_t*t))/2}function w(t){return Math.sin(t*dt)}function M(t){return 1-Math.cos(t*dt)}function b(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function x(t){return--t*t*t+1}function A(t){return t*t*t}function S(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function E(t){return t*(2-t)}function q(t){return t*t}function k(t){return t=rt(t,3),function(n){return((n*=2)<=1?Math.pow(n,t):2-Math.pow(2-n,t))/2}}function T(t){return t=rt(t,3),function(n){return 1-Math.pow(1-n,t)}}function R(t){return t=rt(t,3),function(n){return Math.pow(n,t)}}function C(t,n){this._root=t,this._depth=n,this._enter=this._update=this._exit=null}function D(t,n,e){var r=wt(t),i=r.CustomEvent;i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function N(){}function L(t){return function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t(n)}}function P(t,n,e){return function(r){for(var i=n.length,o=At;--i>=0;)e[i<<1]=n[i].__data__;At=r;try{t.apply(n[0],e)}finally{At=o}}}function F(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return t=Dt(t),t.local?e:n}function V(t){return t.trim().replace(/\s+/g," ")}function j(t){var n;return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);n||(n=new RegExp("(?:^|\\s+)"+xt(t)+"(?:\\s+|$)","g"));var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",V(i+" "+t))):e.setAttribute("class",V(i.replace(n," ")))}}function B(t,n){var e,r=-1,i=t.length;if(--n){for(;++r<i;)if((e=t[r])&&(e=B(e,n)))return e}else for(;++r<i;)if(e=t[r])return e}function I(t,n){var e,r=-1,i=t.length;if(--n)for(;++r<i;)(e=t[r])&&(t[r]=I(e,n));else if(!Array.isArray(t)){for(var o=new Array(i);++r<i;)o[r]=t[r];o._parent=t._parent,t=o}return t}function O(t,n){return n>t?-1:t>n?1:t>=n?0:0/0}function z(t,n){var e,r,i=t.length;if(--n)for(;--i>=0;)(e=t[i])&&z(e,n);else for(r=t[--i];--i>=0;)(e=t[i])&&(r&&r!==e.nextSibling&&r.parentNode.insertBefore(e,r),r=e)}function X(t,n){var e,r=-1,i=t.length,o=new Array(i);if(--n)for(;++r<i;)(e=t[r])&&(o[r]=X(e,n));return o._parent=t._parent,o}function Y(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function $(t){return function(){return t}}function G(t){return function(){return this.querySelectorAll(t)}}function H(){return new C([document.documentElement],1)}function U(){return new e([document.documentElement],1)}function K(){fn=hn=0,ln=1/0,W(tt())}function W(t){if(!fn){var n=t-Date.now();n>24?ln>t&&(hn&&clearTimeout(hn),hn=setTimeout(K,n),ln=t):(hn&&(hn=clearTimeout(hn),ln=1/0),fn=requestAnimationFrame(K))}}function J(t,n){this.callback=t,this.time=n,this.flush=!1,this.next=null}function Q(t,n,e){e=null==e?Date.now():+e,null!=n&&(e+=+n);var r=new J(t,e);sn?sn.next=r:an=r,sn=r,W(e)}function Z(t,n,e){e=null==e?Date.now():+e,null!=n&&(e+=+n),cn.callback=t,cn.time=e}function tt(t){t=null==t?Date.now():+t;var n=cn;for(cn=an;cn;)t>=cn.time&&(cn.flush=cn.callback(t-cn.time,t)),cn=cn.next;cn=n,t=1/0;for(var e,r=an;r;)r.flush?r=e?e.next=r.next:an=r.next:(r.time<t&&(t=r.time),r=(e=r).next);return sn=e,t}t.prototype={scheduled:function(t){if(this.active&&this.active.id===t)return!0;for(var n=this.pending,e=n.length;--e>=0;)if(n[e].id===t)return!0;return!1}};var nt=0,et=1/(2*Math.PI),rt=function(t,n){return null==t||isNaN(t)?n:+t},it=4/11,ot=6/11,ut=8/11,at=.75,st=9/11,ct=10/11,ft=.9375,ht=21/22,lt=63/64,pt=1/it/it,_t=Math.PI,dt=_t/2,mt=(new Map).set("linear-in",r).set("linear-out",r).set("linear-in-out",r).set("quad-in",q).set("quad-out",E).set("quad-in-out",S).set("cubic-in",A).set("cubic-out",x).set("cubic-in-out",b).set("poly-in",A).set("poly-out",x).set("poly-in-out",b).set("sin-in",M).set("sin-out",w).set("sin-in-out",y).set("exp-in",v).set("exp-out",g).set("exp-in-out",m).set("circle-in",d).set("circle-out",_).set("circle-in-out",p).set("bounce-in",l).set("bounce-out",f).set("bounce-in-out",h).set("back-in",c()).set("back-out",s()).set("back-in-out",a()).set("elastic-in",u()).set("elastic-out",o()).set("elastic-in-out",i()),gt=(new Map).set("poly-in",R).set("poly-out",T).set("poly-in-out",k).set("back-in",c).set("back-out",s).set("back-in-out",a).set("elastic-in",u).set("elastic-out",o).set("elastic-in-out",i),vt=function(t,n,e){var i=(t+="").indexOf("-");return 0>i&&(t+="-in"),arguments.length>1&&gt.has(t)?gt.get(t)(n,e):mt.get(t)||r},yt=function(t,n,e){"function"==typeof t?t:vt(t,n,e);return this.each(function(){})},wt=function(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)},Mt=function(t,n){function e(){return D(this,t,n)}function r(){return D(this,t,n.apply(this,arguments))}return this.each("function"==typeof n?r:e)},bt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xt=function(t){return t.replace(bt,"\\$&")},At=null,St=new Map;if("undefined"!=typeof document){var Et=document.documentElement;"onmouseenter"in Et||St.set("mouseenter","mouseover").set("mouseleave","mouseout")}var qt=function(t,n,e){function r(){for(var r=c,o=arguments.length>>1,a=new Array(o);--o>=0;)r=r[arguments[(o<<1)+1]],a[o]=o?r._parent:r;var f=P(n,a,arguments);u&&(f=L(f)),i.call(this),this.addEventListener(t,this[s]=f,f._capture=e),f._listener=n}function i(){var n=this[s];n&&(this.removeEventListener(t,n,n._capture),delete this[s])}function o(){var n,e=new RegExp("^__on([^.]+)"+xt(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i._capture),delete this[r]}}var u,a=arguments.length,s="__on"+t,c=this._root;return 2>a?(a=this.node()[s])&&a._listener:(3>a&&(e=!1),(a=t.indexOf("."))>0&&(t=t.slice(0,a)),(u=St.has(t))&&(t=St.get(t)),this.each(n?a?r:N:a?i:o))},kt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Tt=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Rt=function(t){return function(){return this.querySelector(t)}},Ct=(new Map).set("svg","http://www.w3.org/2000/svg").set("xhtml","http://www.w3.org/1999/xhtml").set("xlink","http://www.w3.org/1999/xlink").set("xml","http://www.w3.org/XML/1998/namespace").set("xmlns","http://www.w3.org/2000/xmlns/"),Dt=function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.slice(0,n),t=t.slice(n+1)),Ct.has(e)?{space:Ct.get(e),local:t}:t},Nt=function(t,n){function e(){return this.appendChild(t.apply(this,arguments))}function r(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)}return"function"!=typeof t&&(t=F(t)),this.select(arguments.length<2?e:("function"!=typeof n&&(n=Rt(n)),r))},Lt=function(t){function n(){this.innerHTML=t}function e(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?e:n)):this.node().innerHTML},Pt=function(t){function n(){this.textContent=t}function e(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?e:n)):this.node().textContent},Ft=function(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=(t+"").trim().split(/^|\s+/);var i=t.length;if(arguments.length<2){var o=this.node(),u=-1;if(n=o.classList){for(;++u<i;)if(!n.contains(t[u]))return!1}else for(n=o.getAttribute("class");++u<i;)if(!classedRe(t[u]).test(n))return!1;return!0}return t=t.map(j),this.each("function"==typeof n?r:e)},Vt=function(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return arguments.length<2?this.node()[t]:this.each(null==n?e:"function"==typeof n?i:r)},jt=function(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}var u=arguments.length;return 2>u?wt(u=this.node()).getComputedStyle(u,null).getPropertyValue(t):(3>u&&(e=""),this.each(null==n?r:"function"==typeof n?o:i))},Bt=function(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}if(t=Dt(t),arguments.length<2){var s=this.node();return t.local?s.getAttributeNS(t.space,t.local):s.getAttribute(t)}return this.each(null==n?t.local?r:e:"function"==typeof n?t.local?a:u:t.local?o:i)},It=function(t){function n(e,i){var o,u=-1,a=e.length;if(--i)for(var s=2*i,c=s+1;++u<a;)(o=e[u])&&(r[s]=o._parent.__data__,r[c]=u,n(o,i));else for(;++u<a;)(o=e[u])&&(r[0]=o.__data__,r[1]=u,t.apply(o,r))}var e=this._depth,r=new Array(e);return n(this._root,e),this},Ot=function(){return!this.node()},zt=function(){var t=0;return this.each(function(){++t}),t},Xt=function(){return B(this._root,this._depth)},Yt=function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},$t=function(){var t=arguments[0];return t.apply(arguments[0]=this,arguments),this},Gt=function(t){return t._root=I(t._root,t._depth)},Ht=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}function e(t,r){if(--r)for(var i,o=-1,u=t.length;++o<u;)(i=t[o])&&e(i,r);else t.sort(n)}return t||(t=O),e(Gt(this),this._depth),this.order()},Ut=function(){return z(this._root,this._depth),this},Kt=function(t){return new C(X(Gt(t),t._depth),t._depth)},Wt=function(){return this._exit||(this._exit=Kt(this))},Jt=function(){return this._enter||(this._enter=Kt(this),this._enter._update=this),this._enter};Y.prototype={appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n||this._next)}};var Qt=function(t,n){function e(n,r,i,o){var u,a,f=-1;if(o--){var h=2*o,l=h+1;for(u=n.length;++f<u;)(a=n[f])&&(s[h]=a._parent.__data__,s[l]=f,e(a,r[f],i[f],o))}else{var p,_=0;for(c(n,r,i,t.apply(n._parent,s)),u=n.length;++f<u;)if(p=r[f]){for(f>=_&&(_=f+1);!(a=n[_])&&++_<u;);p._next=a||null}}}function r(t,n,e,r){var i,o=0,u=t.length,a=r.length,s=Math.min(u,a);for(n.length=0,n.length=a,e.length=0,e.length=u;s>o;++o)(i=t[o])?i.__data__=r[o]:n[o]=new Y(t._parent,r[o]);for(;a>o;++o)n[o]=new Y(t._parent,r[o]);for(;u>o;++o)(i=t[o])&&(e[o]=t[o]);t.length=a}function i(t,e,r,i){var o,u,a,c=i.length,f=t.length,h=new Map,l=new Array(2).concat(s),p=new Array(f);for(e.length=0,e.length=c,r.length=0,r.length=f,o=0;f>o;++o)(u=t[o])&&(l[0]=u.__data__,l[1]=o,p[o]=a=n.apply(u,l),h.has(a)?r[o]=u:h.set(a,u));for(t.length=0,t.length=c,o=0;c>o;++o)l[0]=i[o],l[1]=o,a=n.apply(t._parent,l),(u=h.get(a))?u!==!0&&(t[o]=u,u.__data__=i[o]):e[o]=new Y(t._parent,i[o]),h.set(a,!0);for(o=0;f>o;++o)(u=h.get(p[o]))!==!0&&(r[o]=u)}if(!t){var o=new Array(this.size()),u=-1;return this.each(function(t){o[++u]=t}),o}var a=this._depth-1,s=new Array(2*a),c=n?i:r;return"function"!=typeof t&&(t=$(t)),e(this._root,this.enter()._root,this.exit()._root,a),this},Zt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var tn=document.documentElement;if(!tn.matches){var nn=tn.webkitMatchesSelector||tn.msMatchesSelector||tn.mozMatchesSelector||tn.oMatchesSelector;Zt=function(t){return function(){return nn.call(this,t)}}}}var en=function(t){function n(e,i){var o,u,a=-1,s=e.length;if(--i){var c=2*i,f=c+1;for(u=new Array(s);++a<s;)(o=e[a])&&(r[c]=o._parent.__data__,r[f]=a,u[a]=n(o,i))}else for(u=[];++a<s;)(o=e[a])&&(r[0]=o.__data__,r[1]=a,t.apply(o,r)&&u.push(o));return u._parent=e._parent,u}var e=this._depth,r=new Array(2*e);return"function"!=typeof t&&(t=Zt(t)),new C(n(this._root,e),e)},rn=function(t){function n(e,i){var o,u,a=-1,s=e.length,c=new Array(s);if(--i)for(var f=2*i,h=f+1;++a<s;)(o=e[a])&&(r[f]=o._parent.__data__,r[h]=a,c[a]=n(o,i));else for(;++a<s;)(o=e[a])&&(r[0]=o.__data__,r[1]=a,c[a]=u=t.apply(o,r),u._parent=o);return c._parent=e._parent,c}var e=this._depth,r=new Array(2*e);return"function"!=typeof t&&(t=G(t)),new C(n(this._root,e),e+1)},on=function(t){function n(e,i,o){var u,a,s=-1,c=e.length,f=new Array(c);if(--o)for(var h=2*o,l=h+1;++s<c;)(u=e[s])&&(r[h]=u._parent.__data__,r[l]=s,f[s]=n(u,i&&i[s],o));else for(;++s<c;)(u=e[s])&&(r[0]=u.__data__,r[1]=s,(a=t.apply(u,r))&&("__data__"in u&&(a.__data__=u.__data__),i&&(i[s]=a,delete e[s]),f[s]=a));return f._parent=e._parent,f}var e=this._depth,r=new Array(2*e);return"function"!=typeof t&&(t=Rt(t)),new C(n(this._root,this._update&&this._update._root,e),e)};C.prototype=H.prototype={select:on,selectAll:rn,filter:en,data:Qt,enter:Jt,exit:Wt,order:Ut,sort:Ht,call:$t,nodes:Yt,node:Xt,size:zt,empty:Ot,each:It,attr:Bt,style:jt,property:Vt,"class":Ft,classed:Ft,text:Pt,html:Lt,append:Nt,insert:Nt,remove:Tt,datum:kt,event:qt,on:qt,dispatch:Mt},e.prototype=U.prototype={each:H.prototype.each,ease:yt};var un=function(t){return new e(this._root,this._depth,t&&"__transition_ "+t+"_")};H.prototype.transition=un;var an,sn,cn,fn,hn,ln=1/0,pn="undefined"!=typeof navigator&&/WebKit/.test(navigator.userAgent)?-1:0,_n=function(t){return new C(["string"==typeof t?document.querySelector(t):t],1)},dn=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>pn){var i=defaultView(t);if(i.scrollX||i.scrollY){e=_n(i.document.body).append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=e.node().getScreenCTM();pn=!(o.f||o.e),e.remove()}}return pn?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]},mn=function(){for(var t,n=At;t=n.sourceEvent;)n=t;return n},gn=function(t,n){arguments.length<2&&(n=mn().touches);for(var e=0,r=n?n.length:0,i=new Array(r);r>e;++e)i[e]=dn(t,n[e]);return i},vn=function(t,n,e){arguments.length<3&&(e=n,n=mn().changedTouches);for(var r,i=0,o=n?n.length:0;o>i;++i)if((r=n[i]).identifier===e)return dn(t,r);return null},yn=function(t){return new C("string"==typeof t?document.querySelectorAll(t):t,1)},wn=function(t,n){return arguments.length<2&&(n=mn()),n.changedTouches&&(n=n.changedTouches[0]),dn(t,n)},Mn={get event(){return At},mouse:wn,namespace:Dt,namespaces:Ct,requote:xt,select:_n,selectAll:yn,selection:H,touch:vn,touches:gn,timer:Q,timerReplace:Z,timerFlush:tt,transition:U};return Mn});