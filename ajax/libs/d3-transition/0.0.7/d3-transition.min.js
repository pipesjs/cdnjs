!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-ease"),require("d3-interpolate"),require("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-ease","d3-interpolate","d3-timer"],e):e(t.d3_transition={},t.d3_selection,t.d3_ease,t.d3_interpolate,t.d3_timer)}(this,function(t,e,n,r,i){"use strict";function u(){return this.each(function(){})}function o(t){return function(){this.removeAttribute(t)}}function a(t){return function(){this.removeAttributeNS(t.space,t.local)}}function s(t,e){return e+="",function(){var n,i=this,u=i.getAttribute(t);return u!==e&&(n=r.interpolate(u,e),function(e){i.setAttribute(t,n(e))})}}function l(t,e){return e+="",function(){var n,i=this,u=i.getAttributeNS(t.space,t.local);return u!==e&&(n=r.interpolate(u,e),function(e){i.setAttributeNS(t.space,t.local,n(e))})}}function c(t,e){return function(){var n,i,u=this,o=e.apply(u,arguments);return null==o?u.removeAttribute(t):(n=u.getAttribute(t),o+="",n!==o&&(i=r.interpolate(n,o),function(e){u.setAttribute(t,i(e))}))}}function f(t,e){return function(){var n,i,u=this,o=e.apply(u,arguments);return null==o?u.removeAttributeNS(t.space,t.local):(n=u.getAttributeNS(t.space,t.local),o+="",n!==o&&(i=r.interpolate(n,o),function(e){u.setAttributeNS(t.space,t.local,i(e))}))}}function h(t,n){if(arguments.length<2)return this.tween("attr."+t);var r=e.namespace(t);return this.tween("attr."+t,(null==n?r.local?a:o:"function"==typeof n?r.local?f:c:r.local?l:s)(r,n))}function p(t,e,n,r,i,u){var o=t[e];if(o){if(d(t,e,n))return}else t[e]=o={active:null,pending:[]};y(t,e,{id:n,index:r,group:i,tweens:[],time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null})}function d(t,e,n){var r=t[e],i=r.active;if(i&&i.id===n)return i;for(var u=r.pending,o=u.length;--o>=0;)if((i=u[o]).id===n)return i}function y(t,e,n){function r(e,r){var u,s,l,c,f=a.pending,h=n.tweens;for(a.active&&a.active.timer.stop(),u=0,s=-1,l=f.length;l>u;++u)c=f[u],c.id<n.id?c.timer.stop():c.id>n.id&&(f[++s]=c);for(f.length=s+1,a.active=n,i.timerOnce(function(){a.active===n&&(n.timer.restart(o,n.delay,n.time),o(e))},0,r),u=0,s=-1,l=h.length;l>u;++u)(c=h[u].value.call(t,t.__data__,n.index,n.group))&&(h[++s]=c);h.length=s+1}function u(e){for(var r=n.tweens,i=0,u=r.length;u>i;++i)r[i].call(t,e)}function o(r){r>=n.duration?(u(1),a.active=null,a.pending.length||delete t[e],n.timer.stop()):u(n.ease.ease(r/n.duration))}var a=t[e];a.pending.push(n),n.timer=i.timer(function(t,e){n.delay<=t?r(t-n.delay,e):n.timer.restart(r,n.delay,n.time)},0,n.time)}function _(t,e,n){return function(){d(this,t,e).delay=+n.apply(this,arguments)}}function g(t,e,n){return n=+n,function(){d(this,t,e).delay=n}}function m(t){var e=this._id,n=this._key;return arguments.length?this.each(("function"==typeof t?_:g)(n,e,t)):d(this.node(),n,e).delay}function v(t,e,n){return function(){d(this,t,e).duration=+n.apply(this,arguments)}}function w(t,e,n){return n=+n,function(){d(this,t,e).duration=n}}function A(t){var e=this._id,n=this._key;return arguments.length?this.each(("function"==typeof t?v:w)(n,e,t)):d(this.node(),n,e).duration}function b(t,e,n){return function(){d(this,t,e).ease=n.apply(this,arguments)}}function P(t,e,n){return function(){d(this,t,e).ease=n}}function k(t){var e=this._id,n=this._key;return arguments.length?this.each(("function"==typeof t?b:P)(n,e,t)):d(this.node(),n,e).ease}function S(t){"function"!=typeof t&&(t=e.matcher(t));for(var n=this._groups,r=n.length,i=new Array(r),u=0;r>u;++u)for(var o,a=n[u],s=a.length,l=i[u]=[],c=0;s>c;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new E(i,this._parents,this._key,this._id)}function N(t){var n=this._id,r=this._key;"function"!=typeof t&&(t=e.selector(t));for(var i=this._groups,u=i.length,o=new Array(u),a=0;u>a;++a)for(var s,l,c=i[a],f=c.length,h=o[a]=new Array(f),y=0;f>y;++y)(s=c[y])&&(l=t.call(s,s.__data__,y,c))&&("__data__"in s&&(l.__data__=s.__data__),h[y]=l,p(h[y],r,n,y,h,d(s,r,n)));return new E(o,this._parents,r,n)}function V(t){var n=this._id,r=this._key;"function"!=typeof t&&(t=e.selectorAll(t));for(var i=this._groups,u=i.length,o=[],a=[],s=0;u>s;++s)for(var l,c=i[s],f=c.length,h=0;f>h;++h)if(l=c[h]){for(var y,_=t.call(l,l.__data__,h,c),g=d(l,r,n),m=0,v=_.length;v>m;++m)(y=_[m])&&p(y,r,n,m,_,g);o.push(_),a.push(l)}return new E(i,a,r,n)}function x(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function q(t,e,n){return function(){var e,i=this,u=x(i).getComputedStyle(i,null),o=u.getPropertyValue(t),a=(i.style.removeProperty(t),u.getPropertyValue(t));return o!==a&&(e=r.interpolate(o,a),function(r){1===r?i.style.removeProperty(t):i.style.setProperty(t,e(r),n)})}}function C(t,e,n){return e+="",function(){var i,u=this,o=x(u).getComputedStyle(u,null).getPropertyValue(t);return o!==e&&(i=r.interpolate(o,e),function(e){u.style.setProperty(t,i(e),n)})}}function D(t,e,n){return function(){var i,u,o=this,a=e.apply(o,arguments);return null==a?o.style.removeProperty(t):(i=x(o).getComputedStyle(o,null).getPropertyValue(t),a+="",i!==a&&(u=r.interpolate(i,a),function(e){o.style.setProperty(t,u(e),n)}))}}function z(t,e,n){return arguments.length<2?this.tween("style."+t):this.tween("style."+t,(null==e?q:"function"==typeof e?D:C)(t,e,null==n?"":n))}function O(t,e,n,r){return function(){for(var i,u=d(this,t,e).tweens,o=0,a=u.length;a>o;++o)if((i=u[o]).name===n)return i.value=r;u.push({name:n,value:r})}}function j(t,e){var n=t+"";if(arguments.length<2){for(var r,i=d(this.node(),this._key,this._id).tweens,u=0,o=i.length;o>u;++u)if((r=i[u]).name===n)return r;return null}return this.each(O(this._key,this._id,n,e))}function E(t,e,n,r){this._groups=t,this._parents=e,this._key=n,this._id=r}function I(t){return new E([[document.documentElement]],G,B(t))}function B(t){return t?"__transition_"+t+"__":"__transition__"}function F(t){for(var e=++J,r=B(t),i={time:Date.now(),delay:0,duration:250,ease:n.easeCubicInOut},u=this._groups,o=u.length,a=new Array(o),s=0;o>s;++s)for(var l,c=u[s],f=c.length,h=a[s]=new Array(f),d=0;f>d;++d)(l=c[d])&&p(h[d]=l,r,e,d,h,i);return new E(a,this._parents,r,e)}var G=[null],H=e.selection.prototype;E.prototype=I.prototype={select:N,selectAll:V,filter:S,call:H.call,nodes:H.nodes,node:H.node,size:H.size,empty:H.empty,each:H.each,attr:h,style:z,tween:j,delay:m,duration:A,ease:k};var J=0;e.selection.prototype.interrupt=u,e.selection.prototype.transition=F;var K="0.0.7";t.version=K,t.transition=I});