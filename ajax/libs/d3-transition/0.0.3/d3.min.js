function Transition(t,e){this._root=t,this._depth=e,this._name="__transition__",this._id=0}function linearIn(t){return+t}function elasticInOut(t,e){t=Math.max(1,number(t,1)),e=1.5*number(e,.3)*k;var n=e*Math.asin(1/t);return function(i){return t*((i=2*i-1)<0?Math.pow(2,10*i)*Math.sin((n-i)/e):Math.pow(2,-10*i)*Math.sin((i-n)/e)+2)/2}}function elasticOut(t,e){t=Math.max(1,number(t,1)),e=number(e,.3)*k;var n=e*Math.asin(1/t);return function(i){return t*Math.pow(2,-10*i)*Math.sin((i-n)/e)+1}}function elasticIn(t,e){t=Math.max(1,number(t,1)),e=number(e,.3)*k;var n=e*Math.asin(1/t);return function(i){return t*Math.pow(2,10*--i)*Math.sin((n-i)/e)}}function backInOut(t){return t=1.525*number(t,1.70158),function(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}}function backOut(t){return t=number(t,1.70158),function(e){return--e*e*((t+1)*e+t)+1}}function backIn(t){return t=number(t,1.70158),function(e){return e*e*((t+1)*e-t)}}function bounceOut(t){return t<b1?b0*t*t:t<b3?b0*(t-=b2)*t+b4:t<b6?b0*(t-=b5)*t+b7:b0*(t-=b8)*t+b9}function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2}function bounceIn(t){return 1-bounceOut(1-t)}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function circleOut(t){return Math.sqrt(1- --t*t)}function circleIn(t){return 1-Math.sqrt(1-t*t)}function expInOut(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function expOut(t){return 1-Math.pow(2,-10*t)}function expIn(t){return Math.pow(2,10*t-10)}function sinInOut(t){return(1-Math.cos(pi*t))/2}function sinOut(t){return Math.sin(t*halfPi)}function sinIn(t){return 1-Math.cos(t*halfPi)}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function cubicOut(t){return--t*t*t+1}function cubicIn(t){return t*t*t}function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function quadOut(t){return t*(2-t)}function quadIn(t){return t*t}function polyInOut(t){return t=number(t,3),function(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}}function polyOut(t){return t=number(t,3),function(e){return 1-Math.pow(1-e,t)}}function polyIn(t){return t=number(t,3),function(e){return Math.pow(e,t)}}function transition(){return new Transition([document.documentElement],1)}function Selection(t,e){this._root=t,this._depth=e,this._enter=this._update=this._exit=null}function dispatchEvent(t,e,n){var i=defaultView(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function noop(){}function filterListenerOf(t){return function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t(e)}}function listenerOf(t,e,n){return function(i){for(var r=e.length,o=event;--r>=0;)n[r<<1]=e[r].__data__;event=i;try{t.apply(e[0],n)}finally{event=o}}}function creatorOf(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return t=namespace(t),t.local?n:e}function collapse(t){return t.trim().replace(/\s+/g," ")}function classerOf(t){var e;return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);e||(e=new RegExp("(?:^|\\s+)"+requote(t)+"(?:\\s+|$)","g"));var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",collapse(r+" "+t))):n.setAttribute("class",collapse(r.replace(e," ")))}}function firstNode(t,e){var n,i=-1,r=t.length;if(--e){for(;++i<r;)if((n=t[i])&&(n=firstNode(n,e)))return n}else for(;++i<r;)if(n=t[i])return n}function arrayifyNode(t,e){var n,i=-1,r=t.length;if(--e)for(;++i<r;)(n=t[i])&&(t[i]=arrayifyNode(n,e));else if(!Array.isArray(t)){for(var o=new Array(r);++i<r;)o[i]=t[i];o._parent=t._parent,t=o}return t}function ascending(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function orderNode(t,e){var n,i,r=t.length;if(--e)for(;--r>=0;)(n=t[r])&&orderNode(n,e);else for(i=t[--r];--r>=0;)(n=t[r])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n)}function emptyNode(t,e){var n,i=-1,r=t.length,o=new Array(r);if(--e)for(;++i<r;)(n=t[i])&&(o[i]=emptyNode(n,e));return o._parent=t._parent,o}function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function valueOf_(t){return function(){return t}}function selectorAllOf(t){return function(){return this.querySelectorAll(t)}}function selection(){return new Selection([document.documentElement],1)}function step(){var t=flush();t>24?(isFinite(t)&&(clearTimeout(timeout),timeout=setTimeout(step,t)),interval=0):(interval=1,requestAnimationFrame(step))}function Timer(t,e){this.callback=t,this.time=e,this.flush=!1,this.next=null}function flush(){var t,e=queueHead,n=1/0,i=Date.now();for(active=queueHead;active;)i>=active.time&&(active.flush=active.callback(i-active.time)),active=active.next;for(;e;)e.flush?e=t?t.next=e.next:queueHead=e.next:(e.time<n&&(n=e.time),e=(t=e).next);return queueTail=t,n-i}"undefined"==typeof requestAnimationFrame&&(requestAnimationFrame="undefined"!=typeof window&&(window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame)||function(t){setTimeout(t,17)});var k=1/(2*Math.PI),number=function(t,e){return null==t||isNaN(t)?e:+t},b1=4/11,b2=6/11,b3=8/11,b4=.75,b5=9/11,b6=10/11,b7=.9375,b8=21/22,b9=63/64,b0=1/b1/b1,pi=Math.PI,halfPi=pi/2,standardEases=(new Map).set("linear-in",linearIn).set("linear-out",linearIn).set("linear-in-out",linearIn).set("quad-in",quadIn).set("quad-out",quadOut).set("quad-in-out",quadInOut).set("cubic-in",cubicIn).set("cubic-out",cubicOut).set("cubic-in-out",cubicInOut).set("poly-in",cubicIn).set("poly-out",cubicOut).set("poly-in-out",cubicInOut).set("sin-in",sinIn).set("sin-out",sinOut).set("sin-in-out",sinInOut).set("exp-in",expIn).set("exp-out",expOut).set("exp-in-out",expInOut).set("circle-in",circleIn).set("circle-out",circleOut).set("circle-in-out",circleInOut).set("bounce-in",bounceIn).set("bounce-out",bounceOut).set("bounce-in-out",bounceInOut).set("back-in",backIn()).set("back-out",backOut()).set("back-in-out",backInOut()).set("elastic-in",elasticIn()).set("elastic-out",elasticOut()).set("elastic-in-out",elasticInOut()),customEases=(new Map).set("poly-in",polyIn).set("poly-out",polyOut).set("poly-in-out",polyInOut).set("back-in",backIn).set("back-out",backOut).set("back-in-out",backInOut).set("elastic-in",elasticIn).set("elastic-out",elasticOut).set("elastic-in-out",elasticInOut),ease=function(t,e,n){return(t+="").indexOf("-")<0&&(t+="-in"),arguments.length>1&&customEases.has(t)?customEases.get(t)(e,n):standardEases.get(t)||linearIn},transition_ease=function(t,e,n){"function"==typeof t||ease(t,e,n);return this.each(function(){})};Transition.prototype=transition.prototype={ease:transition_ease};var selection_transition=function(){return new Transition(this._root,this._depth)},defaultView=function(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)},selection_dispatch=function(t,e){function n(){return dispatchEvent(this,t,e)}function i(){return dispatchEvent(this,t,e.apply(this,arguments))}return this.each("function"==typeof e?i:n)},requoteRe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,requote=function(t){return t.replace(requoteRe,"\\$&")},event=null,filterEvents=new Map,selection_event=function(t,e,n){function i(){for(var i=c,o=arguments.length>>1,s=new Array(o);--o>=0;)i=i[arguments[1+(o<<1)]],s[o]=o?i._parent:i;var l=listenerOf(e,s,arguments);u&&(l=filterListenerOf(l)),r.call(this),this.addEventListener(t,this[a]=l,l._capture=n),l._listener=e}function r(){var e=this[a];e&&(this.removeEventListener(t,e,e._capture),delete this[a])}function o(){var e,n=new RegExp("^__on([^.]+)"+requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r._capture),delete this[i]}}var u,s=arguments.length,a="__on"+t,c=this._root;return s<2?(s=this.node()[a])&&s._listener:(s<3&&(n=!1),(s=t.indexOf("."))>0&&(t=t.slice(0,s)),(u=filterEvents.has(t))&&(t=filterEvents.get(t)),this.each(e?s?i:noop:s?r:o))},selection_datum=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},selection_remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},selectorOf=function(t){return function(){return this.querySelector(t)}},namespaces=(new Map).set("svg","http://www.w3.org/2000/svg").set("xhtml","http://www.w3.org/1999/xhtml").set("xlink","http://www.w3.org/1999/xlink").set("xml","http://www.w3.org/XML/1998/namespace").set("xmlns","http://www.w3.org/2000/xmlns/"),namespace=function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),namespaces.has(n)?{space:namespaces.get(n),local:t}:t},selection_append=function(t,e){function n(){return this.appendChild(t.apply(this,arguments))}function i(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}return"function"!=typeof t&&(t=creatorOf(t)),this.select(arguments.length<2?n:("function"!=typeof e&&(e=selectorOf(e)),i))},selection_html=function(t){function e(){this.innerHTML=t}function n(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?n:e)):this.node().innerHTML},selection_text=function(t){function e(){this.textContent=t}function n(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}return arguments.length?(null==t&&(t=""),this.each("function"==typeof t?n:e)):this.node().textContent},selection_class=function(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=(t+"").trim().split(/^|\s+/);var r=t.length;if(arguments.length<2){var o=this.node(),u=-1;if(e=o.classList){for(;++u<r;)if(!e.contains(t[u]))return!1}else for(e=o.getAttribute("class");++u<r;)if(!classedRe(t[u]).test(e))return!1;return!0}return t=t.map(classerOf),this.each("function"==typeof e?i:n)},selection_property=function(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return arguments.length<2?this.node()[t]:this.each(null==e?n:"function"==typeof e?r:i)},selection_style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}var u=arguments.length;return u<2?defaultView(u=this.node()).getComputedStyle(u,null).getPropertyValue(t):(u<3&&(n=""),this.each(null==e?i:"function"==typeof e?o:r))},selection_attr=function(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}if(t=namespace(t),arguments.length<2){var a=this.node();return t.local?a.getAttributeNS(t.space,t.local):a.getAttribute(t)}return this.each(null==e?t.local?i:n:"function"==typeof e?t.local?s:u:t.local?o:r)},selection_each=function(t){function e(n,r){var o,u=-1,s=n.length;if(--r)for(var a=2*r,c=a+1;++u<s;)(o=n[u])&&(i[a]=o._parent.__data__,i[c]=u,e(o,r));else for(;++u<s;)(o=n[u])&&(i[0]=o.__data__,i[1]=u,t.apply(o,i))}var n=this._depth,i=new Array(n);return e(this._root,n),this},selection_empty=function(){return!this.node()},selection_size=function(){var t=0;return this.each(function(){++t}),t},selection_node=function(){return firstNode(this._root,this._depth)},selection_nodes=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},selection_call=function(){return arguments[0].apply(arguments[0]=this,arguments),this},arrayify=function(t){return t._root=arrayifyNode(t._root,t._depth)},selection_sort=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}function n(t,i){if(--i)for(var r,o=-1,u=t.length;++o<u;)(r=t[o])&&n(r,i);else t.sort(e)}return t||(t=ascending),n(arrayify(this),this._depth),this.order()},selection_order=function(){return orderNode(this._root,this._depth),this},emptyOf=function(t){return new Selection(emptyNode(arrayify(t),t._depth),t._depth)},selection_exit=function(){return this._exit||(this._exit=emptyOf(this))},selection_enter=function(){return this._enter||(this._enter=emptyOf(this),this._enter._update=this),this._enter};EnterNode.prototype={appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e||this._next)}};var selection_data=function(t,e){function n(e,i,r,o){var u,s,l=-1;if(o--){var f=2*o,h=f+1;for(u=e.length;++l<u;)(s=e[l])&&(a[f]=s._parent.__data__,a[h]=l,n(s,i[l],r[l],o))}else{var p,_=0;for(c(e,i,r,t.apply(e._parent,a)),u=e.length;++l<u;)if(p=i[l]){for(l>=_&&(_=l+1);!(s=e[_])&&++_<u;);p._next=s||null}}}function i(t,e,n,i){var r,o=0,u=t.length,s=i.length,a=Math.min(u,s);for(e.length=0,e.length=s,n.length=0,n.length=u;o<a;++o)(r=t[o])?r.__data__=i[o]:e[o]=new EnterNode(t._parent,i[o]);for(;o<s;++o)e[o]=new EnterNode(t._parent,i[o]);for(;o<u;++o)(r=t[o])&&(n[o]=t[o]);t.length=s}function r(t,n,i,r){var o,u,s,c=r.length,l=t.length,f=new Map,h=new Array(2).concat(a),p=new Array(l);for(n.length=0,n.length=c,i.length=0,i.length=l,o=0;o<l;++o)(u=t[o])&&(h[0]=u.__data__,h[1]=o,p[o]=s=e.apply(u,h),f.has(s)?i[o]=u:f.set(s,u));for(t.length=0,t.length=c,o=0;o<c;++o)h[0]=r[o],h[1]=o,s=e.apply(t._parent,h),(u=f.get(s))?!0!==u&&(t[o]=u,u.__data__=r[o]):n[o]=new EnterNode(t._parent,r[o]),f.set(s,!0);for(o=0;o<l;++o)!0!==(u=f.get(p[o]))&&(i[o]=u)}if(!t){var o=new Array(this.size()),u=-1;return this.each(function(t){o[++u]=t}),o}var s=this._depth-1,a=new Array(2*s),c=e?r:i;return"function"!=typeof t&&(t=valueOf_(t)),n(this._root,this.enter()._root,this.exit()._root,s),this},filterOf=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var element=document.documentElement;if(!element.matches){var vendorMatches=element.webkitMatchesSelector||element.msMatchesSelector||element.mozMatchesSelector||element.oMatchesSelector;filterOf=function(t){return function(){return vendorMatches.call(this,t)}}}}var selection_filter=function(t){function e(n,r){var o,u,s=-1,a=n.length;if(--r){var c=2*r,l=c+1;for(u=new Array(a);++s<a;)(o=n[s])&&(i[c]=o._parent.__data__,i[l]=s,u[s]=e(o,r))}else for(u=[];++s<a;)(o=n[s])&&(i[0]=o.__data__,i[1]=s,t.apply(o,i)&&u.push(o));return u._parent=n._parent,u}var n=this._depth,i=new Array(2*n);return"function"!=typeof t&&(t=filterOf(t)),new Selection(e(this._root,n),n)},selection_selectAll=function(t){function e(n,r){var o,u,s=-1,a=n.length,c=new Array(a);if(--r)for(var l=2*r,f=l+1;++s<a;)(o=n[s])&&(i[l]=o._parent.__data__,i[f]=s,c[s]=e(o,r));else for(;++s<a;)(o=n[s])&&(i[0]=o.__data__,i[1]=s,c[s]=u=t.apply(o,i),u._parent=o);return c._parent=n._parent,c}var n=this._depth,i=new Array(2*n);return"function"!=typeof t&&(t=selectorAllOf(t)),new Selection(e(this._root,n),n+1)},selection_select=function(t){function e(n,r,o){var u,s,a=-1,c=n.length,l=new Array(c);if(--o)for(var f=2*o,h=f+1;++a<c;)(u=n[a])&&(i[f]=u._parent.__data__,i[h]=a,l[a]=e(u,r&&r[a],o));else for(;++a<c;)(u=n[a])&&(i[0]=u.__data__,i[1]=a,(s=t.apply(u,i))&&("__data__"in u&&(s.__data__=u.__data__),r&&(r[a]=s,delete n[a]),l[a]=s));return l._parent=n._parent,l}var n=this._depth,i=new Array(2*n);return"function"!=typeof t&&(t=selectorOf(t)),new Selection(e(this._root,this._update&&this._update._root,n),n)};Selection.prototype=selection.prototype={select:selection_select,selectAll:selection_selectAll,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,class:selection_class,classed:selection_class,text:selection_text,html:selection_html,append:selection_append,insert:selection_append,remove:selection_remove,datum:selection_datum,event:selection_event,on:selection_event,dispatch:selection_dispatch},selection.prototype.transition=selection_transition;var queueHead,queueTail,interval,timeout,timer=function(t,e,n){null==e&&(e=0),null==n&&(n=Date.now());var i=new Timer(t,n+e);queueTail?queueTail.next=i:queueHead=i,queueTail=i,interval||(timeout=clearTimeout(timeout),interval=1,requestAnimationFrame(step))},active,bug44083="undefined"!=typeof navigator&&/WebKit/.test(navigator.userAgent)?-1:0,select=function(t){return new Selection(["string"==typeof t?document.querySelector(t):t],1)},point=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(bug44083<0){var r=defaultView(t);if(r.scrollX||r.scrollY){n=select(r.document.body).append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n.node().getScreenCTM();bug44083=!(o.f||o.e),n.remove()}}return bug44083?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]},sourceEvent=function(){for(var t,e=event;t=e.sourceEvent;)e=t;return e},touches=function(t,e){arguments.length<2&&(e=sourceEvent().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=point(t,e[n]);return r},touch=function(t,e,n){arguments.length<3&&(n=e,e=sourceEvent().changedTouches);for(var i,r=0,o=e?e.length:0;r<o;++r)if((i=e[r]).identifier===n)return point(t,i);return null},selectAll=function(t){return new Selection("string"==typeof t?document.querySelectorAll(t):t,1)},mouse=function(t,e){return arguments.length<2&&(e=sourceEvent()),e.changedTouches&&(e=e.changedTouches[0]),point(t,e)},d3={get event(){return event},mouse:mouse,namespace:namespace,namespaces:namespaces,requote:requote,select:select,selectAll:selectAll,selection:selection,touch:touch,touches:touches,timer:timer,timerFlush:flush,transition:transition};module.exports=d3;