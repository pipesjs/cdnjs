!function(t){"function"==typeof define&&define.amd?define(["knockout"],t):t(ko)}(function(t){function e(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t}function n(t,e,n){var i=t.className.split(" "),r=i.indexOf(e);r>=0&&!n&&i.splice(r,1),r<0&&n&&i.push(e),t.className=i.join(" ")}function i(t,e){if(!t.tagName)return null;var n=document.documentElement;return(n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector).call(t,e)}function r(t,e){do{if(i(t,e))return t;t=t.parentNode}while(t);return null}function o(t){this.init(t)}function a(t){this.init(t),this.drop=function(e){t.drop(e,t.data)}}function s(t){this.element=t,n(this.element,"drag-element",!0),this.element.style.position="fixed",this.element.style.zIndex=9998,this.element.addEventListener("selectstart",function(){return!1},!0)}function d(t){this.element=t.element,this.name=t.name,this.dragStart=t.dragStart,this.dragEnd=t.dragEnd,this.data=t.data}function l(t,e){var n=t.getBoundingClientRect();this.element=t,this.scrollMargin=Math.floor(n.height/10),this.offset={top:n.top+window.pageYOffset-document.documentElement.clientTop,left:n.left+window.pageXOffset-document.documentElement.clientLeft},this.innerHeight=n.height,this.scrollDeltaMin=5,this.scrollDeltaMax=30,this.delay=e||0,this.inZone="center",this.scrolling=!1}var c={},u={},h=t.utils.arrayForEach,p=t.utils.arrayFirst,m=t.utils.arrayFilter;o.prototype.init=function(t){this.element=t.element,this.data=t.data,this.dragEnter=t.dragEnter,this.dragOver=t.dragOver,this.dragLeave=t.dragLeave,this.active=!1,this.inside=!1,this.dirty=!1},o.prototype.refreshDomInfo=function(){if(this.hidden="none"===this.element.style.display,!this.hidden){var t=this.element.getBoundingClientRect();this.top=t.top+window.pageYOffset-document.documentElement.clientTop,this.left=t.left+window.pageXOffset-document.documentElement.clientLeft,this.width=t.width,this.height=t.height}},o.prototype.isInside=function(t,e){return!this.hidden&&(!(t<this.left||e<this.top)&&(!(this.left+this.width<t)&&!(this.top+this.height<e)))},o.prototype.update=function(t,e){this.isInside(t.pageX,t.pageY)?(this.inside||this.enter(t,e),this.dragOver&&this.dragOver(t,e,this.data)):this.leave(t)},o.prototype.enter=function(t,e){this.inside=!0,this.dragEnter?this.active=this.dragEnter(t,e,this.data)!==!1:this.active=!0,this.dirty=!0},o.prototype.leave=function(t){t&&(t.target=this.element),this.inside&&this.dragLeave&&this.dragLeave(t,this.data),this.active=!1,this.inside=!1,this.dirty=!0},a.prototype=o.prototype,a.prototype.updateStyling=function(){this.dirty&&(n(this.element,"drag-over",this.active),n(this.element,"drop-rejected",this.inside&&!this.active)),this.dirty=!1},s.prototype.updatePosition=function(t){this.element.style.top=t.pageY-window.pageYOffset+"px",this.element.style.left=t.pageX-window.pageXOffset+"px"},s.prototype.remove=function(){this.element.parentNode.removeChild(this.element)},d.prototype.startDrag=function(t){if(this.dragStart&&this.dragStart(this.data,t)===!1)return!1},d.prototype.drag=function(t){var e=this,n=this.name,i=c[n].concat(u[n]);h(i,function(t){t.refreshDomInfo()}),h(i,function(n){t.target=n.element,n.update(t,e.data)}),h(c[n],function(t){t.updateStyling()})},d.prototype.dropRejected=function(){var t=this.name;return!p(c[t],function(t){return t.inside})||!p(c[t],function(t){return t.active})},d.prototype.cancelDrag=function(t){this.dragEnd&&this.dragEnd(this.data,t)},d.prototype.drop=function(t){var e=this.name,n=r(t.target,".drop-zone"),i=m(c[e],function(t){return t.active}),o=m(i,function(t){return t.element===n})[0];h(c[e].concat(u[e]),function(e){e.leave(t)}),h(c[e],function(t){t.updateStyling()}),o&&o.drop&&o.drop(this.data),this.dragEnd&&this.dragEnd(this.data,t)},l.prototype.scroll=function(t,e){this.x=t,this.y=e,this.topLimit=this.scrollMargin+this.offset.top,this.bottomLimit=this.offset.top+this.innerHeight-this.scrollMargin,e<this.topLimit?this.updateZone("top"):e>this.bottomLimit?this.updateZone("bottom"):this.updateZone("center")},l.prototype.enter=function(t){var e=this;this.delayTimer=setTimeout(function(){e.scrolling=!0},this.delay)},l.prototype.leave=function(t){this.scrolling=!1,clearTimeout(this.delayTimer)},l.prototype.over=function(t){var e,n;this.scrolling&&("top"===t?(e=(this.topLimit-this.y)/this.scrollMargin,n=e*(this.scrollDeltaMax-this.scrollDeltaMin)+this.scrollDeltaMin,this.element.scrollTop-=n):"bottom"===t&&(e=(this.y-this.bottomLimit)/this.scrollMargin,n=e*(this.scrollDeltaMax-this.scrollDeltaMin)+this.scrollDeltaMin,this.element.scrollTop+=n))},l.prototype.updateZone=function(t){this.zone!==t&&(this.leave(this.zone),this.enter(t)),this.zone=t,this.over(t)},t.utils.extend(t.bindingHandlers,{dropZone:{init:function(e,i,r,o,s){var d=t.utils.unwrapObservable(i()),l=[];d.accepts?l=[].concat(d.accepts):l.push(d.name),n(e,"drop-zone",!0);var u=d.data||s&&s.$data,h=new a({element:e,data:u,drop:d.drop,dragEnter:d.dragEnter,dragOver:d.dragOver,dragLeave:d.dragLeave});l.forEach(function(t){c[t]=c[t]||[],c[t].push(h)}),t.utils.domNodeDisposal.addDisposeCallback(e,function(){h.leave(),l.forEach(function(t){c[t].splice(c[t].indexOf(h),1)})})}},dragEvents:{init:function(e,n,i,r,a){var s=t.utils.unwrapObservable(n()),d=s.name;u[d]=u[d]||[];var l=s.data||a&&a.$data,c=new o({element:e,data:l,dragEnter:s.dragEnter,dragOver:s.dragOver,dragLeave:s.dragLeave});u[d].push(c),t.utils.domNodeDisposal.addDisposeCallback(e,function(){c.leave(),u[d].splice(u[d].indexOf(c),1)})}},dragZone:{init:function(i,r,o,a,l){function h(){var t=i.cloneNode(!0);i.parentNode.appendChild(t);var e=window.getComputedStyle(i,null);return t.style.height=e.getPropertyValue("height"),t.style.width=e.getPropertyValue("width"),t.style.opacity=.7,t.style.filter="alpha(opacity=70)",t}function p(){var e=document.createElement("div");document.body.appendChild(e);var n="data"in f?l.createChildContext(f.data):l;return t.renderTemplate(f.element,n,{},e),e}function m(){return!1}var f=t.utils.unwrapObservable(r()),v=f.name,g="number"==typeof f.dragDistance?f.dragDistance:10;c[v]=c[v]||[],u[v]=u[v]||[];var y=f.data||l&&l.$data,E=new d({element:i,name:v,data:y,dragStart:f.dragStart,dragEnd:f.dragEnd});i.addEventListener("selectstart",function(t){if("input"!==t.target.tagName.toLowerCase())return!1},!0),n(i,"draggable",!0),i.addEventListener("mousedown",function(t){function i(i){function a(t){E.drag(t);var e=E.dropRejected();e!==v&&(n(c,"drop-rejected",e),c.style.cursor=e?"no-drop":"move",v=e),u=setTimeout(function(){a(t)},100)}function d(t){return clearTimeout(u),l&&l.remove(),c.parentNode.removeChild(c),E.cancelDrag(t),!0}if(document.removeEventListener("mouseup",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("mousemove",o,!0),E.startDrag(t)===!1)return!1;var l=null;void 0===f.element&&(l=new s(h()));var c=document.createElement("div");c.className="drag-overlay",c.setAttribute("unselectable","on"),c.style.zIndex=9999,c.style.position="fixed",c.style.top=0,c.style.left=0,c.style.right=0,c.style.bottom=0,c.style.cursor="move",c.style.backgroundColor="white",c.style.opacity=0,c.style.filter="alpha(opacity=0)",c.style.userSelect="none",c.style.webkitUserSelect="none",c.style.MozUserSelect="none",c.style.msUserSelect="none",c.style.OUserSelect="none",c.addEventListener("selectstart",m),document.body.appendChild(c),f.element&&(l=new s(p())),l&&l.updatePosition(t);var u=null,v=!1;c.addEventListener("mousemove",function(t){return 1!==t.which?d(t):(clearTimeout(u),l&&l.updatePosition(t),a(t),!1)}),c.addEventListener("mouseup",function(t){clearTimeout(u),l&&l.remove(),c.parentNode.removeChild(c);var n=e({},t);return n.target=document.elementFromPoint(t.clientX,t.clientY),E.drop(n),document.removeEventListener("selectstart",m),!1})}function r(t){return document.removeEventListener("mouseup",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("mousemove",o,!0),document.removeEventListener("selectstart",m),!0}function o(e){if("input"!==e.target.tagName.toLowerCase()){return Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2))>g&&i(e),!1}}return 1!==t.which||(t.preventDefault(),document.addEventListener("selectstart",m,!0),document.addEventListener("mouseup",r,!0),document.addEventListener("click",r,!0),document.addEventListener("mousemove",o,!0),!0)},!0),t.utils.domNodeDisposal.addDisposeCallback(i,function(){document.removeEventListener("selectstart",m)})}},scrollableOnDragOver:{init:function(e,n,i){function r(){p.scroll(c,u)}function o(t){p=new l(e,d.delay),h=setInterval(r,100)}function a(t){c=t.pageX,u=t.pageY}function s(t){clearInterval(h)}var d=t.utils.unwrapObservable(n());"string"==typeof d&&(d={name:d}),d.delay=d.delay||0;var c,u,h,p=null;t.bindingHandlers.dragEvents.init(e,function(){return{name:d.name,dragEnter:o,dragOver:a,dragLeave:s}})}}})});
//# sourceMappingURL=knockout.dragdrop.min.js.map