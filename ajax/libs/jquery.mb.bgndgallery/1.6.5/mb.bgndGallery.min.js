!function(){if(!(8>jQuery.fn.jquery.split(".")[1])){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.msie=!1;var e=navigator.userAgent;jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var r,t;-1!=(t=e.indexOf("Opera"))?(jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=e.substring(t+6),-1!=(t=e.indexOf("Version"))&&(jQuery.browser.fullVersion=e.substring(t+8))):-1!=(t=e.indexOf("MSIE"))?(jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=e.substring(t+5)):-1!=(t=e.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=e.substring(t+7)):-1!=(t=e.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=e.substring(t+7),-1!=(t=e.indexOf("Version"))&&(jQuery.browser.fullVersion=e.substring(t+8))):-1!=(t=e.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=e.substring(t+8)):(r=e.lastIndexOf(" ")+1)<(t=e.lastIndexOf("/"))&&(jQuery.browser.name=e.substring(r,t),jQuery.browser.fullVersion=e.substring(t+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName)),-1!=(e=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,e)),-1!=(e=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,e)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}}(jQuery),jQuery.fn.CSSAnimate=function(e,r,t,o,n){return this.each(function(){var a=jQuery(this);if(0!==a.length&&e){if("function"==typeof r&&(n=r,r=jQuery.fx.speeds._default),"function"==typeof t&&(n=t,t=0),"function"==typeof o&&(n=o,o="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof r)for(var i in jQuery.fx.speeds){if(r==i){r=jQuery.fx.speeds[i];break}r=null}if(jQuery.support.transition){var s="",l="transitionEnd";jQuery.browser.webkit?(s="-webkit-",l="webkitTransitionEnd"):jQuery.browser.mozilla?(s="-moz-",l="transitionend"):jQuery.browser.opera?(s="-o-",l="otransitionend"):jQuery.browser.msie&&(s="-ms-",l="msTransitionEnd"),i=[];for(p in e){var u=p;"transform"===u&&(u=s+"transform",e[u]=e[p],delete e[p]),"transform-origin"===u&&(u=s+"transform-origin",e[u]=e[p],delete e[p]),i.push(u),a.css(u)||a.css(u,0)}p=i.join(","),a.css(s+"transition-property",p),a.css(s+"transition-duration",r+"ms"),a.css(s+"transition-delay",t+"ms"),a.css(s+"transition-timing-function",o),a.css(s+"backface-visibility","hidden"),setTimeout(function(){a.css(e)},0),a.on(l,function(e){return a.off(l),a.css(s+"transition",""),e.stopPropagation(),"function"==typeof n&&(a.called=!0,n()),!1})}else{for(var p in e)"transform"===p&&delete e[p],"transform-origin"===p&&delete e[p],"auto"===e[p]&&delete e[p];n&&"string"!=typeof n||(n="linear"),a.animate(e,r,n)}}})},jQuery.fn.CSSAnimateStop=function(){var e="",r="transitionEnd";jQuery.browser.webkit?(e="-webkit-",r="webkitTransitionEnd"):jQuery.browser.mozilla?(e="-moz-",r="transitionend"):jQuery.browser.opera?(e="-o-",r="otransitionend"):jQuery.browser.msie&&(e="-ms-",r="msTransitionEnd"),jQuery(this).css(e+"transition",""),jQuery(this).off(r)},jQuery.support.transition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),function(e){function r(e){var r=document.createElement("canvas"),t=r.getContext("2d"),o=e.width,n=e.height;r.width=o,r.height=n,t.drawImage(e,0,0);for(var a=t.getImageData(0,0,o,n),i=0;i<a.height;i++)for(var s=0;s<a.width;s++){var l=4*i*a.width+4*s,u=(a.data[l]+a.data[l+1]+a.data[l+2])/3;a.data[l]=u,a.data[l+1]=u,a.data[l+2]=u}return t.putImageData(a,0,0,0,0,a.width,a.height),r.toDataURL()}e.mbBgndGallery={name:"mb.bgndGallery",author:"Matteo Bicocchi",version:"1.6.5",defaults:{containment:"body",images:[],shuffle:!1,controls:null,effect:{enter:{left:0,opacity:0},exit:{left:0,opacity:0},enterTiming:"ease-in",exitTiming:"ease-in"},timer:4e3,raster:!1,effTimer:3e3,folderPath:!1,autoStart:!0,grayScale:!1,activateKeyboard:!0,preserveTop:!1,preserveWidth:!1,placeHolder:"",onStart:function(){},onChange:function(e,r){},onPause:function(e){},onPlay:function(e){},onNext:function(e){},onPrev:function(e){}},clear:!1,buildGallery:function(r){var t={};e.extend(t,e.mbBgndGallery.defaults,r),t.galleryID=(new Date).getTime();var o=e(t.containment).get(0);o.opt=t,o.opt.onStart&&o.opt.onStart(),o.opt.gallery=e("<div/>").attr({id:"bgndGallery_"+o.opt.galleryID}).addClass("mbBgndGallery");var n="body"==o.opt.containment?"fixed":"absolute";o.opt.gallery.css({position:n,top:0,let:0,width:"100%",height:"100%",overflow:"hidden"});var a=o.opt.containment;if("body"!=a&&""!=e(a).text().trim()){var i=e("<div/>").css({position:"absolute",minHeight:"100%",minWidth:"100%",zIndex:3});e(a).wrapInner(i),"static"==e(a).css("position")&&e(a).css("position","relative")}if(t.raster){var s=e("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"url("+t.raster+")",zIndex:1});t.gallery.append(s)}e(a).prepend(t.gallery),o.opt.folderPath&&0==o.opt.images.length&&(o.opt.images=jQuery.loadFromSystem(o.opt.folderPath));var l=o.opt.images;o.opt.shuffle&&(l=e.shuffle(l));var u=l.length,p=0;e.mbBgndGallery.preload(l[0],o),e(o.opt.gallery).on("imageLoaded_"+o.opt.galleryID,function(){return p++,p==u?void e(o.opt.gallery).off("imageLoaded_"+o.opt.galleryID):void e.mbBgndGallery.preload(o.opt.images[p],o)}),o.opt.imageCounter=0,e.mbBgndGallery.changePhoto(o.opt.images[o.opt.imageCounter],o),t.autoStart||(o.opt.paused=!0,e(o.opt.gallery).trigger("paused")),e(o.opt.gallery).on("imageReady_"+o.opt.galleryID,function(){o.opt.paused||e.mbBgndGallery.play(o)}),e(window).on("resize",function(){var r=e("#bgndGallery_"+o.opt.galleryID+" img");e.mbBgndGallery.checkSize(r,o)});var d=o.opt.controls;if(d){var g=e(o.opt.controls).find(".counter");g.html(o.opt.imageCounter+1+" / "+o.opt.images.length),e.mbBgndGallery.buildControls(d,o),e(o.opt.containment).on("paused",function(){e(o.opt.controls).find(".play").show(),e(o.opt.controls).find(".pause").hide()}),e(o.opt.containment).on("play",function(){e(o.opt.controls).find(".play").hide(),e(o.opt.controls).find(".pause").show()})}},normalizeCss:function(r){var t=jQuery.extend(!0,{},r),o="",n="transitionEnd";e.browser.webkit?(o="-webkit-",n="webkitTransitionEnd"):e.browser.mozilla?(o="-moz-",n="transitionend"):e.browser.opera?(o="-o-",n="oTransitionEnd"):e.browser.msie&&(o="-ms-",n="msTransitionEnd");for(var a in t)"transform"===a&&(t[o+"transform"]=t[a],delete t[a]),"transform-origin"===a&&(t[o+"transform-origin"]=r[a],delete t[a]);return t},preload:function(r,t){if(e.mbBgndGallery.clear)return void e(t.opt.gallery).remove();e("<img/>").load(function(){e(t.opt.gallery).trigger("imageLoaded_"+t.opt.galleryID)}).attr("src",r)},checkSize:function(r,t){if(!e.mbBgndGallery.changing)return e.mbBgndGallery.clear?void e(t.opt.gallery).remove():r.each(function(){var r=e(this),o=r.attr("w"),n=r.attr("h"),a="body"==t.opt.containment?window:t.opt.containment,i=o/n,s=e(a).width()/e(a).height();i>=s?(r.css("height","100%"),r.css("width","auto")):(r.css("width","100%"),r.css("height","auto")),r.css("margin-left",(e(a).width()-r.width())/2),t.opt.preserveTop||r.css("margin-top",(e(a).height()-r.height())/2),t.opt.preserveWidth&&r.css({width:"100%",height:"auto",left:0,marginLeft:0})})},changePhoto:function(r,t){if(e.mbBgndGallery.clear)return void e(t.opt.gallery).remove();e.mbBgndGallery.changing=!0,t.opt.onChange&&t.opt.onChange(t.opt,t.opt.imageCounter);var o=e("<img/>").hide().load(function(){var r=e(this),o=e("<div/>").css({position:"absolute",top:-5e3});o.append(r),e("body").append(o),r.attr("w",r.width()),r.attr("h",r.height()),o.remove(),e("#bgndGallery_"+t.opt.galleryID+" img").CSSAnimate(t.opt.effect.exit,t.opt.effTimer,0,t.opt.effect.exitTiming,function(){var r=e("#bgndGallery_"+t.opt.galleryID+" img").not(":first");setTimeout(function(){r.remove()},3e3)}),r.css({position:"absolute"}),e("#bgndGallery_"+t.opt.galleryID).prepend(r),e.mbBgndGallery.changing=!1,e.mbBgndGallery.checkSize(r,t),r.css(e.mbBgndGallery.normalizeCss(t.opt.effect.enter)).show().CSSAnimate({top:0,left:0,opacity:1,transform:"scale(1) rotate(0deg)"},t.opt.effTimer,0,t.opt.effect.enterTiming,function(){e(t.opt.gallery).trigger("imageReady_"+t.opt.galleryID)})}).attr("src",r);o.error(function(){var r=e(this);r.attr("src",t.opt.placeHolder)}),t.opt.grayScale&&o.greyScale();var n=e(t.opt.controls).find(".counter");n.html(t.opt.imageCounter+1+" / "+t.opt.images.length)},play:function(r){return e.mbBgndGallery.clear?void e(r.opt.gallery).remove():(r.opt.onPlay&&r.opt.onPlay(r.opt),r.opt.changing=setTimeout(function(){r.opt.paused||(r.opt.onNext&&r.opt.onNext(r.opt),r.opt.imageCounter>=r.opt.images.length-1&&(r.opt.imageCounter=-1),r.opt.imageCounter++,e.mbBgndGallery.changePhoto(r.opt.images[r.opt.imageCounter],e(r.opt.containment).get(0)))},r.opt.paused?0:r.opt.timer),void e(r.opt.gallery).trigger("play"))},pause:function(r){return e.mbBgndGallery.clear?void e(r.opt.gallery).remove():(clearTimeout(r.opt.changing),r.opt.paused=!0,e(r.opt.gallery).trigger("paused"),void(r.opt.onPause&&r.opt.onPause(r.opt)))},next:function(r){return e.mbBgndGallery.clear?void e(r.opt.gallery).remove():(r.opt.onNext&&r.opt.onNext(r.opt),e.mbBgndGallery.pause(r),clearTimeout(r.opt.changing),r.opt.imageCounter==r.opt.images.length-1&&(r.opt.imageCounter=-1),r.opt.imageCounter++,void e.mbBgndGallery.changePhoto(r.opt.images[r.opt.imageCounter],r))},prev:function(r){return e.mbBgndGallery.clear?void e(r.opt.gallery).remove():(r.opt.onPrev&&r.opt.onPrev(r.opt),e.mbBgndGallery.pause(r),clearTimeout(r.opt.changing),0==r.opt.imageCounter&&(r.opt.imageCounter=r.opt.images.length),r.opt.imageCounter--,void e.mbBgndGallery.changePhoto(r.opt.images[r.opt.imageCounter],r))},loader:{show:function(){},hide:function(){}},keyboard:function(r){e(document).on("keydown.bgndGallery",function(t){switch(t.keyCode){case 32:r.opt.paused?(e.mbBgndGallery.play(r),r.opt.paused=!1):(r.opt.paused=!0,e.mbBgndGallery.pause(r)),t.preventDefault();break;case 39:e.mbBgndGallery.next(r),t.preventDefault();break;case 37:e.mbBgndGallery.prev(r),t.preventDefault()}})},buildControls:function(r,t){var o=e(r).find(".pause"),n=e(r).find(".play"),a=e(r).find(".next"),i=e(r).find(".prev");t.opt.autoStart&&n.hide(),o.on("click",function(){e.mbBgndGallery.pause(t),e(this).hide(),n.show()}),n.on("click",function(){t.opt.paused&&(clearTimeout(t.opt.changing),e.mbBgndGallery.play(t),t.opt.paused=!1)}),a.on("click",function(){e.mbBgndGallery.next(t),o.hide(),n.show()}),i.on("click",function(){e.mbBgndGallery.prev(t),o.hide(),n.show()}),t.opt.activateKeyboard&&e.mbBgndGallery.keyboard(t)},changeGallery:function(r,t){e(r.gallery).fadeOut(),e.mbBgndGallery.pause(r),r.opt.images=t;var o=r.opt.images,n=o.length,a=0;e.mbBgndGallery.preload(o[0],r),e(r.opt.gallery).on("imageLoaded_"+r.opt.galleryID,function(){return a++,a==n?(e(r.opt.gallery).off("imageLoaded_"+r.opt.galleryID),e(r.gallery).fadeIn(),e.mbBgndGallery.play(r),void(r.opt.paused=!1)):void e.mbBgndGallery.preload(o[a],r)}),r.opt.imageCounter=0}},jQuery.loadFromSystem=function(r,t){if(r){t||(t=["jpg","jpeg","png"]);var o=[];return e.ajax({url:r,async:!1,success:function(n){var a=e(n),i=a.find("[href]");i.each(function(){for(var n in t)e(this).attr("href").indexOf(t[n])>=0&&o.push(r+e(this).attr("href")),o=e.unique(o)}),a.remove()}}),o}},e.fn.greyScale=function(){return this.each(function(){e.browser.msie&&e.browser.version<9?this.style.filter="progid:DXImageTransform.Microsoft.BasicImage(grayScale=1)":this.src=r(this)})},e.shuffle=function(e){for(var r=e.slice(),t=r.length,o=t;o--;){var n=parseInt(Math.random()*t),a=r[o];r[o]=r[n],r[n]=a}return r}}(jQuery);