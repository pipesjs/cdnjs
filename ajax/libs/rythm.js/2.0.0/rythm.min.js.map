{"version":3,"sources":["rythm.js"],"names":["global","factory","exports","module","define","amd","Rythm","this","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Analyser","_this","initialise","analyser","fftSize","reset","hzHistory","frequences","Uint8Array","frequencyBinCount","analyse","getByteFrequencyData","forEach","frequence","maxValueHistory","shift","push","getRangeAverageRatio","startingValue","nbValue","total","getFrequenceRatio","index","min","max","value","scale","actualValue","percentage","startingScale","pulseRatio","Analyser$1","Player","createSourceFromAudioElement","audioElement","audioCtx","createMediaElementSource","connectExternalAudioElement","audio","currentInputType","inputTypeList","source","connectSource","connect","gain","destination","addEventListener","stop","setMusic","trackUrl","Audio","setGain","plugMicrophone","getMicrophoneStream","then","stream","createMediaStreamSource","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","Promise","resolve","reject","medias","error","start","play","pause","getAudioTracks","enabled","browserAudioCtx","AudioContext","webkitAudioContext","createAnalyser","createGain","TRACK","STREAM","EXTERNAL","player","pulse","elem","options","arguments","undefined","isNaN","style","transform","shake","direction","twist","jump","vanish","reverse","opacity","color","from","to","scaleR","scaleG","scaleB","backgroundColor","Math","floor","Dancer","dances","registerDance","type","dance","className","ratio","elements","document","getElementsByClassName","Array","dancer","Rythm$1","audioelement","url","addRythm","elementClass","startValue","rythms","stopped","renderRythm","mappingItem","requestAnimationFrame"],"mappings":"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","file":"rythm.min.js"}