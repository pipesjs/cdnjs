!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.planout=e():t.planout=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),u=i(o),a=n(13),s=i(a),f=n(18),l=i(f),c=n(15),h=i(c),p=n(16),g=r(p),y=n(2),v=i(y),d=n(17),m=i(d);e.default={Namespace:g,Assignment:v.default,Interpreter:s.default,Experiment:u.default,ExperimentSetup:m.default,Ops:{Random:l.default,Core:h.default}},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),a=r(u),s=n(5),f=function(){function t(e){i(this,t),this.inputs=e,this._exposureLogged=!1,this._salt=null,this._inExperiment=!0,this.name=this.getDefaultExperimentName(),this._autoExposureLog=!0,this.setup(),this._assignment=new a.default(this.getSalt()),this._assigned=!1}return o(t,[{key:"getDefaultExperimentName",value:function(){if((0,s.isObject)(this)&&this.constructor&&this!==this.window){var t=this.constructor.toString().match(/function\s*(\w+)/);if(t&&2===t.length)return t[1]}return"GenericExperiment"}},{key:"getDefaultParamNames",value:function(){var t=this.assign.toString(),e=t.split(".set(");return e.splice(0,1),(0,s.map)(e,function(t){var e=(0,s.trimTrailingWhitespace)(t.split(",")[0]);return e.substr(1,e.length-2)})}},{key:"requireAssignment",value:function(){this._assigned||this._assign()}},{key:"requireExposureLogging",value:function(t){this.shouldLogExposure(t)&&this.logExposure()}},{key:"_assign",value:function(){this.configureLogger();var t=this.assign(this._assignment,this.inputs);t||void 0===t?this._inExperiment=!0:this._inExperiment=!1,this._assigned=!0}},{key:"setup",value:function(){}},{key:"inExperiment",value:function(){return this._inExperiment}},{key:"addOverride",value:function(t,e){this._assignment.addOverride(t,e)}},{key:"setOverrides",value:function(t){this._assignment.setOverrides(t);var e=this._assignment.getOverrides(),n=this;(0,s.forEach)(Object.keys(e),function(t){void 0!==n.inputs[t]&&(n.inputs[t]=e[t])})}},{key:"getSalt",value:function(){return this._salt?this._salt:this.name}},{key:"setSalt",value:function(t){this._salt=t,this._assignment&&(this._assignment.experimentSalt=t)}},{key:"getName",value:function(){return this.name}},{key:"assign",value:function(t,e){throw"IMPLEMENT assign"}},{key:"getParamNames",value:function(){throw"IMPLEMENT getParamNames"}},{key:"shouldFetchExperimentParameter",value:function(t){var e=this.getParamNames();return e.indexOf(t)>=0}},{key:"setName",value:function(t){var e=/\s+/g;this.name=t.replace(e,"-"),this._assignment&&(this._assignment.experimentSalt=this.getSalt())}},{key:"__asBlob",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={name:this.getName(),time:(new Date).getTime()/1e3,salt:this.getSalt(),inputs:this.inputs,params:this._assignment.getParams()};return(0,s.extend)(e,t),e}},{key:"setAutoExposureLogging",value:function(t){this._autoExposureLog=t}},{key:"getParams",value:function(){return this.requireAssignment(),this.requireExposureLogging(),this._assignment.getParams()}},{key:"get",value:function(t,e){return this.requireAssignment(),this.requireExposureLogging(t),this._assignment.get(t,e)}},{key:"toString",value:function(){return this.requireAssignment(),this.requireExposureLogging(),JSON.stringify(this.__asBlob())}},{key:"logExposure",value:function(t){this.inExperiment()&&(this._exposureLogged=!0,this.logEvent("exposure",t))}},{key:"shouldLogExposure",value:function(t){return!(void 0!==t&&!this.shouldFetchExperimentParameter(t))&&(this._autoExposureLog&&!this.previouslyLogged())}},{key:"logEvent",value:function(t,e){if(this.inExperiment()){var n;n=e?{event:t,extra_data:(0,s.shallowCopy)(e)}:{event:t},this.log(this.__asBlob(n))}}},{key:"configureLogger",value:function(){throw"IMPLEMENT configureLogger"}},{key:"log",value:function(t){throw"IMPLEMENT log"}},{key:"previouslyLogged",value:function(){throw"IMPLEMENT previouslyLogged"}}]),t}();e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),u=n(5),a=function(){function t(e,n){r(this,t),n||(n={}),this.experimentSalt=e,this._overrides=(0,u.shallowCopy)(n),this._data=(0,u.shallowCopy)(n),this.saltSeparator="."}return i(t,[{key:"evaluate",value:function(t){return t}},{key:"getOverrides",value:function(){return this._overrides}},{key:"addOverride",value:function(t,e){this._overrides[t]=e,this._data[t]=e}},{key:"setOverrides",value:function(t){this._overrides=(0,u.shallowCopy)(t);var e=this;(0,u.forEach)(Object.keys(this._overrides),function(t){e._data[t]=e._overrides[t]})}},{key:"set",value:function(t,e){return"_data"===t?void(this._data=e):"_overrides"===t?void(this._overrides=e):"experimentSalt"===t?void(this.experimentSalt=e):"saltSeparator"===t?void(this.saltSeparator=e):void((0,u.hasKey)(this._overrides,t)||(e instanceof o.PlanOutOpRandom?(e.args.salt||(e.args.salt=t),this._data[t]=e.execute(this)):this._data[t]=e))}},{key:"get",value:function(t,e){if("_data"===t)return this._data;if("_overrides"===t)return this._overrides;if("experimentSalt"===t)return this.experimentSalt;if("saltSeparator"===t)return this.saltSeparator;var n=this._data[t];return null===n||void 0===n?e:n}},{key:"getParams",value:function(){return this._data}},{key:"del",value:function(t){delete this._data[t]}},{key:"toString",value:function(){return String(this._data)}},{key:"length",value:function(){return Object.keys(this._data).length}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(4),f=n(6),l=r(f),c=n(5),h=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.LONG_SCALE=0xfffffffffffff,n}return u(e,t),a(e,[{key:"compatHashCalculation",value:function(t){return parseInt(t.substr(0,13),16)}},{key:"compatZeroToOneCalculation",value:function(t){return this.getHash(t)/this.LONG_SCALE}},{key:"getUnit",value:function(t){var e=this.getArgMixed("unit");return(0,c.isArray)(e)||(e=[e]),t&&e.push(t),e}},{key:"getUniform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments[2],r=this.compatZeroToOneCalculation(n);return r*(e-t)+t}},{key:"getHash",value:function(t){var e;if(this.args.full_salt)e=this.getArgString("full_salt")+".";else{var n=this.getArgString("salt");e=this.mapper.get("experimentSalt")+"."+n+this.mapper.get("saltSeparator")}var r=this.getUnit(t).map(function(t){return String(t)}).join("."),i=e+r,o=(0,l.default)(i);return this.compatHashCalculation(o)}}]),e}(s.PlanOutOpSimple),p=function(t){return function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"simpleExecute",value:function(){var t=this.getArgNumber("min"),e=this.getArgNumber("max");return this.getUniform(t,e)}}]),e}(t)},g=function(t){return function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"compatRandomIntegerCalculation",value:function(t,e){return(this.getHash()+t)%(e-t+1)}},{key:"simpleExecute",value:function(){var t=this.getArgNumber("min"),e=this.getArgNumber("max");return this.compatRandomIntegerCalculation(t,e)}}]),e}(t)},y=function(t){return function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"simpleExecute",value:function(){var t=this.getArgNumber("p");if(t<0||t>1)throw"Invalid probability";return this.getUniform(0,1)<=t?1:0}}]),e}(t)},v=function(t){return function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"simpleExecute",value:function(){var t=this.getArgNumber("p"),e=this.getArgList("choices");if(t<0||t>1)throw"Invalid probability";if(0==e.length)return[];for(var n=[],r=0;r<e.length;r++){var i=e[r];this.getUniform(0,1,i)<=t&&n.push(i)}return n}}]),e}(t)},d=function(t){return function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"compatRandomIndexCalculation",value:function(t){return this.getHash()%t.length}},{key:"simpleExecute",value:function(){var t=this.getArgList("choices");if(0===t.length)return[];var e=this.compatRandomIndexCalculation(t);return t[e]}}]),e}(t)},m=function(t){return function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"simpleExecute",value:function(){var t=this.getArgList("choices"),e=this.getArgList("weights");if(0===t.length)return[];var n=0,r=e.map(function(t){return n+=t}),i=this.getUniform(0,n);return(0,c.reduce)(r,function(e,n,r){return e?e:i<=n?t[r]:e},null)}}]),e}(t)},_=function(t){return function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"compatSampleIndexCalculation",value:function(t){return this.getHash(t)%(t+1)}},{key:"compatAllowSampleStoppingPoint",value:function(){return!0}},{key:"sample",value:function(t,e){for(var n=t.length,r=n-e,i=this.compatAllowSampleStoppingPoint(),o=n-1;o>0;o--){var u=this.compatSampleIndexCalculation(o),a=t[o];if(t[o]=t[u],t[u]=a,i&&r===o)return t.slice(o,n)}return t.slice(0,e)}},{key:"simpleExecute",value:function(){var t=(0,c.shallowCopy)(this.getArgList("choices")),e=0;return e=void 0!==this.args.draws?this.getArgNumber("draws"):t.length,this.sample(t,e)}}]),e}(t)};e.default={PlanOutOpRandom:h,SampleBuilder:_,Sample:_(h),WeightedChoiceBuilder:m,WeightedChoice:m(h),UniformChoiceBuilder:d,UniformChoice:d(h),BernoulliFilterBuilder:v,BernoulliFilter:v(h),BernoulliTrialBuilder:y,BernoulliTrial:y(h),RandomIntegerBuilder:g,RandomInteger:g(h),RandomFloatBuilder:p,RandomFloat:p(h)},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PlanOutOpUnary=e.PlanOutOpBinary=e.PlanOutOpCommutative=e.PlanOutOpSimple=e.PlanOutOp=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),s=function(){function t(e){o(this,t),this.args=e}return u(t,[{key:"execute",value:function(t){throw"Implement the execute function"}},{key:"dumpArgs",value:function(){console.log(this.args)}},{key:"getArgMixed",value:function(t){if(void 0===this.args[t])throw"Missing argument "+t;return this.args[t]}},{key:"getArgNumber",value:function(t){var e=this.getArgMixed(t);if("number"!=typeof e)throw t+" is not a number.";return e}},{key:"getArgString",value:function(t){var e=this.getArgMixed(t);if("string"!=typeof e)throw t+" is not a string.";return e}},{key:"getArgList",value:function(t){var e=this.getArgMixed(t);if("[object Array]"!==Object.prototype.toString.call(e))throw t+" is not a list";return e}},{key:"getArgObject",value:function(t){var e=this.getArgMixed(t);if("[object Object]"!==Object.prototype.toString.call(e))throw t+" is not an object.";return e}},{key:"getArgIndexish",value:function(t){var e=this.getArgMixed(t),n=Object.prototype.toString.call(e);if("[object Object]"!==n&&"[object Array]"!==n)throw t+" is not an list or object.";return e}}]),t}(),f=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"execute",value:function(t){this.mapper=t;var e=this;return(0,a.forEach)(Object.keys(this.args),function(n){e.args[n]=t.evaluate(e.args[n])}),this.simpleExecute()}}]),e}(s),l=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"simpleExecute",value:function(){return this.unaryExecute(this.getArgMixed("value"))}},{key:"getUnaryString",value:function(){return this.args.op}},{key:"unaryExecute",value:function(t){throw"implement unaryExecute"}}]),e}(f),c=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"simpleExecute",value:function(){var t=this.getArgMixed("left"),e=this.getArgMixed("right");return this.binaryExecute(t,e)}},{key:"getInfixString",value:function(){return this.args.op}},{key:"binaryExecute",value:function(t,e){throw"implement binaryExecute"}}]),e}(f),h=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,[{key:"simpleExecute",value:function(){return this.commutativeExecute(this.getArgList("values"))}},{key:"getCommutativeString",value:function(){return this.args.op}},{key:"commutativeExecute",value:function(t){throw"implement commutativeExecute"}}]),e}(f);e.PlanOutOp=s,e.PlanOutOpSimple=f,e.PlanOutOpCommutative=h,e.PlanOutOpBinary=c,e.PlanOutOpUnary=l},function(t,e){"use strict";function n(t,e){var n=j.length,r=t.constructor,i=f(r)&&r.prototype||Object.Prototype,o="constructor";for(k(t,o)&&!R(e,o)&&e.push(o);n--;)o=j[n],o in t&&t[o]!==i[o]&&!R(e,o)&&e.push(o)}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t){return t.replace(/^\s+|\s+$/g,"")},o=function(t){var e,n="undefined"!=typeof location,r="undefined"!=typeof window;if(n){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=i.exec(location.search);e=null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}else e="";return null!==e&&void 0!==e&&0!==e.length||!r||void 0===window.localStorage||null===window.localStorage?e:window.localStorage.getItem(t)},u=function t(e){var n=e;if(e&&"object"===("undefined"==typeof e?"undefined":r(e))){n="[object Array]"===Object.prototype.toString.call(e)?[]:{};for(var i in e)n[i]=t(e[i])}return n},a=function(t){var e="undefined"==typeof t?"undefined":r(t);return"function"===e||"object"===e&&!!t},s=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},f=function(t){return"function"==typeof t||!1},l=function t(e){if(!a(e))return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)k(e,r)&&t.push(r);return T&&n(e,t),t},c=function(t){if(!a(t))return[];var e=[];for(var r in t)e.push(r);return T&&n(t,e),e},h=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],u=t(o),a=u.length,s=0;s<a;s++){var f=u[s];e&&void 0!==n[f]||(n[f]=o[f])}return n}},p=h(c),g=h(l),y=function(t){return t},v=function(t,e){var n=n(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var u=n[o];if(e[u]!==i[u]||!(u in i))return!1}return!0},d=function(t){return t=g({},t),function(e){return v(e,t)}},m=function(t,e,n){return null==t?y:f(t)?_(t,e,n):a(t)?d(t):x(t)},_=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){e=_(e,n);var r,i;if(S(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=l(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},O=function(t,e,n){e=m(e,n);for(var r=!S(t)&&l(t),i=(r||t).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=e(t[a],a,t)}return o},w=function(t,e,n,r){e=_(e,r,4);var i=!S(t)&&l(t),o=(i||t).length,u=0;for(arguments.length<3&&(n=t[i?i[u]:u],u+=1);u>=0&&u<o;u++){var a=i?i[u]:u;n=e(n,t[a],a,t)}return n},E=function(t){return a(t)?s(t)?t.slice():p({},t):t},x=function(t){return function(e){return null==e?void 0:e[t]}},P=Math.pow(2,53)-1,A=x("length"),S=function(t){var e=A(t);return"number"==typeof e&&e>=0&&e<=P},k=function(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)},T=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],R=function(t,e,n,r){return S(t)||(t=N(t)),("number"!=typeof n||r)&&(n=0),t.indexOf(e)>=0},N=function(t){for(var e=l(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},B=function(t){for(var e=[],n=0;n<t;n++)e.push(n);return e},L=function(t,e){return"undefined"!=typeof t[e]};e.default={deepCopy:u,map:O,reduce:w,getParameterByName:o,forEach:b,isFunction:f,trimTrailingWhitespace:i,hasKey:L,shallowCopy:E,extend:p,isObject:a,isArray:s,range:B},t.exports=e.default},function(t,e,n){(function(e){!function(){var r=n(11),i=n(12).utf8,o=n(12).bin,u=function(t){t.constructor==String?t=i.stringToBytes(t):"undefined"!=typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());var n=r.bytesToWords(t),o=8*t.length,u=[],a=1732584193,s=-271733879,f=-1732584194,l=271733878,c=-1009589776;n[o>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+15]=o;for(var h=0;h<n.length;h+=16){for(var p=a,g=s,y=f,v=l,d=c,m=0;m<80;m++){if(m<16)u[m]=n[h+m];else{var _=u[m-3]^u[m-8]^u[m-14]^u[m-16];u[m]=_<<1|_>>>31}var b=(a<<5|a>>>27)+c+(u[m]>>>0)+(m<20?(s&f|~s&l)+1518500249:m<40?(s^f^l)+1859775393:m<60?(s&f|s&l|f&l)-1894007588:(s^f^l)-899497514);c=l,l=f,f=s<<30|s>>>2,s=a,a=b}a+=p,s+=g,f+=y,l+=v,c+=d}return[a,s,f,l,c]},a=function(t,e){var n=r.wordsToBytes(u(t));return e&&e.asBytes?n:e&&e.asString?o.bytesToString(n):r.bytesToHex(n)};a._blocksize=16,a._digestsize=20,t.exports=a}()}).call(e,n(7).Buffer)},function(t,e,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=u.prototype):(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?c(t,e,n):g(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return s(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function l(t,e){if(s(e),t=o(t,e<0?0:0|y(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n);t=o(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function h(t,e){var n=e.length<0?0:0|y(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=u.prototype):t=h(t,e),t}function g(t,e){if(u.isBuffer(e)){var n=0|y(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||K(e.length)?o(t,0):h(t,e);if("Buffer"===e.type&&Q(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),u.alloc(+t)}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return H(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return N(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:O(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):O(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function O(t,e,n,r,i){function o(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}var u=1,a=t.length,s=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;u=2,a/=2,s/=2,n/=2}var f;if(i){var l=-1;for(f=n;f<a;f++)if(o(t,f)===o(e,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===s)return l*u}else l!==-1&&(f-=f-l),l=-1}else for(n+s>a&&(n=a-s),f=n;f>=0;f--){for(var c=!0,h=0;h<s;h++)if(o(t,f+h)!==o(e,h)){c=!1;break}if(c)return f}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var u=0;u<r;++u){var a=parseInt(e.substr(2*u,2),16);if(isNaN(a))return u;t[n+u]=a}return u}function E(t,e,n,r){return Z(H(e,t.length-n),t,n,r)}function x(t,e,n,r){return Z(W(e),t,n,r)}function P(t,e,n,r){return x(t,e,n,r)}function A(t,e,n,r){return Z(V(e),t,n,r)}function S(t,e,n,r){return Z($(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],u=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var s,f,l,c;switch(a){case 1:o<128&&(u=o);break;case 2:s=t[i+1],128===(192&s)&&(c=(31&o)<<6|63&s,c>127&&(u=c));break;case 3:s=t[i+1],f=t[i+2],128===(192&s)&&128===(192&f)&&(c=(15&o)<<12|(63&s)<<6|63&f,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:s=t[i+1],f=t[i+2],l=t[i+3],128===(192&s)&&128===(192&f)&&128===(192&l)&&(c=(15&o)<<18|(63&s)<<12|(63&f)<<6|63&l,c>65535&&c<1114112&&(u=c))}}null===u?(u=65533,a=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=a}return j(r)}function j(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function N(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function B(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=z(t[o]);return i}function L(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||D(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,n,r,23,4),n+4}function Y(t,e,n,r,i){return i||D(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,n,r,52,8),n+8}function q(t){if(t=G(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],u=0;u<r;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(u+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function $(t,e){for(var n,r,i,o=[],u=0;u<t.length&&!((e-=2)<0);++u)n=t.charCodeAt(u),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function V(t){return J.toByteArray(q(t))}function Z(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function K(t){return t!==t}var J=n(8),X=n(9),Q=n(10);e.Buffer=u,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=i(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return a(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return f(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),f=this.slice(r,i),l=t.slice(e,n),c=0;c<s;++c)if(f[c]!==l[c]){o=f[c],a=l[c];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},u.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return P(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;u.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r;if(u.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},u.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),X.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),X.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),X.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),X.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;C(this,t,e,n,i,0)}var o=1,u=0;for(this[e]=255&t;++u<n&&(o*=256);)this[e+u]=t/o&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;C(this,t,e,n,i,0)}var o=n-1,u=1;for(this[e+o]=255&t;--o>=0&&(u*=256);)this[e+o]=t/u&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=0,u=1,a=0;for(this[e]=255&t;++o<n&&(u*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/u>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=n-1,u=1,a=0;for(this[e+o]=255&t;--o>=0&&(u*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/u>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return Y(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return Y(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:H(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function i(t){var e,r,i,o,u,a,s=t.length;u=n(t),a=new l(3*s/4-u),i=u>0?s-4:s;var c=0;for(e=0,r=0;e<i;e+=4,r+=3)o=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===u?(o=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,a[c++]=255&o):1===u&&(o=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}function o(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function u(t,e,n){for(var r,i=[],u=e;u<n;u+=3)r=(t[u]<<16)+(t[u+1]<<8)+t[u+2],i.push(o(r));return i.join("")}function a(t){for(var e,n=t.length,r=n%3,i="",o=[],a=16383,f=0,l=n-r;f<l;f+=a)o.push(u(t,f,f+a>l?l:f+a));return 1===r?(e=t[n-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=r,e.toByteArray=i,e.fromByteArray=a;for(var s=[],f=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=c.length;h<p;++h)s[h]=c[h],f[c.charCodeAt(h)]=h;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,u,a=8*i-r-1,s=(1<<a)-1,f=s>>1,l=-7,c=n?i-1:0,h=n?-1:1,p=t[e+c];for(c+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=h,l-=8);for(u=o&(1<<-l)-1,o>>=-l,l+=r;l>0;u=256*u+t[e+c],c+=h,l-=8);if(0===o)o=1-f;else{if(o===s)return u?NaN:(p?-1:1)*(1/0);u+=Math.pow(2,r),o-=f}return(p?-1:1)*u*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var u,a,s,f=8*o-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,g=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=l):(u=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-u))<1&&(u--,s*=2),e+=u+c>=1?h/s:h*Math.pow(2,1-c),e*s>=2&&(u++,s/=2),u+c>=l?(a=0,u=l):u+c>=1?(a=(e*s-1)*Math.pow(2,i),u+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),u=0));i>=8;t[n+p]=255&a,p+=g,a/=256,i-=8);for(u=u<<i|a,f+=i;f>0;t[n+p]=255&u,p+=g,u/=256,f-=8);t[n+p-g]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),a=r(u),s=n(14),f=n(5),l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global_salt",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3];i(this,t),this._serialization=(0,f.deepCopy)(e),o?this._env=o:this._env=new a.default(n),this.experimentSalt=this._experimentSalt=n,this._evaluated=!1,this._inExperiment=!1,this._inputs=(0,f.shallowCopy)(r)}return o(t,[{key:"inExperiment",value:function(){return this._inExperiment}},{key:"setEnv",value:function(t){return this._env=(0,f.deepCopy)(t),this}},{key:"has",value:function(t){return this._env[t]}},{key:"get",value:function(t,e){var n=this._inputs[t];null!==n&&void 0!==n||(n=e);var r=this._env.get(t);return void 0!==r&&null!==r?r:n}},{key:"getParams",value:function(){if(!this._evaluated){try{this.evaluate(this._serialization)}catch(t){t instanceof s.StopPlanOutException&&(this._inExperiment=t.inExperiment)}this._evaluated=!0}return this._env.getParams()}},{key:"set",value:function(t,e){return this._env.set(t,e),this}},{key:"getSaltSeparator",value:function(){return this._env.saltSeparator}},{key:"setOverrides",value:function(t){return this._env.setOverrides(t),this}},{key:"getOverrides",value:function(){return this._env.getOverrides()}},{key:"hasOverride",value:function(t){var e=this.getOverrides();return e&&void 0!==e[t]}},{key:"registerCustomOperators",value:function(t){(0,s.registerOperators)(t)}},{key:"evaluate",value:function(t){if((0,f.isObject)(t)&&t.op)return(0,s.operatorInstance)(t).execute(this);if((0,f.isArray)(t)){var e=this;return(0,f.map)(t,function(t){return e.evaluate(t)})}return t}}]),t}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.registerOperators=e.StopPlanOutException=e.operatorInstance=e.isOperator=e.initFactory=e.operators=void 0;var o=n(15),u=r(o),a=n(3),s=r(a),f=n(5),l=function(){return{literal:u.Literal,get:u.Get,set:u.Set,seq:u.Seq,return:u.Return,index:u.Index,array:u.Arr,equals:u.Equals,and:u.And,or:u.Or,">":u.GreaterThan,"<":u.LessThan,">=":u.GreaterThanOrEqualTo,"<=":u.LessThanOrEqualTo,"%":u.Mod,"/":u.Divide,not:u.Not,round:u.Round,negative:u.Negative,min:u.Min,max:u.Max,length:u.Length,coalesce:u.Coalesce,map:u.Map,cond:u.Cond,product:u.Product,sum:u.Sum,randomFloat:s.RandomFloat,randomInteger:s.RandomInteger,bernoulliTrial:s.BernoulliTrial,bernoulliFilter:s.BernoulliFilter,uniformChoice:s.UniformChoice,weightedChoice:s.WeightedChoice,sample:s.Sample}},c=l(),h=function(t){return(0,f.isObject)(t)&&t.op},p=function(t){var e=t.op;if(!c[e])throw"Unknown Operator "+e;return new c[e](t)},g=function(t){(0,f.forEach)(t,function(t,e){if(c[e])throw e+" already is defined";c[e]=t})},y=function t(e){i(this,t),this.inExperiment=e};e.operators=c,e.initFactory=l,e.isOperator=h,e.operatorInstance=p,e.StopPlanOutException=y,e.registerOperators=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Return=e.Length=e.Max=e.Min=e.Negative=e.Not=e.Round=e.Divide=e.Mod=e.GreaterThanOrEqualTo=e.LessThanOrEqualTo=e.LessThan=e.GreaterThan=e.Equals=e.Sum=e.Product=e.Or=e.And=e.Cond=e.Index=e.Coalesce=e.Map=e.Arr=e.Set=e.Seq=e.Get=e.Literal=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),s=n(14),f=n(5),l=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){return this.getArgMixed("value")}}]),e}(a.PlanOutOp),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){return t.get(this.getArgString("var"))}}]),e}(a.PlanOutOp),h=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){(0,f.forEach)(this.getArgList("seq"),function(e){t.evaluate(e)})}}]),e}(a.PlanOutOp),p=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){var e=t.evaluate(this.getArgMixed("value")),n=!1;throw e&&(n=!0),new s.StopPlanOutException(n)}}]),e}(a.PlanOutOp),g=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){var e=this.getArgString("var"),n=this.getArgMixed("value");t.hasOverride(e)||(n&&(0,s.isOperator)(n)&&!n.salt&&(n.salt=e),"experimentSalt"==e&&(t.experimentSalt=n),t.set(e,t.evaluate(n)))}}]),e}(a.PlanOutOp),y=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){return(0,f.map)(this.getArgList("values"),function(e){return t.evaluate(e)})}}]),e}(a.PlanOutOp),v=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){for(var e=this.getArgList("values"),n=0;n<e.length;n++){var r=e[n],i=t.evaluate(r);if(null!==i&&void 0!==i)return i}return null}}]),e}(a.PlanOutOp),d=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"simpleExecute",value:function(){var t=this.getArgIndexish("base"),e=this.getArgMixed("index");return"number"==typeof e?e>=0&&e<t.length?t[e]:void 0:t[e]}}]),e}(a.PlanOutOpSimple),m=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){var e=this.getArgList("cond");for(var n in e){var r=e[n].if,i=e[n].then;if(t.evaluate(r))return t.evaluate(i)}return null}}]),e}(a.PlanOutOp),_=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){return(0,f.reduce)(this.getArgList("values"),function(e,n){return e?Boolean(t.evaluate(n)):e},!0)}}]),e}(a.PlanOutOp),b=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"execute",value:function(t){return(0,f.reduce)(this.getArgList("values"),function(e,n){return e?e:Boolean(t.evaluate(n))},!1)}}]),e}(a.PlanOutOp),O=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{
key:"commutativeExecute",value:function(t){return(0,f.reduce)(t,function(t,e){return t*e},1)}}]),e}(a.PlanOutOpCommutative),w=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"commutativeExecute",value:function(t){return(0,f.reduce)(t,function(t,e){return t+e},0)}}]),e}(a.PlanOutOpCommutative),E=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"getInfixString",value:function(){return"=="}},{key:"binaryExecute",value:function(t,e){return t===e}}]),e}(a.PlanOutOpBinary),x=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"binaryExecute",value:function(t,e){return t>e}}]),e}(a.PlanOutOpBinary),P=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"binaryExecute",value:function(t,e){return t<e}}]),e}(a.PlanOutOpBinary),A=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"binaryExecute",value:function(t,e){return t<=e}}]),e}(a.PlanOutOpBinary),S=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"binaryExecute",value:function(t,e){return t>=e}}]),e}(a.PlanOutOpBinary),k=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"binaryExecute",value:function(t,e){return t%e}}]),e}(a.PlanOutOpBinary),T=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"binaryExecute",value:function(t,e){return parseFloat(t)/parseFloat(e)}}]),e}(a.PlanOutOpBinary),j=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"unaryExecute",value:function(t){return Math.round(t)}}]),e}(a.PlanOutOpUnary),R=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"getUnaryString",value:function(){return"!"}},{key:"unaryExecute",value:function(t){return!t}}]),e}(a.PlanOutOpUnary),N=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"getUnaryString",value:function(){return"-"}},{key:"unaryExecute",value:function(t){return 0-t}}]),e}(a.PlanOutOpUnary),B=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"commutativeExecute",value:function(t){return Math.min.apply(null,t)}}]),e}(a.PlanOutOpCommutative),L=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"commutativeExecute",value:function(t){return Math.max.apply(null,t)}}]),e}(a.PlanOutOpCommutative),M=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"unaryExecute",value:function(t){return t.length}}]),e}(a.PlanOutOpUnary),C=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),u(e,[{key:"simpleExecute",value:function(){var t=(0,f.deepCopy)(this.args);return delete t.op,delete t.salt,t}}]),e}(a.PlanOutOpSimple);e.Literal=l,e.Get=c,e.Seq=h,e.Set=g,e.Arr=y,e.Map=C,e.Coalesce=v,e.Index=d,e.Cond=m,e.And=_,e.Or=b,e.Product=O,e.Sum=w,e.Equals=E,e.GreaterThan=x,e.LessThan=P,e.LessThanOrEqualTo=A,e.GreaterThanOrEqualTo=S,e.Mod=k,e.Divide=T,e.Round=j,e.Not=R,e.Negative=N,e.Min=B,e.Max=L,e.Length=M,e.Return=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleNamespace=e.Namespace=void 0;var a=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(1),l=r(f),c=n(2),h=r(c),p=n(3),g=n(5),y=n(17),v=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),s(e,[{key:"configureLogger",value:function(){}},{key:"setup",value:function(){this.name="test_name"}},{key:"log",value:function(t){}},{key:"getParamNames",value:function(){return this.getDefaultParamNames()}},{key:"previouslyLogged",value:function(){return!0}},{key:"assign",value:function(t,e){}}]),e}(l.default),d=function(){function t(){i(this,t)}return s(t,[{key:"addExperiment",value:function(t,e,n){throw"IMPLEMENT addExperiment"}},{key:"removeExperiment",value:function(t){throw"IMPLEMENT removeExperiment"}},{key:"setAutoExposureLogging",value:function(t){throw"IMPLEMENT setAutoExposureLogging"}},{key:"inExperiment",value:function(){throw"IMPLEMENT inExperiment"}},{key:"get",value:function(t,e){throw"IMPLEMENT get"}},{key:"logExposure",value:function(t){throw"IMPLEMENT logExposure"}},{key:"logEvent",value:function(t,e){throw"IMPLEMENT logEvent"}},{key:"requireExperiment",value:function(){this._experiment||this._assignExperiment()}},{key:"requireDefaultExperiment",value:function(){this._defaultExperiment||this._assignDefaultExperiment()}}]),t}(),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name=n.getDefaultNamespaceName(),n.inputs=t||{},n.numSegments=1,n.segmentAllocations={},n.currentExperiments={},n._experiment=null,n._defaultExperiment=null,n.defaultExperimentClass=v,n._inExperiment=!1,n.setupDefaults(),n.setup(),n.availableSegments=(0,g.range)(n.numSegments),n.setupExperiments(),n}return u(e,t),s(e,[{key:"setupDefaults",value:function(){}},{key:"setup",value:function(){throw"IMPLEMENT setup"}},{key:"setupExperiments",value:function(){throw"IMPLEMENT setupExperiments"}},{key:"getPrimaryUnit",value:function(){return this._primaryUnit}},{key:"allowedOverride",value:function(){return!1}},{key:"getOverrides",value:function(){return{}}},{key:"setPrimaryUnit",value:function(t){this._primaryUnit=t}},{key:"addExperiment",value:function(t,e,n){var r=this.availableSegments.length;if(r<n)return!1;if(void 0!==this.currentExperiments[t])return!1;var i=new h.default(this.name);i.set("sampled_segments",new p.Sample({choices:this.availableSegments,draws:n,unit:t}));for(var o=i.get("sampled_segments"),u=0;u<o.length;u++){this.segmentAllocations[o[u]]=t;var a=this.availableSegments.indexOf(o[u]);this.availableSegments[a]=this.availableSegments[r-1],this.availableSegments.splice(r-1,1),r-=1}this.currentExperiments[t]=e}},{key:"removeExperiment",value:function(t){var e=this;return void 0!==this.currentExperiments[t]&&((0,g.forEach)(Object.keys(this.segmentAllocations),function(n){e.segmentAllocations[n]===t&&(delete e.segmentAllocations[n],e.availableSegments.push(n))}),delete this.currentExperiments[t],!0)}},{key:"getSegment",value:function(){var t=new h.default(this.name),e=new p.RandomInteger({min:0,max:this.numSegments-1,unit:this.inputs[this.getPrimaryUnit()]});return t.set("segment",e),t.get("segment")}},{key:"_assignExperiment",value:function(){this.inputs=(0,g.extend)(this.inputs,(0,y.getExperimentInputs)(this.getName()));var t=this.getSegment();if(void 0!==this.segmentAllocations[t]){var e=this.segmentAllocations[t];this._assignExperimentObject(e)}}},{key:"_assignExperimentObject",value:function(t){var e=new this.currentExperiments[t](this.inputs);e.setName(this.getName()+"-"+t),e.setSalt(this.getName()+"-"+t),this._experiment=e,this._inExperiment=e.inExperiment(),this._inExperiment||this._assignDefaultExperiment()}},{key:"_assignDefaultExperiment",value:function(){this._defaultExperiment=new this.defaultExperimentClass(this.inputs)}},{key:"defaultGet",value:function(t,n){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requireDefaultExperiment",this).call(this),this._defaultExperiment.get(t,n)}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"previouslyLogged",value:function(){return this._experiment?this._experiment.previouslyLogged():null}},{key:"inExperiment",value:function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requireExperiment",this).call(this),this._inExperiment}},{key:"setAutoExposureLogging",value:function(t){this._autoExposureLoggingSet=t,this._defaultExperiment&&this._defaultExperiment.setAutoExposureLogging(t),this._experiment&&this._experiment.setAutoExposureLogging(t)}},{key:"setGlobalOverride",value:function(t){var e=this.getOverrides();if(e&&(0,g.hasKey)(e,t)){var n=e[t];n&&(0,g.hasKey)(this.currentExperiments,n.experimentName)&&(this._assignExperimentObject(n.experimentName),this._experiment.addOverride(t,n.value))}}},{key:"setLocalOverride",value:function(t){var e=(0,g.getParameterByName)("experimentOverride");e&&(0,g.hasKey)(this.currentExperiments,e)&&(this._assignExperimentObject(e),(0,g.getParameterByName)(t)&&this._experiment.addOverride(t,(0,g.getParameterByName)(t)))}},{key:"getParams",value:function(t){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requireExperiment",this).call(this),this._experiment&&this.getOriginalExperimentName()===t?this._experiment.getParams():null}},{key:"getOriginalExperimentName",value:function(){return this._experiment?this._experiment.getName().split("-")[1]:null}},{key:"get",value:function(t,n){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requireExperiment",this).call(this),this.allowedOverride()&&this.setGlobalOverride(t),this.setLocalOverride(t),this._experiment?(void 0!==this._autoExposureLoggingSet&&this._experiment.setAutoExposureLogging(this._autoExposureLoggingSet),this._experiment.get(t,this.defaultGet(t,n))):this.defaultGet(t,n)}},{key:"logExposure",value:function(t){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requireExperiment",this).call(this),this._experiment&&this._experiment.logExposure(t)}},{key:"logEvent",value:function(t,n){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"requireExperiment",this).call(this),this._experiment&&this._experiment.logEvent(t,n)}},{key:"getDefaultNamespaceName",value:function(){if((0,g.isObject)(this)&&this.constructor&&this!==this.window){var t=this.constructor.toString().match(/function\s*(\w+)/);if(t&&2===t.length)return t[1]}return"GenericNamespace"}}]),e}(d);e.Namespace=d,e.SimpleNamespace=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i={},o={},u=function(t){return t?a((0,r.shallowCopy)(t)):{}},a=function(t){return(0,r.forEach)(Object.keys(t),function(e){(0,r.isFunction)(t[e])&&(t[e]=t[e]())}),t},s=function(t,e,n){n?(o[n]||(o[n]={}),o[n][t]=e):i[t]=e},f=function(t){var e=u(i);return t&&o[t]?(0,r.extend)(e,u(o[t])):e};e.default={registerExperimentInput:s,getExperimentInputs:f},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),f=n(19),l=r(f),c=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.LONG_SCALE=new l.default("FFFFFFFFFFFFFFF",16),n}return u(e,t),a(e,[{key:"compatHashCalculation",value:function(t){return new l.default(t.substr(0,15),16)}},{key:"compatZeroToOneCalculation",value:function(t){return this.getHash(t).dividedBy(this.LONG_SCALE).toNumber()}}]),e}(s.PlanOutOpRandom),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"compatRandomIntegerCalculation",value:function(t,e){return this.getHash().plus(t).modulo(e-t+1).toNumber()}}]),e}((0,s.RandomIntegerBuilder)(c)),p=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"compatRandomIndexCalculation",value:function(t){return this.getHash().modulo(t.length).toNumber()}}]),e}((0,s.UniformChoiceBuilder)(c)),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),a(e,[{key:"compatSampleIndexCalculation",value:function(t){return this.getHash(t).modulo(t+1).toNumber()}},{key:"compatAllowSampleStoppingPoint",value:function(){return!1}}]),e}((0,s.SampleBuilder)(c));e.default={PlanOutOpRandom:c,Sample:g,WeightedChoice:(0,s.WeightedChoiceBuilder)(c),UniformChoice:p,BernoulliFilter:(0,s.BernoulliFilterBuilder)(c),BernoulliTrial:(0,s.BernoulliTrialBuilder)(c),RandomInteger:h,RandomFloat:(0,s.RandomFloatBuilder)(c)},t.exports=e.default},function(t,e,n){var r;!function(i){"use strict";function o(t){function e(t,r){var i,o,u,a,s,f,l=this;if(!(l instanceof e))return z&&N(26,"constructor call without new",t),new e(t,r);if(null!=r&&H(r,2,64,M,"base")){if(r|=0,f=t+"",10==r)return l=new e(t instanceof e?t:f),B(l,U+l.e+1,D);if((a="number"==typeof t)&&0*t!=0||!new RegExp("^-?"+(i="["+x.slice(0,r)+"]+")+"(?:\\."+i+")?$",r<37?"i":"").test(f))return d(l,f,a,r);a?(l.s=1/t<0?(f=f.slice(1),-1):1,z&&f.replace(/^0\.0*|\./,"").length>15&&N(M,E,t),a=!1):l.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1,f=n(f,10,r,l.s)}else{if(t instanceof e)return l.s=t.s,l.e=t.e,l.c=(t=t.c)?t.slice():t,void(M=0);if((a="number"==typeof t)&&0*t==0){if(l.s=1/t<0?(t=-t,-1):1,t===~~t){for(o=0,u=t;u>=10;u/=10,o++);return l.e=o,l.c=[t],void(M=0)}f=t+""}else{if(!m.test(f=t+""))return d(l,f,a);l.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1}}for((o=f.indexOf("."))>-1&&(f=f.replace(".","")),(u=f.search(/e/i))>0?(o<0&&(o=u),o+=+f.slice(u+1),f=f.substring(0,u)):o<0&&(o=f.length),u=0;48===f.charCodeAt(u);u++);for(s=f.length;48===f.charCodeAt(--s););if(f=f.slice(u,s+1))if(s=f.length,a&&z&&s>15&&N(M,E,l.s*t),o=o-u-1,o>G)l.c=l.e=null;else if(o<q)l.c=[l.e=0];else{if(l.e=o,l.c=[],u=(o+1)%A,o<0&&(u+=A),u<s){for(u&&l.c.push(+f.slice(0,u)),s-=A;u<s;)l.c.push(+f.slice(u,u+=A));f=f.slice(u),u=A-f.length}else u-=s;for(;u--;f+="0");l.c.push(+f)}else l.c=[l.e=0];M=0}function n(t,n,r,i){var o,u,s,f,l,h,g,y=t.indexOf("."),v=U,d=D;for(r<37&&(t=t.toLowerCase()),y>=0&&(s=V,V=0,t=t.replace(".",""),g=new e(r),l=g.pow(t.length-y),V=s,g.c=c(p(a(l.c),l.e),10,n),g.e=g.c.length),h=c(t,r,n),u=s=h.length;0==h[--s];h.pop());if(!h[0])return"0";if(y<0?--u:(l.c=h,l.e=u,l.s=i,l=L(l,g,v,d,n),h=l.c,f=l.r,u=l.e),o=u+v+1,y=h[o],s=n/2,f=f||o<0||null!=h[o+1],f=d<4?(null!=y||f)&&(0==d||d==(l.s<0?3:2)):y>s||y==s&&(4==d||f||6==d&&1&h[o-1]||d==(l.s<0?8:7)),o<1||!h[0])t=f?p("1",-v):"0";else{if(h.length=o,f)for(--n;++h[--o]>n;)h[o]=0,o||(++u,h.unshift(1));for(s=h.length;!h[--s];);for(y=0,t="";y<=s;t+=x.charAt(h[y++]));t=p(t,u)}return t}function r(t,n,r,i){var o,u,s,f,l;if(r=null!=r&&H(r,0,8,i,w)?0|r:D,!t.c)return t.toString();if(o=t.c[0],s=t.e,null==n)l=a(t.c),l=19==i||24==i&&s<=F?h(l,s):p(l,s);else if(t=B(new e(t),n,r),u=t.e,l=a(t.c),f=l.length,19==i||24==i&&(n<=u||u<=F)){for(;f<n;l+="0",f++);l=h(l,u)}else if(n-=s,l=p(l,u),u+1>f){if(--n>0)for(l+=".";n--;l+="0");}else if(n+=u-f,n>0)for(u+1==f&&(l+=".");n--;l+="0");return t.s<0&&o?"-"+l:l}function i(t,n){var r,i,o=0;for(l(t[0])&&(t=t[0]),r=new e(t[0]);++o<t.length;){if(i=new e(t[o]),!i.s){r=i;break}n.call(r,i)&&(r=i)}return r}function y(t,e,n,r,i){return(t<e||t>n||t!=g(t))&&N(r,(i||"decimal places")+(t<e||t>n?" out of range":" not an integer"),t),!0}function R(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*A-1)>G?t.c=t.e=null:n<q?t.c=[t.e=0]:(t.e=n,t.c=e),t}function N(t,e,n){var r=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][t]+"() "+e+": "+n);throw r.name="BigNumber Error",M=0,r}function B(t,e,n,r){var i,o,u,a,s,f,l,c=t.c,h=k;if(c){t:{for(i=1,a=c[0];a>=10;a/=10,i++);if(o=e-i,o<0)o+=A,u=e,s=c[f=0],l=s/h[i-u-1]%10|0;else if(f=_((o+1)/A),f>=c.length){if(!r)break t;for(;c.length<=f;c.push(0));s=l=0,i=1,o%=A,u=o-A+1}else{for(s=a=c[f],i=1;a>=10;a/=10,i++);o%=A,u=o-A+i,l=u<0?0:s/h[i-u-1]%10|0}if(r=r||e<0||null!=c[f+1]||(u<0?s:s%h[i-u-1]),r=n<4?(l||r)&&(0==n||n==(t.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?u>0?s/h[i-u]:0:c[f-1])%10&1||n==(t.s<0?8:7)),e<1||!c[0])return c.length=0,r?(e-=t.e+1,c[0]=h[e%A],t.e=-e||0):c[0]=t.e=0,t;if(0==o?(c.length=f,a=1,f--):(c.length=f+1,a=h[A-o],c[f]=u>0?b(s/h[i-u]%h[u])*a:0),r)for(;;){if(0==f){for(o=1,u=c[0];u>=10;u/=10,o++);for(u=c[0]+=a,a=1;u>=10;u/=10,a++);o!=a&&(t.e++,c[0]==P&&(c[0]=1));break}if(c[f]+=a,c[f]!=P)break;c[f--]=0,a=1}for(o=c.length;0===c[--o];c.pop());}t.e>G?t.c=t.e=null:t.e<q&&(t.c=[t.e=0])}return t}var L,M=0,C=e.prototype,I=new e(1),U=20,D=4,F=-7,Y=21,q=-1e7,G=1e7,z=!0,H=y,W=!1,$=1,V=100,Z={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0};return e.another=o,e.ROUND_UP=0,e.ROUND_DOWN=1,e.ROUND_CEIL=2,e.ROUND_FLOOR=3,e.ROUND_HALF_UP=4,e.ROUND_HALF_DOWN=5,e.ROUND_HALF_EVEN=6,e.ROUND_HALF_CEIL=7,e.ROUND_HALF_FLOOR=8,e.EUCLID=9,e.config=function(){var t,e,n=0,r={},i=arguments,o=i[0],u=o&&"object"==typeof o?function(){if(o.hasOwnProperty(e))return null!=(t=o[e])}:function(){if(i.length>n)return null!=(t=i[n++])};return u(e="DECIMAL_PLACES")&&H(t,0,j,2,e)&&(U=0|t),r[e]=U,u(e="ROUNDING_MODE")&&H(t,0,8,2,e)&&(D=0|t),r[e]=D,u(e="EXPONENTIAL_AT")&&(l(t)?H(t[0],-j,0,2,e)&&H(t[1],0,j,2,e)&&(F=0|t[0],Y=0|t[1]):H(t,-j,j,2,e)&&(F=-(Y=0|(t<0?-t:t)))),r[e]=[F,Y],u(e="RANGE")&&(l(t)?H(t[0],-j,-1,2,e)&&H(t[1],1,j,2,e)&&(q=0|t[0],G=0|t[1]):H(t,-j,j,2,e)&&(0|t?q=-(G=0|(t<0?-t:t)):z&&N(2,e+" cannot be zero",t))),r[e]=[q,G],u(e="ERRORS")&&(t===!!t||1===t||0===t?(M=0,H=(z=!!t)?y:f):z&&N(2,e+O,t)),r[e]=z,u(e="CRYPTO")&&(t===!!t||1===t||0===t?(W=!(!t||!v||"object"!=typeof v),t&&!W&&z&&N(2,"crypto unavailable",v)):z&&N(2,e+O,t)),r[e]=W,u(e="MODULO_MODE")&&H(t,0,9,2,e)&&($=0|t),r[e]=$,u(e="POW_PRECISION")&&H(t,0,j,2,e)&&(V=0|t),r[e]=V,u(e="FORMAT")&&("object"==typeof t?Z=t:z&&N(2,e+" not an object",t)),r[e]=Z,r},e.max=function(){return i(arguments,C.lt)},e.min=function(){return i(arguments,C.gt)},e.random=function(){var t=9007199254740992,n=Math.random()*t&2097151?function(){return b(Math.random()*t)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(t){var r,i,o,u,a,s=0,f=[],l=new e(I);if(t=null!=t&&H(t,0,j,14)?0|t:U,u=_(t/A),W)if(v&&v.getRandomValues){for(r=v.getRandomValues(new Uint32Array(u*=2));s<u;)a=131072*r[s]+(r[s+1]>>>11),a>=9e15?(i=v.getRandomValues(new Uint32Array(2)),r[s]=i[0],r[s+1]=i[1]):(f.push(a%1e14),s+=2);s=u/2}else if(v&&v.randomBytes){for(r=v.randomBytes(u*=7);s<u;)a=281474976710656*(31&r[s])+1099511627776*r[s+1]+4294967296*r[s+2]+16777216*r[s+3]+(r[s+4]<<16)+(r[s+5]<<8)+r[s+6],a>=9e15?v.randomBytes(7).copy(r,s):(f.push(a%1e14),s+=7);s=u/7}else z&&N(14,"crypto unavailable",v);if(!s)for(;s<u;)a=n(),a<9e15&&(f[s++]=a%1e14);for(u=f[--s],t%=A,u&&t&&(a=k[A-t],f[s]=b(u/a)*a);0===f[s];f.pop(),s--);if(s<0)f=[o=0];else{for(o=-1;0===f[0];f.shift(),o-=A);for(s=1,a=f[0];a>=10;a/=10,s++);s<A&&(o-=A-s)}return l.e=o,l.c=f,l}}(),L=function(){function t(t,e,n){var r,i,o,u,a=0,s=t.length,f=e%T,l=e/T|0;for(t=t.slice();s--;)o=t[s]%T,u=t[s]/T|0,r=l*o+u*f,i=f*o+r%T*T+a,a=(i/n|0)+(r/T|0)+l*u,t[s]=i%n;return a&&t.unshift(a),t}function n(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.shift());}return function(i,o,a,s,f){var l,c,h,p,g,y,v,d,m,_,O,w,E,x,S,k,T,j=i.s==o.s?1:-1,R=i.c,N=o.c;if(!(R&&R[0]&&N&&N[0]))return new e(i.s&&o.s&&(R?!N||R[0]!=N[0]:N)?R&&0==R[0]||!N?0*j:j/0:NaN);for(d=new e(j),m=d.c=[],c=i.e-o.e,j=a+c+1,f||(f=P,c=u(i.e/A)-u(o.e/A),j=j/A|0),h=0;N[h]==(R[h]||0);h++);if(N[h]>(R[h]||0)&&c--,j<0)m.push(1),p=!0;else{for(x=R.length,k=N.length,h=0,j+=2,g=b(f/(N[0]+1)),g>1&&(N=t(N,g,f),R=t(R,g,f),k=N.length,x=R.length),E=k,_=R.slice(0,k),O=_.length;O<k;_[O++]=0);T=N.slice(),T.unshift(0),S=N[0],N[1]>=f/2&&S++;do{if(g=0,l=n(N,_,k,O),l<0){if(w=_[0],k!=O&&(w=w*f+(_[1]||0)),g=b(w/S),g>1)for(g>=f&&(g=f-1),y=t(N,g,f),v=y.length,O=_.length;1==n(y,_,v,O);)g--,r(y,k<v?T:N,v,f),v=y.length,l=1;else 0==g&&(l=g=1),y=N.slice(),v=y.length;if(v<O&&y.unshift(0),r(_,y,O,f),O=_.length,l==-1)for(;n(N,_,k,O)<1;)g++,r(_,k<O?T:N,O,f),O=_.length}else 0===l&&(g++,_=[0]);m[h++]=g,_[0]?_[O++]=R[E]||0:(_=[R[E]],O=1)}while((E++<x||null!=_[0])&&j--);p=null!=_[0],m[0]||m.shift()}if(f==P){for(h=1,j=m[0];j>=10;j/=10,h++);B(d,a+(d.e=h+c*A-1)+1,s,p)}else d.e=c,d.r=+p;return d}}(),d=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,n=/^([^.]+)\.$/,r=/^\.([^.]+)$/,i=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(u,a,s,f){var l,c=s?a:a.replace(o,"");if(i.test(c))u.s=isNaN(c)?null:c<0?-1:1;else{if(!s&&(c=c.replace(t,function(t,e,n){return l="x"==(n=n.toLowerCase())?16:"b"==n?2:8,f&&f!=l?t:e}),f&&(l=f,c=c.replace(n,"$1").replace(r,"0.$1")),a!=c))return new e(c,l);z&&N(M,"not a"+(f?" base "+f:"")+" number",a),u.s=null}u.c=u.e=null,M=0}}(),C.absoluteValue=C.abs=function(){var t=new e(this);return t.s<0&&(t.s=1),t},C.ceil=function(){return B(new e(this),this.e+1,2)},C.comparedTo=C.cmp=function(t,n){return M=1,s(this,new e(t,n))},C.decimalPlaces=C.dp=function(){var t,e,n=this.c;if(!n)return null;if(t=((e=n.length-1)-u(this.e/A))*A,e=n[e])for(;e%10==0;e/=10,t--);return t<0&&(t=0),t},C.dividedBy=C.div=function(t,n){return M=3,L(this,new e(t,n),U,D)},C.dividedToIntegerBy=C.divToInt=function(t,n){return M=4,L(this,new e(t,n),0,1)},C.equals=C.eq=function(t,n){return M=5,0===s(this,new e(t,n))},C.floor=function(){return B(new e(this),this.e+1,3)},C.greaterThan=C.gt=function(t,n){return M=6,s(this,new e(t,n))>0},C.greaterThanOrEqualTo=C.gte=function(t,n){return M=7,1===(n=s(this,new e(t,n)))||0===n},C.isFinite=function(){return!!this.c},C.isInteger=C.isInt=function(){return!!this.c&&u(this.e/A)>this.c.length-2},C.isNaN=function(){return!this.s},C.isNegative=C.isNeg=function(){return this.s<0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.lessThan=C.lt=function(t,n){return M=8,s(this,new e(t,n))<0},C.lessThanOrEqualTo=C.lte=function(t,n){return M=9,(n=s(this,new e(t,n)))===-1||0===n},C.minus=C.sub=function(t,n){var r,i,o,a,s=this,f=s.s;if(M=10,t=new e(t,n),n=t.s,!f||!n)return new e(NaN);if(f!=n)return t.s=-n,s.plus(t);var l=s.e/A,c=t.e/A,h=s.c,p=t.c;if(!l||!c){if(!h||!p)return h?(t.s=-n,t):new e(p?s:NaN);if(!h[0]||!p[0])return p[0]?(t.s=-n,t):new e(h[0]?s:3==D?-0:0)}if(l=u(l),c=u(c),h=h.slice(),f=l-c){for((a=f<0)?(f=-f,o=h):(c=l,o=p),o.reverse(),n=f;n--;o.push(0));o.reverse()}else for(i=(a=(f=h.length)<(n=p.length))?f:n,f=n=0;n<i;n++)if(h[n]!=p[n]){a=h[n]<p[n];break}if(a&&(o=h,h=p,p=o,t.s=-t.s),n=(i=p.length)-(r=h.length),n>0)for(;n--;h[r++]=0);for(n=P-1;i>f;){if(h[--i]<p[i]){for(r=i;r&&!h[--r];h[r]=n);--h[r],h[i]+=P}h[i]-=p[i]}for(;0==h[0];h.shift(),--c);return h[0]?R(t,h,c):(t.s=3==D?-1:1,t.c=[t.e=0],t)},C.modulo=C.mod=function(t,n){var r,i,o=this;return M=11,t=new e(t,n),!o.c||!t.s||t.c&&!t.c[0]?new e(NaN):!t.c||o.c&&!o.c[0]?new e(o):(9==$?(i=t.s,t.s=1,r=L(o,t,0,3),t.s=i,r.s*=i):r=L(o,t,0,$),o.minus(r.times(t)))},C.negated=C.neg=function(){var t=new e(this);return t.s=-t.s||null,t},C.plus=C.add=function(t,n){var r,i=this,o=i.s;if(M=12,t=new e(t,n),n=t.s,!o||!n)return new e(NaN);if(o!=n)return t.s=-n,i.minus(t);var a=i.e/A,s=t.e/A,f=i.c,l=t.c;if(!a||!s){if(!f||!l)return new e(o/0);if(!f[0]||!l[0])return l[0]?t:new e(f[0]?i:0*o)}if(a=u(a),s=u(s),f=f.slice(),o=a-s){for(o>0?(s=a,r=l):(o=-o,r=f),r.reverse();o--;r.push(0));r.reverse()}for(o=f.length,n=l.length,o-n<0&&(r=l,l=f,f=r,n=o),o=0;n;)o=(f[--n]=f[n]+l[n]+o)/P|0,f[n]%=P;return o&&(f.unshift(o),++s),R(t,f,s)},C.precision=C.sd=function(t){var e,n,r=this,i=r.c;if(null!=t&&t!==!!t&&1!==t&&0!==t&&(z&&N(13,"argument"+O,t),t!=!!t&&(t=null)),!i)return null;if(n=i.length-1,e=n*A+1,n=i[n]){for(;n%10==0;n/=10,e--);for(n=i[0];n>=10;n/=10,e++);}return t&&r.e+1>e&&(e=r.e+1),e},C.round=function(t,n){var r=new e(this);return(null==t||H(t,0,j,15))&&B(r,~~t+this.e+1,null!=n&&H(n,0,8,15,w)?0|n:D),r},C.shift=function(t){var n=this;return H(t,-S,S,16,"argument")?n.times("1e"+g(t)):new e(n.c&&n.c[0]&&(t<-S||t>S)?n.s*(t<0?0:1/0):n)},C.squareRoot=C.sqrt=function(){var t,n,r,i,o,s=this,f=s.c,l=s.s,c=s.e,h=U+4,p=new e("0.5");if(1!==l||!f||!f[0])return new e(!l||l<0&&(!f||f[0])?NaN:f?s:1/0);if(l=Math.sqrt(+s),0==l||l==1/0?(n=a(f),(n.length+c)%2==0&&(n+="0"),l=Math.sqrt(n),c=u((c+1)/2)-(c<0||c%2),l==1/0?n="1e"+c:(n=l.toExponential(),n=n.slice(0,n.indexOf("e")+1)+c),r=new e(n)):r=new e(l+""),r.c[0])for(c=r.e,l=c+h,l<3&&(l=0);;)if(o=r,r=p.times(o.plus(L(s,o,h,1))),a(o.c).slice(0,l)===(n=a(r.c)).slice(0,l)){if(r.e<c&&--l,n=n.slice(l-3,l+1),"9999"!=n&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(B(r,r.e+U+2,1),t=!r.times(r).eq(s));break}if(!i&&(B(o,o.e+U+2,0),o.times(o).eq(s))){r=o;break}h+=4,l+=4,i=1}return B(r,r.e+U+1,D,t)},C.times=C.mul=function(t,n){var r,i,o,a,s,f,l,c,h,p,g,y,v,d,m,_=this,b=_.c,O=(M=17,t=new e(t,n)).c;if(!(b&&O&&b[0]&&O[0]))return!_.s||!t.s||b&&!b[0]&&!O||O&&!O[0]&&!b?t.c=t.e=t.s=null:(t.s*=_.s,b&&O?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=u(_.e/A)+u(t.e/A),t.s*=_.s,l=b.length,p=O.length,l<p&&(v=b,b=O,O=v,o=l,l=p,p=o),o=l+p,v=[];o--;v.push(0));for(d=P,m=T,o=p;--o>=0;){for(r=0,g=O[o]%m,y=O[o]/m|0,s=l,a=o+s;a>o;)c=b[--s]%m,h=b[s]/m|0,f=y*c+h*g,c=g*c+f%m*m+v[a]+r,r=(c/d|0)+(f/m|0)+y*h,v[a--]=c%d;v[a]=r}return r?++i:v.shift(),R(t,v,i)},C.toDigits=function(t,n){var r=new e(this);return t=null!=t&&H(t,1,j,18,"precision")?0|t:null,n=null!=n&&H(n,0,8,18,w)?0|n:D,t?B(r,t,n):r},C.toExponential=function(t,e){return r(this,null!=t&&H(t,0,j,19)?~~t+1:null,e,19)},C.toFixed=function(t,e){return r(this,null!=t&&H(t,0,j,20)?~~t+this.e+1:null,e,20)},C.toFormat=function(t,e){var n=r(this,null!=t&&H(t,0,j,21)?~~t+this.e+1:null,e,21);if(this.c){var i,o=n.split("."),u=+Z.groupSize,a=+Z.secondaryGroupSize,s=Z.groupSeparator,f=o[0],l=o[1],c=this.s<0,h=c?f.slice(1):f,p=h.length;if(a&&(i=u,u=a,a=i,p-=i),u>0&&p>0){for(i=p%u||u,f=h.substr(0,i);i<p;i+=u)f+=s+h.substr(i,u);a>0&&(f+=s+h.slice(i)),c&&(f="-"+f)}n=l?f+Z.decimalSeparator+((a=+Z.fractionGroupSize)?l.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+Z.fractionGroupSeparator):l):f}return n},C.toFraction=function(t){var n,r,i,o,u,s,f,l,c,h=z,p=this,g=p.c,y=new e(I),v=r=new e(I),d=f=new e(I);if(null!=t&&(z=!1,s=new e(t),z=h,(h=s.isInt())&&!s.lt(I)||(z&&N(22,"max denominator "+(h?"out of range":"not an integer"),t),t=!h&&s.c&&B(s,s.e+1,1).gte(I)?s:null)),!g)return p.toString();for(c=a(g),o=y.e=c.length-p.e-1,y.c[0]=k[(u=o%A)<0?A+u:u],t=!t||s.cmp(y)>0?o>0?y:v:s,u=G,G=1/0,s=new e(c),f.c[0]=0;l=L(s,y,0,1),i=r.plus(l.times(d)),1!=i.cmp(t);)r=d,d=i,v=f.plus(l.times(i=v)),f=i,y=s.minus(l.times(i=y)),s=i;return i=L(t.minus(r),d,0,1),f=f.plus(i.times(v)),r=r.plus(i.times(d)),f.s=v.s=p.s,o*=2,n=L(v,d,o,D).minus(p).abs().cmp(L(f,r,o,D).minus(p).abs())<1?[v.toString(),d.toString()]:[f.toString(),r.toString()],G=u,n},C.toNumber=function(){var t=this;return+t||(t.s?0*t.s:NaN)},C.toPower=C.pow=function(t){var n,r,i=b(t<0?-t:+t),o=this;if(!H(t,-S,S,23,"exponent")&&(!isFinite(t)||i>S&&(t/=0)||parseFloat(t)!=t&&!(t=NaN)))return new e(Math.pow(+o,t));for(n=V?_(V/A+2):0,r=new e(I);;){if(i%2){if(r=r.times(o),!r.c)break;n&&r.c.length>n&&(r.c.length=n)}if(i=b(i/2),!i)break;o=o.times(o),n&&o.c&&o.c.length>n&&(o.c.length=n)}return t<0&&(r=I.div(r)),n?B(r,V,D):r},C.toPrecision=function(t,e){return r(this,null!=t&&H(t,1,j,24,"precision")?0|t:null,e,24)},C.toString=function(t){var e,r=this,i=r.s,o=r.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(e=a(r.c),e=null!=t&&H(t,2,64,25,"base")?n(p(e,o),0|t,10,i):o<=F||o>=Y?h(e,o):p(e,o),i<0&&r.c[0]&&(e="-"+e)),e},C.truncated=C.trunc=function(){return B(new e(this),this.e+1,1)},C.valueOf=C.toJSON=function(){return this.toString()},null!=t&&e.config(t),e}function u(t){var e=0|t;return t>0||t===e?e:e-1}function a(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=A-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function s(t,e){var n,r,i=t.c,o=e.c,u=t.s,a=e.s,s=t.e,f=e.e;if(!u||!a)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-a:u;if(u!=a)return u;if(n=u<0,r=s==f,!i||!o)return r?0:!i^n?1:-1;if(!r)return s>f^n?1:-1;for(a=(s=i.length)<(f=o.length)?s:f,u=0;u<a;u++)if(i[u]!=o[u])return i[u]>o[u]^n?1:-1;return s==f?0:s>f^n?1:-1}function f(t,e,n){return(t=g(t))>=e&&t<=n}function l(t){return"[object Array]"==Object.prototype.toString.call(t)}function c(t,e,n){for(var r,i,o=[0],u=0,a=t.length;u<a;){for(i=o.length;i--;o[i]*=e);for(o[r=0]+=x.indexOf(t.charAt(u++));r<o.length;r++)o[r]>n-1&&(null==o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function h(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function p(t,e){var n,r;if(e<0){for(r="0.";++e;r+="0");t=r+t}else if(n=t.length,++e>n){for(r="0",e-=n;--e;r+="0");t+=r}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}function g(t){return t=parseFloat(t),t<0?_(t):b(t)}var y,v,d,m=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_=Math.ceil,b=Math.floor,O=" not a boolean or binary digit",w="rounding mode",E="number type has more than 15 significant digits",x="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",P=1e14,A=14,S=9007199254740991,k=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,j=1e9;y=o(),r=function(){return y}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}])});