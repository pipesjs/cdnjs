!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e["vue-ls"]=n()}(this,function(){"use strict";function e(e){function n(n){var t=JSON.parse(e.newValue),i=JSON.parse(e.oldValue),r="object"===("undefined"==typeof t?"undefined":o(t))?t.value:t,u=i&&"object"===("undefined"==typeof i?"undefined":o(i))?i.value:i;n(r,u,e.url||e.uri)}if(e||(e=window.event),"undefined"!=typeof e&&"undefined"!=typeof e.key){var t=a[e.key];t&&t.forEach(n)}}var n={},t={getItem:function(e){return e in n?n[e]:null},setItem:function(e,t){return n[e]=t,!0},removeItem:function(e){var t=e in n;return!!t&&delete n[e]},clear:function(){return n={},!0},key:function(e){var t=Object.keys(n);return"undefined"!=typeof t[e]?t[e]:null}};Object.defineProperty(t,"length",{get:function(){return Object.keys(n).length}});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},a={},f=function(){function n(t,o){if(i(this,n),this.storage=t,this.options=u({namespace:"",events:["storage"]},o||{}),Object.defineProperty(this,"length",{get:function(){return this.storage.length}}),"undefined"!=typeof window)for(var r in this.options.events)window.addEventListener?window.addEventListener(this.options.events[r],e,!1):window.attachEvent?window.attachEvent("on"+this.options.events[r],e):window["on"+this.options.events[r]]=e}return r(n,[{key:"set",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.storage.setItem(this.options.namespace+e,JSON.stringify({value:n,expire:null!==t?(new Date).getTime()+t:null}))}},{key:"get",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=this.storage.getItem(this.options.namespace+e);if(null!==t){var o=JSON.parse(t);if(null===o.expire)return o.value;if(o.expire>=(new Date).getTime())return o.value;this.remove(e)}return n}},{key:"key",value:function(e){return this.storage.key(e)}},{key:"remove",value:function(e){return this.storage.removeItem(this.options.namespace+e)}},{key:"clear",value:function(){if(0!==this.length){for(var e=[],n=0;n<this.length;n++){var t=this.storage.key(n),o=new RegExp("^"+this.options.namespace+".+","i");o.test(t)!==!1&&e.push(t)}for(var i in e)this.storage.removeItem(e[i])}}},{key:"on",value:function(e,n){a[e]?a[e].push(n):a[e]=[n]}},{key:"off",value:function(e,n){var t=a[e];t.length>1?t.splice(t.indexOf(n),1):a[e]=[]}}]),n}(),s="undefined"!=typeof window&&"localStorage"in window?window.localStorage:t,l=new f(s),c={install:function(e,n){l.options=u(l.options,{namespace:""},n||{}),e.ls=l,Object.defineProperty(e.prototype,"$ls",{get:function(){return l}})}};return"undefined"!=typeof window&&(window.VueLocalStorage=c),c});
//# sourceMappingURL=vue-ls.min.js.map
