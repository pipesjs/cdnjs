!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.fetchJsonp=n.exports}}(this,function(e,t){"use strict";function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(t)}function r(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=e,a=t.timeout||u.timeout,c=t.jsonpCallback||u.jsonpCallback,s=void 0;return new Promise(function(u,d){var l=t.jsonpCallbackFunction||n(),f=c+"_"+l;window[l]=function(e){u({ok:!0,json:function(){return Promise.resolve(e)}}),s&&clearTimeout(s),i(f),o(l)},r+=-1===r.indexOf("?")?"?":"&";var m=document.createElement("script");m.setAttribute("src",""+r+c+"="+l),t.charset&&m.setAttribute("charset",t.charset),m.id=f,m.onerror=function(){d(new Error("JSONP request to "+e+" failed")),o(l),i(f)},document.getElementsByTagName("head")[0].appendChild(m),s=setTimeout(function(){d(new Error("JSONP request to "+e+" timed out")),o(l),i(f)},a)})}var u={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=r});