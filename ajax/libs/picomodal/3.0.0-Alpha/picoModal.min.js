!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.picoModal=t()}(this,function(){"use strict";function e(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType}function t(e){return"string"==typeof e}function n(){var e=[];return{watch:e.push.bind(e),trigger:function(t){for(var n=!0,o={preventDefault:function(){n=!1}},i=0;i<e.length;i++)e[i](t,o);return n}}}function o(e){return"none"===window.getComputedStyle(e).display}function i(e){this.elem=e}function r(e,t){return i.make(e("parent")).clazz("pico-overlay").clazz(e("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(e("overlayStyles",{opacity:.5,background:"#000"})).onClick(function(){e("overlayClose",!0)&&t()})}function a(e,t){var n=e("width","auto");"number"==typeof n&&(n+="px");var o=e("modalId","pico-"+u++);return i.make(e("parent")).clazz("pico-content").clazz(e("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:n,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(e("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(e("content")).attr("id",o).attr("role","dialog").attr("aria-labelledby",e("ariaLabelledBy")).attr("aria-describedby",e("ariaDescribedBy",o)).onClick(function(e){new i(e.target).anyAncestor(function(e){return/\bpico-close\b/.test(e.elem.className)})&&t()})}function l(e,t){if(t("closeButton",!0))return e.child("button").html(t("closeHtml","&#xD7;")).clazz("pico-close").clazz(t("closeClass","")).stylize(t("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",t("close-label","Close"))}function c(e){return function(){return e().elem}}function s(e,t){function n(e,t){return(e.msMatchesSelector||e.webkitMatchesSelector||e.matches).call(e,t)}function i(e){return!(o(e)||n(e,":disabled")||e.hasAttribute("contenteditable"))&&(e.hasAttribute("tabindex")||n(e,"input,select,textarea,button,a[href],area[href],iframe"))}function r(e){for(var t=e.getElementsByTagName("*"),n=0;n<t.length;n++)if(i(t[n]))return t[n]}function a(e){for(var t=e.getElementsByTagName("*"),n=t.length;n--;)if(i(t[n]))return t[n]}var l;e.beforeShow(function(){l=document.activeElement}),e.afterShow(function(){if(t()){var n=r(e.modalElem());n&&n.focus()}}),e.afterClose(function(){t()&&l&&l.focus(),l=null}),d.watch(function(n){if(t()&&e.isVisible()){var o=r(e.modalElem()),i=a(e.modalElem());(n.shiftKey?o:i)===document.activeElement&&((n.shiftKey?i:o).focus(),n.preventDefault())}})}i.make=function(e,t){"string"==typeof e&&(e=document.querySelector(e));var n=document.createElement(t||"div");return(e||document.body).appendChild(n),new i(n)},i.prototype={child:function(e){return i.make(this.elem,e)},stylize:function(e){e=e||{},void 0!==e.opacity&&(e.filter="alpha(opacity="+100*e.opacity+")");for(var t in e)e.hasOwnProperty(t)&&(this.elem.style[t]=e[t]);return this},clazz:function(e){return this.elem.className+=" "+e,this},html:function(t){return e(t)?this.elem.appendChild(t):this.elem.innerHTML=t,this},onClick:function(e){return this.elem.addEventListener("click",e),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(e,t){return void 0!==t&&this.elem.setAttribute(e,t),this},anyAncestor:function(e){for(var t=this.elem;t;){if(e(new i(t)))return!0;t=t.parentNode}return!1},isVisible:function(){return!o(this.elem)}};var u=1,f=n(),d=n();return document.documentElement.addEventListener("keydown",function(e){var t=e.which||e.keyCode;27===t?f.trigger():9===t&&d.trigger(e)}),function(o){function i(e,t){var n=o[e];return"function"==typeof n&&(n=n(t)),void 0===n?t:n}function u(){C().hide(),z().hide(),x.trigger(p)}function d(){v.trigger(p)&&u()}function h(e){return function(){return e.apply(this,arguments),p}}function m(e){if(!y){var t=a(i,d);y={modal:t,overlay:r(i,d),close:l(t,i)},b.trigger(p)}return y[e]}(t(o)||e(o))&&(o={content:o});var p,y,b=n(),g=n(),w=n(),v=n(),x=n(),z=m.bind(window,"modal"),C=m.bind(window,"overlay"),k=m.bind(window,"close");return p={modalElem:c(z),closeElem:c(k),overlayElem:c(C),buildDom:h(m),isVisible:function(){return!!(y&&z&&z().isVisible())},show:function(){return g.trigger(p)&&(C().show(),k(),z().show(),w.trigger(p)),this},close:h(d),forceClose:h(u),destroy:function(){z().destroy(),C().destroy(),C=z=k=void 0},options:function(e){Object.keys(e).map(function(t){o[t]=e[t]})},afterCreate:h(b.watch),beforeShow:h(g.watch),afterShow:h(w.watch),beforeClose:h(v.watch),afterClose:h(x.watch)},s(p,i.bind(null,"focus",!0)),f.watch(function(){i("escCloses",!0)&&p.isVisible()&&p.close()}),p}});
//# sourceMappingURL=picoModal.min.js.map