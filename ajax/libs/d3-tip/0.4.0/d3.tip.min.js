d3.svg.tip=function(){function t(t,e){this.ownerSVGElement.appendChild(l);var n,u,s,c,f,p,w,m=a.apply(this,arguments),B=g.apply(this,arguments),v=d3.select(l),b=this.tagName.toLowerCase(),S=(d3.select(this.ownerSVGElement),d3.select(this)),C=d3.select(r("rect")),E=this.ownerSVGElement.getBoundingClientRect(),z=this.getBBox();S.on("mouseout",function(){v.remove()}),v.text(" ").node().appendChild(C.node());var G=v.append("text").text(B).attr("text-anchor","middle").attr("alignment-baseline","middle"),V=G.node().getBBox();V.width=V.width+2*h,V.height=V.height+2*h,C.attr("width",V.width).attr("height",V.height).attr("rx",o).attr("ry",o),G.attr("dx",V.width/2).attr("dy",V.height/2),c=C.node().getBBox(),s=d3.svg.symbol().type("triangle-down").size(d),u=v.append("path").attr("d",s()),p=u.node().getBBox(),w={top:function(){return u.attr("transform","translate("+c.width/2+","+c.height+")"),f=v.node().getBBox(),x=z.x+z.width/2-f.width/2+m[0],y=z.y-f.height+m[1],{x:x,y:y}},bottom:function(){return u.remove(),s=d3.svg.symbol().type("triangle-up").size(d),u=v.append("path").attr("d",s()),p=u.node().getBBox(),u.attr("transform","translate("+c.width/2+","+-p.height/2+")"),f=v.node().getBBox(),x=z.x+z.width/2-f.width/2+m[0],y=z.y+z.height+p.height-m[1],{x:x,y:y}},left:function(){return u.attr("transform","translate("+c.width+","+c.height/2+") rotate(-90)"),f=v.node().getBBox(),x=z.x-p.height/2+m[0],y=z.y+m[1],"circle"==b?(x-=z.width+f.width/2,y-=z.height/2):"rect"==b&&(x-=f.width-p.height/2,y-=f.height/2),{x:x,y:y}},right:function(){return u.attr("transform","translate("+-p.height/2+","+c.height/2+") rotate(90)"),f=v.node().getBBox(),x=z.x+p.height+m[0],y=z.y+m[1],"circle"==b?(x+=z.width,y-=z.height/2):"rect"==b&&(x+=z.width,y-=f.height/2),{x:x,y:y}}},n=w[i](),n.x+f.width>E.width&&(n=w.left()),n.x<0&&(n=w.right()),"left"!=i&&"right"!=i||(n.y<0&&(n.y=0),n.y>E.height&&(n.y=E.height)),n.y-f.height<0&&"top"==i&&(n=w.bottom(),n.y+=2*m[1]),v.attr("transform","translate("+n.x+","+n.y+")")}function e(){return[0,0]}function n(){return" "}function r(t){return document.createElementNS(d3.ns.prefix.svg,t)}var i="top",h=5,o=2,d=50,a=e,g=n,l=r("g");return t.attr=function(e,n){return arguments.length<2?d3.select(l).attr(e):(d3.select(l).attr(e,n),t)},t.orient=function(e){return arguments.length?(i=e,t):i},t.padding=function(e){return arguments.length?(h=e,t):h},t.cornerRadius=function(e){return arguments.length?(o=e,t):o},t.stemSize=function(e){return arguments.length?(d=e,t):d},t.offset=function(e){return arguments.length?(a=null==e?e:d3.functor(e),t):a},t.text=function(e){return arguments.length?(g=null==e?e:d3.functor(e),t):g},t};