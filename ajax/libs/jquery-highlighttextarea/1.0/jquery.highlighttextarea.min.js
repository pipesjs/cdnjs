!function(e){e.fn.highlightTextarea=function(i){var t={words:["a","e","i","o","u"],color:"#ffff00",caseSensitive:!0,resizable:!1,id:null,debug:!1};return i=e.extend(t,i),i.regParam="g",0==i.caseSensitive&&(i.regParam+="i"),this.each(function(){function t(e){if(e=r(e,"\n","<br/>"),e=r(e,"  ","&nbsp;&nbsp;"),""!=i.words[0]){replace=i.words[0];for(var t=1;t<i.words.length;t++)replace+="|"+i.words[t];e=r(e,replace,'<span class="highlight" style="background-color:'+i.color+';">$1</span>')}l.html(e),s()}function r(e,t,r){return e.replace(new RegExp("("+t+")",i.regParam),r)}function s(e){e&&(a.css({width:o.outerWidth(!0),height:o.outerHeight(!0)}),c.css({width:o.width(),height:o.height()}),l.css({height:o.height()})),o[0].clientHeight<o[0].scrollHeight&&"hidden"!=o.css("overflow")&&"hidden"!=o.css("overflow-y")||"scroll"==o.css("overflow")||"scroll"==o.css("overflow-y")?l.css({width:o.width()-26,"padding-right":"26px"}):l.css({width:o.width()-9,"padding-right":"9px"}),l.css({top:"-"+o.scrollTop()+"px",height:l.height()+o.scrollTop()})}function h(e,i,t){for(var r=0;r<t.length;r++)i.css(t[r],e.css(t[r]))}function n(e){if(e!=e.replace("em","")){var i=parseFloat(e.replace("em","")),t=jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo("body"),r=t.height();return t.remove(),Math.round(i*r)}return e!=e.replace("px","")?parseInt(e.replace("px","")):parseInt(e)}var o=e(this);o.wrap('<div class="highlightTextarea" />');var a=o.parent(".highlightTextarea");a.prepend('<div class="highlighterContainer"><div class="highlighter"></div></div>');var c=a.children(".highlighterContainer"),l=c.children(".highlighter");null!=i.id&&a.attr("id",i.id);var d=n(o.css("margin-top"))+n(o.css("border-top-width"))+n(o.css("padding-top")),g=n(o.css("margin-left"))+n(o.css("border-left-width"))+n(o.css("padding-left"))+1;h(o,a,["float","vertical-align"]),a.css({width:o.outerWidth(!0),height:o.outerHeight(!0)}),h(o,c,["background","background-image","background-color","background-position","background-repeat","background-origin","background-clip","background-size"]),c.css({top:d+"px",left:g+"px",width:o.width(),height:o.height()}),h(o,l,["font-size","font-family","font-style","font-weight","line-height"]),l.css({width:o.width(),height:o.height()}),o.css({background:"none"}),i.debug&&l.css({color:"#f00"}),l.bind("click",function(){o.focus()}),o.bind({keyup:function(){t(o.val())},scroll:function(){s()},resize:function(){s(!0)}}),i.resizable&&jQuery.ui&&(o.resizable({handles:"se",resize:function(){s(!0)}}),e(".highlightTextarea .ui-resizable-se").css({bottom:"13px",right:"1px"})),t(o.val())}),this}}(jQuery);