!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("d3-path")):"function"==typeof define&&define.amd?define("d3-shape",["exports","d3-path"],i):i(t.d3_shape={},t.d3_path)}(this,function(t,i){"use strict";function n(t,i){this._context=t,this._k=(1-(null==i?.7:i))/2}function s(t,i){this._context=t,this._k=(1-(null==i?.7:i))/2}function h(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function _(t){this._context=t}function o(t){this._context=t}function e(t){this._context=t}function x(t){this._context=t}function l(t){this._context=t}function u(t){this._context=t}function y(t){this._context=t}function c(t){y.call(this,t)}function r(t){return t[0]}function p(t){return t[1]}function f(t){return function(){return t}}function a(){return!0}function d(){function t(t){var n,h=!1;u||(u=new x(n=i.path()));for(var o,l=0,y=t.length;y>l;++l)!e.call(this,o=t[l],l)===h&&((h=!h)?u.lineStart():u.lineEnd()),h&&u.point(+s.call(this,o,l),+_.call(this,o,l));return h&&u.lineEnd(),n?(u=null,n+=""):void 0}var n=r,s=n,h=p,_=h,o=!0,e=a,x=y,l=null,u=null;return t.x=function(i){return arguments.length?(n=i,s="function"==typeof i?n:f(n),t):n},t.y=function(i){return arguments.length?(h=i,_="function"==typeof i?h:f(h),t):h},t.defined=function(i){return arguments.length?(o=i,e="function"==typeof i?o:f(o),t):o},t.interpolate=function(i,n){return arguments.length?((x=v.get(i+""))||(x=y),null!=l&&(u=new x(l)),t):x},t.context=function(i){return arguments.length?(null==i?l=u=null:u=new x(l=i),t):l},t}n.prototype.lineStart=function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=null},n.prototype.lineEnd=function(){null!=this._x0?this._context.quadraticCurveTo(this._x1+this._k*(this._x2-this._x0)*2/3,this._y1+this._k*(this._y2-this._y0)*2/3,this._x2,this._y2):null!=this._x1&&this._context.lineTo(this._x2,this._y2)},n.prototype.point=function(t,i){t=+t,i=+i,null!=this._x0?this._context.bezierCurveTo(this._x1+this._k*(this._x2-this._x0),this._y1+this._k*(this._y2-this._y0),this._x2-this._k*(t-this._x1),this._y2-this._k*(i-this._y1),this._x2,this._y2):null!=this._x1?this._context.quadraticCurveTo(this._x2-this._k*(t-this._x1)*2/3,this._y2-this._k*(i-this._y1)*2/3,this._x2,this._y2):null==this._x2&&this._context.moveTo(t,i),this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i},s.prototype.lineStart=function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=null},s.prototype.lineEnd=function(){},s.prototype.point=function(t,i){t=+t,i=+i,null!=this._x0?this._context.bezierCurveTo(this._x1+this._k*(this._x2-this._x0),this._y1+this._k*(this._y2-this._y0),this._x2-this._k*(t-this._x1),this._y2-this._k*(i-this._y1),this._x2,this._y2):null==this._x1&&null!=this._x2&&this._context.moveTo(t,i),this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i},_.prototype.lineStart=function(){this._x0=this._x1=this._y0=this._y1=null},_.prototype.lineEnd=function(){null!=this._x0&&(this.point(this._x1,this._y1),this._context.lineTo(this._x1,this._y1))},_.prototype.point=function(t,i){t=+t,i=+i,null!=this._x0?h(this,t,i):null!=this._x1?this._context.lineTo((5*this._x1+t)/6,(5*this._y1+i)/6):this._context.moveTo(t,i),this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i},o.prototype.lineStart=function(){this._x0=this._x1=this._y0=this._y1=null,this._moved=!1},o.prototype.lineEnd=function(){},o.prototype.point=function(t,i){t=+t,i=+i,this._moved?h(this,t,i):null!=this._x0&&(this._moved=!0,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6)),this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i},e.prototype.lineStart=function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=null},e.prototype.lineEnd=function(){null!=this._x4?(this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)):null!=this._x3?(this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath()):null!=this._x2&&(this._context.moveTo(this._x2,this._y2),this._context.closePath())},e.prototype.point=function(t,i){t=+t,i=+i,null!=this._x4?h(this,t,i):null!=this._x3?(this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6)):null!=this._x2?(this._x3=t,this._y3=i):(this._x2=t,this._y2=i),this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i},x.prototype.lineStart=function(){this._x=this._y=null},x.prototype.lineEnd=function(){null!=this._x&&(this._context.lineTo(this._x,this._y),this._x=this._y=null)},x.prototype.point=function(t,i){if(t=+t,i=+i,null==this._x)this._context.moveTo(t,i);else{var n=(this._x+t)/2;this._context.lineTo(n,this._y),this._context.lineTo(n,i)}this._x=t,this._y=i},l.prototype.lineStart=function(){this._y=null},l.prototype.lineEnd=function(){},l.prototype.point=function(t,i){t=+t,i=+i,null==this._y?this._context.moveTo(t,i):(this._context.lineTo(t,this._y),this._context.lineTo(t,i)),this._y=i},u.prototype.lineStart=function(){this._x=null},u.prototype.lineEnd=function(){},u.prototype.point=function(t,i){t=+t,i=+i,null==this._x?this._context.moveTo(t,i):(this._context.lineTo(this._x,i),this._context.lineTo(t,i)),this._x=t},y.prototype.lineStart=function(){this._move=!0},y.prototype.lineEnd=function(){},y.prototype.point=function(t,i){this._move?(this._move=!1,this._context.moveTo(t,i)):this._context.lineTo(t,i)},c.prototype=Object.create(y.prototype),c.prototype.lineEnd=function(){this._context.closePath()};var v=(new Map).set("linear",y).set("linear-closed",c).set("step",x).set("step-before",u).set("step-after",l).set("basis",_).set("basis-open",o).set("basis-closed",e).set("cardinal",n).set("cardinal-open",s),T="0.0.1";t.version=T,t.line=d});