!function(t,e){var r="snapper";e.fn[r]=function(a){function n(t,a){var n=e(t).find("."+r+"_item"),i=e(t).width(),s=[];return n.each(function(t){this.offsetLeft>=a-5&&this.offsetLeft<a+i-5&&s.push(this)}),e(s)}function i(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function s(t){return t.height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top"))}function o(t,a,i){i=i?i+"-":"";var s=n(t,a);e(t).trigger(r+"."+i+"snap",{activeSlides:s})}function l(a,i,s,l){o(a,i);var f=function(){e(a).trigger(r+".after-goto",{activeSlides:n(a,i)}),l&&l(),o(a,i,"after")};!t.toss&&t.overthrow&&(t.toss=t.overthrow.toss),void 0===t.toss||s?(a.scrollLeft=i,f()):t.toss(a,{left:i,finished:f})}var f,p,c=arguments,d="scroll-snap-type",u=t.CSS&&t.CSS.supports&&(t.CSS.supports(d,"mandatory")||t.CSS.supports("-webkit-"+d,"mandatory")||t.CSS.supports("-ms-"+d,"mandatory"));return f=this.each(function(){function n(){var e=I.attr("style");I.attr("style","");var r=q.eq(0).attr("style");q.eq(0).attr("style","");var a=k.width(),n=q.eq(0).width(),i=t.getComputedStyle(q[0],null),s=parseFloat(i.getPropertyValue("margin-left")),o=parseFloat(i.getPropertyValue("margin-right")),l=n+s+o;q.eq(0).attr("style",r),I.attr("style",e);var f=F/Math.round(a/l)*100,p=n/a*100,c=o/a*100,d=s/a*100,u=p+d+c,v=p/u,h=c/u,g=d/u;I.css("width",f+"%"),q.css("width",100/F*v+"%"),q.css("margin-left",100/F*g+"%"),q.css("margin-right",100/F*h+"%")}function f(){var t=k[0].scrollLeft,e=I.width(),r=q[1]?q[1].offsetLeft:i(q.eq(0)),a=Math.round(t/r)*r,n=e-k.width();a>n&&(a=n),t!==a&&(u?(o(k[0],a),o(k[0],a,"after")):l(k[0],a))}function d(){var t=k[0].scrollLeft,e=q.length,r=I.width();void 0===A&&(A=Math.round(t/r*e)),E&&clearTimeout(E),E=setTimeout(function(){n(),l(k[0],q[A].offsetLeft,!0),A=E=void 0},50)}function v(t){var e=k[0].scrollLeft,r=I.width()-i(k)-5;return t?e>=r?m():h():0===e?y():g()}function h(){l(k[0],k[0].scrollLeft+I.width()/F,!1,function(){k.trigger(r+".after-next")})}function g(){l(k[0],k[0].scrollLeft-I.width()/F,!1,function(){k.trigger(r+".after-prev")})}function m(){l(k[0],0)}function y(){l(k[0],I.width()-k.width())}function _(e,r,a){void 0!==t.toss?t.toss(e,{left:r,top:a}):(e.scrollLeft=r,e.scrollTop=a)}function w(){var t=k[0].scrollLeft,e=i(I),r=i(D),a=s(D),n=Math.round(t/e*F)||0,o=D.find("a").removeClass(M).eq(n).addClass(M),l=o[0].offsetLeft-r/2,f=o[0].offsetTop-a/2;_(V[0],l,f)}if(void 0===p){var x,S=this,L=e(S),C=L.is("[data-"+r+"-nextprev]"),b=L.attr("data-autoplay")||L.attr("data-snapper-autoplay"),k=e("."+r+"_pane",S),T=r+"-enhanced",I=k.find("."+r+"_items"),q=I.children();q.addClass(r+"_item");var F=q.length,D=e("."+r+"_nav",S),M=r+"_nav_item-selected",P="false"!==L.attr("data-snapper-deeplinking");if("string"!=typeof a){var V=D.find("."+r+"_nav_inner");if(V.length||(V=e('<div class="'+r+'_nav_inner"></div>').append(D.children()).appendTo(D)),k.attr("tabindex","0"),n(),e(S).addClass(T),C){var j=e('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),z=e(".snapper_nextprev_contain",S);z.length||(z=e(S)),j.appendTo(z)}e("a",this).bind("click",function(r){clearInterval(x);var a=e(this).attr("href");if(e(this).is(".snapper_nextprev_next"))return r.preventDefault(),v(!0);if(e(this).is(".snapper_nextprev_prev"))return r.preventDefault(),v(!1);if(0===a.indexOf("#")&&a.length>1){r.preventDefault();var n=e(a,S);n.length&&(l(k[0],n[0].offsetLeft),P&&"replaceState"in t.history&&t.history.replaceState({},document.title,a))}}),e(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearInterval(x),t.preventDefault(),t.stopImmediatePropagation(),v(!1)),39!==t.keyCode&&40!==t.keyCode||(clearInterval(x),t.preventDefault(),t.stopImmediatePropagation(),v(!0))});var A,E;e(t).bind("resize",d),D.length&&(k.bind("scroll",w),w());var N;if(k.bind("scroll",function(t){N&&clearTimeout(N),N=setTimeout(f,50)}),L.bind("touchstart",function(){clearTimeout(x)}),b){var O=!1;try{b=parseInt(b,10)}catch(t){O=!0}if(!b||O){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}x=setInterval(function(){v(!0)},b)}}else{var Q,W=Array.prototype.slice.call(c,1),B=I.width()/F;switch(a){case"goto":Q=W[0]%F,offset=B*Q,l(k[0],offset,!1,function(){f(),"function"==typeof W[1]&&W[1]()});break;case"getIndex":p=Math.floor((k[0].scrollLeft+1)/B);break;case"updateWidths":n()}}}}),void 0!==p?p:f}}(this,jQuery);