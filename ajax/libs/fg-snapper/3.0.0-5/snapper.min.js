!function(t,e){var r="snapper";e.fn[r]=function(a){function n(t,a){var n=e(t).find("."+r+"_item"),i=e(t).width(),s=[];return n.each(function(t){this.offsetLeft>=a-5&&this.offsetLeft<a+i-5&&s.push(this)}),e(s)}function i(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function s(t){return t.height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top"))}function o(t,a,i){i=i?i+"-":"";var s=n(t,a);e(t).trigger(r+"."+i+"snap",{activeSlides:s})}function l(a,i,s,l){d=!1,o(a,i);var f=function(){a.scrollLeft=i,e(a).closest("."+r).removeClass(r+"-looping"),e(a).trigger(r+".after-goto",{activeSlides:n(a,i)}),l&&l(),o(a,i,"after"),d=!0};!t.toss&&t.overthrow&&(t.toss=t.overthrow.toss),void 0===t.toss||s?(a.scrollLeft=i,f()):t.toss(a,{left:i,finished:f})}var f,p,c=arguments,d=!0,u="scroll-snap-type",h=t.CSS&&t.CSS.supports&&(t.CSS.supports(u,"mandatory")||t.CSS.supports("-webkit-"+u,"mandatory")||t.CSS.supports("-ms-"+u,"mandatory"));return f=this.each(function(){function n(){var t=S.attr("data-autoplay")||S.attr("data-snapper-autoplay"),e=!1;if(t){try{t=parseInt(t,10)}catch(t){e=!0}if(!t||e){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}}return t}function f(){var e=q.attr("style");q.attr("style","");var r=F.eq(0).attr("style");F.eq(0).attr("style","");var a=b.width(),n=F.eq(0).width(),i=t.getComputedStyle(F[0],null),s=parseFloat(i.getPropertyValue("margin-left")),o=parseFloat(i.getPropertyValue("margin-right")),l=n+s+o;F.eq(0).attr("style",r),q.attr("style",e);var f=D/Math.round(a/l)*100,p=n/a*100,c=o/a*100,d=s/a*100,u=p+d+c,h=p/u,v=c/u,g=d/u;q.css("width",f+"%"),F.css("width",100/D*h+"%"),F.css("margin-left",100/D*g+"%"),F.css("margin-right",100/D*v+"%")}function d(){var t=b[0].scrollLeft,e=q.width(),r=F[1]?F[1].offsetLeft:i(F.eq(0)),a=Math.round(t/r)*r,n=e-b.width();a>n&&(a=n),t!==a&&(h?(o(b[0],a),o(b[0],a,"after")):l(b[0],a))}function u(t){var e=b[0].scrollLeft,a=q.width()-i(b)-5;return t?e>=a?(S.addClass(r+"-looping"),m()):v():0===e?(S.addClass(r+"-looping"),y()):g()}function v(){l(b[0],b[0].scrollLeft+q.width()/D,!1,function(){b.trigger(r+".after-next")})}function g(){l(b[0],b[0].scrollLeft-q.width()/D,!1,function(){b.trigger(r+".after-prev")})}function m(){l(b[0],0)}function y(){l(b[0],q.width()-b.width())}function _(e,r,a){void 0!==t.toss?t.toss(e,{left:r,top:a}):(e.scrollLeft=r,e.scrollTop=a)}function w(){var t=b[0].scrollLeft,e=i(q),r=i(M),a=s(M),n=Math.round(t/e*D)||0,o=M.find("a").removeClass(P).eq(n).addClass(P),l=o[0].offsetLeft-r/2,f=o[0].offsetTop-a/2;_(V[0],l,f)}function x(t){t&&(C=setTimeout(function(){var t=n();t&&(u(!0),x(t))},t))}if(void 0===p){var C,L=this,S=e(L),T=S.is("[data-"+r+"-nextprev]"),b=e("."+r+"_pane",L),k=r+"-enhanced",q=b.find("."+r+"_items"),F=q.children();F.addClass(r+"_item");var D=F.length,M=e("."+r+"_nav",L),P=r+"_nav_item-selected",I="false"!==S.attr("data-snapper-deeplinking");if("string"!=typeof a){var V=M.find("."+r+"_nav_inner");if(V.length||(V=e('<div class="'+r+'_nav_inner"></div>').append(M.children()).appendTo(M)),b.attr("tabindex","0"),f(),e(L).addClass(k),T){var j=e('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),z=e(".snapper_nextprev_contain",L);z.length||(z=e(L)),j.appendTo(z)}e("a",this).bind("click",function(r){clearTimeout(C);var a=e(this).attr("href");if(e(this).is(".snapper_nextprev_next"))return r.preventDefault(),u(!0);if(e(this).is(".snapper_nextprev_prev"))return r.preventDefault(),u(!1);if(0===a.indexOf("#")&&a.length>1){r.preventDefault();var n=e(a,L);n.length&&(l(b[0],n[0].offsetLeft),I&&"replaceState"in t.history&&t.history.replaceState({},document.title,a))}}),e(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearTimeout(C),t.preventDefault(),t.stopImmediatePropagation(),u(!1)),39!==t.keyCode&&40!==t.keyCode||(clearTimeout(C),t.preventDefault(),t.stopImmediatePropagation(),u(!0))});var A,E;e(t).bind("resize",function(){var t=b[0].scrollLeft,e=F.length,r=q.width();void 0===A&&(A=Math.round(t/r*e)),E&&clearTimeout(E),E=setTimeout(function(){f(),l(b[0],F[A].offsetLeft,!0),A=E=void 0},50)}),M.length&&(b.bind("scroll",w),w());var N;b.bind("scroll",function(t){N&&clearTimeout(N),N=setTimeout(d,50)}),S.bind("touchstart",function(){clearTimeout(C)}),x(n())}else{var O,Q=Array.prototype.slice.call(c,1),W=q.width()/D;switch(a){case"goto":O=Q[0]%D,offset=W*O,l(b[0],offset,!1,function(){d(),"function"==typeof Q[1]&&Q[1]()});break;case"getIndex":p=Math.floor((b[0].scrollLeft+1)/W);break;case"updateWidths":f()}}}}),void 0!==p?p:f}}(this,jQuery);