!function(t,e){var r="snapper";e.fn[r]=function(a){function n(t,a){var n=e(t).find("."+r+"_item"),i=e(t).width(),s=[];return n.each(function(t){this.offsetLeft>=a-5&&this.offsetLeft<a+i-5&&s.push(this)}),e(s)}function i(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function s(t){return t.height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top"))}function o(t,a,i){i=i?i+"-":"";var s=n(t,a);e(t).trigger(r+"."+i+"snap",{activeSlides:s})}function l(a,i,s,l){d=!1,o(a,i);var f=function(){e(a).trigger(r+".after-goto",{activeSlides:n(a,i)}),l&&l(),o(a,i,"after"),d=!0};!t.toss&&t.overthrow&&(t.toss=t.overthrow.toss),void 0===t.toss||s?(a.scrollLeft=i,f()):t.toss(a,{left:i,finished:f})}var f,p,c=arguments,d=!0,u="scroll-snap-type",v=t.CSS&&t.CSS.supports&&(t.CSS.supports(u,"mandatory")||t.CSS.supports("-webkit-"+u,"mandatory")||t.CSS.supports("-ms-"+u,"mandatory"));return f=this.each(function(){function n(){var e=q.attr("style");q.attr("style","");var r=F.eq(0).attr("style");F.eq(0).attr("style","");var a=T.width(),n=F.eq(0).width(),i=t.getComputedStyle(F[0],null),s=parseFloat(i.getPropertyValue("margin-left")),o=parseFloat(i.getPropertyValue("margin-right")),l=n+s+o;F.eq(0).attr("style",r),q.attr("style",e);var f=D/Math.round(a/l)*100,p=n/a*100,c=o/a*100,d=s/a*100,u=p+d+c,v=p/u,h=c/u,g=d/u;q.css("width",f+"%"),F.css("width",100/D*v+"%"),F.css("margin-left",100/D*g+"%"),F.css("margin-right",100/D*h+"%")}function f(){var t=T[0].scrollLeft,e=q.width(),r=F[1]?F[1].offsetLeft:i(F.eq(0)),a=Math.round(t/r)*r,n=e-T.width();a>n&&(a=n),t!==a&&(v?(o(T[0],a),o(T[0],a,"after")):l(T[0],a))}function u(){var t=T[0].scrollLeft,e=F.length,r=q.width();void 0===E&&(E=Math.round(t/r*e)),N&&clearTimeout(N),N=setTimeout(function(){n(),l(T[0],F[E].offsetLeft,!0),E=N=void 0},50)}function h(t){var e=T[0].scrollLeft,r=q.width()-i(T)-5;return t?e>=r?y():g():0===e?_():m()}function g(){l(T[0],T[0].scrollLeft+q.width()/D,!1,function(){T.trigger(r+".after-next")})}function m(){l(T[0],T[0].scrollLeft-q.width()/D,!1,function(){T.trigger(r+".after-prev")})}function y(){l(T[0],0)}function _(){l(T[0],q.width()-T.width())}function w(e,r,a){void 0!==t.toss?t.toss(e,{left:r,top:a}):(e.scrollLeft=r,e.scrollTop=a)}function x(){var t=T[0].scrollLeft,e=i(q),r=i(M),a=s(M),n=Math.round(t/e*D)||0,o=M.find("a").removeClass(P).eq(n).addClass(P),l=o[0].offsetLeft-r/2,f=o[0].offsetTop-a/2;w(j[0],l,f)}if(void 0===p){var S,L=this,C=e(L),b=C.is("[data-"+r+"-nextprev]"),k=C.attr("data-autoplay")||C.attr("data-snapper-autoplay"),T=e("."+r+"_pane",L),I=r+"-enhanced",q=T.find("."+r+"_items"),F=q.children();F.addClass(r+"_item");var D=F.length,M=e("."+r+"_nav",L),P=r+"_nav_item-selected",V="false"!==C.attr("data-snapper-deeplinking");if("string"!=typeof a){var j=M.find("."+r+"_nav_inner");if(j.length||(j=e('<div class="'+r+'_nav_inner"></div>').append(M.children()).appendTo(M)),T.attr("tabindex","0"),n(),e(L).addClass(I),b){var z=e('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),A=e(".snapper_nextprev_contain",L);A.length||(A=e(L)),z.appendTo(A)}e("a",this).bind("click",function(r){clearInterval(S);var a=e(this).attr("href");if(e(this).is(".snapper_nextprev_next"))return r.preventDefault(),h(!0);if(e(this).is(".snapper_nextprev_prev"))return r.preventDefault(),h(!1);if(0===a.indexOf("#")&&a.length>1){r.preventDefault();var n=e(a,L);n.length&&(l(T[0],n[0].offsetLeft),V&&"replaceState"in t.history&&t.history.replaceState({},document.title,a))}}),e(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearInterval(S),t.preventDefault(),t.stopImmediatePropagation(),h(!1)),39!==t.keyCode&&40!==t.keyCode||(clearInterval(S),t.preventDefault(),t.stopImmediatePropagation(),h(!0))});var E,N;e(t).bind("resize",u),M.length&&(T.bind("scroll",x),x());var O;if(T.bind("scroll",function(t){d&&(O&&clearTimeout(O),O=setTimeout(f,50))}),C.bind("touchstart",function(){clearTimeout(S)}),k){var Q=!1;try{k=parseInt(k,10)}catch(t){Q=!0}if(!k||Q){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}S=setInterval(function(){h(!0)},k)}}else{var W,B=Array.prototype.slice.call(c,1),G=q.width()/D;switch(a){case"goto":W=B[0]%D,offset=G*W,l(T[0],offset,!1,function(){f(),"function"==typeof B[1]&&B[1]()});break;case"getIndex":p=Math.floor((T[0].scrollLeft+1)/G);break;case"updateWidths":n()}}}}),void 0!==p?p:f}}(this,jQuery);