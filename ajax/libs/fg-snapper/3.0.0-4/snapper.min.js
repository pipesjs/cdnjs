!function(t,e){var r="snapper";e.fn[r]=function(a){function n(t,a){var n=e(t).find("."+r+"_item"),s=e(t).width(),i=[];return n.each(function(t){this.offsetLeft>=a-5&&this.offsetLeft<a+s-5&&i.push(this)}),e(i)}function s(t){return t.width()+parseFloat(t.css("margin-left"))+parseFloat(t.css("margin-right"))}function i(t){return t.height()+parseFloat(t.css("margin-bottom"))+parseFloat(t.css("margin-top"))}function o(t,a,s){s=s?s+"-":"";var i=n(t,a);e(t).trigger(r+"."+s+"snap",{activeSlides:i})}function l(a,s,i,l){d=!1,o(a,s);var f=function(){a.scrollLeft=s,e(a).trigger(r+".after-goto",{activeSlides:n(a,s)}),l&&l(),o(a,s,"after"),d=!0};!t.toss&&t.overthrow&&(t.toss=t.overthrow.toss),void 0===t.toss||i?(a.scrollLeft=s,f()):t.toss(a,{left:s,finished:f})}var f,p,c=arguments,d=!0,u="scroll-snap-type",v=t.CSS&&t.CSS.supports&&(t.CSS.supports(u,"mandatory")||t.CSS.supports("-webkit-"+u,"mandatory")||t.CSS.supports("-ms-"+u,"mandatory"));return f=this.each(function(){function n(){var e=I.attr("style");I.attr("style","");var r=q.eq(0).attr("style");q.eq(0).attr("style","");var a=k.width(),n=q.eq(0).width(),s=t.getComputedStyle(q[0],null),i=parseFloat(s.getPropertyValue("margin-left")),o=parseFloat(s.getPropertyValue("margin-right")),l=n+i+o;q.eq(0).attr("style",r),I.attr("style",e);var f=F/Math.round(a/l)*100,p=n/a*100,c=o/a*100,d=i/a*100,u=p+d+c,v=p/u,h=c/u,g=d/u;I.css("width",f+"%"),q.css("width",100/F*v+"%"),q.css("margin-left",100/F*g+"%"),q.css("margin-right",100/F*h+"%")}function f(){var t=k[0].scrollLeft,e=I.width(),r=q[1]?q[1].offsetLeft:s(q.eq(0)),a=Math.round(t/r)*r,n=e-k.width();a>n&&(a=n),t!==a&&(v?(o(k[0],a),o(k[0],a,"after")):l(k[0],a))}function d(){var t=k[0].scrollLeft,e=q.length,r=I.width();void 0===A&&(A=Math.round(t/r*e)),E&&clearTimeout(E),E=setTimeout(function(){n(),l(k[0],q[A].offsetLeft,!0),A=E=void 0},50)}function u(t){var e=k[0].scrollLeft,r=I.width()-s(k)-5;return t?e>=r?m():h():0===e?y():g()}function h(){l(k[0],k[0].scrollLeft+I.width()/F,!1,function(){k.trigger(r+".after-next")})}function g(){l(k[0],k[0].scrollLeft-I.width()/F,!1,function(){k.trigger(r+".after-prev")})}function m(){l(k[0],0)}function y(){l(k[0],I.width()-k.width())}function _(e,r,a){void 0!==t.toss?t.toss(e,{left:r,top:a}):(e.scrollLeft=r,e.scrollTop=a)}function w(){var t=k[0].scrollLeft,e=s(I),r=s(D),a=i(D),n=Math.round(t/e*F)||0,o=D.find("a").removeClass(M).eq(n).addClass(M),l=o[0].offsetLeft-r/2,f=o[0].offsetTop-a/2;_(V[0],l,f)}if(void 0===p){var x,L=this,S=e(L),C=S.is("[data-"+r+"-nextprev]"),b=S.attr("data-autoplay")||S.attr("data-snapper-autoplay"),k=e("."+r+"_pane",L),T=r+"-enhanced",I=k.find("."+r+"_items"),q=I.children();q.addClass(r+"_item");var F=q.length,D=e("."+r+"_nav",L),M=r+"_nav_item-selected",P="false"!==S.attr("data-snapper-deeplinking");if("string"!=typeof a){var V=D.find("."+r+"_nav_inner");if(V.length||(V=e('<div class="'+r+'_nav_inner"></div>').append(D.children()).appendTo(D)),k.attr("tabindex","0"),n(),e(L).addClass(T),C){var j=e('<ul class="snapper_nextprev"><li class="snapper_nextprev_item"><a href="#prev" class="snapper_nextprev_prev">Prev</a></li><li class="snapper_nextprev_item"><a href="#next" class="snapper_nextprev_next">Next</a></li></ul>'),z=e(".snapper_nextprev_contain",L);z.length||(z=e(L)),j.appendTo(z)}e("a",this).bind("click",function(r){clearInterval(x);var a=e(this).attr("href");if(e(this).is(".snapper_nextprev_next"))return r.preventDefault(),u(!0);if(e(this).is(".snapper_nextprev_prev"))return r.preventDefault(),u(!1);if(0===a.indexOf("#")&&a.length>1){r.preventDefault();var n=e(a,L);n.length&&(l(k[0],n[0].offsetLeft),P&&"replaceState"in t.history&&t.history.replaceState({},document.title,a))}}),e(this).bind("keydown",function(t){37!==t.keyCode&&38!==t.keyCode||(clearInterval(x),t.preventDefault(),t.stopImmediatePropagation(),u(!1)),39!==t.keyCode&&40!==t.keyCode||(clearInterval(x),t.preventDefault(),t.stopImmediatePropagation(),u(!0))});var A,E;e(t).bind("resize",d),D.length&&(k.bind("scroll",w),w());var N;if(k.bind("scroll",function(t){N&&clearTimeout(N),N=setTimeout(f,50)}),S.bind("touchstart",function(){clearTimeout(x)}),b){var O=!1;try{b=parseInt(b,10)}catch(t){O=!0}if(!b||O){throw new Error("Snapper: `data-autoplay` must have an natural number value.")}x=setInterval(function(){u(!0)},b)}}else{var Q,W=Array.prototype.slice.call(c,1),B=I.width()/F;switch(a){case"goto":Q=W[0]%F,offset=B*Q,l(k[0],offset,!1,function(){f(),"function"==typeof W[1]&&W[1]()});break;case"getIndex":p=Math.floor((k[0].scrollLeft+1)/B);break;case"updateWidths":n()}}}}),void 0!==p?p:f}}(this,jQuery);