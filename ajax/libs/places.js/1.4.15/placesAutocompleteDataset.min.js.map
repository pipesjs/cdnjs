{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*","webpack:/webpack/bootstrap 3e75f59b2acb6453a40e?b712*","webpack:///src/createAutocompleteDataset.js?1b89*","webpack:///src/navigatorLanguage.js?b003*","webpack:///~/insert-css/index.js?f60e*","webpack:///src/createAutocompleteSource.js?ddf0*","webpack:///src/defaultTemplates.js?34d1*","webpack:///src/findCountryCode.js?d09b*","webpack:///src/findType.js?4fba*","webpack:///src/formatDropdownValue.js?9a5f*","webpack:///src/formatHit.js?aa26*","webpack:///src/formatInputValue.js?0f7a*"],"names":["root","factory","exports","module","define","amd","this","modules","installedModules","moduleId","i","l","__webpack_require__","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","templates","source","formatInputValue","default","_extends","options","undefined","displayKey","navigator","language","insertCss","css","Error","usage","position","prepend","container","document","querySelector","containerId","containers","push","styleElements","styleElement","insertBefore","childNodes","appendChild","styleSheet","cssText","textContent","createStyleElement","createElement","setAttribute","algoliasearch","clientOptions","_ref","apiKey","appId","hitsPerPage","aroundLatLng","aroundRadius","aroundLatLngViaIP","insideBoundingBox","insidePolygon","countries","computeQueryParams","_ref$computeQueryPara","params","useDeviceLocation","_ref$useDeviceLocatio","_ref$language","split","onHits","onError","_ref$onHits","_ref$onError","e","onRateLimitReached","type","placesClient","addAlgoliaAgent","initPlaces","defaultQueryParams","toLowerCase","map","country","coords","_ref2","userCoords","latitude","longitude","query","cb","hits","content","hitIndex","_extends2","_defineProperty","then","hit","rawAnswer","statusCode","footer","value","_algolia2","trim","_osm2","suggestion","findCountryCode","tagIndex","tag","tags","length","find","match","types","city","amenity/bus_station","amenity/townhall","railway/station","aeroway/aerodrome","aeroway/terminal","aeroway/gate","indexOf","t","highlight","administrative","token","icons","filter","address","busStop","trainStation","townhall","airport","_plane2","defaultValue","highlightedValues","bestAttributes","matchLevel","index","matchedWords","words","sort","a","b","getBestHighlightedForm","_highlightResult","countryCode","_findCountryCode2","_tags","latlng","_findType2","lat","lng","_geoloc","postcode","console","error","replace"],"mappings":"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","file":"dist/cdn/placesAutocompleteDataset.min.js","sourceRoot":"","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"placesAutocompleteDataset\"] = factory();\n\telse\n\t\troot[\"placesAutocompleteDataset\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 83);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3e75f59b2acb6453a40e","import createAutocompleteSource from './createAutocompleteSource.js';\nimport defaultTemplates from './defaultTemplates.js';\n\nexport default function createAutocompleteDataset(options) {\n  const templates = {\n    ...defaultTemplates,\n    ...options.templates,\n  };\n\n  const source = createAutocompleteSource({\n    ...options,\n    formatInputValue: templates.value,\n    templates: undefined,\n  });\n\n  return {\n    source,\n    templates,\n    displayKey: 'value',\n    name: 'places',\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/createAutocompleteDataset.js","// polyfill for navigator.language (IE <= 10)\n// not polyfilled by https://cdn.polyfill.io/v2/docs/\n\n// Defined: http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#navigatorlanguage\n//   with allowable values at http://www.ietf.org/rfc/bcp/bcp47.txt\n// Note that the HTML spec suggests that anonymizing services return \"en-US\" by default for\n//   user privacy (so your app may wish to provide a means of changing the locale)\nif (!('language' in navigator)) {\n  navigator.language =\n    // IE 10 in IE8 mode on Windows 7 uses upper-case in\n    // navigator.userLanguage country codes but per\n    // http://msdn.microsoft.com/en-us/library/ie/ms533052.aspx (via\n    // http://msdn.microsoft.com/en-us/library/ie/ms534713.aspx), they\n    // appear to be in lower case, so we bring them into harmony with navigator.language.\n    (navigator.userLanguage &&\n      navigator.userLanguage.replace(\n        /-[a-z]{2}$/,\n        String.prototype.toUpperCase\n      )) ||\n    'en-US'; // Default for anonymizing services: http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#navigatorlanguage\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/navigatorLanguage.js","var containers = []; // will store container HTMLElement references\nvar styleElements = []; // will store {prepend: HTMLElement, append: HTMLElement}\n\nvar usage = 'insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).';\n\nfunction insertCss(css, options) {\n    options = options || {};\n\n    if (css === undefined) {\n        throw new Error(usage);\n    }\n\n    var position = options.prepend === true ? 'prepend' : 'append';\n    var container = options.container !== undefined ? options.container : document.querySelector('head');\n    var containerId = containers.indexOf(container);\n\n    // first time we see this container, create the necessary entries\n    if (containerId === -1) {\n        containerId = containers.push(container) - 1;\n        styleElements[containerId] = {};\n    }\n\n    // try to get the correponding container + position styleElement, create it otherwise\n    var styleElement;\n\n    if (styleElements[containerId] !== undefined && styleElements[containerId][position] !== undefined) {\n        styleElement = styleElements[containerId][position];\n    } else {\n        styleElement = styleElements[containerId][position] = createStyleElement();\n\n        if (position === 'prepend') {\n            container.insertBefore(styleElement, container.childNodes[0]);\n        } else {\n            container.appendChild(styleElement);\n        }\n    }\n\n    // strip potential UTF-8 BOM if css was read from a file\n    if (css.charCodeAt(0) === 0xFEFF) { css = css.substr(1, css.length); }\n\n    // actually add the stylesheet\n    if (styleElement.styleSheet) {\n        styleElement.styleSheet.cssText += css\n    } else {\n        styleElement.textContent += css;\n    }\n\n    return styleElement;\n};\n\nfunction createStyleElement() {\n    var styleElement = document.createElement('style');\n    styleElement.setAttribute('type', 'text/css');\n    return styleElement;\n}\n\nmodule.exports = insertCss;\nmodule.exports.insertCss = insertCss;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/insert-css/index.js\n// module id = 16\n// module chunks = 0 1 2","import formatHit from './formatHit.js';\nimport version from './version.js';\n\nexport default function createAutocompleteSource({\n  algoliasearch,\n  clientOptions,\n  apiKey,\n  appId,\n  hitsPerPage,\n  aroundLatLng,\n  aroundRadius,\n  aroundLatLngViaIP,\n  insideBoundingBox,\n  insidePolygon,\n  countries,\n  formatInputValue,\n  computeQueryParams = params => params,\n  useDeviceLocation = false,\n  language = navigator.language.split('-')[0],\n  onHits = () => {},\n  onError = e => {\n    throw e;\n  },\n  onRateLimitReached,\n  type,\n}) {\n  const placesClient = algoliasearch.initPlaces(appId, apiKey, clientOptions);\n  placesClient.as.addAlgoliaAgent(`Algolia Places ${version}`);\n\n  const defaultQueryParams = {\n    countries,\n    hitsPerPage: hitsPerPage || 5,\n    language,\n    type,\n  };\n\n  if (Array.isArray(defaultQueryParams.countries)) {\n    defaultQueryParams.countries = defaultQueryParams.countries.map(country =>\n      country.toLowerCase()\n    );\n  }\n\n  if (typeof defaultQueryParams.language === 'string') {\n    defaultQueryParams.language = defaultQueryParams.language.toLowerCase();\n  }\n\n  if (aroundLatLng) {\n    defaultQueryParams.aroundLatLng = aroundLatLng;\n  } else if (aroundLatLngViaIP !== undefined) {\n    defaultQueryParams.aroundLatLngViaIP = aroundLatLngViaIP;\n  }\n\n  if (aroundRadius) {\n    defaultQueryParams.aroundRadius = aroundRadius;\n  }\n\n  if (insideBoundingBox) {\n    defaultQueryParams.insideBoundingBox = insideBoundingBox;\n  }\n\n  if (insidePolygon) {\n    defaultQueryParams.insidePolygon = insidePolygon;\n  }\n\n  let userCoords;\n  if (useDeviceLocation) {\n    navigator.geolocation.watchPosition(({ coords }) => {\n      userCoords = `${coords.latitude},${coords.longitude}`;\n    });\n  }\n\n  return (query, cb) =>\n    placesClient\n      .search(\n        computeQueryParams({\n          ...defaultQueryParams,\n          [userCoords ? 'aroundLatLng' : undefined]: userCoords,\n          query,\n        })\n      )\n      .then(content => {\n        const hits = content.hits.map((hit, hitIndex) =>\n          formatHit({\n            formatInputValue,\n            hit,\n            hitIndex,\n            query,\n            rawAnswer: content,\n          })\n        );\n\n        onHits({\n          hits,\n          query,\n          rawAnswer: content,\n        });\n\n        return hits;\n      })\n      .then(cb)\n      .catch(e => {\n        if (e.statusCode === 429) {\n          onRateLimitReached();\n          return;\n        }\n\n        onError(e);\n      });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/createAutocompleteSource.js","import value from './formatInputValue.js';\nimport suggestion from './formatDropdownValue.js';\nimport algoliaLogo from './icons/algolia.svg';\nimport osmLogo from './icons/osm.svg';\n\nexport default {\n  footer: `<div class=\"ap-footer\">\n  Built by <a href=\"https://www.algolia.com/places\" title=\"Search by Algolia\" class=\"ap-footer-algolia\">${algoliaLogo.trim()}</a>\n  using <a href=\"https://community.algolia.com/places/documentation.html#license\" class=\"ap-footer-osm\" title=\"Algolia Places data © OpenStreetMap contributors\">${osmLogo.trim()} <span>data</span></a>\n  </div>`,\n  value,\n  suggestion,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaultTemplates.js","export default function findCountryCode(tags) {\n  for (let tagIndex = 0; tagIndex < tags.length; tagIndex++) {\n    const tag = tags[tagIndex];\n    const find = tag.match(/country\\/(.*)?/);\n    if (find) {\n      return find[1];\n    }\n  }\n\n  return undefined;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/findCountryCode.js","export default function findType(tags) {\n  const types = {\n    country: 'country',\n    city: 'city',\n    'amenity/bus_station': 'busStop',\n    'amenity/townhall': 'townhall',\n    'railway/station': 'trainStation',\n    'aeroway/aerodrome': 'airport',\n    'aeroway/terminal': 'airport',\n    'aeroway/gate': 'airport',\n  };\n\n  for (const t in types) {\n    if (tags.indexOf(t) !== -1) {\n      return types[t];\n    }\n  }\n\n  return 'address';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/findType.js","import addressIcon from './icons/address.svg';\nimport cityIcon from './icons/city.svg';\nimport countryIcon from './icons/country.svg';\nimport busIcon from './icons/bus.svg';\nimport trainIcon from './icons/train.svg';\nimport townhallIcon from './icons/townhall.svg';\nimport planeIcon from './icons/plane.svg';\n\nconst icons = {\n  address: addressIcon,\n  city: cityIcon,\n  country: countryIcon,\n  busStop: busIcon,\n  trainStation: trainIcon,\n  townhall: townhallIcon,\n  airport: planeIcon,\n};\n\nexport default function formatDropdownValue({ type, highlight }) {\n  const { name, administrative, city, country } = highlight;\n\n  const out = `<span class=\"ap-suggestion-icon\">${icons[type].trim()}</span>\n<span class=\"ap-name\">${name}</span>\n<span class=\"ap-address\">\n  ${[city, administrative, country]\n    .filter(token => token !== undefined)\n    .join(', ')}</span>`.replace(/\\s*\\n\\s*/g, ' ');\n\n  return out;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/formatDropdownValue.js","import findCountryCode from './findCountryCode.js';\nimport findType from './findType.js';\n\nfunction getBestHighlightedForm(highlightedValues) {\n  const defaultValue = highlightedValues[0].value;\n  // collect all other matches\n  const bestAttributes = [];\n  for (let i = 1; i < highlightedValues.length; ++i) {\n    if (highlightedValues[i].matchLevel !== 'none') {\n      bestAttributes.push({\n        index: i,\n        matchedWords: highlightedValues[i].words,\n      });\n    }\n  }\n  // no matches in this attribute, retrieve first value\n  if (bestAttributes.length === 0) {\n    return defaultValue;\n  }\n  // sort the matches by `desc(words), asc(index)`\n  bestAttributes.sort((a, b) => {\n    if (a.words > b.words) {\n      return -1;\n    } else if (a.words < b.words) {\n      return 1;\n    }\n    return a.index - b.index;\n  });\n  // and append the best match to the first value\n  return bestAttributes[0].index === 0\n    ? `${defaultValue} (${highlightedValues[bestAttributes[1].index].value})`\n    : `${highlightedValues[bestAttributes[0].index].value} (${defaultValue})`;\n}\n\nexport default function formatHit({\n  formatInputValue,\n  hit,\n  hitIndex,\n  query,\n  rawAnswer,\n}) {\n  try {\n    const name = hit.locale_names[0];\n    const country = hit.country;\n    const administrative = hit.administrative && hit.administrative[0] !== name\n      ? hit.administrative[0]\n      : undefined;\n    const city = hit.city && hit.city[0] !== name ? hit.city[0] : undefined;\n\n    const highlight = {\n      name: getBestHighlightedForm(hit._highlightResult.locale_names),\n      city: city\n        ? getBestHighlightedForm(hit._highlightResult.city)\n        : undefined,\n      administrative: administrative\n        ? getBestHighlightedForm(hit._highlightResult.administrative)\n        : undefined,\n      country: country ? hit._highlightResult.country.value : undefined,\n    };\n\n    const suggestion = {\n      name,\n      administrative,\n      city,\n      country,\n      countryCode: findCountryCode(hit._tags),\n      type: findType(hit._tags),\n      latlng: {\n        lat: hit._geoloc.lat,\n        lng: hit._geoloc.lng,\n      },\n      postcode: hit.postcode && hit.postcode[0],\n    };\n\n    // this is the value to put inside the <input value=\n    const value = formatInputValue(suggestion);\n\n    return {\n      ...suggestion,\n      highlight,\n      hit,\n      hitIndex,\n      query,\n      rawAnswer,\n      value,\n    };\n  } catch (e) {\n    /* eslint-disable no-console */\n    console.error('Could not parse object', hit);\n    console.error(e);\n    /* eslint-enable no-console */\n    return {\n      value: 'Could not parse object',\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/formatHit.js","export default function formatInputValue({\n  administrative,\n  city,\n  country,\n  name,\n  type,\n}) {\n  const out = `${name}${type !== 'country' && country !== undefined ? ',' : ''}\n ${city ? `${city},` : ''}\n ${administrative ? `${administrative},` : ''}\n ${country ? country : ''}`\n    .replace(/\\s*\\n\\s*/g, ' ')\n    .trim();\n  return out;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/formatInputValue.js"]}