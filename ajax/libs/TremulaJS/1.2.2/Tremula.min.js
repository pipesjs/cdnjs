!function(){var t,s,i;(function(e){function a(t,s){return P.call(t,s)}function r(t,s){var i,e,a,r,n,o,h,l,u,c,g,m=s&&s.split("/"),p=x.map,d=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(s){for(m=m.slice(0,m.length-1),t=t.split("/"),n=t.length-1,x.nodeIdCompat&&S.test(t[n])&&(t[n]=t[n].replace(S,"")),t=m.concat(t),u=0;u<t.length;u+=1)if("."===(g=t[u]))t.splice(u,1),u-=1;else if(".."===g){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||d)&&p){for(i=t.split("/"),u=i.length;u>0;u-=1){if(e=i.slice(0,u).join("/"),m)for(c=m.length;c>0;c-=1)if((a=p[m.slice(0,c).join("/")])&&(a=a[e])){r=a,o=u;break}if(r)break;!h&&d&&d[e]&&(h=d[e],l=u)}!r&&h&&(r=h,o=l),r&&(i.splice(0,o,r),t=i.join("/"))}return t}function n(t,s){return function(){return m.apply(e,T.call(arguments,0).concat([t,s]))}}function o(t){return function(s){return r(s,t)}}function h(t){return function(s){f[t]=s}}function l(t){if(a(y,t)){var s=y[t];delete y[t],v[t]=!0,g.apply(e,s)}if(!a(f,t)&&!a(v,t))throw new Error("No "+t);return f[t]}function u(t){var s,i=t?t.indexOf("!"):-1;return i>-1&&(s=t.substring(0,i),t=t.substring(i+1,t.length)),[s,t]}function c(t){return function(){return x&&x.config&&x.config[t]||{}}}var g,m,p,d,f={},y={},x={},v={},P=Object.prototype.hasOwnProperty,T=[].slice,S=/\.js$/;p=function(t,s){var i,e=u(t),a=e[0];return t=e[1],a&&(a=r(a,s),i=l(a)),a?t=i&&i.normalize?i.normalize(t,o(s)):r(t,s):(t=r(t,s),e=u(t),a=e[0],t=e[1],a&&(i=l(a))),{f:a?a+"!"+t:t,n:t,pr:a,p:i}},d={require:function(t){return n(t)},exports:function(t){var s=f[t];return void 0!==s?s:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:c(t)}}},g=function(t,s,i,r){var o,u,c,g,m,x,P=[],T=typeof i;if(r=r||t,"undefined"===T||"function"===T){for(s=!s.length&&i.length?["require","exports","module"]:s,m=0;m<s.length;m+=1)if(g=p(s[m],r),"require"===(u=g.f))P[m]=d.require(t);else if("exports"===u)P[m]=d.exports(t),x=!0;else if("module"===u)o=P[m]=d.module(t);else if(a(f,u)||a(y,u)||a(v,u))P[m]=l(u);else{if(!g.p)throw new Error(t+" missing "+u);g.p.load(g.n,n(r,!0),h(u),{}),P[m]=f[u]}c=i?i.apply(f[t],P):void 0,t&&(o&&o.exports!==e&&o.exports!==f[t]?f[t]=o.exports:c===e&&x||(f[t]=c))}else t&&(f[t]=i)},t=s=m=function(t,s,i,a,r){if("string"==typeof t)return d[t]?d[t](s):l(p(t,s).f);if(!t.splice){if(x=t,x.deps&&m(x.deps,x.callback),!s)return;s.splice?(t=s,s=i,i=null):t=e}return s=s||function(){},"function"==typeof i&&(i=a,a=r),a?g(e,t,s,i):setTimeout(function(){g(e,t,s,i)},4),m},m.config=function(t){return m(t)},t._defined=f,i=function(t,s,i){s.splice||(i=s,s=[]),!a(f,t)&&!a(y,t)&&(y[t]=[t,s,i])},i.amd={jQuery:!0}})(),i("almond",function(){}),i("Layouts",[],function(){function t(t,s){var i=this;s=s||{};var e=s.axes||s.staticAxisCount;e||(e=0),i.layout_cache||(i.layout_cache={lastLayoutOptions:s,lastLayoutId:"basicGridLayout",axesLengthArr:new Array(e),lastAxesObjArr:new Array(e)});var a=(t.index,i.itemConstraint),r=[2*i.itemMargins[0],2*i.itemMargins[1]],n=i.layout_cache.axesLengthArr,o=i.layout_cache.lastAxesObjArr,h=t.layoutType,l="tremulaBlockItem"==h?function(){var t=0;if(e>0)for(var s=1;s<=e;s++)t=n[s]>n[t]?s:t;return t}():function(){var t=0;if(e>0)for(var s=1;s<=e;s++){if(!n[t])return t;if(!n[s])return s;t=n[s]<n[t]?s:t}return t}();if(t.staticAxis=l,o[l]){t.prevObj=o[l],t.prevObj.nextObj=t;var u=t.prevObj.tailPointPos;t.headPointPos[i.si]=u[i.si]}else t.headPointPos[i.si]=0;var c="tremulaBlockItem"==h?0:a*l+r[i.si_]*l;t.headPointPos[i.si_]=c,t.tailPointPos=[t.headPointPos[0]+t.w+r[0],t.headPointPos[1]+t.h+r[1]],t.outerDims=[t.tailPointPos[0]-t.headPointPos[0],t.tailPointPos[1]-t.headPointPos[1]],o[l]=t,n[l]=(n[l]||0)+t.dims[i.si]}function s(t,s){var i=this;s=s||{};var e=(s.axisCount,t.index);if(0==e)t.headPointPos=[0,0];else{t.prevObj=i.boxes[e-1],t.prevObj.nextObj=t;var a=t.prevObj.tailPointPos;t.headPointPos[i.si]=a[i.si];var r=a[i.si];t.headPointPos[i.si_]=r}t.tailPointPos=[20+t.headPointPos[0],t.headPointPos[1]]}return{basicGridLayout:t,stackLayout:s}}),i("Easings",[],function(){function t(t,s,i,e,a){return e*(s/a)+i}function s(t,s,i,e,a){return e*Math.sin(s/a*(Math.PI/2))+i}function i(t,s,i,e,a){return s/=a/2,s<1?e/2*s*s+i:(s--,-e/2*(s*(s-2)-1)+i)}function e(t,s,i,e,a){return-e*((s=s/a-1)*s*s*s-1)+i}function a(t,s,i,e,a){return s/=a,s--,e*(s*s*s+1)+i}function r(t,s,i,e,a){return s/=a/2,s<1?e/2*s*s*s+i:(s-=2,e/2*(s*s*s+2)+i)}function n(t,s,i,e,a){var r=1.70158,n=0,o=e;if(0==s)return i;if(1==(s/=a))return i+e;if(n||(n=.3*a),o<Math.abs(e)){o=e;var r=n/4}else var r=n/(2*Math.PI)*Math.asin(e/o);return o*Math.pow(2,-10*s)*Math.sin(2*(s*a-r)*Math.PI/n)+e+i}function o(t){return t*t*t*t*t}function h(t){return 1+--t*t*t*t*t}return{linearOut:t,easeOutSine:s,easeInOutQuad:i,easeOutQuart:e,easeOutCubic:a,easeInOutCubic:r,easeOutElastic:n,easeInQuint_t:o,easeOutQuint_t:h}}),i("DataAdapters",[],function(){function t(t){this.data=t,this.imgUrl=t.imgUrl,this.w=this.width=t.w,this.h=this.height=t.h,this.isLastContentBlock=t.isLastContentBlock||!1,this.layoutType=this.data.layoutType||"tremulaInline",this.noScaling=this.data.noScaling||!1,this.auxClassList=t.auxClassList||"",this.template=this.data.template||""}function s(t,s){this.data=t,this.isLastContentBlock=t.isLastContentBlock,this.layoutType=this.data.layoutType||"tremulaInline",this.noScaling=this.data.noScaling||!1,this.isFavorite=t.isFavorite,this.auxClassList=t.auxClassList||"";var i=s.options.itemConstraint;if(t.UrlInfo){var e="http://imgc.artprintimages.com/images/P-{{w}}-{{h}}-85/"+t.UrlInfo.ImageUrl.split("/MED/")[1];s.sx?this.src=e.replace(/{{w}}/,"1000").replace(/{{h}}/,i):this.src=e.replace(/{{h}}/,"1000").replace(/{{w}}/,i),this.w=this.width=t.ImageDimensions[2].PixelWidth,this.h=this.height=t.ImageDimensions[2].PixelHeight,this.imgUrl=this.src,this.data.JudyLastNativeAspectImgURL=this.imgUrl,this.auxClassList="judyRS "+this.auxClassList}else this.w=this.width=this.data.w||100,this.h=this.height=this.data.h||100,this.imgUrl="";this.artistName="",this.artistUrl="",this.itemTitle="",this.itemPrice="";var a="",r="";t.Artist&&(a=t.Artist.FirstName||""),t.Artist&&(r=t.Artist.LastName||""),t.Artist&&(this.artistName=(a+" "+r).replace(/  /g," ").trim()||""),t.Artist&&(this.artistUrl=(t.Artist.ArtistUrl||"").replace(/gallery/g,"discover")||""),t.Title&&(this.itemTitle=t.Title||""),t.ItemPrice&&(this.itemPrice=t.ItemPrice.Price),this.artistNameTitle=this.artistName+(this.artistName&&this.itemTitle?", ":"")+this.itemTitle,this.template=this.data.template||'<img draggable="false" class="moneyShot" onload="imageLoaded(this)" src=""/> <div class="boxLabel">{{artistNameTitle}}</div>'.replace(/{{artistNameTitle}}/g,this.artistNameTitle).replace(/{{itemTitle}}/g,this.itemTitle);var n=s.options.itemConstraint,o=n/this[s.saDim_],h=this[s.saDim]*o,l=[h,n],u=s.options.maxWidthClassMap;if(u)for(key in u)if(l[0]<u[key]){this.auxClassList=this.auxClassList+" "+key;break}}function i(t,s){this.data=t,this.isLastContentBlock=t.isLastContentBlock||!1,this.layoutType=this.data.layoutType||"tremulaInline",this.noScaling=this.data.noScaling||!1,this.isFavorite=t.isFavorite||!1,this.auxClassList=t.auxClassList||"";s.options.itemConstraint;t.url_z?(this.src=t.url_z,this.w=this.width=t.width_z,this.h=this.height=t.height_z,this.imgUrl=this.src,this.auxClassList="flickrRS "+this.auxClassList):(this.w=this.width=this.data.w||100,this.h=this.height=this.data.h||100,this.imgUrl=""),this.itemTitle=t.title||"",this.template=this.data.template||'<img draggable="false" class="moneyShot" onload="imageLoaded(this)" src=""/> <div class="boxLabel">{{itemTitle}}</div>'.replace(/{{itemTitle}}/g,"")}function e(t){this.imgUrl_SM=t.UrlInfo.ImageUrl,this.imgUrl_LG=t.UrlInfo.XLargeUrl,this.imgUrl_ZOOM=t.UrlInfo.ZoomUrlWithoutWatermark,this.imgUrl_SQ=t.UrlInfo.CroppedSquareImageUrl,this.data=t,this.w=this.width=100,this.h=this.height=100,this.imgUrl=this.imgUrl_SQ,this.data.JudyLastNativeAspectImgURL=null}return{TremulaItem:t,flickrSearch:i,JudyItem:s,JudyItem_SQ:e}}),i("Projections",[],function(){function t(t,s){return[{x:t[3].x*s[0],y:t[3].y*s[1]},{x:t[2].x*s[0],y:t[2].y*s[1]},{x:t[1].x*s[0],y:t[1].y*s[1]},{x:t[0].x*s[0],y:t[0].y*s[1]}]}function s(s,i){var e,a,r=d,n=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=this.waves.tailRamp,u=this.waves.headRamp,c=this.waves.triangle,g=[n,o],m=t(r,g),p=jsBezier.pointOnCurve(m,u),e=(jsBezier.gradientAtPoint(m,u),n-.5*this.outerDims[0]-p.x),a=p.y-.5*this.dims[1]+i-.5*(h[1]-this.dims[1])-this.itemMargins[1],f=Math.min(-400,-1e3*(1-c));this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, "+f+"px) rotateY("+(180*l-90)+"deg)",this.e.style.opacity=Math.min(1,2*c-.5),this.pPos=[s,i]}function i(s,i){var e,a,r=f,n=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=(this.waves.tailRamp,this.waves.headRamp),u=this.waves.triangle,c=[n,o],g=t(r,c),m=jsBezier.pointOnCurve(g,l),e=(jsBezier.gradientAtPoint(g,l),n-.5*this.outerDims[0]-m.x),a=m.y-.5*this.dims[1]+i-.5*(h[1]-this.dims[1])-this.itemMargins[1],p=Math.max(-800,-1e3*u);this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, "+p+"px) rotateY("+(180*l-90)+"deg)",this.e.style.opacity=Math.min(1,2*u-.5),this.pPos=[s,i]}function e(s,i){var e,a,r=m,n=this.parent.gridDims[0],o=this.parent.gridDims[1],h=(this.waves.tailRamp,this.waves.headRamp),l=(this.waves.triangle,[n,o]),u=t(r,l),c=jsBezier.pointOnCurve(u,h),g=jsBezier.gradientAtPoint(u,h),e=n-.5*this.outerDims[0]-c.x,a=i+this.itemMargins[1]+(o-.5*this.outerDims[1])-c.y;this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, 0) rotateZ("+60*g+"deg)",this.e.style.opacity=1,this.pPos=[s,i]}function a(s,i){var e,a,r=this.parent.gridDims[0],n=this.parent.gridDims[1],o=this.parent.currentGridContentDims,h=(this.waves.tailRamp,this.waves.headRamp),l=(this.waves.triangle,[r,n]),u=r<1e3?r<641?g:m:p,c=t(u,l),d=jsBezier.pointOnCurve(c,h),f=jsBezier.gradientAtPoint(c,h),e=r-.5*this.outerDims[0]-d.x,a=d.y-.5*this.dims[1]+i-.5*(o[1]-this.dims[1])-this.itemMargins[1];this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, 0) rotateZ("+-60*f+"deg)",this.e.style.opacity=1,this.pPos=[s,i]}function r(s,i){var e,a,r=v,n=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=this.waves.tailRamp,u=this.waves.headRamp,c=(this.waves.triangle,[n,o]),g=t(r,c),m=jsBezier.pointOnCurve(g,u),e=(jsBezier.gradientAtPoint(g,l),n-m.x-.5*this.dims[0]),a=m.y-.5*this.dims[1]-(.5*(h[1]-this.dims[1])-i-this.itemMargins[1]);this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, 0px)";var p=1e6-this.index;this.e.style.zIndex=p,this.e.style.opacity=1,this.pPos=[s,i]}function n(s,i){var e,a,r=P,n=this.parent.gridDims[0],o=this.parent.gridDims[1],h=this.parent.currentGridContentDims,l=this.waves.tailRamp,u=(this.waves.headRamp,this.waves.triangle,[n,o]),c=t(r,u),g=jsBezier.pointOnCurve(c,l),e=(jsBezier.gradientAtPoint(c,l),g.x-.5*this.dims[0]),a=o-g.y-.5*this.dims[1]-(.5*(h[1]-this.dims[1])-i-this.itemMargins[1]);this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, 0px)";var m=1e6-this.index;this.e.style.zIndex=m,this.e.style.opacity=1,this.pPos=[s,i]}function o(s,i){var e,a,r=y,n=this.parent.gridDims,o=(this.parent.currentGridContentDims,this.waves.tailRamp,this.waves.headRamp),h=(this.waves.triangle,[n[0],n[1]]),l=t(r,h),u=jsBezier.pointOnCurve(l,o),e=(jsBezier.gradientAtPoint(l,o),n[0]-.5*this.outerDims[0]-u.x),a=u.y-.5*this.dims[1]*(this.parent.staticAxisCount+1)+i-this.parent.itemMargins[1]*this.parent.staticAxisCount;this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, 0px)";var c=1e6-this.index;this.e.style.zIndex=c,this.e.style.opacity=1,this.pPos=[s,i]}function h(s,i){var e,a,r=x,n=this.parent.staticAxisCount+1,o=this.parent.gridDims,h=(this.parent.currentGridContentDims,this.waves.tailRamp,this.waves.headRamp),l=(this.waves.triangle,[o[0],o[1]]),u=t(r,l),c=jsBezier.pointOnCurve(u,h),e=(jsBezier.gradientAtPoint(u,h),c.x-.5*this.dims[0]*n+s-this.parent.itemMargins[0]*this.parent.staticAxisCount),a=o[1]-.5*this.outerDims[1]-c.y;this.e.style.webkitTransformOrigin=this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+e+"px,"+a+"px, 0px)";var g=1e6-this.index;this.e.style.zIndex=g,this.e.style.opacity=1,this.pPos=[s,i]}function l(t,s){var i,e,a=this.waves;a.tailRamp,a.headRamp,a.triangle;i=t,e=s,zo=0,this.e.style.webkitTransformOrigin="50%",this.e.style.MozTransformOrigin="50%",this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+i+"px,"+e+"px, "+zo+"px)",this.e.style.opacity=1,this.pPos=[t,s]}function u(t,s){var i,e,a=this.waves,r=(a.tailRamp,a.headRamp,a.triangle);i=t,e=s,this.e.style.transform=this.e.style.OTransform=this.e.style.MozTransform=this.e.style.webkitTransform="translate3d("+i+"px,"+e+"px, 0) scale("+(1*r+.4)+")",this.e.style.opacity=r,this.pPos=[t,s]}var c={},g=[{x:0,y:.57},{x:.33,y:.5},{x:.66,y:.5},{x:1,y:.57}],m=[{x:0,y:.65},{x:.33,y:.5},{x:.66,y:.5},{x:1,y:.65}],p=[{x:0,y:.9},{x:.33,y:.4},{x:.66,y:.4},{x:1,y:.9}],d=[{x:0,y:.5},{x:.45,y:.5},{x:.55,y:.5},{x:1,y:.5}],f=[{x:-.1,y:.5},{x:.6,y:.5},{x:.4,y:.5},{x:1.1,y:.5}],y=[{x:0,y:.5},{x:.33,y:.5},{x:.66,y:.5},{x:1,y:.5}],x=[{x:.5,y:0},{x:.5,y:.33},{x:.5,y:.66},{x:.5,y:1}];jsBezier.factorCurveBy=t,c.turntable=s,c.enterTheDragon=i,c.sunrise=e,c.mountain=a;var v=[{x:0,y:0},{x:0,y:.5},{x:.5,y:1},{x:1,y:1}];c.bezierQuad=r;var P=[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:0}];return c.bezierShape=n,c.streamHorizontal=o,c.pinterest=h,c.xyPlain=l,c.xyBumpTaper=u,c}),i("Animator",[],function(){return function(t){t||(t={});t.parent;return this.resetAnimation=function(){this.easingCurve=t.easingCurve,this.easeToDuration=t.easeTime||500,this.isEasing=!1,this.activeDuration=0,this.easingProgress=this.activeDuration,this.easeFactor=0,this.easingStartTime=0,this.easeToStart=0,this.easeToDiff=0,t.parent.isEasing=!1},this.animateFrTo=function(s,i,e,a){e=void 0==e?this.easeToDuration:e,a&&(this.easingCurve=a);var r=e,n=s-i;this.easeToDiff=-1*n,this.isEasing=!0,this.activeDuration=r,this.easingStartTime=new Date,this.easingProgress=0,t.parent.isEasing=!0},this.getNextFrameDiff=function(){return this.easingProgress<this.activeDuration?(this.easingProgress=new Date-this.easingStartTime,this.easeFactor=this.easingCurve(null,this.easingProgress,0,1,this.activeDuration)):this.resetAnimation(),this.easeToDiff*(1-this.easeFactor)},this.resetAnimation(),{isEasing:function(){return this.isEasing},resetAnimation:this.resetAnimation,animateFrTo:this.animateFrTo,getNextFrameDiff:this.getNextFrameDiff}}}),i("Box",["Easings","Animator"],function(t,s){var i=function(i){this.parent=i;var e=this;this.ezEnabled=function(){return this.parent.itemEasing},this.ezOptions=this.parent.options.itemEasingParams,this.doPreloading=this.parent.options.itemPreloading,this.getlayoutXansEasing=function(){return this.parent.layoutXansEasing},this.getLayoutIsXing=function(){return this.parent.layoutIsXing},this.getLayoutXingMs=function(){return this.parent.layoutXansMs},this.springLimit=this.parent.springLimit,this.itemMargins=this.parent.itemMargins,this.index=null,this.x=this.y=0,this.dims=[0,0],this.outerDims=[0,0],this.staticAxis=0,this.headPointPos=[0,0],this.tailPointPos=[0,0],this.pPos=[0,0],this.prevObj=null,this.nextObj=null,this.targetPaintPos=[0,0],this.currentPaintPos=[0,0],this.targetXY=[0,0],this.currentXY=[0,0],this.sizeRatio=0,this.displayClass="",this.isOnScreen=!1,this.isLoaded=!1,this.hasEntered=!1,this.ani_si=new s({easingCurve:t.easeOutCubic,parent:this}),this.ani_si_=new s({easingCurve:t.easeOutCubic,parent:this}),this.element=this.e=document.createElement("div"),this.$e=$(this.e),this.element.classList.add("gridBox"),this.e.style.display="none",this.model={},this.setModel=function(t){this.model=t,this.model.data.getNextJudyItem=function(){var t=i.getBoxFromIndex(e.index+1);return t&&t.model&&(t=t.model.data),t},this.model.data.getPrevJudyItem=function(){var t=i.getBoxFromIndex(e.index-1);return t&&t.model&&(t=t.model.data),t},this.layoutType=t.layoutType||"tremulaInLine",this.noScaling=t.noScaling||!1,""==this.e.innerHTML.trim()&&(this.model.template?this.e.innerHTML=this.model.template:this.e.innerHTML='<div class="boxLabel">X</div><img draggable="false" class="moneyShot" onload="imageLoaded(this)" src=""/>',this.$moneyShot=$(".moneyShot",this.$e),this.$c=$(".boxLabel",this.e)),this.$e.data("model",this),t.auxClassList&&this.$e.addClass(t.auxClassList),t.isLastContentBlock&&this.$e.addClass("isLastContentBlock"),t.isFavorite?this.$e.addClass("isFavorite"):this.$e.removeClass("isFavorite")}};return i.prototype.updateContent=function(){this.$c.length&&this.$c.html(this.index+"<br/>"+this.waves.headRamp.toFixed(3))},i.prototype.setDimensions=function(t,s){this.e.style.width=t+"px",this.e.style.height=s+"px",this.dims[0]=this.width=this.w=t,this.dims[1]=this.height=this.h=s,this.sizeRatio=s/t,this.displayClass=this.getDisplayClass(this.sizeRatio)},i.prototype.getDisplayClass=function(t){return t>1.1?"portrait":t<.9?"landscape":"square"},i.prototype.paintToSurfaceMap=function(t,s){this.parent.surfaceMap.call(this,t,s)},i.prototype.remove=function(){this.parent.e.removeChild(this.e)},i.prototype.doOnScreen=function(t){if(void 0!=t&&this.isOnScreen!==t){this.isOnScreen=t,t&&!this.isLoaded&&this.$moneyShot.attr("src",this.model.imgUrl);var s=this.e.classList;this.e.style.display;t?(this.hasEntered||(this.hasEntered=!0,setTimeout(function(){s.add("hasEntered")},10)),this.e.style.display="block",setTimeout(function(){s.add("onScreen")},10)):(this.e.style.display="none",s.remove("onScreen")),this.isLoaded=!0}return this.isOnScreen},i.prototype.setWaveforms=function(t){this.waves=t},i.prototype.getSaEvtStats=function(){var t=this.parent.si,s=this.pPos[t],i=s+.5*this.outerDims[t],e=this.parent.saEventPos,a=i-e;return{d:a,dPercent:a/this.parent.gridDims[t],isOnEvtPos:e>=s&&e<=s+this.outerDims[t]}},i.prototype.setAbsPos=function(t,s){if(!this.ezEnabled()&&!this.getLayoutIsXing())return this.currentXY[0]=t,this.x=t,this.currentXY[1]=s,this.y=s,void 0;var i=(this.isOnSaEvt,this.getSaEvtStats());this.isOnSaEvt=i.isOnEvtPos,this.saEvtDistance=i.d,this.saEvtDistPercent=i.dPercent;var e=i.dPercent,a=Math.abs(e)<.09,r=5*(1-this.parent.easingPercent),n=this.parent.si,o=this.parent.si_,h=n?s:t,l=o?s:t,u=h>this.targetXY[n]+r||h<this.targetXY[n]-r||a?1:0,c=l>this.targetXY[o]+r||l<this.targetXY[o]-r||a?1:0;if(h!=this.targetXY[n]&&u||l!=this.targetXY[o]&&c){this.targetXY=[t,s];var g,m;this.getLayoutIsXing()?(g=this.getlayoutXansEasing(),m=this.getLayoutXingMs()):this.parent.isTouching?(g=this.ezOptions.touchCurve,m=this.ezOptions.easeTime):(g=this.ezOptions.swipeCurve,m=this.ezOptions.easeTime),0==this.currentXY[0]&&0==this.currentXY[1]&&(this.currentXY[0]=t,this.currentXY[1]=s),this.ani_si.animateFrTo(this.currentXY[n],this.targetXY[n],m,g),this.ani_si_.animateFrTo(this.currentXY[o],this.targetXY[o],m,g)}var p=this.ani_si.getNextFrameDiff();Math.abs(p)>.001?this.currentXY[n]=this.targetXY[n]-p:this.currentXY[n]=this.targetXY[n];var d=this.ani_si_.getNextFrameDiff();Math.abs(d)>.001?this.currentXY[o]=this.targetXY[o]-p:this.currentXY[o]=this.targetXY[o];var f=Math.min(Math.abs(e),1),y=this.springLimit,x=this.targetXY[n]+y*f,v=this.targetXY[n]-y*f,P=this.targetXY[o]+y*f,T=this.targetXY[o]-y*f;this.currentXY[n]>x&&(this.currentXY[n]=x),this.currentXY[n]<v&&(this.currentXY[n]=v),this.currentXY[o]>P&&(this.currentXY[o]=P),this.currentXY[o]<T&&(this.currentXY[o]=T),this.x=this.currentXY[0],this.y=this.currentXY[1]},i}),i("Grid",["Easings","Box","Layouts"],function(t,s,i){function e(t){var s=this;if(o=new Date,!n){n=!0;var i=setInterval(function(){new Date-o>100&&(n=!1,s.handleGesture({type:"release"}),clearInterval(i))},65)}}function a(t){t.preventDefault?t.preventDefault():t.gesture.preventDefault(),t.stopPropagation?t.stopPropagation():t.gesture.stopPropagation()}var r=function(s,i,e){this.physicsLoopRAF=null,this.options=i,this.$e=s,this.e=s[0],this.parent=e,this.parentParentE=s.parent(),this.statsCache={},this.onChangePub=i.onChangePub,this.surfaceMap=function(){},this.setSurfaceMap=function(t){this.surfaceMap=t},this.setSurfaceMap(i.surfaceMap),this.boxCount=0,this.boxes=[],this.steppedScrolling=!1,this.easeToCompensation=0,this.springLimit=i.itemEasingParams.springLimit,this.boxAxisLengths=[0,0],this.currentGridContentDims=[0,0],this.contentDims=[0,0],this.trailingEdgeScrollPos=null,this.scrollAxisOffset=i.scrollAxisOffset,this.staticAxisOffset=i.staticAxisOffset,this.axisOffset=[],this.gridDims=[],this.scrollPos=0,this.absScrollPos=0;this.setScrollPos=function(t,s){this.scrollPos=s?this.scrollPos+t:t},this.getAbsToScrollPos=function(t){return t-this.firstItemPos},this.setAbsScrollPos=function(t,s){return this.scrollPos=s?this.scrollPos+t:this.firstItemPos+t},this.moveToAbsScrollPos=function(t,s){this.scrollPos=s?this.scrollPos+t:this.firstItemPos+t,this.startPhysicsLoop()},this.getScrollViewDim=function(){return this.gridDims[this.si]},this.getScrollDimCenter=function(){return this.gridDims[this.si]/2},this.getScrollPos=function(){return this.scrollPos},this.saEventPos=null,this.saEventPosProgress=0,this.easingPercent=100,this.isEasing=!1,this.isEasingTo=!1,this.marginScrollWarp=!1,this.easeToThresh=2,this.easingProgress=0,this.easingStartTime=0,this.schwingBackDuration=500,this.schwingEasingFn=t.easeOutCubic,this.easingDuration=1800,this.easeToDuration=300,this.activeDuration=this.easingDuration,this.easeToStart=0,this.easeToEnd=0,this.easeToDiff=0,this.dMomentum=100,this.momentum=0,this.momentumLimit=150,this.mouseWheelReleaseTime=100,this.isLooping=i.isLooping||!1,this.isTouching=!1,this.hasData=!1,this.isInTailMargin=!1,this.isInHeadMargin=!1,this.hasShortGridDimsSi=!1,this.hasMediumGridDimsSi=!1,this.scrollDirection=0,this.itemMargins=i.itemMargins,this.itemConstraint=i.itemConstraint,this.staticAxisCount=i.staticAxisCount,this.scrollMarginDefault=-2e3,this.scrollMargin=[0,0],this.firstItemPos=0,this.frameCtr=0,this.frameRateLog=[],this.frameRate=0,this.lastFrameTime=new Date,this.trackFrameRate=function(){var t,s=new Date;this.frameRateLog.push(s-this.lastFrameTime),this.frameRateLog.length>100&&this.frameRateLog.shift(),t=this.frameRateLog.reduce(function(t,s){return t+s}),this.frameRate=1e3/(t/100),this.lastFrameTime=s},this.lastSPL=0,this.splReleaseTime=500,this.fastScrollThresh=20,this.itemEasing=i.itemEasing,this.setItemEasing=function(t){this.itemEasing=!!t},this.isChildEasing=!1,this.lastSelected=null,this.getBoxFromIndex=function(t){return this.boxes[t]},this.getLastBoxFromIndex=function(){return this.boxes[this.boxes.length-1]},this.setScrollAxis=function(t){t||(t=this.sa),this.sa="y"==t?"y":"x",this.SA=this.sa.toUpperCase(),this.sx="x"==this.sa,this.si=this.sx?0:1,this.si_=this.sx?1:0,this.saDim=this.sx?"width":"height",this.saDim_=this.sx?"height":"width",this.gridDims[0]=this.$e.width(),this.gridDims[1]=this.$e.height(),this.axisOffset[0]=this.sx?this.scrollAxisOffset:this.staticAxisOffset,this.axisOffset[1]=this.sx?this.staticAxisOffset:this.scrollAxisOffset,void 0==this.scrollPos&&(this.scrollPos=0),this.lastScrollPos=0,this.lastScrollDiff=0,this.bounceMarginDefault=50,this.bounceMargin=this.bounceMarginDefault,this.trailingEdgeScrollPos&&(this.trailingEdgeScrollPos=this.getTrailingEdgeScrollPos())},this.lastUserEvent={time:new Date,evt:"init"},this.tagLastUserEvent=function(t){this.lastUserEvent={time:new Date,evt:t}},this.resetEasing(),this.setScrollAxis(i.scrollAxis)};r.prototype.updateConfig=function(t,s){t.hasOwnProperty("axes")&&(t.staticAxisCount=t.axes),t.hasOwnProperty("surfaceMap")&&this.setSurfaceMap(t.surfaceMap),$.extend(this,t),this.resetAllItemConstraints(),s&&this.setLayout(null,t)},r.prototype.toggleScrollAxis=function(t){this.jumpToScrollProgress(0),t||(t="x"==this.sa?"y":"x"),this.setScrollAxis(t),this.resetAllItemConstraints(),this.setLayout(i.basicGridLayout,{axes:this.staticAxisCount})},r.prototype.toggleIsLooping=function(t){void 0===t&&(t=!this.isLooping),this.isLooping=t},r.prototype.setLastTouchOrigin=function(t){if(this.itemEasing&&!this.marginScrollWarp&&t){var s=isNaN(t)?this.getPageSA_evt(t):t,i=s/this.gridDims[this.si];return this.saEventPos=s,this.saEventPosProgress=i,{saEventPos:s,saEventPosProgress:i}}},r.prototype.getScrollFrame=function(){this.frameCtr++,this.isEasing=this.easingProgress<this.activeDuration;var s=0;if(this.isEasing)this.easingProgress=new Date-this.easingStartTime,s=easingFn(null,this.easingProgress,0,1,this.activeDuration),this.easingPercent=Math.min(1,this.easingProgress/this.activeDuration);else{this.resetEasing();var i=new Date;!this.isChildEasing&&i-this.lastSPL>this.splReleaseTime&&this.stopPhysicsLoop()}if(this.isEasingTo){var e=this.easeToDiff*(1-s);this.setScrollPos(this.easeToEnd-e)}else{var e=this.momentum*(1-s);0!=e&&this.setScrollPos(this.scrollPos+e)}this.isInTailMargin=!1,this.isInHeadMargin=!1;var a=this.lastScrollPos-this.scrollPos;if(this.lastScrollDiff=a,(!this.isLooping&&this.scrollPos>this.firstItemPos||this.hasShortGridDimsSi&&this.absScrollPos>2&&!this.steppedScrolling)&&(this.isInHeadMargin=!0,a<0?(this.setLastTouchOrigin(0),this.marginScrollWarp=!0,this.isEasing&&this.activeDuration-this.easingProgress>this.easeToDuration&&(this.activeDuration=this.easeToDuration)):a>0&&(this.marginScrollWarp=!1),this.scrollPos>this.bounceMargin+this.firstItemPos&&(this.setScrollPos(this.bounceMargin+this.firstItemPos),this.resetEasing()),!this.isTouching&&!this.isEasing&&this.easeTo(this.firstItemPos-1,this.schwingBackDuration,this.schwingEasingFn)),!this.isLooping&&this.scrollPos<this.trailingEdgeScrollPos&&(this.isInTailMargin=!0,a>0?(this.setLastTouchOrigin(this.gridDims[this.si]),this.marginScrollWarp=!0,this.activeDuration-this.easingProgress>this.easeToDuration&&(this.activeDuration=this.easeToDuration)):a<0&&(this.marginScrollWarp=!1),this.scrollPos<this.trailingEdgeScrollPos-this.bounceMargin&&(this.setScrollPos(this.trailingEdgeScrollPos-this.bounceMargin),this.resetEasing()),!this.isTouching&&!this.isEasing&&this.easeTo(this.trailingEdgeScrollPos+1,this.schwingBackDuration,this.schwingEasingFn)),!this.isInHeadMargin&&!this.isInTailMargin&&(this.marginScrollWarp=!1),(this.hasShortGridDimsSi||this.marginScrollWarp)&&!this.isEasing){var r;r=this.hasShortGridDimsSi&&this.absScrollPos>0?this.absScrollPos:this.scrollPos>0?this.scrollPos-this.firstItemPos:-(this.scrollPos-this.trailingEdgeScrollPos),this.hasMediumGridDimsSi&&this.absScrollPos<0&&(r=this.scrollPos-this.firstItemPos);var n=Math.min(1,r/this.bounceMargin),o=Math.min(1,t.easeOutQuart(null,n,0,1,1));this.setScrollPos(a*o,!0)}return this.scrollDirection=a>0?1:a<0?-1:0,this.lastScrollPos=this.scrollPos,this.absScrollPos=-(this.scrollPos-this.firstItemPos),this.scrollProgress=this.absScrollPos/this.absTrailingEdgeScrollPos,this.trackFrameRate(),this.onChangePub&&this.onChangePub(this),this.scrollPos},r.prototype.startPhysicsLoop=function(){if(this.lastSPL=new Date,!this.physicsLoopRAF){var t=this;this.physicsLoopRAF=requestAnimationFrame(function(){t.assignBoxObjects()})}},r.prototype.stopPhysicsLoop=function(){this.physicsLoopRAF&&(cancelAnimationFrame(this.physicsLoopRAF),this.physicsLoopRAF=null)},r.prototype.oneShotPaint=function(t){t&&(this.setLastTouchOrigin(t),this.isEasing&&this.resetEasing(),this.startPhysicsLoop())},r.prototype.getPageSA_evt=function(t){return t&&t.gesture?t.gesture.center["page"+this.SA]:null},r.prototype.getClosestScrollOriginObj=function(){var t=this.boxes;return this.isInHeadMargin?this.getBoxFromIndex(0):this.isInTailMargin?this.getLastBoxFromIndex():t.reduce(function(t,s){return t.waves.triangle>s.waves.triangle?t:s})},r.prototype.jumpObjTo=function(t,s){this.resetEasing(),s||(s=0),isNaN(s)||(s=this.getBoxFromIndex(s));var i=s.headPointPos[this.si]+.5*s.width;this.setAbsScrollPos(t-i),this.startPhysicsLoop()},r.prototype.easeToThisStepItem=function(t){this.easeObjTo(this.easeToCompensation,t)},r.prototype.easeToClosestStepItem=function(){var t=this.getClosestScrollOriginObj();this.easeObjTo(this.easeToCompensation,t)},r.prototype.easeToNextStepItem=function(){var t=this.getClosestScrollOriginObj(),s=this.getBoxFromIndex(t.index+1||null);this.easeObjTo(this.easeToCompensation,s||t)},r.prototype.easeToPrevStepItem=function(){var t=this.getClosestScrollOriginObj(),s=this.getBoxFromIndex(t.index-1||null);this.easeObjTo(this.easeToCompensation,s||t)},r.prototype.jumpToScrollProgress=function(t){t>1&&(t=.999),t<0&&(t=.001),this.setAbsScrollPos(-this.absTrailingEdgeScrollPos*t),this.startPhysicsLoop()},r.prototype.easeObjTo=function(t,s,i,e){s||(s=0),isNaN(s)||(s=this.getBoxFromIndex(s));var a=this.getAbsToScrollPos(s.headPointPos[this.si]+.5*s.width);this.easeTo(t-a,i,e)},r.prototype.easeTo=function(t,s,i){if(s=void 0==s?this.easeToDuration:s,i&&(easingFn=i),t>this.firstItemPos&&(t=this.firstItemPos),t<this.trailingEdgeScrollPos&&(t=this.trailingEdgeScrollPos),this.momentum=0,this.easingPercent=0,this.isEasingTo=!0,this.activeDuration=s,this.easingStartTime=new Date,this.easingProgress=0,this.easeToStart=this.scrollPos,this.easeToEnd=t,this.easeToDiff=-1*(this.easeToStart-this.easeToEnd),this.easeToDiff<2&&this.easeToDiff>-2)return!1;this.startPhysicsLoop()},r.prototype.resetEasing=function(){easingFn=t.easeOutCubic,this.easingProgress=this.activeDuration,this.isEasingTo=!1,this.isEasing=!1,this.easeToDiff=0,this.momentum=0},r.prototype.startEasing=function(t,s){t&&(t=20*Math.pow(t,3)),this.isInHeadMargin||this.isInTailMargin||(void 0!=t&&(this.momentum=Math.min(Math.max(t,-this.momentumLimit),this.momentumLimit)),this.isEasing=!0,this.easingStartTime=new Date,this.easingProgress=0,this.activeDuration=this.easingDuration,this.startPhysicsLoop())},r.prototype.removeAll=function(){$.each(this.boxes,function(t,s){s.remove()}),this.boxes=[],this.boxCount=0},r.prototype.initBoxes=function(t,e,a){try{t.length}catch(t){return console&&console.log("initBoxes(): No data found.")}e||(e=this.options.adapter),a||($.each(this.boxes,function(t,s){s.remove()}),this.boxes=[],this.boxCount=0);var r=this.options.lastContentBlock,n=this.boxes.filter(function(t){return t.model.isLastContentBlock}).length>0;if(r&&!n&&t.splice(0,0,r),t){for(var o=this.boxCount,h=this.boxCount+=t.length,l=o;l<h;l++){var u=new s(this),c=t[l-o];c.isLastContentBlock?u.setModel(new c.adapter(t[l-o],this)):u.setModel(new e(t[l-o],this));var g=u.noScaling?[u.model[this.saDim],u.model[this.saDim_]]:this.getConstrainedItemDims(u);u.setDimensions(g[this.si],g[this.si_]),r&&l>0?this.boxes.splice(-1,0,u):"insert"==a?this.boxes.splice(0,0,u):this.boxes.push(u),this.e.appendChild(u.e)}this.setLayout(i.basicGridLayout,{axes:this.staticAxisCount,isNewSet:0==o})}},
r.prototype.resetAllItemConstraints=function(){for(var t=this.boxCount,s=0;s<t;s++){var i=this.boxes[s],e=this.getConstrainedItemDims(i);i.setDimensions(e[this.si],e[this.si_])}},r.prototype.getConstrainedItemDims=function(t){var s=this.itemConstraint,i=s/t.model[this.saDim_];return[t.model[this.saDim]*i,s]},r.prototype.setLayout=function(t,s){var i=this.lastLayoutOptions&&this.lastLayoutOptions.options||{};if((t||this.lastLayoutOptions&&this.lastLayoutOptions.layout)&&(s||this.lastLayoutOptions&&this.lastLayoutOptions.options)){t||(t=this.lastLayoutOptions.layout),$.extend(i,s),this.lastLayoutOptions={layout:t,options:i},this.layout_cache&&delete this.layout_cache,this.hasShortGridDimsSi=!1,this.hasMediumGridDimsSi=!1,this.boxAxisLengths=[0,0];for(var e,a=this.boxCount,r=0;r<a;r++)e=this.getBoxFromIndex(r),e.index=r,t.call(this,e,i),this.boxAxisLengths[0]=Math.max(this.boxAxisLengths[0],e.tailPointPos[0]),this.boxAxisLengths[1]=Math.max(this.boxAxisLengths[1],e.tailPointPos[1]);if(!e){this.hasData=!1;var n="Tremula: Warning. No data found on layout operation.";return console&&console.error&&console.info(n),n}this.hasData=!0,this.contentDims[this.si]=this.boxAxisLengths[this.si],this.contentDims[this.si_]=this.boxAxisLengths[this.si_],this.scrollMargin=[this.si_*this.scrollMarginDefault,this.si*this.scrollMarginDefault],this.firstItemPos=-this.scrollMargin[this.si],this.bounceMargin=this.firstItemPos+this.bounceMarginDefault;var o=-2*parseInt(this.scrollMargin[this.si]),h=this.gridDims[this.si]+o;this.gridDims[this.si]>this.contentDims[this.si]?this.hasShortGridDimsSi=!0:this.contentDims[this.si]<h&&(this.hasMediumGridDimsSi=!0),this.hasShortGridDimsSi&&(this.boxAxisLengths[this.si]=h);var l=this.steppedScrolling?2*this.scrollAxisOffset:this.scrollAxisOffset;this.trailingEdgeScrollPos=-l+Math.min(this.getTrailingEdgeScrollPos()+(this.contentDims[this.si]-this.gridDims[this.si]),this.getTrailingEdgeScrollPos()),this.absTrailingEdgeScrollPos=this.firstItemPos-this.trailingEdgeScrollPos,this.hasMediumGridDimsSi&&(this.boxAxisLengths[this.si]=h),this.currentGridContentDims[this.si]=this.boxAxisLengths[this.si],this.currentGridContentDims[this.si_]=(this.staticAxisCount+1)*(this.itemConstraint+2*this.itemMargins[this.si_]),i.isNewSet&&(this.setAbsScrollPos(1),this.lastLayoutOptions.options.isNewSet=!1),this.oneShotPaint(1)}},r.prototype.doTransition=function(t,s,i,e,a){s=s||{},isNaN(i)&&(i=0),this.layoutXansEasing=e||easeOutElastic,this.layoutXansMs=i,this.layoutIsXing=i>0;var r=this;this.ltTimer=setTimeout(function(){r.layoutIsXing=!1,r.ltTimer=null},i+100),a&&this.setSurfaceMap(a),this.updateConfig(s),this.setLayout(t,s),this.oneShotPaint(1)},r.prototype.getTrailingEdgeScrollPos=function(){return-this.boxAxisLengths[this.si]+this.firstItemPos+this.gridDims[this.si]},r.prototype.assignBoxObjects=function(){function t(t){return t[this.sa]>=u[n]&&t[this.sa]<=this.boxAxisLengths[n]+u[n]}function s(t){return l[n]>=-(u[0]+t.width+2*this.itemMargins[n])&&l[n]<=this.gridDims[n]-u[n]}function i(t){return t>=0?t:Math.abs(this.boxAxisLengths[n]+t)}for(var e=!1,a=this,r=this.getScrollFrame(),n=this.si,o=this.si_,h=[0,0],l=[0,0],u=this.scrollMargin,c=0;c<this.boxCount;c++){var g=this.boxes[c];h[n]=g.headPointPos[n]+r,h[o]=g.headPointPos[o],g.setAbsPos(this.axisOffset[0]+h[0],this.axisOffset[1]+h[1]),l[0]=this.sx?g.x%this.boxAxisLengths[0]:g.x,l[1]=this.sx?g.y:g.y%this.boxAxisLengths[1],l[n]=i.call(this,l[n]);var m=l[n]+u[n]+.5*g.dims[n]+this.itemMargins[n],p=m/this.gridDims[n],d=1-p,f=2*(p<.5?p:d);s.call(this,g)&&(this.isLooping||t.call(this,g))?(g.doOnScreen(!0),g.setWaveforms({tailRamp:p,headRamp:d,triangle:f}),g.paintToSurfaceMap(l[0]+u[0],l[1]+u[1])):(g.doOnScreen(!1),g.setWaveforms({tailRamp:!1,headRamp:!1,triangle:!1})),g.isEasing&&(e=!0)}this.isChildEasing=!!e,null!==this.physicsLoopRAF&&(this.physicsLoopRAF=requestAnimationFrame(function(){a.assignBoxObjects()}))};var n=!1,o=new Date,h=(new Date,0),l=0,u=0;return r.prototype.handleGesture=function(t){switch(t.type){case"mousewheel":case"DOMMouseScroll":case"wheel":e.call(this,t);case"_mw":var s=t,i=.5*s.wheelDeltaY||-s.deltaY||3*-s.detail,r=.5*s.wheelDeltaX||-s.deltaX||3*-s.detail,n=this.scrollPos+this.sx?r:i,o=this.trailingEdgeScrollPos,c=!this.hasMediumGridDimsSi&&n>this.firstItemPos,g=!this.hasMediumGridDimsSi&&n<o;!this.isLooping&&(c||g)&&(this.sx?r=Math.min(.1*r,100):i=Math.min(.1*i,100)),t.gesture=t.gesture||{},t.gesture.deltaX=r,t.gesture.deltaY=i,t.gesture.center=t.gesture.center||{},t.gesture.center.pageX=t.pageX,t.gesture.center.pageY=t.pageY;case"dragup":case"dragdown":case"dragright":case"dragleft":"mouse"==t.pointerType?(t.gesture.preventDefault(),t.gesture.stopPropagation()):this.sx?Math.abs(t.gesture.deltaY/t.gesture.deltaX)<=1&&a(t):Math.abs(t.gesture.deltaX/t.gesture.deltaY)<=1&&a(t),this.isTouching=!0,(0==h||/wheel|scroll/.test(t.type))&&(h=this.scrollPos,u=0);var m=this.sx?t.gesture.deltaX:t.gesture.deltaY,p=this.sx?t.gesture.deltaY:t.gesture.deltaX;Math.abs(m)>Math.abs(p)&&(this.setScrollPos(m-u,!0),u=m,this.oneShotPaint(t)),this.tagLastUserEvent(t);break;case"swipeleft":if(!this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=-t.gesture.velocityX;this.steppedScrolling?this.easeToNextStepItem():this.startEasing(d,t),this.tagLastUserEvent(t);break;case"swiperight":if(!this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=t.gesture.velocityX;this.steppedScrolling?this.easeToPrevStepItem():this.startEasing(d,t),this.tagLastUserEvent(t);break;case"swipeup":if(this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=-t.gesture.velocityY;this.steppedScrolling?this.easeToNextStepItem():this.startEasing(d,t),this.tagLastUserEvent(t);break;case"swipedown":if(this.sx)return;t.gesture.stopDetect(),this.isTouching=!1;var d=t.gesture.velocityY;this.steppedScrolling?this.easeToPrevStepItem():this.startEasing(d,t),this.tagLastUserEvent(t);break;case"touch":h=0,l=0,this.isTouching=!0,this.oneShotPaint(t),this.tagLastUserEvent(t);break;case"release":var f=new Date-this.lastUserEvent.time,y=/touch/.test(this.lastUserEvent.evt.type,"i");if(!this.isEasing&&y&&f<1e3&&this.$e.trigger("tremulaItemSelect",t),this.isTouching=!1,this.steppedScrolling){var x=y&&t.target&&t.target.className&&!/\bgridBox\b/.test(t.target.className);(!y||x)&&this.easeToClosestStepItem()}else this.oneShotPaint();this.tagLastUserEvent(t)}},r}),t.config({baseUrl:"src"}),i("Tremula",["Layouts","Easings","DataAdapters","Projections","Grid"],function(t,s,i,e,a){function r(t){var s=$(t);s.hasClass("loaded")||(s.addClass("loaded"),setTimeout(function(){s.parents(".gridBox").addClass("loaded")},1500))}var n=function(){this.Grid={},this.dataAdapters=i,this.layouts=t,this.easings=s,this.projections=e,this.cache={},this.updateConfig=function(){console&&console.error&&console.error("Tremula is not initalized. Request ignored.")},this.toggleScrollAxis=function(){console&&console.error&&console.error("Tremula is not initalized. Request ignored.")}};return n.prototype.resize=function(t){0!=this.$e[0].offsetWidth&&(this.Grid.setScrollAxis(),this.Grid.setLayout(),this.Grid.oneShotPaint())},n.prototype.appendData=function(t,s){this.Grid.initBoxes(t,s,!0),this.cache.endOfScrollFlag=!1},n.prototype.insertData=function(t,s){this.Grid.initBoxes(t,s,"insert"),this.cache.endOfScrollFlag=!1},n.prototype.refreshData=function(t,s){this.Grid.initBoxes(t,s,!1),this.cache.endOfScrollFlag=!1},n.prototype.tailScroll=function(){var t=this.Grid;t.setLastTouchOrigin(t.gridDims[t.si]/2),t.easeTo(t.getScrollPos()-.5*t.getScrollViewDim(),800)},n.prototype.headScroll=function(){var t=this.Grid;t.setLastTouchOrigin(t.gridDims[t.si]/2),t.easeTo(t.getScrollPos()+.5*t.getScrollViewDim(),800)},n.prototype.setOnChangePub=function(t){this.Grid.onChangePub=t},n.prototype.init=function(t,r,n){var o=this;this.parent=n||null,t&&(this.$e=t||null);var h={onChangePub:null,adapter:i.TremulaItem,isLooping:!1,ignoreUserEvents:!1,surfaceMap:e.streamHorizontal,itemPreloading:!1,itemEasing:!1,itemEasingParams:{touchCurve:s.easeOutCubic,swipeCurve:s.easeOutCubic,transitionCurve:s.easeOutCubic,easeTime:500,springLimit:20},scrollAxis:"x",itemConstraint:null,staticAxisCount:0},l=$.extend({},h,r||{});if(this.Grid=new a(t,l,this),this.updateConfig=this.Grid.updateConfig,this.toggleScrollAxis=this.Grid.toggleScrollAxis,r&&r.data&&this.Grid.initBoxes(r.data,r.adapter),$(window).on("resize",function(t){o.resize(t)}),!l.ignoreUserEvents){var u=new Hammer(t[0],{prevent_default:!1});u.on("dragdown dragup dragleft dragright swipeleft swipeup swipedown swiperight touch release tap",function(t){o.Grid.handleGesture(t)}),u.on("mousewheel wheel DOMMouseScroll",function(t){o.Grid.handleGesture(t)});var c,g,m={time:null,evt:null};this.$e.bind("touchmove",function(t){o.Grid.sx?m.time?(c=t.originalEvent.pageX-m.evt.pageX,g=t.originalEvent.pageY-m.evt.pageY,0!=c&&Math.abs(g/c)<=1&&t.preventDefault()):t.preventDefault():m.time?(c=t.originalEvent.pageX-m.evt.pageX,0!=(g=t.originalEvent.pageY-m.evt.pageY)&&Math.abs(c/g)<=1&&t.preventDefault()):t.preventDefault(),m={time:new Date,evt:t.originalEvent}})}},window.imageLoaded||(window.imageLoaded=r),window.Tremula=n,n}),s(["Tremula"])}();