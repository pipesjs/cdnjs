!function(){"use strict";var a={root:document.documentElement,getUA:navigator.userAgent.toLowerCase(),getPF:navigator.platform.toLowerCase(),browserInApp:!1,breakpoints:{xs:480,sm:768,md:992,lg:1200},docSize:{width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},scrSize:{width:function(){return screen.width},height:function(){return screen.height}},classes:"",getNameByAgent:function(){var a=this.getUA,b=a.match(/msie|iemobile|line|fbav|twitter|micromessenger|mms|ucbrowser|yabrowser|yolobrowser|firefox|fxios|puffin|mxbrowser|mxios|alohabrowser|kakaotalk|coast|beetalk|vivaldi|cordova|phonegap|react|nodejs|webview/i);return this.browserInApp=/line|fbav|twitter|micromessenger|kakaotalk|beetalk|cordova|phonegap|react|nodejs|webview/.test(a),b?b[0]:/(?=.*windows)(?=.*rv:)/.test(a)?"rv":/opr|opera|opios/.test(a)?a.match(/opr|opios/g)?a.match(/opr|opios/i)[0]:"version":!!/applewebkit/.test(a)&&(/edge/.test(a)?"edge":/chrome/.test(a)?"chrome":/crios/.test(a)?"crios":/version/.test(a)?"version":"safari")},getBrowserVersionsByName:function(){var d,a=this,b=a.getUA,c=a.cache.getNameByAgent||a.getNameByAgent();if(c){var e=c.length,f=b.indexOf(c)+e+1,g=20,h=b.substr(f,g),i=/[0-9\.]*/g;return d=h.match(i)[0],{int:parseInt(d,10),full:d}}},getBrowserWithCoreNames:function(){var a=this,b=a.getUA,c=a.cache.getNameByAgent||a.getNameByAgent(),d=a.cache.getBrowserVersionsByName||a.getBrowserVersionsByName(),e=" webkit",f=c?c:"unknown",g=!!c&&c.match(/line|fbav|twitter|kakaotalk|micromessenger|beetalk|alohabrowser|yabrowser|yolobrowser|mxbrowser|mxios|fxios/i);if(d=d.int,g)f=g[0],"fbav"===f?f="facebook":"twitter"===f?d=null:"alohabrowser"===f?f="aloha":"yabrowser"===f?f="yandex":"yolobrowser"===f?f="yolo":"mxbrowser"===f||"mxios"===f?f="maxthon":"fxios"===f&&(e=" firefox webkit");else if(/firefox/.test(c))e=/gecko/.test(b)?" gecko":" webkit";else if(/opr|opera|opios|coast|mms/.test(c))f="coast"===c?"coast opera":"mms"===c?"opera opera-neon":"opera",e=/applewebkit/.test(b)?" webkit":" presto";else if(/version|chrome|crios|safari/.test(c))f="safari","edge"===c?f="edge":"chrome"===c||"crios"===c?f="chrome":"version"===c&&/android/.test(b)&&(f="adrBuiltin");else if(/msie|rv|iemobile/.test(c))e="",f="ie";else{var h=c.match(/cordova|phonegap|react|nodejs|webview/i);h?(e=" webkit",b.indexOf("-android")!==-1?f=h+"-adr "+h:b.indexOf("-ios")!==-1&&(f=h+"-ios "+h),d=null):/iemobile|msie/.test(b)?e=" ie":/applewebkit/.test(b)&&(e=/chrome|crios/.test(b)?" chrome webkit":/version/.test(b)&&/android/.test(b)?" adrBuiltin webkit":" safari webkit")}!/chrome/.test(b)||/chrome/.test(f)||/chrome/.test(e)||(f+=" chrome");var i=f+e;if("ie"===f&&d){var j=f.split(" "),k=j[0]+""+d,l=i.split(" ");if(i=d>1?l[0]+" "+k:l[0],l.length>1)for(var m=1;m<l.length;m++)i+=" "+l[m];for(var n=11,o=+d,p=o;p<n;p++)i+=" "+f+(p+1)+"lt"}return a.classes=i,i},getPlatform:function(){var a=this,b=a.getUA,c=a.getPF,d=c.match(/ipad|ipod|android|nintendo|blackberry|freebsd|openbsd/i);return d?d[0]:/os\/2|pocket pc|win16|win32|win64|wince/.test(c)?/windows ce|windows mobile|windows phone|zunewp|xblwp|iemobile|windows nt 6.[23]; arm/.test(b)?"wp":"windows":/arm/.test(c)?/windows phone|iemobile/.test(b)?"wp":/android/.test(b)?"android":"arm":/linux/.test(c)?/cros/.test(b)?"chromeos":/(?=.*windows)(?=.*mxbrowser)|android/.test(b)?"android":/iphone|pike/.test(b)?"iphone":/ipad/.test(b)?"ipad":/ipod/.test(b)?"ipod":"linux":/iphone|pike/.test(c)?"iphone":/mac|macintel|macintosh|macppc|mac68k/.test(c)?"mac":/x11|hp\-ux/.test(c)?"unix":/sunos/.test(c)?"solaris":/playstation|psp/.test(c)?"playstation":/palmos|webos/.test(c)?"palm":/s60|symbian|\\bseries\\b/.test(c)?"symbian":"unknown"},getOSName:function(){var a=this,b=a.getUA,c=a.cache.getPlatform||a.getPlatform();return/iphone|ipad|ipod/.test(c)?"ios":"windows"===c&&/windows nt/.test(b)?"windows nt":"linux"===c?/centos/.test(b)?"centos":/ubuntu/.test(b)?"ubuntu":c:c},getOSVersion:function(){var a=this,b=a.getUA,c=a.cache.getPlatform||a.getPlatform(),d=a.cache.getOSName||a.getOSName(),e=/mac|ios/.test(c)?/[0-9_]*/g:/[0-9\.]*/g;"wp"===d?d=/windows ce.*(ppc|smartphone|mobile|[0-9]{3}x[0-9]{3})|window mobile|windows phone [0-9.]+|wce;/.test(b)?"windows mobile":"windows phone":"ipad"===c||/ipad/.test(b)?d="cpu os":"iphone"===c||/iphone/.test(b)?d="iphone os":"ipod"===c||/ipod/.test(b)?d="ipod os":"mac"===d?d="mac os x":"chromeos"==d&&(d="cros i686");var f=d.length,g=b.indexOf(d)+f+1,h=10,i=b.substr(g,h);return i=i.match(e)[0],i.replace(/[_]+/g,".")},getBrowserNames:function(){var a=this,b=a.root,c=a.cache.getBrowserWithCoreNames||a.getBrowserWithCoreNames(),d=b.className,e=c?c.split(" ")[0]:"unknown";return d.length&&(c=d.indexOf(e)===-1?d+" "+c:d),{name:e,classes:c}},getBrowserFullVersion:function(){var a=this,b=a.cache.getBrowserVersionsByName||a.getBrowserVersionsByName();return b.full?b.full:"unknown"},getDevices:function(){var d,a=this,b=a.getUA,c=a.cache.getPlatform||a.getPlatform();return d=b.match(/mobile|tablet|phone|android/)&&(window.orientation,!0)?"mobile":"android"===c?"mobile":"desktop",a.classes=d+" "+a.classes,d},getOrientation:function(){var a=this,b=a.cache.docWidth||a.docSize.width(),c=a.cache.docHeight||a.docSize.height(),d=a.cache.getDevices||a.getDevices();return d=d.type,"desktop"!==d&&void 0!==window.orientation?90==Math.abs(window.orientation)?"landscape":"portrait":b>=c?"landscape":"portrait"},isInApp:function(){var a=this,b=a.getUA;return!!/line|fbav|kakaotalk|micromessenger|twitter|beetalk/.test(b)&&a.getOSName()},isWebView:function(){var a=this.getUA,b=!!/cordova|phonegap|react|nodejs|webview/.test(a);return b&&(a.indexOf("ios")!=-1?b="ios":a.indexOf("android")!=-1&&(b="android")),b},getLayoutMode:function(){var a=this,b=a.breakpoints,c=a.cache.srcWidth||a.scrSize.width(),d=a.cache.getDevices||a.getDevices(),e=a.cache.isWebView||a.isWebView(),f="mobile";return("desktop"===d||"tablet"===d&&c>=b.md)&&!e&&(f="desktop"),f},cookies:{isEnaled:function(){var a=navigator.cookieEnabled;return a||(document.cookie="testcookie",a=document.cookie.indexOf("testcookie")!==-1),a},getDomainByAttr:function(){var a=document.currentScript?document.currentScript:document.querySelector('script[src*="urbrowser"]'),b=window.location.hostname,c=function(){var b=a.src,c="domain".replace(/[\[\]]/g,"\\$&"),d=new RegExp("[?&]"+c+"(=([^&#]*)|&|#|$)"),e=d.exec(b);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null},d=!!c()&&c();return d=d?d:a.getAttribute("data-domain"),d&&b.indexOf(d)!==-1?d:b},get:function(){for(var a="urbrowser=",b=document.cookie.split(";"),c=[],d=0;d<b.length;d++){for(var e=b[d];" "===e.charAt(0);)e=e.substring(1);0===e.indexOf(a)&&c.push(e.substring(a.length,e.length))}return c.length>0&&c},set:function(b,c){var d=this;if(d.isEnaled()){d.remove();var e=b.length>0,f="urbrowser="+b,g=e?365:-1,h=location.href,i=d.getDomainByAttr();g=new Date((new Date).getTime()+1e3*g*60*60*24+288e5),f+="; expires="+g.toUTCString()+"; domain="+i+"; path=/",document.cookie=f,!c||h.indexOf("file:///")!=-1||a.browserInApp&&d.get()||location.reload()}else console.log("Please open browser cookie.")},remove:function(){function d(a,d){document.cookie="urbrowser=; expires="+c;for(var e=0;e<a.length;e++){var f="urbrowser=; expires="+c+"; path="+a[e]+"; domain="+b;document.cookie=f;for(var g=0;g<d.length;g++){var h="urbrowser=; expires="+c+"; path="+a[e]+"; domain="+d[g];document.cookie=h}}}function e(){var a=location.pathname.replace(/\/$/,""),b=a.split("/"),c=[],e=window.location.hostname.split("."),f=[],g="";e.reverse();for(var j,h=0,i=b.length;h<i;h++)j=b.slice(0,h+1).join("/"),c.push(j),c.push(j+"/");for(var k=0;k<e.length;k++)g=0===g.length?e[k]:e[k]+"."+g,f.push(g),f.push("."+g);d(c,f)}var a=this,b=a.getDomainByAttr(),c=new Date(0).toUTCString();e()},rebuild:function(a){this.remove(),a=JSON.stringify(a),this.set(a,!0)}},storage:{get:function(a){a=a||"string";var b=localStorage.getItem("urbrowser");return"json"===a?JSON.parse(b):b},set:function(b,c){localStorage.removeItem("urbrowser"),b=b||"",b?(b=JSON.stringify(b),localStorage.setItem("urbrowser",b),a.cookies.set(b,c)):(localStorage.removeItem("urbrowser"),a.cookies.remove())},reset:function(b){localStorage.removeItem("urbrowser"),a.cookies.remove(),b=JSON.stringify(b),localStorage.setItem("urbrowser",b),a.cookies.set(b,!0)}},cache:{}},b={project:{name:"urBrowser",version:"3.170128",author:"Kei Cheng",github:"https://github.com/keicheng/urbrowser",website:"http://urbrowser.kule.tw",facebook:"https://www.facebook.com/kule.tw",cdnjs:"https://cdnjs.com/libraries/kule.lazy",license:"MIT License"},init:function(){var b=this,c=a,d=c.cache;return d.project=b.project.name,d.version=b.project.version,d.author=b.project.author,d.getNameByAgent=c.getNameByAgent(),d.getPlatform=c.getPlatform(),d.getBrowserWithCoreNames=c.getBrowserWithCoreNames(),d.getOSName=c.getOSName(),d.getBrowserNames=c.getBrowserNames(),d.getDevices=c.getDevices(),d.getOrientation=c.getOrientation(),d.isInApp=c.isInApp(),d.isWebView=c.isWebView(),d.getLayoutMode=c.getLayoutMode(),d.classes=c.classes,d},buildBase:function(b){var c=this,d=a,e=d.root;b=b||c.init(),e.id=b.getPlatform,e.className=b.classes,e.setAttribute("data-browser-name",b.getBrowserNames.name),e.setAttribute("data-os-name",b.getOSName),e.setAttribute("data-device",b.getDevices),e.setAttribute("data-layout-mode",b.getLayoutMode),e.setAttribute("data-inapp",b.isInApp),e.setAttribute("data-webview",b.isWebView),e.setAttribute("data-ub-version",b.version)},build:function(b,c){var d=this;b=b||d.init(),c=c||!0,d.buildBase(b),a.storage.set(b,c)},rebuild:function(){var b=this,c=b.init();b.buildBase(c),a.storage.reset(c,!0)},update:function(){var b=this,c=a,d=c.storage.get("josn"),e=b.init(),f=!1;d.getBrowserWithCoreNames&&d.getBrowserWithCoreNames===e.getBrowserWithCoreNames&&d.getLayoutMode&&d.getLayoutMode===e.getLayoutMode&&d.version&&d.version===e.version||(f=!0),c.cache=e,b.build(e,f)},diff:function(b){var c=this,d=a,e=d.storage.get(),f=b||d.cookies.get()[0],g=JSON.stringify(c.init()),h=e!=g||f!=g;return h},resizing:function(b){var c=this,d=a,e=d.root,f=c.init(),g="mobile"===f.getDevices.type&&"tablet"===f.getDevices.device;b=b||!1,!b&&g&&e.setAttribute("data-layout-mode",f.getLayoutMode),d.storage.set(f,b)},run:function(){var c,b=this,d=500;if("undefined"==typeof window.addEventListener||"undefined"==typeof JSON||"undefined"==typeof localStorage)b.buildBase();else{var h,e=a,f=e.storage.get("json"),g=e.cookies.get();if(f){g.length>1&&(e.cookies.remove(),g=e.cookies.get()[0]);var i=b.diff(g);i?b.update():b.buildBase(f)}else b.build();var j=e.cache;h="mobile"===j.getDevices.type&&"tablet"===j.getDevices.device,h?window.addEventListener("orientationchange",function(){b.resizing(!0)},!1):window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(function(){b.resizing(!1)},d)},!1)}}};b.run()}(window);