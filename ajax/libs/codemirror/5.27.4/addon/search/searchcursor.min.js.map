{"version":3,"sources":["searchcursor.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","regexpFlags","regexp","flags","ignoreCase","global","multiline","ensureGlobal","RegExp","source","maybeMultiline","test","searchRegexpForward","doc","start","line","ch","last","lastLine","lastIndex","string","getLine","match","exec","from","Pos","index","to","length","searchRegexpForwardMultiline","chunk","i","curLine","before","slice","split","inside","startLine","startCh","lastMatchIn","cutOff","newMatch","searchRegexpBackward","first","firstLine","searchRegexpBackwardMultiline","adjustPos","orig","folded","pos","foldFunc","pos1","Math","min","len1","searchStringForward","query","caseFold","fold","doFold","noFold","lines","search","found","indexOf","cutFrom","end","endString","searchStringBackward","lastIndexOf","top","topString","SearchCursor","options","this","atOccurrence","clipPos","matches","reverse","String","prototype","normalize","str","toLowerCase","findNext","find","findPrevious","result","cmpPos","replace","newText","origin","splitLines","replaceRange","defineExtension","defineDocExtension","ranges","cur","getSearchCursor","getCursor","push","anchor","head","setSelections"],"mappings":"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"}