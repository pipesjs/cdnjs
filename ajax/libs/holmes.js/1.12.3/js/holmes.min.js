!function(o,t){"use strict";"function"==typeof define&&define.amd?define([],function(){return o.holmes=t(document)}):"object"==typeof exports?module.exports=t(document):o.holmes=t(document)}(this,function(o){"use strict";function t(e){function p(){var e=!1;if(!(t.prototype.options.minCharacters&&t.prototype.options.minCharacters>t.prototype.input.value.length&&0!==t.prototype.input.value.length)){t.prototype.searchString,t.prototype.options.contenteditable?t.prototype.searchString=t.prototype.input.textContent.toLowerCase():t.prototype.searchString=t.prototype.input.value.toLowerCase(),t.prototype.options.dynamic&&(t.prototype.elements=o.querySelectorAll(t.prototype.options.find),t.prototype.elementsLength=t.prototype.elements.length);var p;for(p=0;p<t.prototype.elementsLength;p++)-1===t.prototype.elements[p].textContent.toLowerCase().indexOf(t.prototype.searchString)?(t.prototype.options.class.visible&&t.prototype.elements[p].classList.remove(t.prototype.options.class.visible),t.prototype.elements[p].classList.contains(t.prototype.options.class.hidden)||(t.prototype.elements[p].classList.add(t.prototype.options.class.hidden),t.prototype.hidden++,"function"==typeof t.prototype.options.onHidden&&t.prototype.options.onHidden(t.prototype.elements[p]))):(t.prototype.options.class.visible&&t.prototype.elements[p].classList.add(t.prototype.options.class.visible),t.prototype.elements[p].classList.contains(t.prototype.options.class.hidden)&&(t.prototype.elements[p].classList.remove(t.prototype.options.class.hidden),t.prototype.hidden--,n&&"function"==typeof t.prototype.options.onFound&&t.prototype.options.onFound(placeholder),"function"==typeof t.prototype.options.onVisible&&t.prototype.options.onVisible(t.prototype.elements[p]),n=!1),e=!0);e||n?n||t.prototype.options.placeholder&&t.prototype.placeholder.classList.add(t.prototype.options.class.hidden):(n=!0,t.prototype.options.placeholder&&t.prototype.placeholder.classList.remove(t.prototype.options.class.hidden),"function"==typeof t.prototype.options.onEmpty&&t.prototype.options.onEmpty(t.prototype.placeholder))}}var n=!1;if("object"!=typeof e)throw new Error('The options need to be given inside an object like this:\nholmes({\n\tfind:".result",\n\tdynamic:false\n});\n see also https://haroen.me/holmes/doc/module-holmes.html');if(t.prototype.options=e,void 0===t.prototype.options.find)throw new Error('A find argument is needed. That should be a querySelectorAll for each of the items you want to match individually. You should have something like: \nholmes({\n\tfind:".result"\n});\nsee also https://haroen.me/holmes/doc/module-holmes.html');t.prototype.start=function(){if(void 0===t.prototype.options.input&&(t.prototype.options.input="input[type=search]"),void 0===t.prototype.options.placeholder&&(t.prototype.options.placeholder=!1),void 0===t.prototype.options.class&&(t.prototype.options.class={}),void 0===t.prototype.options.class.visible&&(t.prototype.options.class.visible=!1),void 0===t.prototype.options.class.hidden&&(t.prototype.options.class.hidden="hidden"),void 0===t.prototype.options.dynamic&&(t.prototype.options.dynamic=!1),void 0===t.prototype.options.contenteditable&&(t.prototype.options.contenteditable=!1),void 0===t.prototype.options.minCharacters&&(t.prototype.options.minCharacters=0),t.prototype.input=o.querySelector(t.prototype.options.input),t.prototype.elements=o.querySelectorAll(t.prototype.options.find),t.prototype.elementsLength=t.prototype.elements.length,t.prototype.hidden=0,t.prototype.options.placeholder&&(t.prototype.placeholder=o.createElement("div"),t.prototype.placeholder.id="holmes-placeholder",t.prototype.placeholder.classList.add(t.prototype.options.class.hidden),t.prototype.placeholder.innerHTML=t.prototype.options.placeholder,t.prototype.elements[0].parentNode.appendChild(t.prototype.placeholder)),t.prototype.options.class.visible){var e;for(e=0;e<t.prototype.elementsLength;e++)t.prototype.elements[e].classList.add(t.prototype.options.class.visible)}t.prototype.input.addEventListener("input",p)},void 0===t.prototype.options.instant&&(t.prototype.options.instant=!1),t.prototype.options.instant?t.prototype.start():window.addEventListener("DOMContentLoaded",t.prototype.start),t.prototype.stop=function(){return new Promise(function(o,e){t.prototype.input.removeEventListener("input",p),t.prototype.placeholder.parentNode.removeChild(t.prototype.placeholder),o()})},t.prototype.clear=function(){if(t.prototype.options.contenteditable?t.prototype.input.textContent="":t.prototype.input.value="",t.prototype.options.class.visible)for(var o=0;o<t.prototype.elementsLength;o++)t.prototype.elements[o].classList.remove(t.prototype.options.class.hidden),t.prototype.elements[o].classList.add(t.prototype.options.class.visible);else for(var o=0;o<t.prototype.elementsLength;o++)t.prototype.elements[o].classList.remove(t.prototype.options.class.hidden);t.prototype.options.placeholder&&(t.prototype.placeholder.classList.add(t.prototype.options.class.hidden),t.prototype.options.class.visible&&t.prototype.placeholder.classList.remove(t.prototype.options.class.visible)),t.prototype.hidden=0},t.prototype.count=function(){return{all:t.prototype.elementsLength,hidden:t.prototype.hidden,visible:t.prototype.elementsLength-t.prototype.hidden}}}return t});